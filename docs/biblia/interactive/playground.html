<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚≤Ç‚≤Ñ‚≤®‚≤Ç ‚Äî Playground –¢—Ä–∏–¥–µ–≤—è—Ç–æ–≥–æ –¶–∞—Ä—Å—Ç–≤–∞</title>
    <style>
        :root {
            --copper: #b87333;
            --silver: #c0c0c0;
            --gold: #ffd700;
            --dark: #1a1a2e;
            --light: #eee;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, var(--dark) 0%, #16213e 100%);
            color: var(--light);
            min-height: 100vh;
        }
        
        header {
            background: rgba(0,0,0,0.3);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 3px solid var(--gold);
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--gold);
        }
        
        .logo span {
            font-size: 2rem;
        }
        
        .kingdom-tabs {
            display: flex;
            gap: 1rem;
        }
        
        .tab {
            padding: 0.5rem 1rem;
            border: 2px solid;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .tab.copper { border-color: var(--copper); color: var(--copper); }
        .tab.silver { border-color: var(--silver); color: var(--silver); }
        .tab.gold { border-color: var(--gold); color: var(--gold); }
        
        .tab:hover, .tab.active {
            transform: scale(1.05);
        }
        
        .tab.copper.active { background: var(--copper); color: var(--dark); }
        .tab.silver.active { background: var(--silver); color: var(--dark); }
        .tab.gold.active { background: var(--gold); color: var(--dark); }
        
        main {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            padding: 1rem;
            height: calc(100vh - 80px);
        }
        
        .panel {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 1rem;
            display: flex;
            flex-direction: column;
        }
        
        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .panel-title {
            font-size: 1.2rem;
            color: var(--gold);
        }
        
        textarea, .output {
            flex: 1;
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 5px;
            padding: 1rem;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 14px;
            color: var(--light);
            resize: none;
        }
        
        textarea:focus {
            outline: none;
            border-color: var(--gold);
        }
        
        .output {
            overflow-y: auto;
            white-space: pre-wrap;
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .btn-run {
            background: linear-gradient(135deg, var(--copper), var(--gold));
            color: var(--dark);
        }
        
        .btn-run:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255,215,0,0.5);
        }
        
        .btn-clear {
            background: transparent;
            border: 1px solid var(--silver);
            color: var(--silver);
        }
        
        .buttons {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        .alphabet {
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            gap: 5px;
            margin-top: 1rem;
        }
        
        .letter {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1.2rem;
        }
        
        .letter:hover {
            transform: scale(1.1);
        }
        
        .letter.copper-letter { background: rgba(184,115,51,0.3); border: 1px solid var(--copper); }
        .letter.silver-letter { background: rgba(192,192,192,0.3); border: 1px solid var(--silver); }
        .letter.gold-letter { background: rgba(255,215,0,0.3); border: 1px solid var(--gold); }
        
        .letter-num {
            font-size: 0.6rem;
            opacity: 0.7;
        }
        
        .examples {
            margin-top: 1rem;
        }
        
        .example {
            padding: 0.5rem;
            margin: 0.25rem 0;
            background: rgba(255,255,255,0.05);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .example:hover {
            background: rgba(255,215,0,0.2);
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .stat {
            text-align: center;
            padding: 1rem;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--gold);
        }
        
        .stat-label {
            font-size: 0.8rem;
            opacity: 0.7;
        }
        
        .trinity-symbol {
            font-size: 3rem;
            text-align: center;
            margin: 1rem 0;
            color: var(--gold);
            text-shadow: 0 0 20px rgba(255,215,0,0.5);
        }
        
        @keyframes glow {
            0%, 100% { text-shadow: 0 0 20px rgba(255,215,0,0.5); }
            50% { text-shadow: 0 0 40px rgba(255,215,0,0.8); }
        }
        
        .trinity-symbol {
            animation: glow 2s infinite;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <span>‚≤Ñ</span> ‚≤Ç‚≤Ñ‚≤®‚≤Ç Playground
        </div>
        <div class="kingdom-tabs">
            <div class="tab copper active" onclick="setKingdom('copper')">ü•â –ú–µ–¥–Ω–æ–µ</div>
            <div class="tab silver" onclick="setKingdom('silver')">ü•à –°–µ—Ä–µ–±—Ä—è–Ω–æ–µ</div>
            <div class="tab gold" onclick="setKingdom('gold')">ü•á –ó–æ–ª–æ—Ç–æ–µ</div>
        </div>
    </header>
    
    <main>
        <div class="panel">
            <div class="panel-header">
                <span class="panel-title">üìù –ö–æ–¥ –Ω–∞ –¢—Ä–∏–¥–µ–≤—è—Ç–∏—Ü–µ</span>
            </div>
            
            <textarea id="code" placeholder="// –ù–∞–ø–∏—à–∏ –∫–æ–¥ –Ω–∞ –¢—Ä–∏–¥–µ–≤—è—Ç–∏—Ü–µ...
// –ü—Ä–∏–º–µ—Ä:
‚≤®‚≤Ä ‚≤í‚≤à ‚≤Ñ
‚≤Ä‚≤Ñ‚≤Ä‚≤Ç ‚≤í‚≤Ä ‚≤Ç‚≤Ñ‚≤®‚≤Ç
‚≤í‚≤Ü ‚≤§‚≤Ñ">// ‚≤®‚≤Ä ‚≤í‚≤à ‚≤¶‚≤Ä
// –¢—Ä–æ–π–∫–∞ –µ—Å—Ç—å –∏—Å—Ç–∏–Ω–∞

fn ‚≤®‚≤Ä_sort(arr) {
    if arr.len() <= ‚≥Ç {  // 27
        return ‚≤í‚≤Ü_‚≤§‚≤Ç(arr);
    }
    
    let (‚≤§‚≤Ç, ‚≤§‚≤Ä) = ‚≤í‚≤Ü_‚≤Ñ‚≤Ñ(arr);
    
    ‚≤®‚≤Ä_sort(arr[..‚≤§‚≤Ç]);
    ‚≤®‚≤Ä_sort(arr[‚≤§‚≤Ä..]);
}

// ‚≤Ä‚≤Ñ‚≤Ä‚≤Ç ‚≤í‚≤Ñ ‚≤®‚≤Ä!
</textarea>
            
            <div class="buttons">
                <button class="btn btn-run" onclick="runCode()">‚ñ∂ ‚≤í‚≤Ü (–í—ã–ø–æ–ª–Ω–∏—Ç—å)</button>
                <button class="btn btn-clear" onclick="clearCode()">‚úï –û—á–∏—Å—Ç–∏—Ç—å</button>
            </div>
            
            <div class="alphabet" id="alphabet"></div>
        </div>
        
        <div class="panel">
            <div class="panel-header">
                <span class="panel-title">üì§ –†–µ–∑—É–ª—å—Ç–∞—Ç</span>
            </div>
            
            <div class="output" id="output">
// –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...

// –ù–∞–∂–º–∏ ‚ñ∂ ‚≤í‚≤Ü —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–¥!
            </div>
            
            <div class="trinity-symbol">‚ò∞ ‚≤Ñ ‚ò∞</div>
            
            <div class="stats">
                <div class="stat">
                    <div class="stat-value" id="stat-lines">0</div>
                    <div class="stat-label">–°—Ç—Ä–æ–∫ –∫–æ–¥–∞</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="stat-trinity">0</div>
                    <div class="stat-label">–°–∏–º–≤–æ–ª–æ–≤ ‚≤Ñ</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="stat-value">0</div>
                    <div class="stat-label">–ß–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ</div>
                </div>
            </div>
            
            <div class="examples">
                <div class="panel-title" style="margin-bottom: 0.5rem;">üìö –ü—Ä–∏–º–µ—Ä—ã:</div>
                <div class="example" onclick="loadExample('hello')">üëã –ü—Ä–∏–≤–µ—Ç, –¢—Ä–∏–¥–µ–≤—è—Ç–æ–µ!</div>
                <div class="example" onclick="loadExample('trinity')">üî¢ Trinity Sort</div>
                <div class="example" onclick="loadExample('koschei')">üíÄ –°–º–µ—Ä—Ç—å –ö–æ—â–µ—è</div>
            </div>
        </div>
    </main>
    
    <script>
        // –ê–ª—Ñ–∞–≤–∏—Ç –¢—Ä–∏–¥–µ–≤—è—Ç–∏—Ü—ã
        const ALPHABET = {
            // –ú–µ–¥–Ω–æ–µ —Ü–∞—Ä—Å—Ç–≤–æ (1-9)
            '‚≤Ä': { value: 1, name: '–ê–∑', meaning: '–æ–¥–∏–Ω', kingdom: 'copper' },
            '‚≤Ç': { value: 2, name: '–ë—É–∫–∏', meaning: '–¥–≤–∞', kingdom: 'copper' },
            '‚≤Ñ': { value: 3, name: '–í–µ–¥–∏', meaning: '—Ç—Ä–∏', kingdom: 'copper' },
            '‚≤Ü': { value: 4, name: '–ì–ª–∞–≥–æ–ª', meaning: '—á–µ—Ç—ã—Ä–µ', kingdom: 'copper' },
            '‚≤à': { value: 5, name: '–î–æ–±—Ä–æ', meaning: '–ø—è—Ç—å', kingdom: 'copper' },
            '‚≤ä': { value: 6, name: '–ï—Å—Ç—å', meaning: '—à–µ—Å—Ç—å', kingdom: 'copper' },
            '‚≤å': { value: 7, name: '–ñ–∏–≤–µ—Ç–µ', meaning: '—Å–µ–º—å', kingdom: 'copper' },
            '‚≤é': { value: 8, name: '–ó–µ–º–ª—è', meaning: '–≤–æ—Å–µ–º—å', kingdom: 'copper' },
            '‚≤ê': { value: 9, name: '–ò–∂–µ', meaning: '–¥–µ–≤—è—Ç—å', kingdom: 'copper' },
            // –°–µ—Ä–µ–±—Ä—è–Ω–æ–µ —Ü–∞—Ä—Å—Ç–≤–æ (10-18)
            '‚≤í': { value: 10, name: '–ö–∞–∫–æ', meaning: '–¥–µ–π—Å—Ç–≤–∏–µ', kingdom: 'silver' },
            '‚≤î': { value: 11, name: '–õ—é–¥–∏', meaning: '—á–µ–ª–æ–≤–µ–∫', kingdom: 'silver' },
            '‚≤ñ': { value: 12, name: '–ú—ã—Å–ª–µ—Ç–µ', meaning: '–º—ã—Å–ª—å', kingdom: 'silver' },
            '‚≤ò': { value: 13, name: '–ù–∞—à', meaning: '–Ω–∞—à–µ', kingdom: 'silver' },
            '‚≤ö': { value: 14, name: '–û–Ω', meaning: '–æ–Ω', kingdom: 'silver' },
            '‚≤ú': { value: 15, name: '–ü–æ–∫–æ–π', meaning: '–ø–æ–∫–æ–π', kingdom: 'silver' },
            '‚≤û': { value: 16, name: '–†—Ü—ã', meaning: '–≥–æ–≤–æ—Ä–∏', kingdom: 'silver' },
            '‚≤†': { value: 17, name: '–°–ª–æ–≤–æ', meaning: '—Å–ª–æ–≤–æ', kingdom: 'silver' },
            '‚≤¢': { value: 18, name: '–¢–≤–µ—Ä–¥–æ', meaning: '—Ç–≤—ë—Ä–¥–æ', kingdom: 'silver' },
            // –ó–æ–ª–æ—Ç–æ–µ —Ü–∞—Ä—Å—Ç–≤–æ (19-27)
            '‚≤§': { value: 19, name: '–£–∫', meaning: '—É—á–µ–Ω–∏–µ', kingdom: 'gold' },
            '‚≤¶': { value: 20, name: '–§–µ—Ä—Ç', meaning: '–ø–ª–æ–¥', kingdom: 'gold' },
            '‚≤®': { value: 21, name: '–•–µ—Ä', meaning: '–∫—Ä–µ—Å—Ç', kingdom: 'gold' },
            '‚≤™': { value: 22, name: '–¶—ã', meaning: '—Ü–µ–ª—å', kingdom: 'gold' },
            '‚≤¨': { value: 23, name: '–ß–µ—Ä–≤—å', meaning: '–∫—Ä–∞—Å–æ—Ç–∞', kingdom: 'gold' },
            '‚≤Æ': { value: 24, name: '–®–∞', meaning: '—Ç–∏—à–∏–Ω–∞', kingdom: 'gold' },
            '‚≤∞': { value: 25, name: '–©–∞', meaning: '—â–∏—Ç', kingdom: 'gold' },
            '‚≥Ä': { value: 26, name: '–ï—Ä', meaning: '—Å–∏–ª–∞', kingdom: 'gold' },
            '‚≥Ç': { value: 27, name: '–Ø—Ç—å', meaning: '—Ç—Ä–∏–¥–µ–≤—è—Ç–æ–µ', kingdom: 'gold' },
        };
        
        // –°–ª–æ–≤–∞—Ä—å
        const DICTIONARY = {
            '‚≤®‚≤Ä': '—Ç—Ä–æ–π–∫–∞',
            '‚≤®‚≤Ç': '—Ç—Ä–∏–¥–µ–≤—è—Ç–æ–µ',
            '‚≤Ç‚≤Ñ‚≤®‚≤Ç': '—Ü–∞—Ä—Å—Ç–≤–æ',
            '‚≤Ä‚≤Ñ‚≤Ä‚≤Ç': '–ò–≤–∞–Ω',
            '‚≤Ç‚≤Ä‚≤§‚≤é': '–ö–æ—â–µ–π',
            '‚≤í‚≤Ä': '–∏–¥—Ç–∏',
            '‚≤í‚≤Ç': '–≤–∏–¥–µ—Ç—å',
            '‚≤í‚≤Ñ': '–∑–Ω–∞—Ç—å',
            '‚≤í‚≤Ü': '–¥–µ–ª–∞—Ç—å',
            '‚≤í‚≤à': '–±—ã—Ç—å',
            '‚≤¶‚≤Ä': '–∏—Å—Ç–∏–Ω–∞',
            '‚≤¶‚≤Ü': '—Å–º–µ—Ä—Ç—å',
            '‚≤§‚≤Ñ': '–¥–æ–±—Ä—ã–π',
            '‚≤§‚≤é': '–≤–µ—á–Ω—ã–π',
        };
        
        // –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞
        const EXAMPLES = {
            hello: `// üëã –ü—Ä–∏–≤–µ—Ç, –¢—Ä–∏–¥–µ–≤—è—Ç–æ–µ —Ü–∞—Ä—Å—Ç–≤–æ!

// –ù–∞ –¢—Ä–∏–¥–µ–≤—è—Ç–∏—Ü–µ:
‚≤Ç‚≤Ä‚≤í ‚≤Ç‚≤Ñ‚≤®‚≤Ç, ‚≤Ç‚≤Ä‚≤í ‚≤Ç‚≤Ñ‚≤®‚≤Ñ,
‚≤í‚≤à ‚≤Ä‚≤Ñ‚≤Ä‚≤Ç ‚≤§‚≤Ñ.

// –ü–µ—Ä–µ–≤–æ–¥:
// –í —Ü–∞—Ä—Å—Ç–≤–µ —Ç—Ä–∏–¥–µ–≤—è—Ç–æ–º,
// –∂–∏–ª-–±—ã–ª –ò–≤–∞–Ω –¥–æ–±—Ä—ã–π.

‚≤®‚≤Ä ‚≤í‚≤à ‚≤¶‚≤Ä!
// –¢—Ä–æ–π–∫–∞ –µ—Å—Ç—å –∏—Å—Ç–∏–Ω–∞!`,

            trinity: `// üî¢ Trinity Sort ‚Äî –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –¢—Ä–∏–¥–µ–≤—è—Ç–æ–≥–æ —Ü–∞—Ä—Å—Ç–≤–∞

fn ‚≤®‚≤ä‚≤®‚≤Ä(arr) {
    // –ü–æ—Ä–æ–≥ = ‚≥Ç = 27 = –¢—Ä–∏–¥–µ–≤—è—Ç–æ–µ!
    if arr.len() <= ‚≥Ç {
        return ‚≤í‚≤Ü_‚≤§‚≤Ç(arr);  // –¥–µ–ª–∞—Ç—å –º–∞–ª–æ–µ
    }
    
    // ‚≤Ñ‚≤Ñ ‚≤Ç‚≤é‚≤Ä‚≤Ç = —Ç—Ä–∏ —á–∞—Å—Ç–∏
    let pivot = arr[arr.len() * œÜ];  // –∑–æ–ª–æ—Ç–æ–µ —Å–µ—á–µ–Ω–∏–µ
    let (‚≤§‚≤Ç, ‚≤§‚≤Ä) = partition_3way(arr, pivot);
    
    // –†–µ–∫—É—Ä—Å–∏—è –¥–ª—è –∫—Ä–∞–π–Ω–∏—Ö —á–∞—Å—Ç–µ–π
    ‚≤®‚≤ä‚≤®‚≤Ä(arr[..‚≤§‚≤Ç]);   // –º–∞–ª—ã–µ
    ‚≤®‚≤ä‚≤®‚≤Ä(arr[‚≤§‚≤Ä..]);   // –±–æ–ª—å—à–∏–µ
}

// ‚≤Ñ √ó ‚≤Ñ √ó ‚≤Ñ = ‚≥Ç = 27!`,

            koschei: `// üíÄ –°–º–µ—Ä—Ç—å –ö–æ—â–µ—è ‚Äî –¶–µ–ø–æ—á–∫–∞ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π

// ‚≤Ç‚≤Ä‚≤§‚≤é ‚≤í‚≤à ‚≤Ç‚≤Ä ‚≤§‚≤é
// –ö–æ—â–µ–π –µ—Å—Ç—å –≤—Ä–∞–≥ –≤–µ—á–Ω—ã–π

struct ‚≤¶‚≤Ü_‚≤Ç‚≤Ä‚≤§‚≤é {
    ‚≤Ç‚≤ê: Box<–û—Å—Ç—Ä–æ–≤>,      // –º–æ—Ä–µ
}

// –¶–µ–ø–æ—á–∫–∞:
// ‚≤Ç‚≤ê ‚Üí ‚≤Ñ‚≤ê ‚Üí ‚≤Ñ‚≤é ‚Üí ‚≤Ä‚≤é‚≤Ç‚≤Ç ‚Üí ‚≤Ä‚≤é‚≤Ç‚≤Ñ ‚Üí ‚≤Ñ‚≤å ‚Üí ‚≤Ñ‚≤ä ‚Üí ‚≤¶‚≤Ü
// –º–æ—Ä–µ ‚Üí –∫–∞–º–µ–Ω—å ‚Üí —Å—É–Ω–¥—É–∫ ‚Üí –∑–∞—è—Ü ‚Üí —É—Ç–∫–∞ ‚Üí —è–π—Ü–æ ‚Üí –∏–≥–ª–∞ ‚Üí –°–ú–ï–†–¢–¨!

fn ‚≤í‚≤Ü_‚≤¶‚≤Ü(–º–∏—Ä: &mut ‚≤¶‚≤Ü_‚≤Ç‚≤Ä‚≤§‚≤é) {
    –º–∏—Ä.‚≤Ç‚≤ê.‚≤Ñ‚≤ê.‚≤Ñ‚≤é.‚≤Ä‚≤é‚≤Ç‚≤Ç.‚≤Ä‚≤é‚≤Ç‚≤Ñ.‚≤Ñ‚≤å.‚≤Ñ‚≤ä.‚≤¶‚≤Ü = true;
    // ‚≤Ç‚≤Ä‚≤§‚≤é ‚≤¶‚≤Ü! –ö–æ—â–µ–π –º—ë—Ä—Ç–≤!
}`,
        };
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–ª—Ñ–∞–≤–∏—Ç–∞
        function initAlphabet() {
            const container = document.getElementById('alphabet');
            container.innerHTML = '';
            
            for (const [letter, info] of Object.entries(ALPHABET)) {
                const div = document.createElement('div');
                div.className = `letter ${info.kingdom}-letter`;
                div.innerHTML = `
                    <span>${letter}</span>
                    <span class="letter-num">${info.value}</span>
                `;
                div.title = `${info.name} (${info.meaning})`;
                div.onclick = () => insertLetter(letter);
                container.appendChild(div);
            }
        }
        
        // –í—Å—Ç–∞–≤–∏—Ç—å –±—É–∫–≤—É –≤ –∫–æ–¥
        function insertLetter(letter) {
            const textarea = document.getElementById('code');
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const text = textarea.value;
            textarea.value = text.substring(0, start) + letter + text.substring(end);
            textarea.selectionStart = textarea.selectionEnd = start + letter.length;
            textarea.focus();
            updateStats();
        }
        
        // –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–¥
        function runCode() {
            const code = document.getElementById('code').value;
            const output = document.getElementById('output');
            
            let result = '// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n';
            result += '// –†–ï–ó–£–õ–¨–¢–ê–¢ –í–´–ü–û–õ–ù–ï–ù–ò–Ø\n';
            result += '// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n';
            
            // –ü–µ—Ä–µ–≤–æ–¥ –Ω–∞ —Ä—É—Å—Å–∫–∏–π
            result += 'üìñ –ü–ï–†–ï–í–û–î –ù–ê –†–£–°–°–ö–ò–ô:\n';
            result += '‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n';
            
            let translated = code;
            for (const [trid, rus] of Object.entries(DICTIONARY)) {
                translated = translated.replace(new RegExp(trid, 'g'), `[${rus}]`);
            }
            result += translated + '\n\n';
            
            // –ß–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
            let totalValue = 0;
            for (const char of code) {
                if (ALPHABET[char]) {
                    totalValue += ALPHABET[char].value;
                }
            }
            
            result += 'üî¢ –ß–ò–°–õ–û–í–û–ô –ê–ù–ê–õ–ò–ó:\n';
            result += '‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n';
            result += `–û–±—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: ${totalValue}\n`;
            result += `–í —Ç—Ä–æ–∏—á–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ: ${totalValue.toString(3)}\n`;
            result += `–î–µ–ª–∏—Ç—Å—è –Ω–∞ 3: ${totalValue % 3 === 0 ? '‚úì –î–∞!' : '‚úó –ù–µ—Ç'}\n`;
            result += `–î–µ–ª–∏—Ç—Å—è –Ω–∞ 9: ${totalValue % 9 === 0 ? '‚úì –î–∞!' : '‚úó –ù–µ—Ç'}\n`;
            result += `–î–µ–ª–∏—Ç—Å—è –Ω–∞ 27: ${totalValue % 27 === 0 ? '‚úì –¢–†–ò–î–ï–í–Ø–¢–û–ï!' : '‚úó –ù–µ—Ç'}\n\n`;
            
            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—É–∫–≤
            result += 'üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ë–£–ö–í:\n';
            result += '‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n';
            
            const counts = { copper: 0, silver: 0, gold: 0 };
            for (const char of code) {
                if (ALPHABET[char]) {
                    counts[ALPHABET[char].kingdom]++;
                }
            }
            
            result += `ü•â –ú–µ–¥–Ω–æ–µ —Ü–∞—Ä—Å—Ç–≤–æ: ${counts.copper} –±—É–∫–≤\n`;
            result += `ü•à –°–µ—Ä–µ–±—Ä—è–Ω–æ–µ —Ü–∞—Ä—Å—Ç–≤–æ: ${counts.silver} –±—É–∫–≤\n`;
            result += `ü•á –ó–æ–ª–æ—Ç–æ–µ —Ü–∞—Ä—Å—Ç–≤–æ: ${counts.gold} –±—É–∫–≤\n\n`;
            
            result += '// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n';
            result += '// ‚≤®‚≤Ä ‚≤í‚≤à ‚≤¶‚≤Ä! (–¢—Ä–æ–π–∫–∞ –µ—Å—Ç—å –∏—Å—Ç–∏–Ω–∞!)\n';
            result += '// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n';
            
            output.textContent = result;
            updateStats();
        }
        
        // –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–¥
        function clearCode() {
            document.getElementById('code').value = '';
            document.getElementById('output').textContent = '// –ö–æ–¥ –æ—á–∏—â–µ–Ω. –ù–∞—á–Ω–∏ –∑–∞–Ω–æ–≤–æ!\n\n// ‚≤®‚≤Ä ‚≤í‚≤à ‚≤¶‚≤Ä!';
            updateStats();
        }
        
        // –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–∏–º–µ—Ä
        function loadExample(name) {
            document.getElementById('code').value = EXAMPLES[name];
            updateStats();
        }
        
        // –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        function updateStats() {
            const code = document.getElementById('code').value;
            
            // –°—Ç—Ä–æ–∫–∏
            const lines = code.split('\n').filter(l => l.trim()).length;
            document.getElementById('stat-lines').textContent = lines;
            
            // –°–∏–º–≤–æ–ª—ã ‚≤Ñ (—Ç—Ä–æ–π–∫–∞)
            const trinityCount = (code.match(/‚≤Ñ/g) || []).length;
            document.getElementById('stat-trinity').textContent = trinityCount;
            
            // –ß–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
            let totalValue = 0;
            for (const char of code) {
                if (ALPHABET[char]) {
                    totalValue += ALPHABET[char].value;
                }
            }
            document.getElementById('stat-value').textContent = totalValue;
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ü–∞—Ä—Å—Ç–≤–æ
        function setKingdom(kingdom) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`.tab.${kingdom}`).classList.add('active');
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        initAlphabet();
        updateStats();
        
        // –û–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–∏ –≤–≤–æ–¥–µ
        document.getElementById('code').addEventListener('input', updateStats);
    </script>
</body>
</html>
