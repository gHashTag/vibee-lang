# 🌐 Vibee Browser Agent - Браузерный Помощник

**Версия:** 1.0.0  
**Священная формула:** V = n × 3^k × π^m × φ^p × e^q  
**Золотая идентичность:** φ² + 1/φ² = 3

---

## 📖 Описание

**Vibee Browser Agent** — это интеллектуальный браузерный помощник, который понимает команды на естественном языке и автоматизирует любые браузерные задачи.

### Что умеет агент:

| Категория | Возможности |
|-----------|-------------|
| **Навигация** | Открывать сайты, переходить по ссылкам, работать с историей |
| **Взаимодействие** | Кликать, вводить текст, заполнять формы |
| **Извлечение данных** | Парсить контент, делать скриншоты, сохранять PDF |
| **Автоматизация** | Создавать и выполнять сценарии, мониторить изменения |

---

## 🚀 Быстрый старт

### Примеры команд

```
"Открой google.com"
"Найди информацию о погоде в Москве"
"Заполни форму регистрации"
"Сделай скриншот страницы"
"Скачай файл по ссылке"
"Мониторь цену товара каждые 5 минут"
```

---

## 🔄 Фазы работы агента

Агент работает по 5-фазному циклу:

```
┌─────────────────────────────────────────────────────────────────┐
│                    ЦИКЛ РАБОТЫ АГЕНТА                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  1. ПОНИМАНИЕ ЗАДАЧИ                                            │
│     └─→ Анализ запроса на естественном языке                    │
│         └─→ Определение типа задачи                             │
│             └─→ Уточняющие вопросы (если нужно)                 │
│                                                                 │
│  2. ПЛАНИРОВАНИЕ                                                │
│     └─→ Составление пошагового плана                            │
│         └─→ Оценка времени выполнения                           │
│             └─→ Выявление рисков                                │
│                                                                 │
│  3. ВЫПОЛНЕНИЕ                                                  │
│     └─→ Открытие страниц                                        │
│         └─→ Взаимодействие с элементами                         │
│             └─→ Извлечение данных                               │
│                                                                 │
│  4. ПРОВЕРКА                                                    │
│     └─→ Верификация результатов                                 │
│         └─→ Обработка ошибок                                    │
│             └─→ Повторные попытки                               │
│                                                                 │
│  5. ОТЧЁТ                                                       │
│     └─→ Формирование отчёта                                     │
│         └─→ Рекомендации                                        │
│             └─→ Следующие шаги                                  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 📋 Типы задач

### 1. Навигация

```yaml
Запрос: "Открой сайт example.com"

План:
  1. Запустить браузер
  2. Перейти на example.com
  3. Дождаться загрузки
  4. Подтвердить успех

Результат: Страница загружена
```

### 2. Поиск информации

```yaml
Запрос: "Найди рецепт борща"

План:
  1. Открыть google.com
  2. Найти поле поиска
  3. Ввести "рецепт борща"
  4. Нажать кнопку поиска
  5. Извлечь результаты

Результат: Список рецептов
```

### 3. Заполнение форм

```yaml
Запрос: "Заполни форму регистрации"

План:
  1. Открыть страницу регистрации
  2. Заполнить поле "Имя"
  3. Заполнить поле "Email"
  4. Заполнить поле "Пароль"
  5. Принять условия
  6. Нажать "Зарегистрироваться"

Результат: Регистрация выполнена
```

### 4. Извлечение данных

```yaml
Запрос: "Извлеки таблицу с ценами"

План:
  1. Открыть страницу с таблицей
  2. Найти элемент таблицы
  3. Извлечь заголовки
  4. Извлечь строки данных
  5. Форматировать результат

Результат: Данные в формате JSON/CSV
```

### 5. Скриншоты

```yaml
Запрос: "Сделай скриншот всей страницы"

План:
  1. Открыть страницу
  2. Дождаться полной загрузки
  3. Сделать полный скриншот
  4. Сохранить файл

Результат: screenshot.png
```

### 6. Мониторинг

```yaml
Запрос: "Мониторь цену товара, уведоми когда < 1000"

План:
  1. Открыть страницу товара
  2. Найти элемент с ценой
  3. Запустить проверку каждые 5 минут
  4. При цене < 1000 уведомить

Результат: Мониторинг активен
```

---

## 🛠 Селекторы элементов

Агент поддерживает различные типы селекторов:

| Тип | Пример | Описание |
|-----|--------|----------|
| CSS | `#id`, `.class`, `div` | Стандартные CSS селекторы |
| XPath | `//div[@class='name']` | XPath выражения |
| Текст | `text=Кнопка` | Поиск по тексту |
| Роль | `role=button` | Поиск по ARIA роли |
| Placeholder | `placeholder=Email` | Поиск по placeholder |
| Label | `label=Имя` | Поиск по label |

---

## ⚡ PAS Оптимизации

Агент использует PAS (Predictive Algorithmic Systematics) демоны:

| Демон | Оптимизация | Ускорение |
|-------|-------------|-----------|
| **PRE** | Кэширование DOM запросов | 3x |
| **D&C** | Параллельные вкладки | Линейное |
| **MLS** | ML-генерация селекторов | 2x надёжность |
| **HSH** | Хэш-поиск элементов | O(1) |

---

## 🔧 Конфигурация

```yaml
AgentConfig:
  name: "VibeeAgent"
  language: "ru"
  headless: true
  timeout_sec: 30
  max_retries: 3
  user_agent: "Vibee Browser Agent/1.0"
```

---

## 📊 Обработка ошибок

Агент автоматически обрабатывает ошибки:

| Ошибка | Действие |
|--------|----------|
| Таймаут | Повторная попытка (до 3 раз) |
| Элемент не найден | Альтернативный селектор |
| Капча | Уведомление пользователя |
| Сеть недоступна | Ожидание и повтор |
| Блокировка | Смена User-Agent |

---

## 📝 Примеры использования

### Пример 1: Поиск в Google

```
Пользователь: "Найди информацию о погоде в Москве"

Агент:
  ✓ Понял задачу: поиск информации
  ✓ План: 5 шагов
  ✓ Открываю google.com...
  ✓ Ввожу запрос "погода Москва"...
  ✓ Нажимаю кнопку поиска...
  ✓ Извлекаю результаты...
  
Результат:
  Температура: +5°C
  Облачность: Пасмурно
  Ветер: 3 м/с
  
Рекомендации:
  - Сохранить данные в файл
  - Настроить ежедневный мониторинг
```

### Пример 2: Заполнение формы

```
Пользователь: "Заполни форму на example.com/register"

Агент:
  ✓ Понял задачу: заполнение формы
  
  Уточняющие вопросы:
  1. Какое имя использовать?
  2. Какой email?
  3. Какой пароль?

Пользователь: "Имя: Иван, email: ivan@test.com, пароль: secure123"

Агент:
  ✓ Открываю страницу регистрации...
  ✓ Заполняю поле "Имя": Иван
  ✓ Заполняю поле "Email": ivan@test.com
  ✓ Заполняю поле "Пароль": ********
  ✓ Принимаю условия...
  ✓ Нажимаю "Зарегистрироваться"...
  
Результат: Регистрация успешно завершена!
```

### Пример 3: Мониторинг цены

```
Пользователь: "Мониторь цену iPhone на apple.com, уведоми когда < 80000"

Агент:
  ✓ Понял задачу: мониторинг
  ✓ URL: apple.com/iphone
  ✓ Условие: цена < 80000
  ✓ Интервал: каждые 5 минут
  
  Мониторинг запущен!
  
  [Через 2 часа]
  
  ⚠️ УВЕДОМЛЕНИЕ: Цена изменилась!
  Было: 89990 ₽
  Стало: 79990 ₽
  
  Рекомендации:
  - Перейти на страницу товара
  - Добавить в корзину
```

---

## 🔗 Связанные модули

| Модуль | Описание |
|--------|----------|
| `headless_browser.vibee` | Низкоуровневый API браузера |
| `agent_reasoning.vibee` | Логика рассуждений агента |
| `terminal_agent.vibee` | Терминальный агент |

---

## 📚 Файлы

| Файл | Путь |
|------|------|
| Спецификация | `specs/tri/agents/browser_agent_vibee.vibee` |
| Сгенерированный код | `trinity/output/browser_agent_vibee.zig` |
| Документация | `docs/guides/BROWSER_AGENT_RU.md` |

---

## ✅ Тесты

Все 22 теста проходят успешно:

```
1/22 browser_agent_vibee.test.понять_запрос...OK
2/22 browser_agent_vibee.test.уточнить_детали...OK
3/22 browser_agent_vibee.test.составить_план...OK
...
22/22 browser_agent_vibee.test.phi_constants...OK
All 22 tests passed.
```

---

## φ² + 1/φ² = 3 | PHOENIX = 999
