name: agent_input_file
version: "1.0.0"
language: zig
module: agent_input_file

description: |
  Agent Input File - загрузка файлов
  Сложность: drag-drop, multiple files, progress
  φ² + 1/φ² = 3 | PHOENIX = 999

types:
  FileUploadTarget:
    fields:
      selector: String
      accept_types: List<String>
      multiple: Bool
      max_size_bytes: Option<Int>

  FileInfo:
    fields:
      path: String
      name: String
      size_bytes: Int
      mime_type: String

  UploadResult:
    fields:
      success: Bool
      files_uploaded: Int
      total_size_bytes: Int
      upload_time_ms: Float
      errors: List<String>

  UploadProgress:
    fields:
      file_name: String
      bytes_uploaded: Int
      total_bytes: Int
      percent: Float

behaviors:
  - name: upload_file
    given: FileUploadTarget и FileInfo
    when: Загрузка одного файла
    then: UploadResult

  - name: upload_multiple
    given: FileUploadTarget и список FileInfo
    when: Загрузка нескольких файлов
    then: UploadResult со всеми файлами

  - name: drag_drop_file
    given: FileInfo и целевой элемент
    when: Drag and drop файла
    then: UploadResult

  - name: get_upload_progress
    given: Текущая загрузка
    when: Запрос прогресса
    then: UploadProgress

  - name: cancel_upload
    given: Текущая загрузка
    when: Отмена загрузки
    then: Загрузка отменена

  - name: validate_file
    given: FileInfo и ограничения
    when: Проверка файла перед загрузкой
    then: Bool валиден или ошибки
