name: ab_testing_v12060
version: "12060"
language: zig
module: ab_testing
types:
  ABConfig:
    fields:
      variants: List<String>
      traffic_split: List<Float>
      metrics: List<String>
      duration_hours: Int
  Experiment:
    fields:
      experiment_id: String
      name: String
      variants: List<String>
      status: ExperimentStatus
      start_time: Int
  ExperimentStatus:
    variants:
      - draft
      - running
      - paused
      - completed
      - cancelled
  ExperimentResult:
    fields:
      experiment_id: String
      winner: String
      confidence: Float
      metrics: List<Float>
behaviors:
  - name: create_experiment
    given: Config
    when: Creating
    then: Returns experiment
  - name: start_experiment
    given: Experiment
    when: Starting
    then: Returns running experiment
  - name: assign_variant
    given: User
    when: Assigning
    then: Returns variant
  - name: record_metric
    given: Variant and metric
    when: Recording
    then: Returns record status
  - name: analyze_results
    given: Experiment
    when: Analyzing
    then: Returns results
  - name: stop_experiment
    given: Experiment
    when: Stopping
    then: Returns stopped experiment
  - name: declare_winner
    given: Results
    when: Declaring
    then: Returns winner
  - name: rollout_winner
    given: Winner variant
    when: Rolling out
    then: Returns rollout status
creation_pattern:
  source: ExperimentConfig
  transformer: ABTestEngine
  result: ExperimentResult
