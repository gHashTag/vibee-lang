name: api_reference_v22
version: "22.5.0"
language: zig
module: api_reference_v22

types:
  APIEndpoint:
    fields:
      path: String
      method: String
      description: String
      parameters: List<String>
      response: String

  APIParameter:
    fields:
      name: String
      type: String
      required: Bool
      description: String
      default: Option<String>

  APIResponse:
    fields:
      status_code: Int
      content_type: String
      schema: String
      example: String

  APIModule:
    fields:
      name: String
      description: String
      endpoints: List<String>

  APIReference:
    fields:
      version: String
      modules: List<String>
      base_url: String

behaviors:
  - name: create_reference
    given: Config
    when: Initialize reference
    then: APIReference instance

  - name: add_module
    given: APIReference and APIModule
    when: Add module
    then: Updated reference

  - name: add_endpoint
    given: APIReference and module and APIEndpoint
    when: Add endpoint
    then: Updated reference

  - name: get_module
    given: APIReference and module name
    when: Get module
    then: APIModule

  - name: get_endpoint
    given: APIReference and path
    when: Get endpoint
    then: APIEndpoint

  - name: search_endpoints
    given: APIReference and query
    When: Search endpoints
    then: Matching endpoints

  - name: generate_openapi
    given: APIReference
    When: Generate OpenAPI spec
    then: OpenAPI JSON

  - name: generate_markdown
    given: APIReference
    When: Generate Markdown docs
    then: Markdown string

  - name: validate_reference
    given: APIReference
    When: Validate reference
    then: Validation result

  - name: export_reference
    given: APIReference and format
    When: Export reference
    then: Exported reference

  - name: get_all_endpoints
    given: APIReference
    When: Get all endpoints
    then: Endpoint list
