# cef_render_v2534.vibee - CEF Render Process
# Рендер процесс и V8 интеграция
# φ² + 1/φ² = 3 | PHOENIX = 999

name: cef_render_v2534
version: "2534.0.0"
language: zig
module: cef_render_v2534

types:
  CefRenderProcessHandler:
    fields:
      base: Object
      on_web_kit_initialized: Object
      on_browser_created: Object
      on_browser_destroyed: Object
      on_context_created: Object
      on_context_released: Object
      on_process_message_received: Object

  CefV8Context:
    fields:
      is_valid: Bool
      browser: Object
      frame: Object
      global: Object

  CefV8Value:
    fields:
      is_valid: Bool
      is_undefined: Bool
      is_null: Bool
      is_bool: Bool
      is_int: Bool
      is_double: Bool
      is_string: Bool
      is_object: Bool
      is_array: Bool
      is_function: Bool

  CefV8Handler:
    fields:
      base: Object
      execute: Object

  CefProcessMessage:
    fields:
      name: String
      argument_list: Object
      is_valid: Bool

behaviors:
  - name: on_context_created
    given: CefBrowser, CefFrame, CefV8Context
    when: V8 context created
    then: Register custom JS bindings

  - name: v8_create_function
    given: Function name and CefV8Handler
    when: JS function binding requested
    then: Create V8 function object

  - name: v8_execute_function
    given: CefV8Value function and arguments
    when: JS function called
    then: Execute and return result

  - name: send_process_message
    given: CefBrowser, process ID, CefProcessMessage
    when: IPC needed
    then: Send message to browser process

  - name: on_process_message_received
    given: CefBrowser, source process, CefProcessMessage
    when: IPC message received
    then: Handle message and respond

  - name: v8_eval
    given: CefV8Context and JS code
    when: Eval requested
    then: Execute JS and return result

sacred_constants:
  phi: 1.618033988749895
  phi_squared_plus_inverse_squared: 3
  phoenix: 999
