# Bridge Network API
# Network interception and monitoring
# Request/response handling

name: bridge_network_api
version: "1.0.0"
language: zig
module: bridge_network_api

types:
  NetworkAPI:
    fields:
      api_id: String
      client: String
      page_id: String

  RouteOptions:
    fields:
      url_pattern: String
      handler_type: String

  RouteResult:
    fields:
      route_id: String
      success: Bool

  RequestInfo:
    fields:
      request_id: String
      url: String
      method: String
      headers: Map<String,String>
      post_data: Option<String>

  ResponseInfo:
    fields:
      response_id: String
      status: Int
      headers: Map<String,String>
      body: Option<String>

  MockOptions:
    fields:
      status: Int
      headers: Map<String,String>
      body: String

behaviors:
  - name: route
    given: URL pattern and options
    when: Route setup needed
    then: Returns route result

  - name: unroute
    given: Route ID
    when: Route removal needed
    then: Returns removal result

  - name: fulfill
    given: Route and mock options
    When: Mock response needed
    then: Returns fulfill result

  - name: abort
    given: Route
    when: Request abort needed
    then: Returns abort result

  - name: continue_route
    given: Route and modifications
    when: Modified continue needed
    then: Returns continue result

  - name: wait_for_request
    given: URL pattern and timeout
    when: Request wait needed
    then: Returns request info

  - name: wait_for_response
    given: URL pattern and timeout
    when: Response wait needed
    then: Returns response info

  - name: set_offline
    given: Offline state
    when: Offline mode needed
    then: Returns state change result
