name: simd_string_v566
version: "566.0.0"
language: zig
module: simd_string_v566

types:
  SIMDString:
    fields:
      string_id: String
      data: String
      length: Int
      simd_ready: Bool

  StringSearchResult:
    fields:
      found: Bool
      position: Int
      match_length: Int
      search_time_us: Int

  StringCompareResult:
    fields:
      equal: Bool
      diff_position: Int
      comparison_time_us: Int

  StringMetrics:
    fields:
      searches_performed: Int
      compares_performed: Int
      avg_speedup: Float
      phi_efficiency: Float

  StringConfig:
    fields:
      min_simd_length: Int
      case_insensitive: Bool
      phi_alignment: Bool

behaviors:
  - name: search_simd
    given: Haystack and needle
    when: Search requested
    then: SIMD string search

  - name: compare_simd
    given: Two strings
    when: Comparison requested
    then: SIMD string compare

  - name: find_char_simd
    given: String and char
    when: Char search
    then: SIMD character find

  - name: count_char_simd
    given: String and char
    when: Count requested
    then: SIMD character count

  - name: to_lower_simd
    given: String
    When: Lowercase needed
    then: SIMD case conversion

  - name: to_upper_simd
    given: String
    When: Uppercase needed
    then: SIMD case conversion

  - name: trim_simd
    given: String
    When: Trim needed
    then: SIMD whitespace trim

  - name: replace_simd
    given: String, old, new
    When: Replace needed
    then: SIMD string replace

  - name: get_metrics
    given: String state
    When: Metrics query
    then: Return string metrics
