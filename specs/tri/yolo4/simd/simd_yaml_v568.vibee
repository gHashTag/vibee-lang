name: simd_yaml_v568
version: "568.0.0"
language: zig
module: simd_yaml_v568

types:
  SIMDYaml:
    fields:
      parser_id: String
      input: String
      indent_stack: List<Int>
      simd_width: Int

  YamlToken:
    fields:
      token_type: String
      value: String
      indent: Int
      line: Int

  YamlNode:
    fields:
      node_type: String
      key: Option<String>
      value: Option<Object>
      children: List<Object>

  YamlMetrics:
    fields:
      lines_parsed: Int
      nodes_created: Int
      parse_time_us: Int
      simd_speedup: Float

  YamlConfig:
    fields:
      max_depth: Int
      allow_tabs: Bool
      phi_indentation: Bool

behaviors:
  - name: parse_simd
    given: YAML string
    when: Parsing requested
    then: SIMD YAML parse

  - name: scan_indentation
    given: Line bytes
    when: Indent scan
    then: SIMD indent detection

  - name: find_colons
    given: Line bytes
    when: Key-value scan
    then: SIMD colon finding

  - name: parse_scalar
    given: Scalar string
    when: Scalar parsing
    then: SIMD scalar parse

  - name: detect_type
    given: Value string
    When: Type detection
    then: Infer YAML type

  - name: build_tree
    given: Token stream
    When: Tree building
    then: Create YAML tree

  - name: validate_structure
    given: YAML tree
    When: Validation needed
    then: Check structure

  - name: serialize_simd
    given: YAML node
    When: Serialization needed
    then: SIMD YAML serialize

  - name: get_metrics
    given: Parser state
    When: Metrics query
    then: Return YAML metrics
