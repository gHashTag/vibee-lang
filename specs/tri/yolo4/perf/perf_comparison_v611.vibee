name: perf_comparison_v611
version: "611.0.0"
language: zig
module: perf_comparison_v611

types:
  VersionComparison:
    fields:
      comparison_id: String
      version_a: String
      version_b: String
      metrics: List<Object>

  PerformanceMetric:
    fields:
      metric_name: String
      version_a_value: Float
      version_b_value: Float
      improvement: Float

  ComparisonCategory:
    fields:
      category: String
      metrics: List<Object>
      avg_improvement: Float

  ComparisonReport:
    fields:
      overall_improvement: Float
      best_category: String
      regressions: List<String>
      phi_factor: Float

behaviors:
  - name: run_comparison
    given: Version A and B
    when: Comparison execution
    then: Run full comparison

  - name: compare_metric
    given: Metric name
    when: Metric comparison
    then: Return metric delta

  - name: compare_category
    given: Category
    When: Category comparison
    then: Return category metrics

  - name: identify_regressions
    given: All metrics
    When: Regression detection
    then: Find regressions

  - name: identify_improvements
    given: All metrics
    When: Improvement detection
    then: Find improvements

  - name: calculate_overall
    given: All metrics
    When: Overall calculation
    then: Weighted average

  - name: generate_report
    given: All comparisons
    When: Report needed
    then: Return comparison report

  - name: phi_weight
    given: Metrics
    When: Phi weighting
    then: Weight by phi importance
