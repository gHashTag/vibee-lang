name: agent_flock_v603
version: "603.0.0"
language: zig
module: agent_flock_v603

types:
  Flock:
    fields:
      flock_id: String
      boids: List<String>
      leader: Option<String>
      phi_formation: Bool

  Boid:
    fields:
      boid_id: String
      position: Object
      velocity: Object
      acceleration: Object

  FlockFormation:
    fields:
      formation_id: String
      pattern: String
      spacing: Float
      phi_ratio: Float

  FlockMetrics:
    fields:
      boids_count: Int
      avg_speed: Float
      formation_accuracy: Float
      phi_alignment: Float

behaviors:
  - name: create_flock
    given: Flock config
    when: Flock creation
    then: Initialize flock

  - name: update_boid
    given: Boid
    when: Update cycle
    then: Apply flocking rules

  - name: separation
    given: Boid and neighbors
    when: Separation rule
    then: Avoid crowding

  - name: alignment
    given: Boid and neighbors
    When: Alignment rule
    then: Match velocity

  - name: cohesion
    given: Boid and neighbors
    When: Cohesion rule
    then: Move toward center

  - name: form_pattern
    given: Formation
    When: Formation needed
    then: Arrange in pattern

  - name: follow_leader
    given: Leader boid
    When: Leader mode
    then: Follow leader

  - name: get_metrics
    given: Flock state
    When: Metrics query
    then: Return flock metrics
