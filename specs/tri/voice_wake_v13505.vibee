# VIBEE Specification v13505
# Wake Word Detection
# KOSCHEI CYCLE 11 - 1000000x SPEEDUP

name: voice_wake
version: "13505"
language: zig
module: voice_wake

types:
  WakeWordConfig:
    fields:
      wake_word: String
      sensitivity: Float
      model_path: String
      always_on: Bool

  WakeDetection:
    fields:
      detected: Bool
      confidence: Float
      timestamp: Timestamp
      audio_offset_ms: Int

  WakeWordModel:
    fields:
      id: String
      wake_word: String
      language: String
      size_bytes: Int

  WakeState:
    fields:
      is_listening: Bool
      detections_count: Int
      last_detection: Timestamp
      false_positives: Int

  WakeMetrics:
    fields:
      total_detections: Int
      true_positives: Int
      false_positives: Int
      avg_latency_ms: Float

  CustomWakeWord:
    fields:
      phrase: String
      samples: List<Object>
      trained: Bool
      accuracy: Float

behaviors:
  - name: start_listening
    given: Wake word configuration
    When: Listening requested
    then: Wake word detection started

  - name: detect_wake_word
    given: Audio stream
    When: Audio processed
    then: Wake word detected if present

  - name: train_custom
    given: Audio samples
    When: Training requested
    then: Custom wake word trained

  - name: adjust_sensitivity
    given: New sensitivity level
    When: Adjustment requested
    then: Sensitivity updated

  - name: stop_listening
    given: Active listening
    When: Stop requested
    then: Listening stopped

  - name: report_false_positive
    given: Incorrect detection
    When: Report submitted
    then: Model feedback recorded

creation_pattern:
  source: WakeWordConfig
  transformer: WakeDetector
  result: WakeDetection
