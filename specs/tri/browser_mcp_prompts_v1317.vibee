# VIBEE Specification: MCP Prompt Templates v1317
# YOLO XV - Production Ascension

name: browser_mcp_prompts
version: "1317"
language: zig
module: browser_mcp_prompts

types:
  PromptDefinition:
    fields:
      name: String
      description: String
      arguments: List
      annotations: Map

  PromptArgument:
    fields:
      name: String
      description: String
      required: Bool

  PromptMessage:
    fields:
      role: String
      content: PromptContent

  PromptContent:
    fields:
      content_type: String
      text: String
      resource: String

  PromptRegistry:
    fields:
      prompts: Map
      renderers: Map

  RenderedPrompt:
    fields:
      description: String
      messages: List

behaviors:
  - name: create_prompt_registry
    given: "Nothing"
    when: "Creating registry"
    then: "Returns empty registry"

  - name: register_prompt
    given: "Registry, definition"
    when: "Registering prompt"
    then: "Adds prompt to registry"

  - name: list_prompts
    given: "Registry"
    when: "Listing prompts"
    then: "Returns all prompt definitions"

  - name: get_prompt
    given: "Registry, name, arguments"
    when: "Getting prompt"
    then: "Returns rendered messages"

  - name: render_template
    given: "Template, arguments"
    when: "Rendering template"
    then: "Returns interpolated text"

  - name: create_user_message
    given: "Content"
    when: "Creating user message"
    then: "Returns user role message"

  - name: create_assistant_message
    given: "Content"
    when: "Creating assistant message"
    then: "Returns assistant role message"

  - name: embed_resource
    given: "Message, resource URI"
    when: "Embedding resource"
    then: "Returns message with embedded resource"

  - name: validate_arguments
    given: "Definition, arguments"
    when: "Validating arguments"
    then: "Returns validation result"

  - name: compose_prompts
    given: "List of prompts"
    when: "Composing multiple prompts"
    then: "Returns combined messages"

creation_pattern:
  source: PromptRegistry
  transformer: PromptManagement
  result: ManagedPrompts

test_cases:
  - name: test_prompt_registration
    input:
      name: "code_review"
      arguments: [{name: "language", required: true}]
    expected:
      registered: true

  - name: test_prompt_listing
    input:
      registered_prompts: 5
    expected:
      prompts_count: 5

  - name: test_prompt_rendering
    input:
      template: "Review this {language} code"
      arguments: {language: "Zig"}
    expected:
      rendered: "Review this Zig code"

  - name: test_argument_validation
    input:
      required: ["language"]
      provided: {}
    expected:
      validation_failed: true

  - name: test_user_message
    input:
      content: "Hello"
    expected:
      role: "user"

  - name: test_assistant_message
    input:
      content: "Hi there"
    expected:
      role: "assistant"

  - name: test_resource_embedding
    input:
      resource_uri: "file:///code.zig"
    expected:
      resource_embedded: true

  - name: test_prompt_composition
    input:
      prompts: ["system", "context", "task"]
    expected:
      messages_combined: true
