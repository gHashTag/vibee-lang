# VIBEE Specification v12530
# Saga Orchestration - Distributed transaction management
name: saga_orchestration_v12530
version: "1.0.0"
language: zig
module: saga_orchestration

types:
  SagaStatus:
    fields:
      pending: String
      running: String
      completed: String
      compensating: String
      failed: String

  SagaStep:
    fields:
      id: String
      name: String
      action: String
      compensation: String
      timeout_ms: Int

  Saga:
    fields:
      id: String
      name: String
      steps: String
      status: String
      current_step: Int

  StepResult:
    fields:
      step_id: String
      success: Bool
      output: String
      duration_ms: Int

  CompensationLog:
    fields:
      saga_id: String
      compensated_steps: String
      reason: String
      completed_at: Timestamp

behaviors:
  - name: create_saga
    given: Saga definition
    When: Saga created
    then: Returns new saga

  - name: execute_step
    given: Saga and step
    When: Step executed
    then: Returns step result

  - name: compensate
    given: Failed saga
    When: Compensation triggered
    then: Returns compensation log

  - name: complete_saga
    given: Saga
    When: Completion checked
    then: Returns final status
