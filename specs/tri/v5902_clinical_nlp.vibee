# v5902 - Clinical NLP
# =====================
# AI клиническая обработка текста
# φ² + 1/φ² = 3 | PHOENIX = 999

name: clinical_nlp
version: "5.9.2"
language: zig
module: clinical_nlp

constants:
  PHI: 1.618033988749895
  ENTITY_THRESHOLD: 0.85
  MAX_CONTEXT_LENGTH: 4096

types:
  ClinicalDocument:
    fields:
      doc_id: String
      text: String
      doc_type: String
      
  MedicalEntity:
    fields:
      text: String
      entity_type: String
      cui: String
      
  Relation:
    fields:
      subject: MedicalEntity
      predicate: String
      object_entity: MedicalEntity
      
  Negation:
    fields:
      entity: MedicalEntity
      is_negated: Bool
      
  Temporality:
    fields:
      entity: MedicalEntity
      temporal_status: String
      
  SectionHeader:
    fields:
      section_name: String
      start_offset: Int
      end_offset: Int
      
  CodingResult:
    fields:
      codes: List
      code_system: String
      
  SummarizedNote:
    fields:
      summary: String
      key_findings: List

behaviors:
  - name: extract_entities
    given: Clinical text
    when: NER extraction
    then: Вернуть medical entities
    
  - name: detect_relations
    given: Entities in context
    when: Relation extraction
    then: Вернуть relations
    
  - name: detect_negation
    given: Entity и context
    when: Negation detection
    then: Вернуть negation status
    
  - name: classify_temporality
    given: Entity и context
    when: Temporal classification
    then: Вернуть temporality
    
  - name: segment_sections
    given: Clinical document
    when: Section segmentation
    then: Вернуть section headers
    
  - name: normalize_entity
    given: Medical entity
    when: Normalization
    then: Вернуть normalized CUI
    
  - name: assign_codes
    given: Clinical text
    when: Medical coding
    then: Вернуть coding result
    
  - name: summarize_note
    given: Clinical document
    when: Summarization
    then: Вернуть summarized note
