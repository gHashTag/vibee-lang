# C++ Codegen V82 - Systems Target
name: cpp_codegen_v82
version: "82.0.0"
language: zig
module: cpp_codegen

creation_pattern:
  source: VibeeSpec
  transformer: CppCodeGenerator
  result: CppSourceCode

types:
  CppClass:
    fields:
      name: String
      namespace_name: String
      members: List<CppMember>
      methods: List<CppMethod>
      is_struct: Bool

  CppMember:
    fields:
      name: String
      cpp_type: String
      visibility: String
      is_const: Bool

  CppMethod:
    fields:
      name: String
      params: List<CppParam>
      return_type: String
      body: String
      is_const: Bool
      is_virtual: Bool
      is_noexcept: Bool

  CppParam:
    fields:
      name: String
      cpp_type: String
      is_const_ref: Bool

  CppHeader:
    fields:
      namespace_name: String
      includes: List<String>
      classes: List<CppClass>
      guards: String

behaviors:
  - name: map_vibee_type_to_cpp
    given: "VIBEE type"
    when: "Type mapping"
    then: "C++ type"
    test_cases:
      - name: map_string
        input: "String"
        expected: "std::string"
      - name: map_int
        input: "Int"
        expected: "int64_t"
      - name: map_list
        input: "List<String>"
        expected: "std::vector<std::string>"
      - name: map_option
        input: "Option<Int>"
        expected: "std::optional<int64_t>"

  - name: generate_header
    given: "VIBEE type definition"
    when: "Header generation"
    then: "C++ header file"
    test_cases:
      - name: header_guards
        input: "User type"
        expected: "#ifndef USER_H..."

  - name: generate_impl
    given: "VIBEE behaviors"
    when: "Implementation generation"
    then: "C++ source file"
    test_cases:
      - name: method_impl
        input: "create_user behavior"
        expected: "User::create_user() { ... }"

  - name: generate_smart_ptrs
    given: "Ownership semantics"
    when: "Pointer generation"
    then: "unique_ptr/shared_ptr"
    test_cases:
      - name: unique_ownership
        input: "owned resource"
        expected: "std::unique_ptr<T>"

  - name: generate_tests
    given: "VIBEE test_cases"
    when: "GoogleTest generation"
    then: "GTest tests"
    test_cases:
      - name: gtest
        input: "test: create_user"
        expected: "TEST(UserTest, CreateUser)"

  - name: generate_cmake
    given: "Module definition"
    when: "Build system"
    then: "CMakeLists.txt"
    test_cases:
      - name: cmake_target
        input: "user module"
        expected: "add_library(user ...)"

# φ² + 1/φ² = 3 | PHOENIX = 999
