name: coalition_formation_v11620
version: "11620"
language: zig
module: coalition_formation

description: |
  TIER 246: Coalition Formation
  Safe formation and management of agent coalitions
  Based on: Cooperative game theory, coalition structures

types:
  CoalitionConfig:
    fields:
      formation_rule: FormationRule
      stability_requirement: StabilityType
      max_coalition_size: Int
      allow_overlapping: Bool

  FormationRule:
    variants:
      - core_stable
      - nash_stable
      - individually_stable
      - contractually_stable

  StabilityType:
    variants:
      - core
      - kernel
      - nucleolus
      - shapley

  Coalition:
    fields:
      coalition_id: String
      members: List<String>
      value: Float
      stability_score: Float
      formation_time: Int

  CoalitionTransition:
    fields:
      from_coalition: String
      to_coalition: String
      agent: String
      approved: Bool

behaviors:
  - name: form_coalition
    given: Agents and preferences
    When: Forming coalition
    then: Returns coalition

  - name: compute_coalition_value
    given: Coalition members
    When: Computing value
    then: Returns coalition value

  - name: check_stability
    given: Coalition structure
    When: Checking stability
    then: Returns stability result

  - name: compute_core
    given: Game definition
    When: Computing core
    then: Returns core allocations

  - name: allow_transition
    given: Agent transition request
    When: Checking transition
    then: Returns approval

  - name: dissolve_coalition
    given: Coalition to dissolve
    When: Dissolving
    then: Returns dissolution status

  - name: merge_coalitions
    given: Two coalitions
    When: Merging
    then: Returns merged coalition

  - name: split_coalition
    given: Coalition and split point
    When: Splitting
    then: Returns new coalitions

creation_pattern:
  source: AgentSet
  transformer: CoalitionFormer
  result: StableCoalition
