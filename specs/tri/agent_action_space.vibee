# Action Space Module
# Define and manage available actions
# Manus insight: Context-aware state machine

name: agent_action_space
version: "1.0.0"
language: zig
module: agent_action_space

types:
  ActionSpace:
    fields:
      space_id: String
      actions: List<String>
      categories: Map<String,String>
      total_actions: Int

  ActionDefinition:
    fields:
      action_id: String
      name: String
      category: String
      parameters: List<String>
      preconditions: List<String>

  ActionConstraint:
    fields:
      constraint_id: String
      constraint_type: String
      affected_actions: List<String>
      condition: String

  ActionSelection:
    fields:
      selection_id: String
      selected_action: String
      confidence: Float
      alternatives: List<String>

  ActionPrefix:
    fields:
      prefix: String
      actions_with_prefix: List<String>
      can_constrain: Bool

behaviors:
  - name: define_action_space
    given: Action definitions
    when: Space definition needed
    then: Returns configured action space

  - name: get_valid_actions
    given: Current state and constraints
    when: Action listing needed
    then: Returns valid actions only

  - name: constrain_by_prefix
    given: Action prefix pattern
    When: Prefix constraint needed
    then: Returns actions matching prefix

  - name: apply_constraints
    given: Action space and constraints
    when: Constraint application needed
    then: Returns constrained action space

  - name: select_action
    given: Context and action space
    when: Action selection needed
    then: Returns selected action with confidence

  - name: validate_action
    given: Action and preconditions
    when: Validation needed
    then: Returns validation result
