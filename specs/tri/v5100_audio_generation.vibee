# v5100 - Audio Generation
# =========================
# Генерация аудио нейросетями
# φ² + 1/φ² = 3 | PHOENIX = 999

name: audio_generation
version: "5.1.0"
language: zig
module: audio_generation

constants:
  PHI: 1.618033988749895
  SAMPLE_RATE: 24000
  HOP_LENGTH: 256
  NUM_MELS: 80

types:
  AudioConfig:
    fields:
      sample_rate: Int
      channels: Int
      duration: Float
      
  Waveform:
    fields:
      samples: List
      sample_rate: Int
      
  Spectrogram:
    fields:
      magnitude: List
      phase: List
      
  MelSpectrogram:
    fields:
      mel_spec: List
      num_mels: Int
      
  AudioCodec:
    fields:
      encoder: Object
      decoder: Object
      codebook_size: Int
      
  AudioTokens:
    fields:
      tokens: List
      num_codebooks: Int
      
  VocoderConfig:
    fields:
      vocoder_type: String
      upsample_rates: List
      
  GeneratedAudio:
    fields:
      waveform: Waveform
      conditioning: Object

behaviors:
  - name: encode_audio
    given: Waveform и codec
    when: Audio tokenization
    then: Вернуть audio tokens
    
  - name: decode_audio
    given: Tokens и codec
    when: Token to waveform
    then: Вернуть waveform
    
  - name: compute_mel_spectrogram
    given: Waveform и config
    when: Mel extraction
    then: Вернуть mel spectrogram
    
  - name: vocoder_forward
    given: Mel spectrogram и vocoder
    when: Mel to waveform
    then: Вернуть waveform
    
  - name: generate_unconditional
    given: Model и duration
    when: Unconditional generation
    then: Вернуть generated audio
    
  - name: generate_conditional
    given: Model и conditioning
    when: Conditional generation
    then: Вернуть generated audio
    
  - name: audio_continuation
    given: Prompt audio и model
    when: Continuation
    then: Вернуть continued audio
    
  - name: audio_inpainting
    given: Audio, mask, model
    when: Inpainting
    then: Вернуть inpainted audio
