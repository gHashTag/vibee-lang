name: multi_agent_reward_v11600
version: "11600"
language: zig
module: multi_agent_reward

description: |
  TIER 244: Multi-Agent Reward
  Designs reward structures for multi-agent systems
  Based on: Cooperative reward shaping, credit assignment

types:
  RewardConfig:
    fields:
      reward_structure: RewardStructure
      credit_assignment: CreditMethod
      team_reward_weight: Float
      individual_reward_weight: Float

  RewardStructure:
    variants:
      - fully_cooperative
      - mixed_motive
      - competitive
      - hierarchical

  CreditMethod:
    variants:
      - difference_rewards
      - counterfactual
      - shapley_value
      - attention_based

  RewardAllocation:
    fields:
      agent_rewards: List<Float>
      team_reward: Float
      fairness_index: Float
      incentive_aligned: Bool

  CreditAssignment:
    fields:
      agent_id: String
      contribution: Float
      counterfactual_impact: Float
      assigned_credit: Float

behaviors:
  - name: compute_team_reward
    given: Joint outcome
    when: Computing team reward
    then: Returns team reward

  - name: assign_credit
    given: Team reward and agent actions
    when: Assigning credit
    then: Returns credit assignment

  - name: compute_difference_reward
    given: Agent and team outcome
    when: Computing difference
    then: Returns difference reward

  - name: compute_shapley_value
    given: Coalition game
    when: Computing Shapley
    then: Returns Shapley values

  - name: shape_reward
    given: Base reward
    when: Applying shaping
    then: Returns shaped reward

  - name: verify_incentive_alignment
    given: Reward structure
    when: Checking alignment
    then: Returns verification

  - name: balance_individual_team
    given: Reward weights
    when: Balancing rewards
    then: Returns balanced structure

  - name: detect_reward_hacking
    given: Agent behavior
    when: Checking for hacking
    then: Returns detection result

creation_pattern:
  source: JointOutcome
  transformer: RewardAllocator
  result: RewardAllocation
