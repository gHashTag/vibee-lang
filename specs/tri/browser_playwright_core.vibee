# Playwright Core Integration
# Browser automation engine for WebArena
# Chromium, Firefox, WebKit support

name: browser_playwright_core
version: "1.0.0"
language: zig
module: browser_playwright_core

types:
  PlaywrightInstance:
    fields:
      instance_id: String
      browser_type: String
      is_headless: Bool
      viewport_width: Int
      viewport_height: Int

  BrowserContext:
    fields:
      context_id: String
      instance_id: String
      user_agent: String
      locale: String
      timezone: String
      permissions: List<String>

  Page:
    fields:
      page_id: String
      context_id: String
      url: String
      title: String
      is_closed: Bool
      load_state: String

  LaunchOptions:
    fields:
      headless: Bool
      slow_mo: Int
      timeout: Int
      args: List<String>
      proxy: Option<String>

  BrowserType:
    fields:
      type_name: String
      executable_path: Option<String>
      channel: Option<String>

  PlaywrightError:
    fields:
      error_type: String
      message: String
      selector: Option<String>
      timeout_ms: Option<Int>

behaviors:
  - name: launch_browser
    given: Browser type and launch options
    when: Browser launch needed
    then: Returns Playwright instance

  - name: create_context
    given: Instance and context options
    when: New context needed
    then: Returns browser context

  - name: new_page
    given: Browser context
    when: New page needed
    then: Returns page handle

  - name: close_page
    given: Page handle
    when: Page cleanup needed
    then: Returns close result

  - name: close_context
    given: Context handle
    when: Context cleanup needed
    then: Returns close result

  - name: close_browser
    given: Instance handle
    when: Browser cleanup needed
    then: Returns close result

  - name: get_browser_version
    given: Instance handle
    when: Version check needed
    then: Returns browser version string

  - name: is_connected
    given: Instance handle
    when: Connection check needed
    then: Returns connection status
