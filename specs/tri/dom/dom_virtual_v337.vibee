name: dom_virtual_v337
version: "1.0.0"
language: zig
module: dom_virtual_v337

types:
  VirtualList:
    fields:
      container: String
      item_selector: String
      total_items: Int
      visible_items: Int
      item_height: Int

  VirtualScroll:
    fields:
      scroll_top: Int
      scroll_height: Int
      viewport_height: Int
      buffer_size: Int

  VirtualItem:
    fields:
      index: Int
      element: String
      in_viewport: Bool
      rendered: Bool

  ScrollStrategy:
    fields:
      type: String
      threshold: Int
      debounce_ms: Int

  VirtualConfig:
    fields:
      wait_for_render: Bool
      scroll_behavior: String
      item_wait_ms: Int

behaviors:
  - name: detect_virtual_list
    given: Container element
    When: Detection runs
    then: Virtual list identified

  - name: scroll_to_index
    given: Item index
    When: Scroll runs
    then: Item scrolled into view

  - name: get_visible_items
    given: Virtual list
    When: Query runs
    then: Currently visible items returned

  - name: wait_for_item
    given: Item index
    When: Wait runs
    then: Item rendered and visible

  - name: scroll_to_bottom
    given: Virtual list
    When: Scroll runs
    then: List scrolled to end

  - name: scroll_to_top
    given: Virtual list
    When: Scroll runs
    then: List scrolled to start

  - name: iterate_all_items
    given: Virtual list
    When: Iteration runs
    then: All items visited via scroll

  - name: find_item_by_text
    given: Search text
    When: Search runs
    then: Matching item found via scroll
