name: dom_shadow_v336
version: "1.0.0"
language: zig
module: dom_shadow_v336

types:
  ShadowRoot:
    fields:
      host: String
      mode: String
      delegatesFocus: Bool
      slotAssignment: String

  ShadowElement:
    fields:
      selector: String
      shadow_root: ShadowRoot
      inner_selector: String
      piercing: Bool

  SlotElement:
    fields:
      name: String
      assigned_nodes: List<String>

  ShadowQuery:
    fields:
      host_selector: String
      shadow_selector: String
      depth: Int

  ShadowConfig:
    fields:
      pierce_closed: Bool
      max_depth: Int
      wait_for_shadow: Bool

behaviors:
  - name: query_shadow_dom
    given: Shadow host selector
    When: Query runs
    then: Elements inside shadow found

  - name: pierce_shadow
    given: Piercing selector
    When: Pierce query runs
    then: Deep shadow elements found

  - name: get_shadow_root
    given: Host element
    When: Get root runs
    then: Shadow root returned

  - name: query_slot
    given: Slot name
    When: Slot query runs
    then: Slotted content found

  - name: wait_for_shadow
    given: Shadow not attached
    When: Wait runs
    then: Waits for shadow attachment

  - name: click_in_shadow
    given: Shadow element
    When: Click runs
    then: Element clicked through shadow

  - name: type_in_shadow
    given: Shadow input
    When: Type runs
    then: Text typed in shadow input

  - name: nested_shadow
    given: Multiple shadow levels
    When: Nested query runs
    then: Deep nested element found
