# v4900 - Time Series
# ====================
# Временные ряды - прогнозирование и анализ
# φ² + 1/φ² = 3 | PHOENIX = 999

name: time_series
version: "4.9.0"
language: zig
module: time_series

constants:
  PHI: 1.618033988749895
  CONTEXT_LENGTH: 512
  PREDICTION_LENGTH: 96
  NUM_FEATURES: 7

types:
  TimeSeriesData:
    fields:
      values: List
      timestamps: List
      features: List
      
  TSConfig:
    fields:
      context_length: Int
      prediction_length: Int
      freq: String
      
  Forecast:
    fields:
      point_forecast: List
      lower_bound: List
      upper_bound: List
      
  SeasonalComponent:
    fields:
      period: Int
      amplitude: Float
      phase: Float
      
  TrendComponent:
    fields:
      slope: Float
      intercept: Float
      changepoints: List
      
  TSFeatures:
    fields:
      lag_features: List
      rolling_stats: List
      time_features: List
      
  TSModel:
    fields:
      encoder: Object
      decoder: Object
      
  ForecastMetrics:
    fields:
      mae: Float
      mse: Float
      mape: Float
      smape: Float

behaviors:
  - name: create_sequences
    given: Time series и window size
    when: Создание sequences
    then: Вернуть X, y pairs
    
  - name: extract_time_features
    given: Timestamps
    when: Извлечение time features
    then: Вернуть hour, day, month, etc.
    
  - name: decompose_series
    given: Time series
    when: STL decomposition
    then: Вернуть trend, seasonal, residual
    
  - name: forecast
    given: Model и context
    when: Прогнозирование
    then: Вернуть forecast
    
  - name: compute_forecast_metrics
    given: Predictions и actuals
    when: Оценка качества
    then: Вернуть metrics
    
  - name: detect_changepoints
    given: Time series
    when: Поиск changepoints
    then: Вернуть changepoint locations
    
  - name: interpolate_missing
    given: Series с пропусками
    when: Интерполяция
    then: Вернуть filled series
    
  - name: normalize_series
    given: Time series
    when: Нормализация
    then: Вернуть normalized и params
