name: agent_orchestrator_main
version: "1.0.0"
language: zig
module: agent_orchestrator_main

description: |
  Agent Orchestrator Main - главный оркестратор ReAct агента
  Объединяет все 12 категорий функций
  Научные основы: UI-TARS, WebVoyager, SeeAct
  φ² + 1/φ² = 3 | PHOENIX = 999

types:
  AgentTask:
    fields:
      task_id: String
      description: String
      category: String
      priority: Int
      timeout_ms: Int

  AgentCapability:
    fields:
      name: String
      category: String
      enabled: Bool
      requires_confirmation: Bool

  OrchestratorConfig:
    fields:
      capabilities: List<String>
      yolo_mode: Bool
      max_steps: Int
      safety_level: Int

  OrchestratorState:
    fields:
      current_task: Option<String>
      step_count: Int
      capabilities_used: List<String>
      errors: List<String>

  TaskResult:
    fields:
      task_id: String
      success: Bool
      output: String
      steps_taken: Int
      time_ms: Float
      capabilities_used: List<String>

  AgentMetrics:
    fields:
      tasks_completed: Int
      success_rate: Float
      avg_steps: Float
      avg_time_ms: Float

behaviors:
  - name: init_orchestrator
    given: OrchestratorConfig конфигурация
    when: Инициализация оркестратора
    then: OrchestratorState готов

  - name: execute_task
    given: AgentTask задача
    when: Выполнение задачи
    then: TaskResult

  - name: plan_task
    given: AgentTask задача
    when: Планирование выполнения
    then: Список шагов

  - name: select_capability
    given: Текущий шаг задачи
    when: Выбор capability
    then: AgentCapability для использования

  - name: handle_error
    given: Ошибка выполнения
    when: Обработка ошибки
    then: Стратегия восстановления

  - name: get_metrics
    given: Текущая сессия
    when: Получение метрик
    then: AgentMetrics
