# VIBEE CLI CONFIG FOUNDATION v10501
# φ² + 1/φ² = 3 | PHOENIX = 999

name: cli_config_v10501
version: "10501.0.0"
language: zig
module: cli_config_v10501

types:
  ConfigFile:
    fields:
      path: String
      format: String
      content: String
      last_modified: Timestamp

  ConfigValue:
    fields:
      key: String
      value: String
      value_type: String
      source: String

  ConfigProfile:
    fields:
      profile_name: String
      settings: List<ConfigValue>
      parent_profile: String
      active: Bool

  ConfigSchema:
    fields:
      schema_version: String
      properties: List<SchemaProperty>
      required: List<String>

  SchemaProperty:
    fields:
      name: String
      prop_type: String
      default_value: String
      description: String
      validation: String

  EnvVar:
    fields:
      name: String
      value: String
      source: String
      overridable: Bool

  ConfigLayer:
    fields:
      layer_name: String
      priority: Int
      values: List<ConfigValue>
      readonly: Bool

  ConfigMerger:
    fields:
      layers: List<ConfigLayer>
      strategy: String
      conflicts: List<String>

  ConfigWatcher:
    fields:
      watch_paths: List<String>
      callback: String
      debounce_ms: Int

  ConfigExport:
    fields:
      format: String
      include_defaults: Bool
      include_secrets: Bool
      output_path: String

behaviors:
  - name: load_config
    given: "Config file path"
    when: "Config loading requested"
    then: "Returns loaded config"

  - name: save_config
    given: "Config and path"
    when: "Config saving requested"
    then: "Returns save status"

  - name: get_value
    given: "Key and default"
    when: "Value retrieval requested"
    then: "Returns config value"

  - name: set_value
    given: "Key and value"
    when: "Value setting requested"
    then: "Returns updated config"

  - name: merge_configs
    given: "Config layers"
    when: "Merge requested"
    then: "Returns merged config"

  - name: validate_config
    given: "Config and schema"
    when: "Validation requested"
    then: "Returns validation result"

  - name: switch_profile
    given: "Profile name"
    when: "Profile switch requested"
    then: "Returns active profile"

  - name: export_config
    given: "Export options"
    when: "Export requested"
    then: "Returns exported config"

  - name: watch_changes
    given: "Watcher config"
    when: "Watch requested"
    then: "Returns watcher handle"

  - name: resolve_env
    given: "Config with env refs"
    when: "Env resolution requested"
    then: "Returns resolved config"
