# iGLA Self-RAG Dataset
# Training data for Self-RAG critic
# φ² + 1/φ² = 3 | V = n × 3^k × π^m × φ^p

name: igla_selfrag_dataset
version: "1.0.0"
language: zig
module: igla_selfrag_dataset

sacred_constants:
  phi: 1.618033988749895
  trinity: 3.0
  phoenix: 999

types:
  DatasetConfig:
    fields:
      path: String
      split_ratio: Float
      shuffle: Bool

  DataSample:
    fields:
      id: Int
      query: String
      context: String
      response: String
      labels: String

  DataSplit:
    fields:
      train: String
      val: String
      test: String

  DataLoader:
    fields:
      batch_size: Int
      shuffle: Bool
      num_workers: Int

  DataStats:
    fields:
      total_samples: Int
      avg_query_len: Float
      avg_context_len: Float

  Augmentation:
    fields:
      strategy: String
      probability: Float

behaviors:
  - name: load_dataset
    given: "Path"
    when: "Loading"
    then: "Dataset loaded"

  - name: split_dataset
    given: "Dataset, ratios"
    when: "Splitting"
    then: "Train/val/test splits"

  - name: create_dataloader
    given: "Dataset, config"
    when: "DataLoader creation"
    then: "DataLoader ready"

  - name: get_batch
    given: "DataLoader"
    when: "Batch retrieval"
    then: "Next batch"

  - name: augment_sample
    given: "Sample, strategy"
    when: "Augmentation"
    then: "Augmented sample"

  - name: compute_stats
    given: "Dataset"
    when: "Statistics"
    then: "Dataset stats"

  - name: filter_samples
    given: "Dataset, criteria"
    when: "Filtering"
    then: "Filtered dataset"

  - name: phi_split_ratio
    given: "Total samples"
    when: "Sacred splitting"
    then: "φ-ratio splits"
