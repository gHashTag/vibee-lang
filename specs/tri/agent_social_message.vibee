name: agent_social_message
version: "1.0.0"
language: zig
module: agent_social_message

description: |
  Agent Social Message - отправка сообщений
  ВАЖНО: требует подтверждение пользователя
  φ² + 1/φ² = 3 | PHOENIX = 999

types:
  MessageRecipient:
    fields:
      platform: String
      username: String
      display_name: Option<String>

  MessageContent:
    fields:
      text: String
      attachments: List<String>
      reply_to: Option<String>

  MessageResult:
    fields:
      success: Bool
      message_id: Option<String>
      delivered: Bool
      error: Option<String>

  Conversation:
    fields:
      conversation_id: String
      participants: List<String>
      last_message: String
      unread_count: Int

behaviors:
  - name: compose_message
    given: MessageRecipient и MessageContent
    when: Подготовка сообщения
    then: Готовое сообщение

  - name: request_send_approval
    given: Сообщение для отправки
    when: Запрос одобрения
    then: Bool одобрено

  - name: send_message
    given: Одобренное сообщение
    when: Отправка сообщения
    then: MessageResult

  - name: read_messages
    given: Conversation диалог
    when: Чтение сообщений
    then: Список сообщений

  - name: reply_to_message
    given: Сообщение и ответ
    when: Ответ на сообщение
    then: MessageResult

  - name: list_conversations
    given: Текущий аккаунт
    when: Список диалогов
    then: Список Conversation
