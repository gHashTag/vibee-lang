name: python_codegen_backend_v55100
version: "55100.0.0"
language: zig
module: python_codegen_backend

# PYTHON CODEGEN BACKEND
# Генерация Python кода из VIBEE AST

types:
  PythonConfig:
    fields:
      python_version: String
      use_dataclasses: Bool
      use_typing: Bool
      use_pydantic: Bool
      emit_docstrings: Bool

  PythonModule:
    fields:
      name: String
      imports_count: Int
      classes_count: Int
      functions_count: Int

  PythonClass:
    fields:
      name: String
      is_dataclass: Bool
      base_class: String
      fields_count: Int

  PythonField:
    fields:
      name: String
      python_type: String
      default_value: String
      is_optional: Bool

  PythonMethod:
    fields:
      name: String
      is_static: Bool
      is_classmethod: Bool
      is_async: Bool
      params: String
      return_type: String

  PythonTest:
    fields:
      name: String
      is_async: Bool
      fixtures: String

  PythonOutput:
    fields:
      code: String
      size_bytes: Int
      classes_generated: Int
      tests_generated: Int

behaviors:
  - name: emit_python_header
    given: PythonConfig
    when: Header generation triggered
    then: Python imports and docstring

  - name: emit_python_class
    given: VIBEE type definition
    when: Class generation triggered
    then: Python dataclass

  - name: emit_python_field
    given: VIBEE field definition
    when: Field generation triggered
    then: Python field with type hint

  - name: emit_python_method
    given: VIBEE behavior
    when: Method generation triggered
    then: Python method with type hints

  - name: emit_python_test
    given: VIBEE behavior
    when: Test generation triggered
    then: Pytest function

  - name: map_type_to_python
    given: VIBEE type name
    when: Type mapping requested
    then: Python type returned

  - name: generate_python_module
    given: Complete VIBEE spec
    when: Full generation triggered
    then: Complete Python module
