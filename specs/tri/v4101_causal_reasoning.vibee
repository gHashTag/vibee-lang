# v4101 - Causal Reasoning
# =========================
# Causal inference and discovery
# φ² + 1/φ² = 3 | PHOENIX = 999

name: causal_reasoning
version: "4.1.1"
language: zig
module: causal_reasoning

constants:
  PHI: 1.618033988749895
  MAX_VARIABLES: 100
  SIGNIFICANCE_LEVEL: 0.05
  MAX_CONDITIONING_SET: 5

types:
  CausalGraph:
    fields:
      nodes: List
      edges: List
      confounders: List
      
  CausalEdge:
    fields:
      cause: String
      effect: String
      strength: Float
      
  Intervention:
    fields:
      variable: String
      value: Float
      
  CausalEffect:
    fields:
      treatment: String
      outcome: String
      ate: Float
      confidence_interval: List
      
  SCM:
    fields:
      variables: List
      equations: List
      noise_distributions: List
      
  ConditionalIndependence:
    fields:
      x: String
      y: String
      conditioning_set: List
      p_value: Float
      
  DoCalculus:
    fields:
      query: String
      interventions: List
      observations: List
      
  InstrumentalVariable:
    fields:
      instrument: String
      treatment: String
      outcome: String

behaviors:
  - name: discover_structure
    given: Observational data
    when: Learning causal graph
    then: Return causal graph
    
  - name: estimate_ate
    given: Data and treatment
    when: Computing average effect
    then: Return causal effect
    
  - name: do_intervention
    given: SCM and intervention
    when: Simulating intervention
    then: Return post-intervention distribution
    
  - name: test_independence
    given: Variables and data
    when: Testing CI
    then: Return test result
    
  - name: identify_effect
    given: Graph and query
    when: Checking identifiability
    then: Return identification formula
    
  - name: find_adjustment_set
    given: Graph, treatment, outcome
    when: Finding valid adjustment
    then: Return adjustment set
    
  - name: instrumental_estimation
    given: IV and data
    when: IV regression
    then: Return causal effect
    
  - name: mediation_analysis
    given: Treatment, mediator, outcome
    when: Decomposing effects
    then: Return direct and indirect effects
