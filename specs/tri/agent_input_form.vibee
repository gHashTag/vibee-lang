name: agent_input_form
version: "1.0.0"
language: zig
module: agent_input_form

description: |
  Agent Input Form - автозаполнение форм
  OpenAI Operator: заполнение форм и отчётов
  VIBEE: умное автозаполнение с валидацией
  φ² + 1/φ² = 3 | PHOENIX = 999

types:
  FormField:
    fields:
      name: String
      field_type: String
      selector: String
      required: Bool
      validation: Option<String>

  FormData:
    fields:
      fields: List<String>
      values: String
      auto_detected: Bool

  FormResult:
    fields:
      success: Bool
      fields_filled: Int
      validation_errors: List<String>
      submit_ready: Bool

  FormProfile:
    fields:
      profile_name: String
      data: String
      last_used: Timestamp

behaviors:
  - name: analyze_form
    given: Форма на странице
    when: Анализ структуры формы
    then: Список FormField

  - name: fill_form
    given: FormData данные для заполнения
    when: Заполнение всех полей
    then: FormResult

  - name: fill_from_profile
    given: FormProfile сохранённый профиль
    when: Заполнение из профиля
    then: FormResult

  - name: validate_form
    given: Заполненная форма
    when: Валидация перед отправкой
    then: Список ошибок валидации

  - name: submit_form
    given: Заполненная и валидная форма
    when: Отправка формы
    then: Результат отправки

  - name: save_form_profile
    given: Заполненная форма
    when: Сохранение как профиль
    then: FormProfile для повторного использования
