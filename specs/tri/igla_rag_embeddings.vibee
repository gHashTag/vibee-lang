# iGLA RAG Embeddings
# Vector embeddings for semantic search
# φ² + 1/φ² = 3 | V = n × 3^k × π^m × φ^p

name: igla_rag_embeddings
version: "1.0.0"
language: zig
module: igla_rag_embeddings

sacred_constants:
  phi: 1.618033988749895
  trinity: 3.0
  phoenix: 999

types:
  EmbeddingConfig:
    fields:
      model: String
      dimensions: Int
      normalize: Bool
      batch_size: Int

  Embedding:
    fields:
      vector: String
      dimensions: Int
      text: String
      model: String

  EmbeddingBatch:
    fields:
      embeddings: String
      count: Int
      total_tokens: Int

  EmbeddingModel:
    fields:
      name: String
      dimensions: Int
      max_tokens: Int
      is_loaded: Bool

  SimilarityResult:
    fields:
      score: Float
      index: Int
      text: String

  EmbeddingMetrics:
    fields:
      total_embeddings: Int
      avg_latency_ms: Float
      tokens_processed: Int

behaviors:
  - name: load_model
    given: "Model name"
    when: "Loading"
    then: "Embedding model loaded"

  - name: embed_text
    given: "Text string"
    when: "Embedding"
    then: "Vector embedding returned"

  - name: embed_batch
    given: "List of texts"
    when: "Batch embedding"
    then: "List of embeddings returned"

  - name: cosine_similarity
    given: "Two vectors"
    when: "Similarity"
    then: "Cosine similarity score"

  - name: dot_product
    given: "Two vectors"
    when: "Similarity"
    then: "Dot product score"

  - name: normalize_vector
    given: "Vector"
    when: "Normalization"
    then: "Unit vector returned"

  - name: find_similar
    given: "Query vector, vectors"
    when: "Search"
    then: "Top-K similar vectors"

  - name: phi_embedding_harmony
    given: "Embeddings"
    when: "Harmony"
    then: "φ-optimal vector space"
