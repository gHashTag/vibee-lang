# Playwright Content Extraction
# Text, HTML, attributes, tables
# Data extraction from pages

name: browser_playwright_extract
version: "1.0.0"
language: zig
module: browser_playwright_extract

types:
  ExtractionQuery:
    fields:
      query_type: String
      selector: String
      attribute: Option<String>

  TextExtraction:
    fields:
      text: String
      inner_text: String
      text_content: String

  HTMLExtraction:
    fields:
      inner_html: String
      outer_html: String

  AttributeExtraction:
    fields:
      attribute_name: String
      value: Option<String>

  TableExtraction:
    fields:
      headers: List<String>
      rows: List<String>
      row_count: Int

  LinkExtraction:
    fields:
      href: String
      text: String
      is_external: Bool

  FormExtraction:
    fields:
      action: String
      method: String
      fields: List<String>

  ExtractionResult:
    fields:
      success: Bool
      data: String
      element_count: Int

behaviors:
  - name: extract_text
    given: Page and selector
    when: Text extraction needed
    then: Returns text content

  - name: extract_html
    given: Page and selector
    when: HTML extraction needed
    then: Returns HTML content

  - name: extract_attribute
    given: Page, selector, and attribute
    when: Attribute extraction needed
    then: Returns attribute value

  - name: extract_all_text
    given: Page and selector
    when: Multiple text extraction needed
    then: Returns list of texts

  - name: extract_table
    given: Page and table selector
    when: Table extraction needed
    then: Returns table data

  - name: extract_links
    given: Page and optional selector
    When: Link extraction needed
    then: Returns list of links

  - name: extract_form
    given: Page and form selector
    when: Form extraction needed
    then: Returns form structure

  - name: evaluate_script
    given: Page and JavaScript
    when: Custom extraction needed
    then: Returns script result
