# VIBEE YOLO MODE VII - browser_offline_sw v792
name: browser_offline_sw_v792
version: "7.0.0"
language: zig
module: browser_offline_sw

sacred_constants:
  phi: 1.618033988749895
  phoenix: 999

types:
  OfflineConfig:
    fields:
      cache_strategy: String
      sync_interval: Int
      fallback_enabled: Bool

  OfflineState:
    fields:
      online: Bool
      cached: Bool
      pending_sync: Int
      last_sync: Timestamp

behaviors:
  - name: register_sw
    given: OfflineConfig
    when: Register
    then: service worker registered
  - name: cache_resources
    given: Resource list
    when: Cache
    then: Resources cached
  - name: handle_offline
    given: Network offline
    when: Offline
    then: Fallback activated
  - name: sync_pending
    given: Network online
    when: Sync
    then: Pending synced

test_cases:
  - name: test_browser_offline_sw_register
    input: {config: valid}
    expected: {registered: true}
  - name: test_browser_offline_sw_cache
    input: {resources: list}
    expected: {cached: true}
  - name: test_browser_offline_sw_offline
    input: {online: false}
    expected: {fallback: true}
  - name: test_browser_offline_sw_sync
    input: {online: true}
    expected: {synced: true}
  - name: test_phi_browser_offline_sw
    input: {phi: 1.618033988749895}
    expected: {golden: true}
