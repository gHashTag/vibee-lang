# ═══════════════════════════════════════════════════════════════════════════════
# CLI COMMANDS v281 - Command Registry
# ═══════════════════════════════════════════════════════════════════════════════
# Based on: ToolLLM, LangChain Tools
# Scientific: EMNLP 2024, ACL 2024
# PAS Pattern: HSH + PRE
# φ² + 1/φ² = 3 | PHOENIX = 999
# ═══════════════════════════════════════════════════════════════════════════════

name: cli_commands
version: "2.8.1"
language: zig
module: cli_commands

sacred_constants:
  phi: 1.618033988749895
  trinity: 3.0
  phoenix: 999

creation_pattern:
  source: CommandName
  transformer: CommandRegistry
  result: CommandHandler

types:
  CommandCategory:
    enum:
      - core
      - codegen
      - testing
      - benchmark
      - ai
      - plugin

  CommandArg:
    fields:
      name: String
      arg_type: String
      required: Bool
      default: Option<String>

  CommandDef:
    fields:
      name: String
      category: CommandCategory
      description: String
      args: List<CommandArg>
      aliases: List<String>

  CommandResult:
    fields:
      success: Bool
      output: String
      duration_ms: Int

  CommandHelp:
    fields:
      usage: String
      description: String
      examples: List<String>

  CommandStats:
    fields:
      name: String
      invocations: Int
      avg_duration_ms: Int

behaviors:
  - name: register_command
    given: "Command definition"
    when: "Registration"
    then: "Add to registry"
    pas_pattern: HSH
    complexity: O(1)
    test_cases:
      - name: test_register
        input: '{"name": "gen", "category": "codegen"}'
        expected: '{"registered": true}'

  - name: lookup_command
    given: "Command name"
    when: "Lookup"
    then: "Find command handler"
    pas_pattern: HSH
    complexity: O(1)
    test_cases:
      - name: test_lookup
        input: '{"name": "gen"}'
        expected: '{"found": true}'

  - name: list_commands
    given: "Category filter"
    when: "Listing"
    then: "Return matching commands"
    pas_pattern: PRE
    complexity: O(n)
    test_cases:
      - name: test_list
        input: '{"category": "core"}'
        expected: '{"commands": [...]}'

  - name: get_help
    given: "Command name"
    when: "Help request"
    then: "Return help text"
    pas_pattern: PRE
    complexity: O(1)
    test_cases:
      - name: test_help
        input: '{"name": "gen"}'
        expected: '{"help": {...}}'

  - name: validate_args
    given: "Command and args"
    when: "Validation"
    then: "Validate arguments"
    pas_pattern: ALG
    complexity: O(n)
    test_cases:
      - name: test_validate
        input: '{"command": "gen", "args": ["file.vibee"]}'
        expected: '{"valid": true}'

  - name: get_stats
    given: "Command name"
    when: "Stats request"
    then: "Return usage stats"
    pas_pattern: PRE
    complexity: O(1)
    test_cases:
      - name: test_stats
        input: '{"name": "gen"}'
        expected: '{"stats": {...}}'

# ═══════════════════════════════════════════════════════════════════════════════
# φ² + 1/φ² = 3 | PHOENIX = 999
# ═══════════════════════════════════════════════════════════════════════════════
