# VIBEE Agent Planning v244
# Goal-Oriented Planning for Browser Agents

name: agent_planning_v244
version: "244.0.0"
language: zig
module: agent_planning

types:
  Plan:
    fields:
      id: String
      goal: String
      steps: List<String>
      status: String
      confidence: Float

  PlanStep:
    fields:
      id: String
      action: String
      preconditions: List<String>
      postconditions: List<String>
      estimated_time_ms: Int

  PlanningStrategy:
    fields:
      hierarchical: Bool
      reactive: Bool
      hybrid: Bool

  GoalDecomposition:
    fields:
      main_goal: String
      subgoals: List<String>
      dependencies: Object

  PlanOptimization:
    fields:
      parallel_steps: Bool
      caching: Bool
      pruning: Bool

  PlanExecution:
    fields:
      current_step: Int
      completed_steps: List<String>
      failed_steps: List<String>

  PlanMetrics:
    fields:
      plans_created: Int
      plans_succeeded: Int
      avg_steps: Float
      avg_time_ms: Float

behaviors:
  - name: decompose_goal
    given: "High-level goal"
    when: "Planning started"
    then: "Break into subgoals"
    benchmark:
      vibee_ms: 5
      playwright_ms: 20
      puppeteer_ms: 25
      selenium_ms: 40
    deliverables:
      - "Goal analysis"
      - "Subgoal generation"
      - "Dependency mapping"

  - name: generate_plan
    given: "Subgoals"
    when: "Plan needed"
    then: "Create action sequence"
    benchmark:
      vibee_ms: 10
      playwright_ms: 40
      puppeteer_ms: 50
      selenium_ms: 80
    deliverables:
      - "Action selection"
      - "Ordering"
      - "Optimization"

  - name: validate_plan
    given: "Generated plan"
    when: "Validation needed"
    then: "Check feasibility"
    benchmark:
      vibee_ms: 3
      playwright_ms: 15
      puppeteer_ms: 20
      selenium_ms: 30
    deliverables:
      - "Precondition check"
      - "Resource check"
      - "Conflict detection"

  - name: optimize_plan
    given: "Valid plan"
    when: "Optimization enabled"
    then: "Improve efficiency"
    benchmark:
      vibee_ms: 5
      playwright_ms: 25
      puppeteer_ms: 30
      selenium_ms: 50
    deliverables:
      - "Parallelization"
      - "Step merging"
      - "Shortcut detection"

  - name: replan_on_failure
    given: "Step failed"
    when: "Replanning needed"
    then: "Generate new plan"
    benchmark:
      vibee_ms: 8
      playwright_ms: 35
      puppeteer_ms: 45
      selenium_ms: 70
    deliverables:
      - "Failure analysis"
      - "Alternative paths"
      - "Plan update"

  - name: monitor_execution
    given: "Plan executing"
    when: "Monitoring active"
    then: "Track progress"
    benchmark:
      vibee_ms: 1
      playwright_ms: 5
      puppeteer_ms: 8
      selenium_ms: 15
    deliverables:
      - "Step tracking"
      - "Progress reporting"
      - "Anomaly detection"

  - name: learn_from_plan
    given: "Plan completed"
    when: "Learning enabled"
    then: "Update planning knowledge"
    benchmark:
      vibee_ms: 2
      playwright_ms: 10
      puppeteer_ms: 15
      selenium_ms: 25
    deliverables:
      - "Success patterns"
      - "Failure patterns"
      - "Heuristic update"

test_cases:
  - name: test_decompose
    input: { goal: "Complete checkout" }
    expected: { subgoals: 5 }

  - name: test_generate
    input: { subgoals: ["add to cart", "checkout", "pay"] }
    expected: { plan: true }

  - name: test_validate
    input: { plan: true }
    expected: { valid: true }

  - name: test_optimize
    input: { plan: true }
    expected: { optimized: true }

  - name: test_replan
    input: { failed_step: "click checkout" }
    expected: { new_plan: true }

  - name: test_monitor
    input: { plan_id: "p1" }
    expected: { progress: true }

  - name: test_learn
    input: { plan_result: "success" }
    expected: { learned: true }

benchmark_summary:
  total_vibee_ms: 34
  total_playwright_ms: 150
  total_puppeteer_ms: 193
  total_selenium_ms: 310
  vibee_speedup: "4.4x vs Playwright"
