# FFI V v56570 - V Language @[extern]
# VIBEE → V Native Bindings
# φ² + 1/φ² = 3 | PHOENIX = 999

name: ffi_vlang_v56570
version: "56.5.70"
language: zig
module: ffi_vlang

creation_pattern:
  source: VibeeSpec
  transformer: VBindingsGenerator
  result: VModule

types:
  VType:
    fields:
      name: String
      v_type: String
      c_type: String
      is_pointer: Bool

  VExternFn:
    fields:
      name: String
      c_name: String
      params: List<String>
      return_type: String
      attributes: List<String>

  VStruct:
    fields:
      name: String
      fields: List<String>
      is_c_struct: Bool
      attributes: List<String>

  VEnum:
    fields:
      name: String
      values: List<String>
      is_flag: Bool

  VModule:
    fields:
      name: String
      imports: List<String>
      extern_fns: List<VExternFn>
      structs: List<VStruct>
      enums: List<VEnum>

  VPMConfig:
    fields:
      name: String
      version: String
      dependencies: List<String>

  VCallback:
    fields:
      name: String
      signature: String

  VCString:
    fields:
      value: String
      is_owned: Bool

behaviors:
  - name: generate_v_module
    given: VibeeSpec
    when: V module needed
    then: V source files

  - name: generate_extern_fn
    given: C function
    when: @[extern] needed
    then: VExternFn

  - name: map_vibee_to_v_type
    given: Vibee type
    when: Type mapping needed
    then: V type

  - name: generate_c_struct
    given: C struct
    when: C struct wrapper needed
    then: VStruct with @[typedef]

  - name: generate_v_mod
    given: Module config
    when: v.mod needed
    then: VPMConfig

  - name: handle_cstring
    given: C string
    when: String conversion needed
    then: VCString

  - name: handle_callback
    given: C callback
    when: V callback needed
    then: VCallback

  - name: handle_c_array
    given: C array
    when: Array wrapper needed
    then: V array or slice
