name: webarena_reporter_v22
version: "22.4.0"
language: zig
module: webarena_reporter_v22

types:
  ReportConfig:
    fields:
      output_dir: String
      format: String
      include_trajectories: Bool
      include_screenshots: Bool

  BenchmarkResult:
    fields:
      run_id: String
      timestamp: Timestamp
      agent_name: String
      total_tasks: Int
      passed: Int
      failed: Int
      success_rate: Float
      avg_steps: Float
      total_duration_ms: Int

  TaskReport:
    fields:
      task_id: String
      success: Bool
      steps: Int
      duration_ms: Int
      trajectory: List<String>
      error: Option<String>

  ComparisonReport:
    fields:
      baseline: Object
      current: Object
      delta_success_rate: Float
      delta_avg_steps: Float
      improved_tasks: List<String>
      regressed_tasks: List<String>

  Reporter:
    fields:
      config: Object
      results: List<String>

behaviors:
  - name: create_reporter
    given: ReportConfig
    when: Initialize reporter
    then: Reporter instance

  - name: add_result
    given: Reporter and TaskReport
    when: Add task result
    then: Updated reporter

  - name: generate_summary
    given: Reporter
    when: Generate summary
    then: BenchmarkResult

  - name: generate_json_report
    given: Reporter
    when: Export JSON
    then: JSON string

  - name: generate_markdown_report
    given: Reporter
    when: Export Markdown
    then: Markdown string

  - name: generate_csv_report
    given: Reporter
    when: Export CSV
    then: CSV string

  - name: compare_runs
    given: Reporter and baseline and current
    when: Compare results
    then: ComparisonReport

  - name: get_failed_tasks
    given: Reporter
    when: Get failures
    then: Failed task list

  - name: get_success_by_site
    given: Reporter
    when: Group by site
    then: Site stats

  - name: save_report
    given: Reporter and filename
    when: Save to file
    then: Save result

  - name: print_summary
    given: BenchmarkResult
    when: Print to console
    then: Printed
