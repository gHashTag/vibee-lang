name: build_cache_v19760
version: "1.0.0"
language: zig
module: build_cache_v19760

types:
  BuildCache:
    fields:
      cache_dir: String
      max_size: Int
      entries: Map<String,String>

  CacheHit:
    fields:
      key: String
      artifact_path: String
      age_ms: Int

behaviors:
  - name: cache_lookup
    given: "Build inputs hash"
    when: "Cache looks up"
    then: "Returns cached artifact"

  - name: cache_store
    given: "Build artifact"
    when: "Cache stores"
    then: "Stores in cache"

  - name: cache_prune
    given: "Prune request"
    when: "Cache prunes"
    then: "Removes old entries"
