# collab_export_v2621.vibee - Export
# Экспорт документов и проектов
# φ² + 1/φ² = 3 | PHOENIX = 999

name: collab_export_v2621
version: "2621.0.0"
language: zig
module: collab_export_v2621

types:
  ExportFormat:
    fields:
      format: String
      extension: String
      mime_type: String

  ExportConfig:
    fields:
      format: String
      include_history: Bool
      include_comments: Bool
      compress: Bool

  ExportResult:
    fields:
      file_name: String
      file_size: Int
      download_url: String
      expires_at: Timestamp

  ExportJob:
    fields:
      job_id: String
      status: String
      progress: Int
      started_at: Timestamp
      completed_at: Timestamp

behaviors:
  - name: export_document
    given: Document ID and ExportConfig
    when: Export requested
    then: Return ExportResult

  - name: export_project
    given: Project ID and ExportConfig
    when: Project export
    then: Return ExportJob

  - name: get_formats
    given: None
    when: Formats query
    then: Return ExportFormat list

  - name: check_job_status
    given: Job ID
    when: Status check
    then: Return ExportJob

  - name: cancel_export
    given: Job ID
    when: Cancel requested
    then: Cancel job

sacred_constants:
  phi: 1.618033988749895
  phoenix: 999
