# ═══════════════════════════════════════════════════════════════════════════════
# TYPESCRIPT CODEGEN v1084 - Real TypeScript Code Generator
# ═══════════════════════════════════════════════════════════════════════════════
# φ² + 1/φ² = 3 | PHOENIX = 999
# This generates ACTUAL TypeScript code from VIBEE specifications
# ═══════════════════════════════════════════════════════════════════════════════

name: typescript_codegen
version: "10.8.4"
language: zig
module: typescript_codegen

sacred_constants:
  phi: 1.618033988749895
  trinity: 3.0
  phoenix: 999

creation_pattern:
  source: VIBEESpec
  transformer: TypeScriptCodegen
  result: TypeScriptSourceCode

types:
  TSOutput:
    fields:
      source_code: String
      imports: List<String>
      interfaces: List<String>
      classes: List<String>
      functions: List<String>
      tests: String

  TSInterface:
    fields:
      name: String
      properties: List<TSProperty>
      exported: Bool

  TSProperty:
    fields:
      name: String
      ts_type: String
      optional: Bool

  TSClass:
    fields:
      name: String
      properties: List<TSProperty>
      methods: List<TSMethod>

  TSMethod:
    fields:
      name: String
      params: List<String>
      return_type: String
      is_async: Bool
      body: String

behaviors:
  - name: generate_ts_interface
    given: "VIBEE type definition"
    when: "Interface generation requested"
    then: "TypeScript interface generated"
    pas_pattern: ALG
    test_cases:
      - name: test_simple_interface
        input: '{"name": "User", "fields": [{"name": "id", "type": "Int"}, {"name": "name", "type": "String"}]}'
        expected: '{"code": "export interface User {\\n  id: number;\\n  name: string;\\n}"}'

  - name: generate_ts_class
    given: "VIBEE type with behaviors"
    when: "Class generation requested"
    then: "TypeScript class generated"
    pas_pattern: ALG
    test_cases:
      - name: test_class
        input: '{"name": "UserService"}'
        expected: '{"code": "export class UserService { ... }"}'

  - name: generate_ts_function
    given: "VIBEE behavior"
    when: "Function generation requested"
    then: "TypeScript function generated"
    pas_pattern: ALG
    test_cases:
      - name: test_function
        input: '{"name": "createUser", "async": true}'
        expected: '{"code": "export async function createUser(): Promise<User> { ... }"}'

  - name: generate_ts_tests
    given: "VIBEE test cases"
    when: "Test generation requested"
    then: "Jest tests generated"
    pas_pattern: ALG
    test_cases:
      - name: test_jest
        input: '{"test_name": "creates user"}'
        expected: '{"code": "describe(\\"User\\", () => { it(\\"creates user\\", () => { ... }); });"}'

  - name: map_type_to_ts
    given: "VIBEE type"
    when: "Type mapping"
    then: "TypeScript type"
    pas_pattern: PRE
    test_cases:
      - name: test_string
        input: '{"vibee_type": "String"}'
        expected: '{"ts_type": "string"}'
      - name: test_int
        input: '{"vibee_type": "Int"}'
        expected: '{"ts_type": "number"}'

  - name: generate_package_json
    given: "Project config"
    when: "package.json generation"
    then: "package.json content"
    pas_pattern: PRE
    test_cases:
      - name: test_package
        input: '{"name": "vibee-user"}'
        expected: '{"json": "{\\"name\\": \\"vibee-user\\"}"}'

type_mappings:
  String: "string"
  Int: "number"
  Float: "number"
  Bool: "boolean"
  List: "Array"
  Option: "| undefined"
  Object: "Record<string, unknown>"
  Timestamp: "Date"

ts_templates:
  interface_header: "export interface {name} {"
  property: "  {name}: {type};"
  property_optional: "  {name}?: {type};"
  class_header: "export class {name} {"
  method: "  {async}{name}({params}): {return_type} {\n    {body}\n  }"
  test: "describe(\"{suite}\", () => {\n  it(\"{name}\", () => {\n    {assertions}\n  });\n});"

# ═══════════════════════════════════════════════════════════════════════════════
# φ² + 1/φ² = 3 | PHOENIX = 999
# ═══════════════════════════════════════════════════════════════════════════════
