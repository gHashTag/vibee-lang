name: distributed_transaction_v20370
version: "1.0.0"
language: zig
module: distributed_transaction_v20370

types:
  Transaction:
    fields:
      id: String
      operations: List<String>
      status: String

  TransactionResult:
    fields:
      committed: Bool
      conflict: Bool
      retry_after_ms: Int

behaviors:
  - name: transaction_begin
    given: "Transaction config"
    when: "Client begins"
    then: "Returns transaction ID"

  - name: transaction_commit
    given: "Transaction ID"
    when: "Client commits"
    then: "Returns commit result"

  - name: transaction_rollback
    given: "Transaction ID"
    when: "Client rolls back"
    then: "Confirms rollback"
