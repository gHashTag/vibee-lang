# screen_space_v2660.vibee - Screen Space Effects
# Эффекты в экранном пространстве (SSAO, SSR, SSS)
# φ² + 1/φ² = 3 | PHOENIX = 999

name: screen_space_v2660
version: "2660.0.0"
language: zig
module: screen_space_v2660

types:
  SSAOConfig:
    fields:
      samples: Int
      radius: Float
      bias: Float
      intensity: Float

  SSRConfig:
    fields:
      max_steps: Int
      thickness: Float
      stride: Int
      fade_distance: Float

  SSSConfig:
    fields:
      kernel_size: Int
      strength: Float
      falloff: Float

  ScreenSpaceStats:
    fields:
      ssao_ms: Float
      ssr_ms: Float
      sss_ms: Float
      total_ms: Float

  EffectQuality:
    fields:
      preset: String
      half_res: Bool
      temporal: Bool

behaviors:
  - name: compute_ssao
    given: Depth and normals
    when: SSAO pass
    then: Return AO buffer

  - name: compute_ssr
    given: Color and depth
    when: SSR pass
    then: Return reflections

  - name: compute_sss
    given: Color and depth
    when: SSS pass
    then: Return subsurface

  - name: composite_effects
    given: All buffers
    when: Final composite
    then: Combine effects

  - name: get_stats
    given: None
    when: Stats query
    then: Return ScreenSpaceStats

sacred_constants:
  phi: 1.618033988749895
  phoenix: 999
