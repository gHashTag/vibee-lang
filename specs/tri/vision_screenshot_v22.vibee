name: vision_screenshot_v22
version: "22.4.0"
language: zig
module: vision_screenshot_v22

types:
  ScreenshotConfig:
    fields:
      format: String
      quality: Int
      full_page: Bool
      clip: Option<String>

  ScreenshotResult:
    fields:
      data: String
      width: Int
      height: Int
      format: String
      size_bytes: Int

  ViewportConfig:
    fields:
      width: Int
      height: Int
      device_scale_factor: Float
      is_mobile: Bool

  ElementBounds:
    fields:
      x: Int
      y: Int
      width: Int
      height: Int

  AnnotatedScreenshot:
    fields:
      screenshot: Object
      annotations: List<String>
      element_boxes: List<String>

  ScreenshotCapture:
    fields:
      cdp_client: Object
      config: Object

behaviors:
  - name: create_capture
    given: CDP client and ScreenshotConfig
    when: Initialize capture
    then: ScreenshotCapture instance

  - name: capture_viewport
    given: ScreenshotCapture
    when: Capture visible area
    then: ScreenshotResult

  - name: capture_full_page
    given: ScreenshotCapture
    when: Capture full page
    then: ScreenshotResult

  - name: capture_element
    given: ScreenshotCapture and selector
    when: Capture element
    then: ScreenshotResult

  - name: capture_region
    given: ScreenshotCapture and bounds
    when: Capture region
    then: ScreenshotResult

  - name: set_viewport
    given: ScreenshotCapture and ViewportConfig
    when: Set viewport size
    then: Viewport set

  - name: annotate_elements
    given: ScreenshotCapture and selectors
    when: Add element boxes
    then: AnnotatedScreenshot

  - name: highlight_element
    given: ScreenshotCapture and selector
    when: Highlight element
    then: Highlighted screenshot

  - name: encode_base64
    given: Screenshot data
    when: Encode to base64
    then: Base64 string

  - name: save_to_file
    given: ScreenshotResult and path
    when: Save to disk
    then: Save result

  - name: resize
    given: ScreenshotResult and dimensions
    when: Resize image
    then: Resized screenshot
