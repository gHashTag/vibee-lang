# ═══════════════════════════════════════════════════════════════════════════════
# DATASET BUILDER v1003 - Training Dataset Builder
# ═══════════════════════════════════════════════════════════════════════════════
# φ² + 1/φ² = 3 | PHOENIX = 999
# ═══════════════════════════════════════════════════════════════════════════════

name: dataset_builder
version: "10.0.3"
language: zig
module: dataset_builder

sacred_constants:
  phi: 1.618033988749895
  trinity: 3.0
  phoenix: 999

creation_pattern:
  source: RawData
  transformer: DatasetBuilder
  result: TrainingDataset

types:
  DatasetConfig:
    fields:
      name: String
      languages: List<String>
      max_samples: Int
      split_ratio: Float

  TrainingDataset:
    fields:
      train: List<Sample>
      validation: List<Sample>
      test: List<Sample>

  Sample:
    fields:
      input: String
      output: String
      language: String
      task_type: String

behaviors:
  - name: build_spec_dataset
    given: "VIBEE specs"
    when: "Dataset building"
    then: "Spec-code pairs"
    pas_pattern: ALG
    test_cases:
      - name: test_spec
        input: '{"specs_dir": "specs/tri/"}'
        expected: '{"samples": 1000}'

  - name: build_code_dataset
    given: "Code repositories"
    when: "Dataset building"
    then: "Code samples"
    pas_pattern: ALG
    test_cases:
      - name: test_code
        input: '{"repos": [...]}'
        expected: '{"samples": 100000}'

  - name: augment_dataset
    given: "Base dataset"
    when: "Augmentation"
    then: "Augmented dataset"
    pas_pattern: ALG
    test_cases:
      - name: test_augment
        input: '{"dataset": {...}, "factor": 3}'
        expected: '{"samples": 3000}'

  - name: split_dataset
    given: "Full dataset"
    when: "Splitting"
    then: "Train/val/test splits"
    pas_pattern: ALG
    test_cases:
      - name: test_split
        input: '{"total": 10000, "ratio": 0.8}'
        expected: '{"train": 8000, "val": 1000, "test": 1000}'

# ═══════════════════════════════════════════════════════════════════════════════
# φ² + 1/φ² = 3 | PHOENIX = 999
# ═══════════════════════════════════════════════════════════════════════════════
