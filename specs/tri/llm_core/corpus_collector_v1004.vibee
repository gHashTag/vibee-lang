# ═══════════════════════════════════════════════════════════════════════════════
# CORPUS COLLECTOR v1004 - Code Corpus Collector
# ═══════════════════════════════════════════════════════════════════════════════
# φ² + 1/φ² = 3 | PHOENIX = 999
# ═══════════════════════════════════════════════════════════════════════════════

name: corpus_collector
version: "10.0.4"
language: zig
module: corpus_collector

sacred_constants:
  phi: 1.618033988749895
  trinity: 3.0
  phoenix: 999

creation_pattern:
  source: CodeSources
  transformer: CorpusCollector
  result: CodeCorpus

types:
  CodeCorpus:
    fields:
      files: List<CodeFile>
      total_tokens: Int
      languages: List<String>

  CodeFile:
    fields:
      path: String
      content: String
      language: String
      tokens: Int

  CollectorConfig:
    fields:
      sources: List<String>
      languages: List<String>
      min_stars: Int
      max_file_size: Int

behaviors:
  - name: collect_github
    given: "GitHub config"
    when: "Collection"
    then: "Code corpus"
    pas_pattern: ALG
    test_cases:
      - name: test_github
        input: '{"languages": ["python", "rust"], "min_stars": 100}'
        expected: '{"files": 10000}'

  - name: filter_quality
    given: "Raw corpus"
    when: "Quality filtering"
    then: "Filtered corpus"
    pas_pattern: ALG
    test_cases:
      - name: test_filter
        input: '{"corpus": {...}}'
        expected: '{"filtered": 8000}'

  - name: deduplicate
    given: "Corpus"
    when: "Deduplication"
    then: "Deduplicated corpus"
    pas_pattern: ALG
    test_cases:
      - name: test_dedup
        input: '{"corpus": {...}}'
        expected: '{"unique": 7500}'

  - name: extract_pairs
    given: "Corpus"
    when: "Pair extraction"
    then: "Spec-code pairs"
    pas_pattern: ALG
    test_cases:
      - name: test_pairs
        input: '{"corpus": {...}}'
        expected: '{"pairs": 5000}'

# ═══════════════════════════════════════════════════════════════════════════════
# φ² + 1/φ² = 3 | PHOENIX = 999
# ═══════════════════════════════════════════════════════════════════════════════
