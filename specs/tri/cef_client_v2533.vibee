# cef_client_v2533.vibee - CEF Client
# Обработчики событий браузера
# φ² + 1/φ² = 3 | PHOENIX = 999

name: cef_client_v2533
version: "2533.0.0"
language: zig
module: cef_client_v2533

types:
  CefClient:
    fields:
      base: Object
      get_life_span_handler: Object
      get_load_handler: Object
      get_display_handler: Object
      get_request_handler: Object
      get_keyboard_handler: Object
      get_download_handler: Object
      get_context_menu_handler: Object

  CefLifeSpanHandler:
    fields:
      base: Object
      on_before_popup: Object
      on_after_created: Object
      do_close: Object
      on_before_close: Object

  CefLoadHandler:
    fields:
      base: Object
      on_loading_state_change: Object
      on_load_start: Object
      on_load_end: Object
      on_load_error: Object

  CefDisplayHandler:
    fields:
      base: Object
      on_address_change: Object
      on_title_change: Object
      on_favicon_urlchange: Object
      on_fullscreen_mode_change: Object
      on_tooltip: Object
      on_status_message: Object
      on_console_message: Object

  CefRequestHandler:
    fields:
      base: Object
      on_before_browse: Object
      on_open_urlfrom_tab: Object
      get_resource_request_handler: Object
      on_certificate_error: Object

behaviors:
  - name: create_client
    given: Handler callbacks
    when: Client creation requested
    then: Return configured CefClient

  - name: on_after_created
    given: CefBrowser created
    when: Browser ready
    then: Store browser reference and notify

  - name: on_before_close
    given: CefBrowser closing
    when: Close initiated
    then: Cleanup and release browser

  - name: on_load_end
    given: CefBrowser and HTTP status
    when: Page load complete
    then: Notify load completion

  - name: on_load_error
    given: CefBrowser and error info
    when: Load failed
    then: Display error page

  - name: on_address_change
    given: CefBrowser and new URL
    when: URL changed
    then: Update address bar

  - name: on_title_change
    given: CefBrowser and new title
    when: Title changed
    then: Update window title

  - name: on_console_message
    given: CefBrowser and console message
    when: Console.log called
    then: Forward to debug output

sacred_constants:
  phi: 1.618033988749895
  phi_squared_plus_inverse_squared: 3
  phoenix: 999
