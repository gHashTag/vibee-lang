# VIBEE YOLO MODE V - Swarm Firefly v642
# φ² + 1/φ² = 3 | PHOENIX = 999
# Firefly Algorithm for optimization

name: swarm_firefly_v642
version: "5.0.0"
language: zig
module: swarm_firefly

sacred_constants:
  phi: 1.618033988749895
  phi_squared_plus_inverse_squared: 3
  phoenix: 999

creation_pattern:
  source: LightProblem
  transformer: FireflySwarm
  result: BrightestSolution

types:
  Firefly:
    fields:
      position: String
      brightness: Float
      attractiveness: Float

  FireflyConfig:
    fields:
      population: Int
      alpha: Float
      beta_0: Float
      gamma: Float

  FireflyState:
    fields:
      brightest: String
      brightest_value: Float
      iteration: Int

  FireflyMetrics:
    fields:
      movements: Int
      brightness_improvement: Float
      convergence: Float

behaviors:
  - name: initialize_fireflies
    given: FireflyConfig
    when: Initialization
    then: Fireflies randomly positioned

  - name: calculate_brightness
    given: Firefly position
    when: Brightness calculation
    then: Brightness set to fitness value

  - name: calculate_attractiveness
    given: Distance between fireflies
    when: Attractiveness calculation
    then: Attractiveness computed with light absorption

  - name: move_firefly
    given: Brighter firefly nearby
    when: Movement
    then: Firefly moves toward brighter one

  - name: random_walk
    given: Brightest firefly
    when: Random exploration
    then: Brightest performs random walk

  - name: update_brightest
    given: All fireflies
    when: Brightest update
    then: Brightest firefly tracked

  - name: adapt_alpha
    given: Iteration count
    when: Alpha adaptation
    then: Randomness parameter reduced

  - name: rank_fireflies
    given: All brightnesses
    when: Ranking
    then: Fireflies sorted by brightness

test_cases:
  - name: test_fireflies_init
    input:
      population: 40
    expected:
      initialized: true

  - name: test_brightness_calc
    input:
      position: valid
    expected:
      brightness_computed: true

  - name: test_attractiveness_calc
    input:
      distance: 1.0
      gamma: 1.0
    expected:
      attractiveness_computed: true

  - name: test_firefly_move
    input:
      brighter_nearby: true
    expected:
      moved: true

  - name: test_random_walk
    input:
      is_brightest: true
    expected:
      walked: true

  - name: test_brightest_update
    input:
      fireflies: evaluated
    expected:
      brightest_tracked: true

  - name: test_alpha_adapt
    input:
      iteration: 50
    expected:
      alpha_reduced: true

  - name: test_fireflies_rank
    input:
      population: 40
    expected:
      ranked: true

  - name: test_phi_firefly
    input:
      phi: 1.618033988749895
    expected:
      golden_beta: 1.618033988749895
