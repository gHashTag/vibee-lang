# FFI Odin v56580 - Odin foreign import
# VIBEE → Odin Native Bindings
# φ² + 1/φ² = 3 | PHOENIX = 999

name: ffi_odin_v56580
version: "56.5.80"
language: zig
module: ffi_odin

creation_pattern:
  source: VibeeSpec
  transformer: OdinBindingsGenerator
  result: OdinPackage

types:
  OdinType:
    fields:
      name: String
      odin_type: String
      c_type: String
      is_distinct: Bool

  OdinForeignProc:
    fields:
      name: String
      c_name: String
      params: List<String>
      return_type: String
      calling_convention: String

  OdinStruct:
    fields:
      name: String
      fields: List<String>
      is_packed: Bool
      alignment: Option<Int>

  OdinEnum:
    fields:
      name: String
      backing_type: String
      values: List<String>

  OdinForeignBlock:
    fields:
      library: String
      procs: List<OdinForeignProc>
      system_lib: Bool

  OdinPackage:
    fields:
      name: String
      foreign_blocks: List<OdinForeignBlock>
      structs: List<OdinStruct>
      enums: List<OdinEnum>

  OdinCallback:
    fields:
      name: String
      signature: String
      convention: String

  OdinSlice:
    fields:
      element_type: String
      is_multi_pointer: Bool

behaviors:
  - name: generate_odin_package
    given: VibeeSpec
    when: Odin package needed
    then: Odin source files

  - name: generate_foreign_proc
    given: C function
    when: foreign proc needed
    then: OdinForeignProc

  - name: map_vibee_to_odin_type
    given: Vibee type
    when: Type mapping needed
    then: Odin type

  - name: generate_struct
    given: C struct
    when: Odin struct needed
    then: OdinStruct

  - name: generate_foreign_block
    given: Library config
    when: foreign block needed
    then: OdinForeignBlock

  - name: handle_cstring
    given: C string
    when: cstring needed
    then: cstring type

  - name: handle_callback
    given: C callback
    when: proc pointer needed
    then: OdinCallback

  - name: handle_slice
    given: C array
    when: Slice needed
    then: OdinSlice
