# VIBEE YOLO MODE VIII - browser_perf_flamegraph v893
name: browser_perf_flamegraph_v893
version: "8.0.0"
language: zig
module: browser_perf_flamegraph

sacred_constants:
  phi: 1.618033988749895
  phoenix: 999

types:
  ProfilerConfig:
    fields:
      sample_rate: Int
      max_samples: Int
      include_stack: Bool

  ProfilerResult:
    fields:
      samples: Int
      duration: Float
      cpu_time: Float
      memory_peak: Int

  FlameNode:
    fields:
      name: String
      value: Int
      children: List<String>

behaviors:
  - name: start_profiling
    given: ProfilerConfig
    when: Start
    then: flame graph generation started
  - name: stop_profiling
    given: Profiler state
    when: Stop
    then: Profiling stopped
  - name: generate_flamegraph
    given: ProfilerResult
    when: Generate
    then: Flamegraph generated
  - name: analyze_timeline
    given: ProfilerResult
    when: Analyze
    then: Timeline analyzed
  - name: export_report
    given: Analysis
    when: Export
    then: Report exported

test_cases:
  - name: test_browser_perf_flamegraph_start
    input: {sample_rate: 1000}
    expected: {started: true}
  - name: test_browser_perf_flamegraph_stop
    input: {profiling: true}
    expected: {stopped: true}
  - name: test_browser_perf_flamegraph_flamegraph
    input: {result: valid}
    expected: {generated: true}
  - name: test_browser_perf_flamegraph_analyze
    input: {result: valid}
    expected: {analyzed: true}
  - name: test_phi_browser_perf_flamegraph
    input: {phi: 1.618033988749895}
    expected: {golden: true}
