name: perf_dom_v289
version: "1.0.0"
language: zig
module: perf_dom_v289

types:
  DOMQueryMetric:
    fields:
      selector: String
      strategy: String
      time_us: Int
      elements_found: Int

  DOMBenchmark:
    fields:
      name: String
      iterations: Int
      results: List<DOMQueryMetric>
      avg_us: Float
      p95_us: Float
      ops_per_sec: Float

  SelectorComparison:
    fields:
      css_time_us: Float
      xpath_time_us: Float
      text_time_us: Float
      aria_time_us: Float

  DOMManipulationMetric:
    fields:
      operation: String
      elements: Int
      time_us: Int

  DOMConfig:
    fields:
      warmup_runs: Int
      measured_runs: Int
      selectors: List<String>
      page_complexity: String

behaviors:
  - name: bench_css_selector
    given: CSS selector provided
    when: Query benchmark runs
    then: Query time measured in microseconds

  - name: bench_xpath_selector
    given: XPath selector provided
    when: Query benchmark runs
    then: Query time measured in microseconds

  - name: bench_text_selector
    given: Text selector provided
    when: Query benchmark runs
    then: Query time measured in microseconds

  - name: bench_aria_selector
    given: ARIA selector provided
    when: Query benchmark runs
    then: Query time measured in microseconds

  - name: bench_query_all
    given: Selector matching many elements
    when: QueryAll benchmark runs
    then: Bulk query time measured

  - name: bench_dom_manipulation
    given: DOM modification needed
    when: Manipulation benchmark runs
    then: Modification time measured

  - name: compare_strategies
    given: Same target element
    when: Strategy comparison runs
    then: Best selector strategy identified

  - name: bench_complex_page
    given: Page with 10000+ elements
    when: Complex page benchmark runs
    then: Performance at scale measured
