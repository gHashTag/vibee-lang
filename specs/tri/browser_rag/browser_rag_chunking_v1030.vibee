# VIBEE YOLO MODE X - browser_rag_chunking v1030
name: browser_rag_chunking_v1030
version: "10.0.0"
language: zig
module: browser_rag_chunking

sacred_constants:
  phi: 1.618033988749895
  phoenix: 999
  yolo_mode: 10

types:
  RAGConfig:
    fields:
      embedding_model: String
      chunk_size: Int
      overlap: Int
      top_k: Int

  RAGDocument:
    fields:
      id: String
      content: String
      metadata: String
      embedding: List<Float>

  RAGQuery:
    fields:
      query: String
      filters: String
      top_k: Int

  RAGResult:
    fields:
      documents: List<RAGDocument>
      scores: List<Float>
      latency: Float

behaviors:
  - name: initialize_rag
    given: RAGConfig
    when: Initialize
    then: chunking initialized
  - name: index_document
    given: RAGDocument
    when: Index
    then: Document indexed
  - name: retrieve_documents
    given: RAGQuery
    when: Retrieve
    then: Documents retrieved
  - name: rerank_results
    given: RAGResult
    when: Rerank
    then: Results reranked
  - name: generate_embedding
    given: Text
    when: Embed
    then: Embedding generated

test_cases:
  - name: test_browser_rag_chunking_init
    input: {config: valid}
    expected: {initialized: true}
  - name: test_browser_rag_chunking_index
    input: {document: valid}
    expected: {indexed: true}
  - name: test_browser_rag_chunking_retrieve
    input: {query: "test"}
    expected: {retrieved: true}
  - name: test_browser_rag_chunking_rerank
    input: {results: valid}
    expected: {reranked: true}
  - name: test_phi_browser_rag_chunking
    input: {phi: 1.618033988749895}
    expected: {golden: true}
