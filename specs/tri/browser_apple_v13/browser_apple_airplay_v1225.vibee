# VIBEE YOLO MODE XIII - browser_apple_airplay v1225
# AirPlay Streaming - Multi-device Casting
name: browser_apple_airplay_v1225
version: "13.0.0"
language: zig
module: browser_apple_airplay

sacred_constants:
  phi: 1.618033988749895
  phi_identity: 3
  phoenix: 999
  yolo_mode: 13

types:
  AirPlayDevice:
    fields:
      id: String
      name: String
      type: String
      supports_video: Bool

  AirPlaySession:
    fields:
      device: String
      content_type: String
      state: String

  ScreenMirror:
    fields:
      resolution: String
      frame_rate: Int
      audio_enabled: Bool

  RoutePickerConfig:
    fields:
      button_style: String
      prioritizes_video: Bool

behaviors:
  - name: discover_devices
    given: Device filter
    when: Discover
    then: AirPlay devices discovered
  - name: start_streaming
    given: AirPlaySession
    when: Start
    then: Streaming started
  - name: mirror_screen
    given: ScreenMirror
    when: Mirror
    then: Screen mirrored
  - name: show_picker
    given: RoutePickerConfig
    when: Show
    then: Route picker shown
  - name: stop_streaming
    given: AirPlaySession
    when: Stop
    then: Streaming stopped

test_cases:
  - name: test_airplay_discover
    input: {filter: "video"}
    expected: {discovered: true}
  - name: test_airplay_stream
    input: {content: "video"}
    expected: {started: true}
  - name: test_airplay_mirror
    input: {resolution: "1080p"}
    expected: {mirrored: true}
  - name: test_airplay_picker
    input: {style: "prominent"}
    expected: {shown: true}
  - name: test_phi_airplay
    input: {phi: 1.618033988749895}
    expected: {identity: 3}
