# VIBEE Specification v13497
# Prompt Templates
# KOSCHEI CYCLE 11 - 1000000x SPEEDUP

name: llm_prompts
version: "13497"
language: zig
module: llm_prompts

types:
  PromptTemplate:
    fields:
      id: String
      name: String
      template: String
      variables: List<String>
      version: String

  PromptVariable:
    fields:
      name: String
      var_type: String
      required: Bool
      default_value: String
      validation: String

  CompiledPrompt:
    fields:
      template_id: String
      content: String
      tokens: Int
      variables_used: Object

  PromptLibrary:
    fields:
      templates: List<Object>
      categories: List<String>
      version: String

  PromptMetrics:
    fields:
      templates_used: Int
      compilations: Int
      avg_tokens: Float
      cache_hits: Int

  PromptChain:
    fields:
      id: String
      steps: List<Object>
      variables: Object
      output_format: String

behaviors:
  - name: compile_template
    given: Template and variables
    When: Compilation requested
    then: Prompt compiled with values

  - name: validate_variables
    given: Variables for template
    When: Validation requested
    then: Variables validated

  - name: chain_prompts
    given: Multiple templates
    When: Chaining requested
    then: Prompts chained together

  - name: optimize_prompt
    given: Compiled prompt
    When: Optimization requested
    then: Prompt optimized for tokens

  - name: version_template
    given: Template changes
    When: Version update needed
    then: New version created

  - name: cache_compiled
    given: Frequently used prompt
    When: Caching enabled
    then: Compiled prompt cached

creation_pattern:
  source: PromptTemplate
  transformer: PromptCompiler
  result: CompiledPrompt
