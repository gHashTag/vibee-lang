# VIBEE Specification v13512
# Screen Capture
# KOSCHEI CYCLE 11 - 1000000x SPEEDUP

name: screen_capture
version: "13512"
language: zig
module: screen_capture

types:
  CaptureConfig:
    fields:
      source_id: String
      region: Object
      scale: Float
      cursor_visible: Bool

  CaptureRegion:
    fields:
      x: Int
      y: Int
      width: Int
      height: Int

  CapturedFrame:
    fields:
      frame_number: Int
      timestamp: Int
      format: String
      data: List<Int>
      metadata: Object

  CaptureState:
    fields:
      is_capturing: Bool
      frames_captured: Int
      current_fps: Float
      dropped_frames: Int

  CaptureMetrics:
    fields:
      total_frames: Int
      dropped_frames: Int
      avg_capture_time_ms: Float
      memory_usage_mb: Int

  CursorInfo:
    fields:
      x: Int
      y: Int
      visible: Bool
      cursor_type: String

behaviors:
  - name: start_capture
    given: Capture configuration
    When: Capture requested
    then: Screen capture started

  - name: capture_frame
    given: Active capture
    When: Frame requested
    then: Single frame captured

  - name: set_region
    given: Capture region
    When: Region change requested
    then: Capture region updated

  - name: toggle_cursor
    given: Cursor visibility setting
    When: Toggle requested
    then: Cursor visibility changed

  - name: pause_capture
    given: Active capture
    When: Pause requested
    then: Capture paused

  - name: stop_capture
    given: Active capture
    When: Stop requested
    then: Capture stopped

creation_pattern:
  source: CaptureConfig
  transformer: ScreenCapture
  result: CapturedFrame
