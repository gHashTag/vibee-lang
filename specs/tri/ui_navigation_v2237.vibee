# VIBEE UI Navigation v2237
# Navigation Component based on Nielsen Norman heuristics
# φ² + 1/φ² = 3 | PHOENIX = 999

name: ui_navigation_v2237
version: "2237.0.0"
language: zig
module: ui_navigation

sacred_formula:
  phi: 1.618033988749895
  identity: "φ² + 1/φ² = 3"
  phoenix: 999

creation_pattern:
  source: NavigationConfig
  transformer: NavigationRenderer
  result: NavigationUI

types:
  NavItem:
    fields:
      id: String
      label: String
      path: String
      icon: Option<String>
      badge: Option<String>
      children: List<NavItem>
      active: Bool
      disabled: Bool

  NavigationState:
    fields:
      items: List<NavItem>
      active_path: String
      expanded_ids: List<String>
      mobile_open: Bool
      search_query: String

  NavEvent:
    fields:
      type: String
      item_id: String
      path: String
      timestamp: Timestamp

  Breadcrumb:
    fields:
      items: List<NavItem>
      separator: String
      max_items: Int

behaviors:
  - name: render_navigation
    given: "Navigation items configuration"
    when: "Navigation component mounted"
    then: "Navigation UI rendered with active states"
    test_cases:
      - name: test_render_nav
        input: { items: 9 }
        expected: { rendered: true, items_count: 9 }

  - name: set_active_item
    given: "Current path from router"
    when: "Route changes"
    then: "Matching nav item marked active"
    test_cases:
      - name: test_set_active
        input: { path: "/modules" }
        expected: { active_id: "modules" }

  - name: toggle_mobile_menu
    given: "Mobile viewport detected"
    when: "Hamburger menu clicked"
    then: "Mobile menu toggled open/closed"
    test_cases:
      - name: test_toggle_mobile
        input: { current_state: false }
        expected: { new_state: true }

  - name: expand_submenu
    given: "Nav item with children"
    when: "Parent item clicked"
    then: "Submenu expanded with animation"
    test_cases:
      - name: test_expand_submenu
        input: { item_id: "settings", has_children: true }
        expected: { expanded: true }

  - name: search_navigation
    given: "Search query entered"
    when: "User types in nav search"
    then: "Matching items highlighted"
    test_cases:
      - name: test_search_nav
        input: { query: "mod" }
        expected: { matches: ["modules"] }

  - name: keyboard_navigation
    given: "Focus on navigation"
    when: "Arrow keys pressed"
    then: "Focus moves between items"
    test_cases:
      - name: test_arrow_down
        input: { current_focus: 0, key: "ArrowDown" }
        expected: { new_focus: 1 }
      - name: test_arrow_up
        input: { current_focus: 2, key: "ArrowUp" }
        expected: { new_focus: 1 }

  - name: generate_breadcrumbs
    given: "Current path hierarchy"
    when: "Breadcrumb component rendered"
    then: "Path segments as clickable links"
    test_cases:
      - name: test_breadcrumbs
        input: { path: "/modules/llm/openai" }
        expected: { crumbs: ["Home", "Modules", "LLM", "OpenAI"] }

  - name: handle_nav_click
    given: "Nav item clicked"
    when: "Click event fired"
    then: "Navigation triggered, event logged"
    test_cases:
      - name: test_nav_click
        input: { item_id: "pas", path: "/pas" }
        expected: { navigated: true, event_logged: true }

pas_analysis:
  current_algorithm: "Linear item search O(n)"
  predicted_improvement: "Indexed lookup O(1)"
  confidence: 0.80
  patterns_applied: [HSH, PRE]
  timeline: "2026 Q2"

self_evolution:
  enabled: true
  mutation_rate: 0.0382
  fitness_function: "navigation_speed"
  generation: 2237
