# VIBEE Specification v13558
# API Call Tool
# KOSCHEI CYCLE 11 - 1000000x SPEEDUP

name: tools_api
version: "13558"
language: zig
module: tools_api

types:
  APITool:
    fields:
      id: String
      base_url: String
      headers: Object
      auth: Object

  APIRequest:
    fields:
      method: String
      url: String
      headers: Object
      body: Object
      timeout_ms: Int

  APIResponse:
    fields:
      status_code: Int
      headers: Object
      body: Object
      duration_ms: Int

  APIConfig:
    fields:
      timeout_ms: Int
      retry_count: Int
      rate_limit: Int

  APIMetrics:
    fields:
      requests_total: Int
      successful: Int
      failed: Int
      avg_latency_ms: Float

  APIAuth:
    fields:
      auth_type: String
      credentials: Object

behaviors:
  - name: get
    given: URL and params
    When: GET requested
    then: GET response returned

  - name: post
    given: URL and body
    When: POST requested
    then: POST response returned

  - name: put
    given: URL and body
    When: PUT requested
    then: PUT response returned

  - name: delete
    given: URL
    When: DELETE requested
    then: DELETE response returned

  - name: authenticate
    given: Auth config
    When: Auth needed
    then: Authentication performed

  - name: handle_rate_limit
    given: Rate limit hit
    When: Rate limited
    then: Request retried

creation_pattern:
  source: APIRequest
  transformer: APIClient
  result: APIResponse
