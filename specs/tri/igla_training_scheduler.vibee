# iGLA Training Scheduler
# Learning rate scheduling
# φ² + 1/φ² = 3 | V = n × 3^k × π^m × φ^p

name: igla_training_scheduler
version: "1.0.0"
language: zig
module: igla_training_scheduler

sacred_constants:
  phi: 1.618033988749895
  trinity: 3.0
  phoenix: 999

types:
  SchedulerConfig:
    fields:
      scheduler_type: String
      warmup_steps: Int
      total_steps: Int
      min_lr_ratio: Float
      num_cycles: Int

  SchedulerState:
    fields:
      current_step: Int
      current_lr: Float
      warmup_complete: Bool

  LRSchedule:
    fields:
      step: Int
      learning_rate: Float
      phase: String

  SchedulerMetrics:
    fields:
      warmup_steps: Int
      decay_steps: Int
      final_lr: Float
      avg_lr: Float

behaviors:
  - name: cosine_schedule
    given: "Step"
    when: "Cosine decay"
    then: "Cosine annealing to min_lr"

  - name: linear_warmup
    given: "Step"
    when: "Warmup"
    then: "Linear warmup from 0"

  - name: wsd_schedule
    given: "Step"
    when: "WSD"
    then: "Warmup-Stable-Decay schedule"

  - name: constant_schedule
    given: "Step"
    when: "Constant"
    then: "Fixed learning rate"

  - name: step_lr
    given: "Step"
    when: "Step decay"
    then: "Discrete step decay"

  - name: get_lr
    given: "Current step"
    when: "LR query"
    then: "Current learning rate"

  - name: phi_scheduler_harmony
    given: "Schedule"
    when: "Harmony"
    then: "φ-based warmup ratio"
