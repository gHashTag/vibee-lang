name: mock_ollama_v22
version: "22.6.0"
language: zig
module: mock_ollama_v22

types:
  MockConfig:
    fields:
      port: Int
      latency_ms: Int
      error_rate: Float

  MockResponse:
    fields:
      response: String
      model: String
      done: Bool

  MockRequest:
    fields:
      model: String
      prompt: String
      timestamp: Timestamp

  MockOllama:
    fields:
      config: Object
      responses: List<String>
      requests: List<String>

behaviors:
  - name: create_mock
    given: MockConfig
    when: Initialize mock
    then: MockOllama instance

  - name: start
    given: MockOllama
    when: Start mock server
    then: Started

  - name: stop
    given: MockOllama
    when: Stop mock server
    then: Stopped

  - name: set_response
    given: MockOllama and response
    when: Set mock response
    then: Response set

  - name: set_responses
    given: MockOllama and responses
    when: Set response queue
    then: Responses set

  - name: set_error
    given: MockOllama and error
    when: Set error response
    then: Error set

  - name: get_requests
    given: MockOllama
    When: Get received requests
    then: Request list

  - name: get_last_request
    given: MockOllama
    When: Get last request
    then: MockRequest

  - name: reset
    given: MockOllama
    When: Reset mock
    then: Reset complete

  - name: get_url
    given: MockOllama
    When: Get mock URL
    then: URL string
