# VIBEE Specification - IGLA SWE Planner
# Task planning and decomposition
# V = n × 3^k × π^m × φ^p | φ² + 1/φ² = 3 | PHOENIX = 999

name: igla_swe_planner
version: "1.0.0"
language: zig
module: igla_swe_planner

types:
  Plan:
    fields:
      id: String
      goal: String
      steps: String
      dependencies: String
      estimated_time_ms: Int

  PlanStep:
    fields:
      id: String
      action: String
      agent_type: String
      inputs: String
      outputs: String

  PlanConfig:
    fields:
      max_depth: Int
      phi_decomposition: Bool
      parallel_allowed: Bool

  PlanMetrics:
    fields:
      plans_created: Int
      avg_steps: Float
      success_rate: Float

behaviors:
  - name: create_plan
    given: Goal description
    when: Planning
    then: Plan with steps created

  - name: decompose_task
    given: Complex task
    when: Decomposition
    then: Subtasks using phi ratio

  - name: order_steps
    given: Plan steps
    when: Ordering
    then: Topologically sorted steps

  - name: estimate_time
    given: Plan
    when: Estimation
    then: Time estimate returned

  - name: validate_plan
    given: Plan
    when: Validation
    then: Plan validity checked

  - name: get_metrics
    given: Planner
    when: Metrics requested
    then: Planner metrics returned

test_cases:
  - name: test_create_plan
    input: { goal: "implement feature X" }
    expected: { has_steps: true }

  - name: test_decompose
    input: { task: "complex task" }
    expected: { subtasks_count: 3 }

  - name: test_order
    input: { steps: ["a", "b", "c"] }
    expected: { ordered: true }

  - name: test_metrics
    input: {}
    expected: { plans_created: 0 }
