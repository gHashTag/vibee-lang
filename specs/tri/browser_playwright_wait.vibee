# Playwright Wait Strategies
# Wait for elements, navigation, network
# Timeout and retry handling

name: browser_playwright_wait
version: "1.0.0"
language: zig
module: browser_playwright_wait

types:
  WaitCondition:
    fields:
      condition_type: String
      selector: Option<String>
      state: Option<String>
      timeout_ms: Int

  WaitForSelectorOptions:
    fields:
      state: String
      timeout: Int
      strict: Bool

  WaitForNavigationOptions:
    fields:
      url: Option<String>
      wait_until: String
      timeout: Int

  WaitForLoadStateOptions:
    fields:
      state: String
      timeout: Int

  WaitForFunctionOptions:
    fields:
      polling: String
      timeout: Int

  WaitResult:
    fields:
      success: Bool
      waited_ms: Int
      error: Option<String>

  RetryOptions:
    fields:
      max_retries: Int
      delay_ms: Int
      backoff_multiplier: Float

behaviors:
  - name: wait_for_selector
    given: Page, selector, and options
    when: Element wait needed
    then: Returns wait result

  - name: wait_for_navigation
    given: Page and navigation options
    when: Navigation wait needed
    then: Returns wait result

  - name: wait_for_load_state
    given: Page and load state
    when: Load state wait needed
    then: Returns wait result

  - name: wait_for_url
    given: Page and URL pattern
    when: URL wait needed
    then: Returns wait result

  - name: wait_for_function
    given: Page and JavaScript function
    when: Custom condition wait needed
    then: Returns wait result

  - name: wait_for_timeout
    given: Duration in milliseconds
    when: Fixed delay needed
    then: Returns after timeout

  - name: wait_for_response
    given: Page and URL pattern
    when: Network response wait needed
    then: Returns response data

  - name: retry_until
    given: Action and retry options
    when: Retry logic needed
    then: Returns final result
