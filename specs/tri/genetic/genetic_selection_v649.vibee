# VIBEE YOLO MODE V - Genetic Selection v649
# φ² + 1/φ² = 3 | PHOENIX = 999
# Selection methods for genetic algorithms

name: genetic_selection_v649
version: "5.0.0"
language: zig
module: genetic_selection

sacred_constants:
  phi: 1.618033988749895
  phi_squared_plus_inverse_squared: 3
  phoenix: 999

creation_pattern:
  source: Population
  transformer: SelectionOperator
  result: SelectedParents

types:
  SelectionType:
    fields:
      name: String
      pressure: Float
      elitism: Bool

  SelectionResult:
    fields:
      selected: String
      selection_pressure: Float
      diversity_impact: Float

  SelectionConfig:
    fields:
      tournament_size: Int
      elitism_count: Int
      scaling: String

  SelectionMetrics:
    fields:
      selections: Int
      average_fitness_selected: Float
      diversity_after: Float
      pressure_achieved: Float

behaviors:
  - name: roulette_wheel
    given: Population with fitness
    when: Roulette selection
    then: Individuals selected proportionally

  - name: tournament
    given: Population
    when: Tournament selection
    then: Winners of tournaments selected

  - name: rank_based
    given: Population
    when: Rank selection
    then: Selection based on rank not fitness

  - name: truncation
    given: Population
    when: Truncation selection
    then: Top percentage selected

  - name: stochastic_universal
    given: Population
    when: SUS selection
    then: Evenly spaced pointers select

  - name: boltzmann
    given: Population and temperature
    when: Boltzmann selection
    then: Temperature-scaled selection

  - name: apply_elitism
    given: Selected population
    when: Elitism
    then: Best individuals preserved

  - name: fitness_scaling
    given: Raw fitness values
    when: Scaling
    then: Fitness values scaled

test_cases:
  - name: test_roulette
    input:
      population_size: 100
    expected:
      selected: true

  - name: test_tournament
    input:
      tournament_size: 3
    expected:
      winner_selected: true

  - name: test_rank_based
    input:
      population: ranked
    expected:
      selected_by_rank: true

  - name: test_truncation
    input:
      percentage: 0.5
    expected:
      top_half_selected: true

  - name: test_sus
    input:
      num_select: 10
    expected:
      evenly_selected: true

  - name: test_boltzmann
    input:
      temperature: 1.0
    expected:
      temperature_scaled: true

  - name: test_elitism
    input:
      elitism_count: 2
    expected:
      best_preserved: true

  - name: test_scaling
    input:
      raw_fitness: [1, 2, 3]
    expected:
      scaled: true

  - name: test_phi_selection
    input:
      phi: 1.618033988749895
    expected:
      golden_pressure: 1.618033988749895
