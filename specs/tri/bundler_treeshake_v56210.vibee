# Bundler TreeShake v56210 - Tree Shaking
# Dead Code Elimination
# φ² + 1/φ² = 3 | PHOENIX = 999

name: bundler_treeshake_v56210
version: "56.2.10"
language: zig
module: bundler_treeshake

creation_pattern:
  source: ModuleGraph
  transformer: TreeShaker
  result: ShakenGraph

types:
  UsageInfo:
    fields:
      symbol: String
      module: String
      is_used: Bool
      used_by: List<String>

  SideEffect:
    fields:
      module: String
      has_side_effects: Bool
      pure_functions: List<String>

  ExportUsage:
    fields:
      export_name: String
      module: String
      is_reexport: Bool
      final_usage: Bool

  ImportBinding:
    fields:
      local_name: String
      imported_name: String
      module: String
      is_namespace: Bool

  TreeShakeResult:
    fields:
      removed_exports: List<String>
      removed_modules: List<String>
      size_reduction: Int
      warnings: List<String>

  PureAnnotation:
    fields:
      function_name: String
      module: String
      is_pure: Bool

  DeadCodeInfo:
    fields:
      code_range: String
      reason: String
      can_remove: Bool

  ShakeConfig:
    fields:
      preserve_side_effects: Bool
      pure_getters: Bool
      pure_external_modules: List<String>

behaviors:
  - name: analyze_usage
    given: ModuleGraph
    When: Usage analysis needed
    then: List of UsageInfo

  - name: mark_side_effects
    given: Module
    when: Side effect detection needed
    then: SideEffect info

  - name: trace_exports
    given: Export and graph
    when: Export tracing needed
    then: ExportUsage

  - name: remove_dead_code
    given: Module and usage info
    when: Dead code removal needed
    then: Cleaned module

  - name: shake_tree
    given: ModuleGraph and config
    when: Tree shaking needed
    then: TreeShakeResult

  - name: detect_pure_functions
    given: Module AST
    when: Purity detection needed
    then: List of PureAnnotation

  - name: find_dead_code
    given: Module and usage
    when: Dead code detection needed
    then: List of DeadCodeInfo

  - name: preserve_entry_exports
    given: Entry module
    when: Entry preservation needed
    then: Preserved exports
