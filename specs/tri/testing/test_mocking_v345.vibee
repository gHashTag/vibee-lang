name: test_mocking_v345
version: "1.0.0"
language: zig
module: test_mocking_v345

types:
  Mock:
    fields:
      name: String
      target: String
      implementation: String
      call_count: Int

  MockCall:
    fields:
      args: List<Object>
      return_value: Object
      timestamp: Timestamp

  MockExpectation:
    fields:
      method: String
      args: Option<List<Object>>
      return_value: Object
      times: Int

  Spy:
    fields:
      target: String
      calls: List<MockCall>
      original_preserved: Bool

  MockConfig:
    fields:
      strict: Bool
      auto_verify: Bool
      reset_on_verify: Bool

behaviors:
  - name: create_mock
    given: Interface definition
    When: Mock created
    then: Mock object returned

  - name: stub_method
    given: Method name
    When: Stub configured
    then: Method returns stub value

  - name: expect_call
    given: Expected call
    When: Expectation set
    then: Call verified later

  - name: verify_calls
    given: Expectations set
    When: Verification runs
    then: All expectations checked

  - name: create_spy
    given: Real object
    When: Spy created
    then: Calls tracked

  - name: reset_mock
    given: Mock with calls
    When: Reset called
    then: Call history cleared

  - name: mock_sequence
    given: Multiple returns
    When: Calls made
    then: Returns in sequence

  - name: throw_on_call
    given: Error config
    When: Method called
    then: Error thrown
