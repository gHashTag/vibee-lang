# VIBEE Specification v13486
# Code Review Agent
# KOSCHEI CYCLE 11 - 1000000x SPEEDUP

name: agent_review
version: "13486"
language: zig
module: agent_review

types:
  ReviewAgent:
    fields:
      id: String
      review_rules: List<String>
      severity_levels: List<String>
      auto_fix: Bool

  ReviewRequest:
    fields:
      files: List<String>
      diff: String
      context: String
      focus_areas: List<String>

  ReviewComment:
    fields:
      id: String
      file: String
      line: Int
      severity: String
      category: String
      message: String
      suggestion: String

  ReviewReport:
    fields:
      total_issues: Int
      critical: Int
      warnings: Int
      suggestions: Int
      comments: List<Object>
      score: Float

  CodeSmell:
    fields:
      smell_type: String
      location: String
      description: String
      refactoring: String

  ReviewMetrics:
    fields:
      reviews_completed: Int
      issues_found: Int
      issues_fixed: Int
      avg_review_time_ms: Int

behaviors:
  - name: review_code
    given: Code changes to review
    when: Review requested
    then: Comprehensive review performed

  - name: check_style
    given: Source code
    when: Style check requested
    then: Style violations identified

  - name: detect_bugs
    given: Code to analyze
    when: Bug detection requested
    then: Potential bugs flagged

  - name: check_security
    given: Code with potential vulnerabilities
    when: Security review requested
    then: Security issues identified

  - name: suggest_refactoring
    given: Code with smells
    when: Refactoring analysis requested
    then: Refactoring suggestions provided

  - name: approve_or_reject
    given: Review results
    when: Decision requested
    then: Approval decision made

creation_pattern:
  source: ReviewRequest
  transformer: ReviewAgent
  result: ReviewReport
