# v9005 - Tool Use
# =================
# LLM tool/function calling
# Based on: Toolformer, ReAct, Function Calling
# φ² + 1/φ² = 3 | PHOENIX = 999

name: tool_use
version: "9.0.5"
language: zig
module: tool_use

constants:
  PHI: 1.618033988749895

types:
  ToolConfig:
    fields:
      tools: List
      max_tool_calls: Int
      parallel_calls: Bool
      
  Tool:
    fields:
      name: String
      description: String
      parameters: Map
      
  ToolCall:
    fields:
      tool_name: String
      arguments: Map
      result: String

behaviors:
  - name: detect_tool_need
    given: Query и context
    when: Detecting tool need
    then: Вернуть should_use_tool
    
  - name: select_tool
    given: Query и available tools
    when: Tool selection
    then: Вернуть selected tool
    
  - name: generate_arguments
    given: Tool и query
    when: Argument generation
    then: Вернуть tool arguments
    
  - name: execute_tool
    given: Tool call
    when: Execution
    then: Вернуть tool result
    
  - name: integrate_result
    given: Tool result и context
    when: Result integration
    then: Вернуть updated context
    
  - name: react_loop
    given: Query и tools
    when: ReAct reasoning
    then: Вернуть final answer
    
  - name: parallel_tool_calls
    given: Multiple tool calls
    when: Parallel execution
    then: Вернуть all results
    
  - name: validate_tool_call
    given: Tool call
    when: Validation
    then: Вернуть validation result
