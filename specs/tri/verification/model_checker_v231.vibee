# ═══════════════════════════════════════════════════════════════════════════════
# MODEL CHECKER v231 - State Space Exploration
# ═══════════════════════════════════════════════════════════════════════════════
# Based on: SPIN, TLA+, NuSMV
# Scientific: CAV 2024 (BMC), TACAS 2023 (SPIN)
# PAS Pattern: D&C + HSH
# φ² + 1/φ² = 3 | PHOENIX = 999
# ═══════════════════════════════════════════════════════════════════════════════

name: model_checker
version: "2.3.1"
language: zig
module: model_checker

sacred_constants:
  phi: 1.618033988749895
  phi_sq: 2.618033988749895
  trinity: 3.0
  phoenix: 999

creation_pattern:
  source: SystemModel
  transformer: ModelChecker
  result: VerificationReport

types:
  PropertyType:
    enum:
      - safety
      - liveness
      - fairness
      - ltl
      - ctl

  State:
    fields:
      id: Int
      variables: Map<String, Int>
      hash: Int

  Transition:
    fields:
      from_state: Int
      to_state: Int
      action: String
      guard: String

  SystemModel:
    fields:
      initial_states: List<State>
      transitions: List<Transition>
      properties: List<String>

  CounterexampleTrace:
    fields:
      states: List<State>
      actions: List<String>
      is_loop: Bool

  CheckResult:
    fields:
      property: String
      satisfied: Bool
      counterexample: CounterexampleTrace?
      states_explored: Int

  ExplorationStats:
    fields:
      total_states: Int
      unique_states: Int
      transitions_fired: Int
      time_ms: Int

behaviors:
  - name: explore_bfs
    given: "System model"
    when: "BFS exploration"
    then: "Explore state space"
    pas_pattern: D&C
    complexity: O(s)
    test_cases:
      - name: test_bfs
        input: '{"model": {...}}'
        expected: '{"states": 1000}'

  - name: explore_dfs
    given: "System model"
    when: "DFS exploration"
    then: "Explore with DFS"
    pas_pattern: D&C
    complexity: O(s)
    test_cases:
      - name: test_dfs
        input: '{"model": {...}}'
        expected: '{"states": 1000}'

  - name: check_safety
    given: "Model and property"
    when: "Safety check"
    then: "Verify safety property"
    pas_pattern: HSH
    complexity: O(s)
    test_cases:
      - name: test_safety
        input: '{"model": {...}, "prop": "no_deadlock"}'
        expected: '{"satisfied": true}'

  - name: check_liveness
    given: "Model and property"
    when: "Liveness check"
    then: "Verify liveness property"
    pas_pattern: D&C
    complexity: O(s^2)
    test_cases:
      - name: test_liveness
        input: '{"model": {...}, "prop": "eventually_done"}'
        expected: '{"satisfied": true}'

  - name: compute_hash
    given: "State"
    when: "Hashing needed"
    then: "Compute state hash"
    pas_pattern: HSH
    complexity: O(v)
    test_cases:
      - name: test_hash
        input: '{"state": {...}}'
        expected: '{"hash": 12345}'

  - name: generate_trace
    given: "Violation path"
    when: "Trace generation"
    then: "Generate counterexample"
    pas_pattern: D&C
    complexity: O(p)
    test_cases:
      - name: test_trace
        input: '{"path": [...]}'
        expected: '{"trace": {...}}'

# ═══════════════════════════════════════════════════════════════════════════════
# φ² + 1/φ² = 3 | PHOENIX = 999
# ═══════════════════════════════════════════════════════════════════════════════
