# v5403 - Agent Memory
# =====================
# Память агентов - short/long term, RAG
# φ² + 1/φ² = 3 | PHOENIX = 999

name: agent_memory
version: "5.4.3"
language: zig
module: agent_memory

constants:
  PHI: 1.618033988749895
  SHORT_TERM_SIZE: 100
  LONG_TERM_SIZE: 10000
  EMBEDDING_DIM: 1536

types:
  MemoryEntry:
    fields:
      content: String
      embedding: List
      timestamp: Timestamp
      importance: Float
      
  ShortTermMemory:
    fields:
      entries: List
      capacity: Int
      
  LongTermMemory:
    fields:
      vector_store: Object
      metadata: Map
      
  EpisodicMemory:
    fields:
      episodes: List
      current_episode: Int
      
  SemanticMemory:
    fields:
      concepts: Map
      relations: List
      
  MemoryQuery:
    fields:
      query: String
      top_k: Int
      filters: Map
      
  RetrievedMemory:
    fields:
      entries: List
      relevance_scores: List
      
  MemoryConsolidation:
    fields:
      to_consolidate: List
      consolidation_strategy: String

behaviors:
  - name: store_memory
    given: Content и memory type
    when: Memory storage
    then: Вернуть memory entry
    
  - name: retrieve_memories
    given: Query и memory
    when: Memory retrieval
    then: Вернуть retrieved memories
    
  - name: update_importance
    given: Memory entry и feedback
    when: Importance update
    then: Вернуть updated entry
    
  - name: consolidate_memories
    given: Short-term memories
    when: Memory consolidation
    then: Вернуть consolidated memories
    
  - name: forget_memories
    given: Memory и criteria
    when: Selective forgetting
    then: Вернуть pruned memory
    
  - name: summarize_episode
    given: Episode memories
    when: Episode summarization
    then: Вернуть episode summary
    
  - name: build_context
    given: Query и memories
    when: Context building
    then: Вернуть context window
    
  - name: reflect_on_memories
    given: Recent memories
    when: Memory reflection
    then: Вернуть insights
