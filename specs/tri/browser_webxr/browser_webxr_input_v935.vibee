# VIBEE YOLO MODE IX - browser_webxr_input v935
name: browser_webxr_input_v935
version: "9.0.0"
language: zig
module: browser_webxr_input

sacred_constants:
  phi: 1.618033988749895
  phoenix: 999

types:
  XRSession:
    fields:
      mode: String
      render_state: String
      input_sources: List<String>

  XRReferenceSpace:
    fields:
      type: String
      bounds_geometry: String

  XRFrame:
    fields:
      session: String
      predicted_display_time: Float
      views: List<String>

  XRInputSource:
    fields:
      handedness: String
      target_ray_mode: String
      profiles: List<String>

behaviors:
  - name: request_session
    given: Session mode
    when: Request
    then: XR input session obtained
  - name: get_reference_space
    given: Space type
    when: Get
    then: Reference space obtained
  - name: request_animation_frame
    given: XRSession
    when: Request
    then: Frame callback registered
  - name: get_input_sources
    given: XRSession
    when: Get
    then: Input sources returned
  - name: create_anchor
    given: XRFrame and pose
    when: Create
    then: Anchor created

test_cases:
  - name: test_browser_webxr_input_session
    input: {mode: "immersive-vr"}
    expected: {session: obtained}
  - name: test_browser_webxr_input_space
    input: {type: "local"}
    expected: {space: obtained}
  - name: test_browser_webxr_input_frame
    input: {session: active}
    expected: {frame: received}
  - name: test_browser_webxr_input_input
    input: {session: active}
    expected: {sources: returned}
  - name: test_phi_browser_webxr_input
    input: {phi: 1.618033988749895}
    expected: {golden: true}
