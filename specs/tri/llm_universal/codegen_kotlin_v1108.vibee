# ═══════════════════════════════════════════════════════════════════════════════
# CODEGEN KOTLIN v1108 - Kotlin Code Generator
# ═══════════════════════════════════════════════════════════════════════════════
# φ² + 1/φ² = 3 | PHOENIX = 999
# ═══════════════════════════════════════════════════════════════════════════════

name: codegen_kotlin
version: "11.0.8"
language: zig
module: codegen_kotlin

sacred_constants:
  phi: 1.618033988749895
  trinity: 3.0
  phoenix: 999

creation_pattern:
  source: VIBEESpec
  transformer: KotlinCodeGen
  result: KotlinCode

types:
  KotlinClass:
    fields:
      name: String
      properties: List<KotlinProperty>
      methods: List<KotlinMethod>
      is_data_class: Bool

  KotlinProperty:
    fields:
      name: String
      type_name: String
      nullable: Bool
      default_value: Option<String>

  KotlinMethod:
    fields:
      name: String
      params: List<KotlinParam>
      return_type: String
      body: String

  KotlinParam:
    fields:
      name: String
      type_name: String

behaviors:
  - name: generate_data_class
    given: "VIBEE type"
    when: "Data class generation"
    then: "Kotlin data class"
    pas_pattern: PRE
    test_cases:
      - name: test_data_class
        input: '{"type": {"name": "User", "fields": [{"name": "id", "type": "Int"}]}}'
        expected: '{"code": "data class User(val id: Long)"}'

  - name: generate_function
    given: "VIBEE behavior"
    when: "Function generation"
    then: "Kotlin function"
    pas_pattern: PRE
    test_cases:
      - name: test_function
        input: '{"behavior": {"name": "add"}}'
        expected: '{"code": "fun add(): Unit"}'

  - name: generate_sealed_class
    given: "VIBEE enum"
    when: "Sealed class generation"
    then: "Kotlin sealed class"
    pas_pattern: PRE
    test_cases:
      - name: test_sealed
        input: '{"enum": {"name": "Status", "variants": ["Active"]}}'
        expected: '{"code": "sealed class Status"}'

  - name: generate_coroutine
    given: "Async behavior"
    when: "Coroutine generation"
    then: "Suspend function"
    pas_pattern: ALG
    test_cases:
      - name: test_suspend
        input: '{"async": true}'
        expected: '{"code": "suspend fun"}'

type_mappings:
  String: "String"
  Int: "Long"
  Float: "Double"
  Bool: "Boolean"
  List: "List<Any>"
  Map: "Map<String, Any>"
  Option: "T?"
  Timestamp: "Long"

# ═══════════════════════════════════════════════════════════════════════════════
# φ² + 1/φ² = 3 | PHOENIX = 999
# ═══════════════════════════════════════════════════════════════════════════════
