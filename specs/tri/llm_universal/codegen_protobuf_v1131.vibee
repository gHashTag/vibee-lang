# ═══════════════════════════════════════════════════════════════════════════════
# CODEGEN PROTOBUF v1131 - Protocol Buffers Generator
# ═══════════════════════════════════════════════════════════════════════════════
# φ² + 1/φ² = 3 | PHOENIX = 999
# ═══════════════════════════════════════════════════════════════════════════════

name: codegen_protobuf
version: "11.3.1"
language: zig
module: codegen_protobuf

sacred_constants:
  phi: 1.618033988749895
  trinity: 3.0
  phoenix: 999

creation_pattern:
  source: VIBEESpec
  transformer: ProtobufCodeGen
  result: ProtobufSchema

types:
  ProtoMessage:
    fields:
      name: String
      fields: List<ProtoField>
      nested: List<ProtoMessage>

  ProtoField:
    fields:
      name: String
      type_name: String
      number: Int
      repeated: Bool
      optional: Bool

  ProtoService:
    fields:
      name: String
      methods: List<ProtoMethod>

  ProtoMethod:
    fields:
      name: String
      input: String
      output: String
      streaming: Bool

behaviors:
  - name: generate_message
    given: "VIBEE type"
    when: "Message generation"
    then: "Proto message"
    pas_pattern: PRE
    test_cases:
      - name: test_message
        input: '{"type": {"name": "User"}}'
        expected: '{"code": "message User"}'

  - name: generate_service
    given: "VIBEE behaviors"
    when: "Service generation"
    then: "Proto service"
    pas_pattern: PRE
    test_cases:
      - name: test_service
        input: '{"behaviors": [...]}'
        expected: '{"code": "service UserService"}'

  - name: generate_enum
    given: "VIBEE enum"
    when: "Enum generation"
    then: "Proto enum"
    pas_pattern: PRE
    test_cases:
      - name: test_enum
        input: '{"enum": {"name": "Status"}}'
        expected: '{"code": "enum Status"}'

type_mappings:
  String: "string"
  Int: "int64"
  Float: "double"
  Bool: "bool"
  List: "repeated"
  Timestamp: "google.protobuf.Timestamp"
  Object: "google.protobuf.Struct"

# ═══════════════════════════════════════════════════════════════════════════════
# φ² + 1/φ² = 3 | PHOENIX = 999
# ═══════════════════════════════════════════════════════════════════════════════
