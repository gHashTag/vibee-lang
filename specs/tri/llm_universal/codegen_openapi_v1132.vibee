# ═══════════════════════════════════════════════════════════════════════════════
# CODEGEN OPENAPI v1132 - OpenAPI Specification Generator
# ═══════════════════════════════════════════════════════════════════════════════
# φ² + 1/φ² = 3 | PHOENIX = 999
# ═══════════════════════════════════════════════════════════════════════════════

name: codegen_openapi
version: "11.3.2"
language: zig
module: codegen_openapi

sacred_constants:
  phi: 1.618033988749895
  trinity: 3.0
  phoenix: 999

creation_pattern:
  source: VIBEESpec
  transformer: OpenAPICodeGen
  result: OpenAPISpec

types:
  OpenAPIPath:
    fields:
      path: String
      method: HTTPMethod
      operation_id: String
      request_body: Option<OpenAPISchema>
      responses: List<OpenAPIResponse>

  HTTPMethod:
    enum:
      - GET
      - POST
      - PUT
      - DELETE
      - PATCH

  OpenAPISchema:
    fields:
      type_name: String
      properties: List<OpenAPIProperty>
      required: List<String>

  OpenAPIProperty:
    fields:
      name: String
      type_name: String
      format: Option<String>

  OpenAPIResponse:
    fields:
      status_code: Int
      description: String
      schema: Option<OpenAPISchema>

behaviors:
  - name: generate_paths
    given: "VIBEE behaviors"
    when: "Path generation"
    then: "OpenAPI paths"
    pas_pattern: PRE
    test_cases:
      - name: test_paths
        input: '{"behaviors": [...]}'
        expected: '{"paths": {...}}'

  - name: generate_schemas
    given: "VIBEE types"
    when: "Schema generation"
    then: "OpenAPI schemas"
    pas_pattern: PRE
    test_cases:
      - name: test_schemas
        input: '{"types": [...]}'
        expected: '{"schemas": {...}}'

  - name: generate_security
    given: "Auth requirements"
    when: "Security generation"
    then: "Security schemes"
    pas_pattern: PRE
    test_cases:
      - name: test_security
        input: '{"auth": "bearer"}'
        expected: '{"security": {...}}'

type_mappings:
  String: "string"
  Int: "integer"
  Float: "number"
  Bool: "boolean"
  List: "array"
  Object: "object"
  Timestamp: "string"

# ═══════════════════════════════════════════════════════════════════════════════
# φ² + 1/φ² = 3 | PHOENIX = 999
# ═══════════════════════════════════════════════════════════════════════════════
