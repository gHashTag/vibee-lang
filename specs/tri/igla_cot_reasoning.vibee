# VIBEE Specification - IGLA Chain-of-Thought
# Step-by-step reasoning
# V = n × 3^k × π^m × φ^p | φ² + 1/φ² = 3 | PHOENIX = 999

name: igla_cot_reasoning
version: "1.0.0"
language: zig
module: igla_cot_reasoning

types:
  CoTChain:
    fields:
      steps: String
      conclusion: String
      confidence: Float

  CoTStep:
    fields:
      step_num: Int
      reasoning: String
      intermediate_result: String

  CoTConfig:
    fields:
      max_steps: Int
      show_work: Bool
      verify_steps: Bool

  CoTMetrics:
    fields:
      chains_completed: Int
      avg_steps: Float
      accuracy: Float

behaviors:
  - name: reason_step
    given: Previous step
    when: Reasoning
    then: Next step generated

  - name: build_chain
    given: Problem
    when: Chain building
    then: Full chain created

  - name: verify_chain
    given: Chain
    when: Verification
    then: Chain validity checked

  - name: extract_answer
    given: Chain
    when: Extraction
    then: Final answer extracted

  - name: get_metrics
    given: Reasoner
    when: Metrics requested
    then: CoT metrics returned

test_cases:
  - name: test_step
    input: { previous: "step 1" }
    expected: { has_next: true }

  - name: test_chain
    input: { problem: "2 + 2" }
    expected: { has_conclusion: true }

  - name: test_verify
    input: { chain: ["step1", "step2"] }
    expected: { valid: true }

  - name: test_metrics
    input: {}
    expected: { chains_completed: 0 }
