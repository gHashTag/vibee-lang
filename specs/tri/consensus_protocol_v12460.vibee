# VIBEE Specification v12460
# Consensus Protocol - Distributed consensus algorithms
name: consensus_protocol_v12460
version: "1.0.0"
language: zig
module: consensus_protocol

types:
  ConsensusType:
    fields:
      raft: String
      paxos: String
      pbft: String
      proof_of_stake: String

  Proposal:
    fields:
      id: String
      value: String
      proposer: String
      term: Int
      timestamp: Timestamp

  Vote:
    fields:
      proposal_id: String
      voter: String
      accept: Bool
      term: Int

  ConsensusState:
    fields:
      current_term: Int
      leader: String
      committed_index: Int
      participants: String

  ConsensusResult:
    fields:
      proposal_id: String
      accepted: Bool
      votes_for: Int
      votes_against: Int
      finalized_at: Timestamp

behaviors:
  - name: propose_value
    given: Value and proposer
    when: Proposal created
    then: Returns proposal

  - name: cast_vote
    given: Proposal and voter
    when: Vote cast
    then: Returns vote

  - name: reach_consensus
    given: Proposal and votes
    when: Consensus checked
    then: Returns consensus result

  - name: elect_leader
    given: Participants
    When: Election triggered
    then: Returns new leader
