# VIBEE YOLO MODE XII - browser_glass_refraction v1173
# Light Refraction - Realistic Glass Physics
name: browser_glass_refraction_v1173
version: "12.0.0"
language: zig
module: browser_glass_refraction

sacred_constants:
  phi: 1.618033988749895
  phi_identity: 3
  phoenix: 999
  yolo_mode: 12

types:
  RefractionConfig:
    fields:
      ior: Float
      dispersion: Float
      chromatic_aberration: Float

  GlassPhysics:
    fields:
      thickness: Float
      curvature: Float
      roughness: Float

  LensDistortion:
    fields:
      barrel: Float
      pincushion: Float
      center: String

  CausticEffect:
    fields:
      intensity: Float
      pattern: String
      animated: Bool

behaviors:
  - name: apply_refraction
    given: RefractionConfig
    when: Apply
    then: Light refraction applied
  - name: simulate_glass
    given: GlassPhysics
    when: Simulate
    then: Glass physics simulated
  - name: distort_lens
    given: LensDistortion
    when: Distort
    then: Lens distortion applied
  - name: render_caustics
    given: CausticEffect
    when: Render
    then: Caustic patterns rendered
  - name: chromatic_split
    given: Dispersion value
    when: Split
    then: Chromatic aberration applied

test_cases:
  - name: test_refraction_apply
    input: {ior: 1.5}
    expected: {applied: true}
  - name: test_refraction_glass
    input: {thickness: 2.0}
    expected: {simulated: true}
  - name: test_refraction_lens
    input: {barrel: 0.1}
    expected: {distorted: true}
  - name: test_refraction_caustics
    input: {intensity: 0.5}
    expected: {rendered: true}
  - name: test_phi_refraction
    input: {phi: 1.618033988749895}
    expected: {identity: 3}
