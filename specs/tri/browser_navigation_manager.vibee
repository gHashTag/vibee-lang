# Navigation Manager Module
# URL navigation, history, redirects
# Navigation state machine

name: browser_navigation_manager
version: "1.0.0"
language: zig
module: browser_navigation_manager

types:
  NavigationState:
    fields:
      state_id: String
      current_url: String
      history: List<String>
      can_go_back: Bool
      can_go_forward: Bool

  NavigationRequest:
    fields:
      url: String
      wait_until: String
      timeout_ms: Int
      referer: Option<String>

  NavigationEvent:
    fields:
      event_type: String
      url: String
      timestamp: Timestamp
      is_redirect: Bool

  RedirectChain:
    fields:
      chain_id: String
      redirects: List<String>
      final_url: String

  NavigationTiming:
    fields:
      dns_lookup_ms: Int
      connect_ms: Int
      request_ms: Int
      response_ms: Int
      dom_content_loaded_ms: Int
      load_ms: Int

behaviors:
  - name: goto
    given: Page and navigation request
    when: URL navigation needed
    then: Returns navigation result

  - name: go_back
    given: Page
    when: Back navigation needed
    then: Returns navigation result

  - name: go_forward
    given: Page
    when: Forward navigation needed
    then: Returns navigation result

  - name: reload
    given: Page and options
    when: Page reload needed
    then: Returns reload result

  - name: get_navigation_state
    given: Page
    when: State query needed
    then: Returns navigation state

  - name: wait_for_navigation
    given: Page and options
    when: Navigation wait needed
    then: Returns when navigation completes

  - name: get_redirect_chain
    given: Response
    When: Redirect analysis needed
    then: Returns redirect chain

  - name: get_timing
    given: Page
    when: Performance timing needed
    then: Returns navigation timing
