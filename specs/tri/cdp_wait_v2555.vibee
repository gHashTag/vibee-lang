# cdp_wait_v2555.vibee - Wait Conditions
# Ожидание элементов и событий
# YOLO MODE + AMPLIFICATION + MATRYOSHKA
# φ² + 1/φ² = 3 | PHOENIX = 999

name: cdp_wait_v2555
version: "2555.0.0"
language: zig
module: cdp_wait_v2555

types:
  WaitOptions:
    fields:
      timeout_ms: Int
      polling_ms: Int
      visible: Bool
      hidden: Bool
      enabled: Bool

  WaitResult:
    fields:
      success: Bool
      elapsed_ms: Int
      element: Object
      timed_out: Bool

  WaitCondition:
    fields:
      type: String
      selector: String
      text: String
      url_pattern: String
      js_expression: String

  NetworkIdleOptions:
    fields:
      timeout_ms: Int
      idle_time_ms: Int
      max_inflight: Int

behaviors:
  - name: wait_for_selector
    given: CDPClient, selector, timeout_ms
    when: Element wait requested
    then: Wait until element exists in DOM

  - name: wait_for_visible
    given: CDPClient, selector, timeout_ms
    when: Visibility wait requested
    then: Wait until element visible

  - name: wait_for_hidden
    given: CDPClient, selector, timeout_ms
    when: Hidden wait requested
    then: Wait until element hidden/removed

  - name: wait_for_enabled
    given: CDPClient, selector, timeout_ms
    when: Enabled wait requested
    then: Wait until element not disabled

  - name: wait_for_text
    given: CDPClient, selector, text, timeout_ms
    when: Text wait requested
    then: Wait until element contains text

  - name: wait_for_navigation
    given: CDPClient, timeout_ms
    when: Navigation wait requested
    then: Wait for page load complete

  - name: wait_for_url
    given: CDPClient, url_pattern, timeout_ms
    when: URL wait requested
    then: Wait until URL matches pattern

  - name: wait_for_network_idle
    given: CDPClient, NetworkIdleOptions
    when: Network idle wait requested
    then: Wait until no pending requests

  - name: wait_for_function
    given: CDPClient, js_expression, timeout_ms
    when: JS condition wait requested
    then: Wait until JS returns truthy

  - name: wait_ms
    given: CDPClient and milliseconds
    when: Fixed delay requested
    then: Sleep for specified time

sacred_constants:
  phi: 1.618033988749895
  phi_squared_plus_inverse_squared: 3
  phoenix: 999
