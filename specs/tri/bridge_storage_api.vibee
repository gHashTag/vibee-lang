# Bridge Storage API
# Cookies, localStorage, sessionStorage
# State persistence

name: bridge_storage_api
version: "1.0.0"
language: zig
module: bridge_storage_api

types:
  StorageAPI:
    fields:
      api_id: String
      client: String
      context_id: String

  Cookie:
    fields:
      name: String
      value: String
      domain: String
      path: String
      expires: Option<Int>
      http_only: Bool
      secure: Bool

  CookieFilter:
    fields:
      name: Option<String>
      domain: Option<String>
      path: Option<String>

  StorageState:
    fields:
      cookies: List<String>
      origins: List<String>

  LocalStorageItem:
    fields:
      key: String
      value: String

  StorageResult:
    fields:
      success: Bool
      error: Option<String>

behaviors:
  - name: get_cookies
    given: Filter options
    when: Cookie retrieval needed
    then: Returns cookie list

  - name: set_cookies
    given: Cookie list
    when: Cookie setting needed
    then: Returns storage result

  - name: clear_cookies
    given: Filter options
    When: Cookie clearing needed
    then: Returns storage result

  - name: get_local_storage
    given: Origin
    when: localStorage retrieval needed
    then: Returns storage items

  - name: set_local_storage
    given: Origin, key, and value
    when: localStorage setting needed
    then: Returns storage result

  - name: clear_local_storage
    given: Origin
    when: localStorage clearing needed
    then: Returns storage result

  - name: save_storage_state
    given: Path
    when: State persistence needed
    then: Returns save result

  - name: load_storage_state
    given: Path
    when: State restoration needed
    then: Returns load result
