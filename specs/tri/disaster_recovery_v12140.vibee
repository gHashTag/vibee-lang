name: disaster_recovery_v12140
version: "12140"
language: zig
module: disaster_recovery
types:
  DRConfig:
    fields:
      rpo_minutes: Int
      rto_minutes: Int
      backup_frequency: Int
      replication_mode: ReplicationMode
  ReplicationMode:
    variants:
      - synchronous
      - asynchronous
      - semi_synchronous
  DRPlan:
    fields:
      plan_id: String
      name: String
      steps: List<String>
      last_tested: Int
      status: PlanStatus
  PlanStatus:
    variants:
      - active
      - testing
      - executing
      - completed
  RecoveryResult:
    fields:
      success: Bool
      recovery_time: Int
      data_loss: Float
      issues: List<String>
behaviors:
  - name: create_dr_plan
    given: Config
    when: Creating
    then: Returns plan
  - name: test_dr_plan
    given: Plan
    when: Testing
    then: Returns test result
  - name: execute_failover
    given: Plan
    when: Failing over
    then: Returns recovery result
  - name: execute_failback
    given: Recovery
    when: Failing back
    then: Returns failback result
  - name: backup_data
    given: Source
    when: Backing up
    then: Returns backup status
  - name: restore_data
    given: Backup
    when: Restoring
    then: Returns restore status
  - name: verify_replication
    given: Source and target
    when: Verifying
    then: Returns replication status
  - name: update_dr_plan
    given: Plan changes
    when: Updating
    then: Returns updated plan
creation_pattern:
  source: DisasterEvent
  transformer: DRManager
  result: RecoveryResult
