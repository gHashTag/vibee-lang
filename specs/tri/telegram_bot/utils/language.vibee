name: language
version: "1.0.0"
language: zig
module: language

description: |
  Language utility for VIBEE Telegram bot.
  Handles localization and translation.

types:
  LanguageCode:
    description: "Supported language codes"
    variants:
      - Ru
      - En

  TranslationKey:
    description: "Translation key"
    alias: String

  TranslationParams:
    description: "Translation parameters"
    alias: Object

  Translation:
    description: "Translation entry"
    fields:
      key: TranslationKey
      ru: String
      en: String

behaviors:
  - name: get_translation
    given: Key and language code
    when: Getting translation
    then: Returns translated string

  - name: get_translation_with_params
    given: Key, language, and params
    when: Getting parameterized translation
    then: Returns formatted string

  - name: is_russian
    given: Language code
    when: Checking language
    then: Returns true if Russian

  - name: is_russian_from_context
    given: Context
    when: Checking from session
    then: Returns true if user language is Russian

  - name: detect_language
    given: Text string
    when: Detecting language
    then: Returns LanguageCode

  - name: get_user_language
    given: Telegram ID
    when: Fetching user language
    then: Returns LanguageCode

  - name: set_user_language
    given: Telegram ID and language
    when: Setting language
    then: Returns success status

  - name: load_translations
    given: No parameters
    when: Loading translation file
    then: Returns translations map

constants:
  DEFAULT_LANGUAGE: "en"
  SUPPORTED_LANGUAGES: ["ru", "en"]
