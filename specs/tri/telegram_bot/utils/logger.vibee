name: logger
version: "1.0.0"
language: zig
module: logger

description: |
  Logger utility for VIBEE Telegram bot.
  Handles structured logging with levels and context.

types:
  LogLevel:
    description: "Log level enum"
    variants:
      - Debug
      - Info
      - Warn
      - Error
      - Fatal

  LogEntry:
    description: "Log entry structure"
    fields:
      level: LogLevel
      message: String
      timestamp: Timestamp
      context: Option<Object>
      error: Option<String>
      stack_trace: Option<String>

  LoggerConfig:
    description: "Logger configuration"
    fields:
      level: LogLevel
      format: String
      output: String
      rotate_daily: Bool
      max_files: Int

behaviors:
  - name: debug
    given: Message and optional context
    when: Logging debug info
    then: Writes debug log entry

  - name: info
    given: Message and optional context
    when: Logging info
    then: Writes info log entry

  - name: warn
    given: Message and optional context
    when: Logging warning
    then: Writes warn log entry

  - name: error
    given: Message, error, and optional context
    when: Logging error
    then: Writes error log entry

  - name: fatal
    given: Message and error
    when: Logging fatal error
    then: Writes fatal log entry

  - name: create_child
    given: Context object
    when: Creating child logger
    then: Returns logger with context

  - name: set_level
    given: LogLevel
    when: Changing log level
    then: Updates logger level

  - name: format_entry
    given: LogEntry
    when: Formatting for output
    then: Returns formatted string

constants:
  DEFAULT_LEVEL: "Info"
  DEFAULT_FORMAT: "json"
  LOG_DIR: "logs"
  MAX_LOG_FILES: 14
