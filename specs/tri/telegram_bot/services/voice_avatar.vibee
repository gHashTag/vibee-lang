name: voice_avatar
version: "1.0.0"
language: zig
module: voice_avatar

description: |
  Voice avatar service for VIBEE Telegram bot.
  Handles voice cloning and avatar voice generation.

imports:
  - elevenlabs_client
  - user
  - telegram

types:
  VoiceAvatarRequest:
    description: "Voice avatar creation request"
    fields:
      audio_samples: List<String>
      name: String
      description: Option<String>
      telegram_id: String

  VoiceAvatarResponse:
    description: "Voice avatar creation response"
    fields:
      success: Bool
      voice_id: Option<String>
      message: Option<String>
      error: Option<String>

  VoiceCloneStatus:
    description: "Voice cloning status"
    variants:
      - Pending
      - Processing
      - Ready
      - Failed

  UserVoiceAvatar:
    description: "User's voice avatar"
    fields:
      id: String
      user_id: String
      voice_id: String
      name: String
      status: VoiceCloneStatus
      created_at: Timestamp

behaviors:
  - name: create_voice_avatar
    given: VoiceAvatarRequest
    when: Creating voice clone
    then: Returns VoiceAvatarResponse

  - name: get_user_voice_avatars
    given: User ID
    when: Listing user's voices
    then: Returns list of UserVoiceAvatar

  - name: delete_voice_avatar
    given: Voice ID
    when: Deleting voice
    then: Returns success status

  - name: generate_speech_with_avatar
    given: Text and voice ID
    when: Generating speech
    then: Returns audio URL

  - name: validate_audio_samples
    given: List of audio URLs
    when: Validating samples
    then: Returns validation result

constants:
  MIN_AUDIO_SAMPLES: 1
  MAX_AUDIO_SAMPLES: 25
  MIN_SAMPLE_DURATION_SEC: 30
  MAX_SAMPLE_SIZE_MB: 10
