name: image_to_prompt
version: "1.0.0"
language: zig
module: image_to_prompt

description: |
  Image-to-prompt service for VIBEE Telegram bot.
  Analyzes images and generates text descriptions/prompts.

imports:
  - openai_client
  - user
  - telegram

types:
  ImageToPromptRequest:
    description: "Image analysis request"
    fields:
      image_url: String
      telegram_id: String
      is_ru: Bool
      detail_level: Option<String>

  ImageToPromptResponse:
    description: "Image analysis response"
    fields:
      success: Bool
      prompt: Option<String>
      description: Option<String>
      error: Option<String>

  DetailLevel:
    description: "Analysis detail level"
    variants:
      - Brief
      - Standard
      - Detailed

behaviors:
  - name: generate_image_to_prompt
    given: ImageToPromptRequest
    when: Analyzing image
    then: Returns ImageToPromptResponse

  - name: analyze_image_content
    given: Image URL
    when: Getting content description
    then: Returns description text

  - name: generate_recreation_prompt
    given: Image URL
    when: Creating prompt to recreate image
    then: Returns prompt text

  - name: detect_image_style
    given: Image URL
    when: Detecting artistic style
    then: Returns style description

  - name: extract_colors
    given: Image URL
    when: Extracting color palette
    then: Returns list of colors

constants:
  DEFAULT_DETAIL_LEVEL: "Standard"
  MAX_PROMPT_LENGTH: 500
  VISION_MODEL: "gpt-4o"
