name: improved_main_menu
version: "2.0.0"
language: zig
module: improved_main_menu

description: |
  Improved Main Menu with UX Best Practices
  
  Key improvements:
  1. Grouped by category for easier scanning
  2. Progressive disclosure - show categories first
  3. Consistent 2-column layout
  4. Clear visual hierarchy with emojis
  5. Quick access to balance and help
  6. Contextual tips for new users

imports:
  - ux_design_system
  - telegram
  - user

types:
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # MENU CATEGORIES (Progressive Disclosure)
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  MenuCategory:
    description: "Top-level menu category"
    variants:
      - Create      # Content creation
      - Avatar      # Avatar management
      - Tools       # Utility tools
      - Account     # User account

  CategoryConfig:
    description: "Category configuration"
    fields:
      id: MenuCategory
      emoji: String
      name_ru: String
      name_en: String
      description_ru: String
      description_en: String
      items: List<MenuItemConfig>
      is_premium: Bool

  MenuItemConfig:
    description: "Menu item configuration"
    fields:
      id: String
      emoji: String
      name_ru: String
      name_en: String
      callback_data: String
      cost_stars: Option<Int>
      is_new: Bool
      is_popular: Bool
      requires_model: Bool

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # MENU STATE
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  MenuState:
    description: "Current menu state"
    fields:
      current_category: Option<MenuCategory>
      selected_item: Option<String>
      show_tips: Bool
      user_level: Int

  MenuMessage:
    description: "Menu message content"
    fields:
      text: String
      keyboard: Object
      parse_mode: String

behaviors:
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # MAIN MENU
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - name: show_main_menu
    given: Context and user data
    when: Displaying main menu
    then: Shows categorized menu with user balance

  - name: show_category_menu
    given: Context and category
    when: User selects category
    then: Shows items in selected category

  - name: show_welcome_message
    given: Context and is_new_user
    when: User starts bot
    then: Shows personalized welcome with quick start

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # MENU BUILDERS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - name: build_main_keyboard
    given: Language and user level
    when: Building main menu keyboard
    then: Returns categorized inline keyboard

  - name: build_category_keyboard
    given: Category and language
    when: Building category submenu
    then: Returns items keyboard with back button

  - name: build_quick_actions_row
    given: Language
    when: Building quick actions
    then: Returns balance/help/settings row

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # MESSAGE FORMATTING
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - name: format_main_menu_text
    given: User data and language
    when: Creating menu text
    then: Returns formatted menu header with balance

  - name: format_category_text
    given: Category and language
    when: Creating category text
    then: Returns category description with tips

  - name: format_item_button
    given: Item config and language
    when: Creating button text
    then: Returns emoji + name + optional badges

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # CONTEXTUAL TIPS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - name: get_tip_for_new_user
    given: Language
    when: User is new
    then: Returns onboarding tip

  - name: get_tip_for_category
    given: Category and language
    when: Showing category
    then: Returns contextual tip

  - name: get_tip_for_low_balance
    given: Balance and language
    when: Balance is low
    then: Returns top-up suggestion

constants:
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # MENU STRUCTURE
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  CATEGORIES:
    CREATE:
      emoji: "âœ¨"
      name_ru: "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ"
      name_en: "Create"
      description_ru: "Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ° Ñ Ğ˜Ğ˜"
      description_en: "AI content generation"
      items:
        - neuro_photo
        - text_to_video
        - image_to_video
        - text_to_speech

    AVATAR:
      emoji: "ğŸ¤–"
      name_ru: "ĞĞ²Ğ°Ñ‚Ğ°Ñ€"
      name_en: "Avatar"
      description_ru: "Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ†Ğ¸Ñ„Ñ€Ğ¾Ğ²Ñ‹Ğ¼ Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€Ğ¾Ğ¼"
      description_en: "Digital avatar management"
      items:
        - digital_body
        - avatar_brain
        - voice_avatar
        - chat_with_avatar

    TOOLS:
      emoji: "ğŸ› ï¸"
      name_ru: "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹"
      name_en: "Tools"
      description_ru: "ĞŸĞ¾Ğ»ĞµĞ·Ğ½Ñ‹Ğµ AI Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹"
      description_en: "Useful AI tools"
      items:
        - image_to_prompt
        - face_swap
        - lip_sync
        - image_upscaler

    ACCOUNT:
      emoji: "ğŸ‘¤"
      name_ru: "ĞĞºĞºĞ°ÑƒĞ½Ñ‚"
      name_en: "Account"
      description_ru: "Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ Ğ¸ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸"
      description_en: "Balance and settings"
      items:
        - balance
        - select_model
        - settings
        - help

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # MENU ITEMS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  ITEMS:
    neuro_photo:
      emoji: "ğŸ“¸"
      name_ru: "ĞĞµĞ¹Ñ€Ğ¾Ñ„Ğ¾Ñ‚Ğ¾"
      name_en: "Neuro Photo"
      callback: "neuro_photo"
      cost: 5
      is_popular: true
      requires_model: true

    text_to_video:
      emoji: "ğŸ¬"
      name_ru: "Ğ’Ğ¸Ğ´ĞµĞ¾ Ğ¸Ğ· Ñ‚ĞµĞºÑÑ‚Ğ°"
      name_en: "Text to Video"
      callback: "text_to_video"
      cost: 50
      is_new: true

    image_to_video:
      emoji: "ğŸ¥"
      name_ru: "Ğ¤Ğ¾Ñ‚Ğ¾ Ğ² Ğ²Ğ¸Ğ´ĞµĞ¾"
      name_en: "Photo to Video"
      callback: "image_to_video"
      cost: 30

    text_to_speech:
      emoji: "ğŸ™ï¸"
      name_ru: "Ğ¢ĞµĞºÑÑ‚ Ğ² Ğ³Ğ¾Ğ»Ğ¾Ñ"
      name_en: "Text to Speech"
      callback: "text_to_speech"
      cost: 8

    digital_body:
      emoji: "ğŸ¤–"
      name_ru: "Ğ¦Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ¾Ğµ Ñ‚ĞµĞ»Ğ¾"
      name_en: "Digital Body"
      callback: "digital_avatar_body"
      cost: 100
      is_popular: true

    avatar_brain:
      emoji: "ğŸ§ "
      name_ru: "ĞœĞ¾Ğ·Ğ³ Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€Ğ°"
      name_en: "Avatar Brain"
      callback: "train_flux_model"
      cost: 200

    voice_avatar:
      emoji: "ğŸ¤"
      name_ru: "Ğ“Ğ¾Ğ»Ğ¾Ñ Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€Ğ°"
      name_en: "Voice Avatar"
      callback: "voice_avatar"
      cost: 56

    chat_with_avatar:
      emoji: "ğŸ’¬"
      name_ru: "Ğ§Ğ°Ñ‚ Ñ Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€Ğ¾Ğ¼"
      name_en: "Chat with Avatar"
      callback: "chat_with_avatar"
      requires_model: true

    image_to_prompt:
      emoji: "ğŸ”"
      name_ru: "ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ Ğ¸Ğ· Ñ„Ğ¾Ñ‚Ğ¾"
      name_en: "Prompt from Photo"
      callback: "image_to_prompt"
      cost: 2

    face_swap:
      emoji: "ğŸ­"
      name_ru: "Ğ—Ğ°Ğ¼ĞµĞ½Ğ° Ğ»Ğ¸Ñ†Ğ°"
      name_en: "Face Swap"
      callback: "face_swap"
      cost: 10

    lip_sync:
      emoji: "ğŸ‘„"
      name_ru: "Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ³ÑƒĞ±"
      name_en: "Lip Sync"
      callback: "lip_sync"
      cost: 56

    image_upscaler:
      emoji: "ğŸ”"
      name_ru: "Ğ£Ğ»ÑƒÑ‡ÑˆĞ¸Ñ‚ÑŒ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾"
      name_en: "Upscale Image"
      callback: "image_upscaler"
      cost: 3

    balance:
      emoji: "ğŸ’°"
      name_ru: "Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ"
      name_en: "Balance"
      callback: "balance"

    select_model:
      emoji: "ğŸ¯"
      name_ru: "Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸"
      name_en: "Select Model"
      callback: "select_model"

    settings:
      emoji: "âš™ï¸"
      name_ru: "ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸"
      name_en: "Settings"
      callback: "settings"

    help:
      emoji: "â“"
      name_ru: "ĞŸĞ¾Ğ¼Ğ¾Ñ‰ÑŒ"
      name_en: "Help"
      callback: "go_help"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # BADGES
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  BADGE_NEW: "ğŸ†•"
  BADGE_POPULAR: "ğŸ”¥"
  BADGE_PREMIUM: "â­"

  # Layout
  MENU_COLUMNS: 2
  CATEGORY_COLUMNS: 2
