name: keyboard_patterns
version: "2.0.0"
language: zig
module: keyboard_patterns

description: |
  Reusable Keyboard Patterns with UX Best Practices
  
  Key improvements:
  1. Consistent button placement
  2. Clear visual hierarchy
  3. Accessible touch targets
  4. Logical grouping
  5. Always-visible navigation

imports:
  - ux_design_system
  - telegram

types:
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # KEYBOARD TYPES
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  KeyboardType:
    description: "Type of keyboard layout"
    variants:
      - Grid           # N columns grid
      - List           # Single column list
      - Pagination     # With page controls
      - Selection      # Single/multi select
      - Confirmation   # Yes/No/Cancel
      - Navigation     # Back/Home/Menu

  KeyboardConfig:
    description: "Keyboard configuration"
    fields:
      type: KeyboardType
      columns: Int
      show_navigation: Bool
      show_help: Bool
      resize: Bool

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # BUTTON PATTERNS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  ButtonConfig:
    description: "Button configuration"
    fields:
      text: String
      callback_data: String
      emoji: Option<String>
      badge: Option<String>
      is_selected: Bool
      is_disabled: Bool

  ButtonRow:
    description: "Row of buttons"
    fields:
      buttons: List<ButtonConfig>
      is_navigation: Bool

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # SELECTION PATTERNS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  SelectionState:
    description: "Selection state for multi-select"
    fields:
      selected_ids: List<String>
      min_selection: Int
      max_selection: Int

  SelectionOption:
    description: "Selection option"
    fields:
      id: String
      text: String
      emoji: Option<String>
      is_selected: Bool
      is_disabled: Bool

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # PAGINATION
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  PaginationState:
    description: "Pagination state"
    fields:
      current_page: Int
      total_pages: Int
      items_per_page: Int
      total_items: Int

behaviors:
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # KEYBOARD BUILDERS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - name: build_grid_keyboard
    given: Items, columns, and config
    when: Building grid layout
    then: Returns inline keyboard

  - name: build_list_keyboard
    given: Items and config
    when: Building list layout
    then: Returns single-column keyboard

  - name: build_selection_keyboard
    given: Options and selection state
    when: Building selection
    then: Returns keyboard with checkmarks

  - name: build_pagination_keyboard
    given: Items and pagination state
    when: Building paginated list
    then: Returns keyboard with page controls

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # NAVIGATION ROWS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - name: build_navigation_row
    given: Config (back, home, cancel)
    when: Building navigation
    then: Returns navigation button row

  - name: build_back_row
    given: Language
    when: Adding back button
    then: Returns row with back button

  - name: build_confirmation_row
    given: Language and config
    when: Building confirmation
    then: Returns confirm/cancel row

  - name: build_pagination_row
    given: Pagination state
    when: Building page controls
    then: Returns prev/page/next row

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # BUTTON FORMATTING
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - name: format_button_text
    given: Text, emoji, and badge
    when: Formatting button
    then: Returns formatted button text

  - name: format_selected_button
    given: Text and is_selected
    when: Formatting selection
    then: Returns text with checkmark if selected

  - name: format_disabled_button
    given: Text
    when: Formatting disabled
    then: Returns grayed out text

  - name: format_cost_button
    given: Text and cost
    when: Adding cost to button
    then: Returns text with star cost

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # LAYOUT HELPERS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - name: chunk_into_rows
    given: Items and columns
    when: Splitting into rows
    then: Returns list of rows

  - name: balance_row_widths
    given: Buttons
    when: Balancing layout
    then: Returns optimized row arrangement

  - name: add_navigation_to_keyboard
    given: Keyboard and nav config
    when: Adding navigation
    then: Returns keyboard with nav row

constants:
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # LAYOUT CONSTANTS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  DEFAULT_COLUMNS: 2
  MAX_COLUMNS: 4
  MAX_BUTTONS_PER_ROW: 8
  MAX_ROWS: 100
  ITEMS_PER_PAGE: 8

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # NAVIGATION BUTTONS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  NAV:
    BACK:
      emoji: "â—€ï¸"
      text_ru: "ĞĞ°Ğ·Ğ°Ğ´"
      text_en: "Back"
      callback: "nav_back"

    HOME:
      emoji: "ğŸ "
      text_ru: "ĞœĞµĞ½Ñ"
      text_en: "Menu"
      callback: "nav_home"

    CANCEL:
      emoji: "âœ–ï¸"
      text_ru: "ĞÑ‚Ğ¼ĞµĞ½Ğ°"
      text_en: "Cancel"
      callback: "nav_cancel"

    HELP:
      emoji: "â“"
      text_ru: "ĞŸĞ¾Ğ¼Ğ¾Ñ‰ÑŒ"
      text_en: "Help"
      callback: "nav_help"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # PAGINATION BUTTONS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  PAGE:
    PREV:
      emoji: "â—€ï¸"
      callback: "page_prev"

    NEXT:
      emoji: "â–¶ï¸"
      callback: "page_next"

    FIRST:
      emoji: "â®ï¸"
      callback: "page_first"

    LAST:
      emoji: "â­ï¸"
      callback: "page_last"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # CONFIRMATION BUTTONS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  CONFIRM:
    YES:
      emoji: "âœ…"
      text_ru: "Ğ”Ğ°"
      text_en: "Yes"
      callback: "confirm_yes"

    NO:
      emoji: "âŒ"
      text_ru: "ĞĞµÑ‚"
      text_en: "No"
      callback: "confirm_no"

    OK:
      emoji: "âœ”ï¸"
      text_ru: "OK"
      text_en: "OK"
      callback: "confirm_ok"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # SELECTION INDICATORS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  SELECT:
    CHECKED: "âœ“"
    UNCHECKED: "â—‹"
    RADIO_ON: "â—"
    RADIO_OFF: "â—‹"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # BADGES
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  BADGES:
    NEW: "ğŸ†•"
    HOT: "ğŸ”¥"
    PREMIUM: "â­"
    SALE: "ğŸ’¥"
    SOON: "ğŸ”œ"
