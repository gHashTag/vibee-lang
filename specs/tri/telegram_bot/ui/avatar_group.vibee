name: avatar_group
version: "3.0.0"
language: zig
module: avatar_group

description: |
  ğŸ¤– AVATAR GROUP - All Avatar Functions
  
  Trinity Formula: V = n Ã— 3^k where k=1 (Primary Level)
  Golden Layout: 3 columns, Ï†-based spacing
  
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  ğŸ¤– ĞĞ’ĞĞ¢ĞĞ  / AVATAR                                         â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                                                             â”‚
  â”‚  ğŸ§¬ Ğ¦Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ¾Ğµ Ñ‚ĞµĞ»Ğ¾  ğŸ§  ĞœĞ¾Ğ·Ğ³ Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€Ğ°   ğŸ’¬ Ğ§Ğ°Ñ‚ Ñ Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€Ğ¾Ğ¼      â”‚
  â”‚     100â­ ğŸ”¥          200â­              Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾           â”‚
  â”‚                                                             â”‚
  â”‚  ğŸ¯ Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸   ğŸ“Š ĞœĞ¾Ğ¸ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸     ğŸ”„ ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ     â”‚
  â”‚     Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾         Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾          150â­              â”‚
  â”‚                                                             â”‚
  â”‚  ğŸ‘¤ ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ        ğŸ“ˆ Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°     ğŸ—‘ï¸ Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ      â”‚
  â”‚     Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾         Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾          Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾          â”‚
  â”‚                                                             â”‚
  â”‚  â—€ï¸ ĞĞ°Ğ·Ğ°Ğ´                              ğŸ  ĞœĞµĞ½Ñ              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

imports:
  - trinity_menu_system
  - ux_design_system

types:
  AvatarFunction:
    description: "Avatar function type"
    variants:
      - DigitalBody        # Create digital avatar
      - AvatarBrain        # Train FLUX model
      - ChatWithAvatar     # Chat with AI avatar
      - SelectModel        # Choose active model
      - MyModels           # View trained models
      - UpdateModel        # Retrain model
      - AvatarProfile      # Avatar settings
      - AvatarStats        # Usage statistics
      - DeleteModel        # Remove model

  AvatarState:
    description: "User's avatar state"
    fields:
      has_model: Bool
      active_model_id: Option<String>
      models_count: Int
      total_generations: Int
      model_expires_at: Option<Timestamp>

  ModelInfo:
    description: "Trained model information"
    fields:
      id: String
      name: String
      trigger_word: String
      model_url: String
      status: String
      created_at: Timestamp
      generations_count: Int
      is_active: Bool

  TrainingConfig:
    description: "Model training configuration"
    fields:
      steps: Int
      trigger_word: String
      images_count: Int
      estimated_time_minutes: Int
      cost_stars: Int

behaviors:
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # GROUP MENU
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - name: show_avatar_menu
    given: Context and avatar state
    when: User enters avatar group
    then: Shows all avatar functions with model status

  - name: handle_avatar_selection
    given: Context and function ID
    when: User selects function
    then: Starts appropriate wizard or shows info

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # AVATAR FUNCTIONS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - name: start_digital_body
    given: Context
    when: User selects Digital Body
    then: Starts avatar creation wizard

  - name: start_avatar_brain
    given: Context
    when: User selects Avatar Brain
    then: Starts FLUX training wizard

  - name: start_chat_with_avatar
    given: Context
    when: User selects Chat
    then: Starts chat session (requires model)

  - name: show_model_selection
    given: Context
    when: User selects Select Model
    then: Shows list of trained models

  - name: show_my_models
    given: Context
    when: User selects My Models
    then: Shows all user's models with stats

  - name: start_update_model
    given: Context and model ID
    when: User selects Update Model
    then: Starts model retraining wizard

  - name: show_avatar_profile
    given: Context
    when: User selects Profile
    then: Shows avatar settings

  - name: show_avatar_stats
    given: Context
    when: User selects Statistics
    then: Shows usage statistics

  - name: confirm_delete_model
    given: Context and model ID
    when: User selects Delete
    then: Shows confirmation dialog

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # MODEL MANAGEMENT
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - name: get_user_models
    given: User ID
    when: Fetching models
    then: Returns list of ModelInfo

  - name: set_active_model
    given: User ID and model ID
    when: Changing active model
    then: Updates active model

  - name: delete_model
    given: Model ID
    when: Deleting model
    then: Removes model from system

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # KEYBOARD BUILDER
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - name: build_avatar_keyboard
    given: Language and avatar state
    when: Building menu keyboard
    then: Returns 3-column avatar functions grid

  - name: build_models_keyboard
    given: Models list and language
    when: Building model selection
    then: Returns models list with active indicator

constants:
  GROUP_ID: "avatar"
  GROUP_EMOJI: "ğŸ¤–"
  GROUP_NAME_RU: "ĞĞ’ĞĞ¢ĞĞ "
  GROUP_NAME_EN: "AVATAR"
  GROUP_COLOR: "#9B59B6"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # AVATAR FUNCTIONS (9 items = 3Â² for Trinity)
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  FUNCTIONS:
    DIGITAL_BODY:
      id: "digital_body"
      emoji: "ğŸ§¬"
      name_ru: "Ğ¦Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ¾Ğµ Ñ‚ĞµĞ»Ğ¾"
      name_en: "Digital Body"
      desc_ru: "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ ÑĞ²Ğ¾Ğ¹ Ñ†Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ¾Ğ¹ Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€"
      desc_en: "Create your digital avatar"
      callback: "avatar_digital_body"
      cost: 100
      is_popular: true

    AVATAR_BRAIN:
      id: "avatar_brain"
      emoji: "ğŸ§ "
      name_ru: "ĞœĞ¾Ğ·Ğ³ Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€Ğ°"
      name_en: "Avatar Brain"
      desc_ru: "ĞĞ±ÑƒÑ‡Ğ¸Ñ‚Ğµ FLUX Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ğ½Ğ° ÑĞ²Ğ¾Ğ¸Ñ… Ñ„Ğ¾Ñ‚Ğ¾"
      desc_en: "Train FLUX model on your photos"
      callback: "avatar_brain"
      cost: 200

    CHAT_WITH_AVATAR:
      id: "chat_with_avatar"
      emoji: "ğŸ’¬"
      name_ru: "Ğ§Ğ°Ñ‚ Ñ Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€Ğ¾Ğ¼"
      name_en: "Chat with Avatar"
      desc_ru: "ĞĞ±Ñ‰Ğ°Ğ¹Ñ‚ĞµÑÑŒ Ñ Ğ²Ğ°ÑˆĞ¸Ğ¼ AI Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€Ğ¾Ğ¼"
      desc_en: "Chat with your AI avatar"
      callback: "avatar_chat"
      cost: 0
      requires_model: true

    SELECT_MODEL:
      id: "select_model"
      emoji: "ğŸ¯"
      name_ru: "Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸"
      name_en: "Select Model"
      desc_ru: "Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½ÑƒÑ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ"
      desc_en: "Choose active model"
      callback: "avatar_select_model"
      cost: 0

    MY_MODELS:
      id: "my_models"
      emoji: "ğŸ“Š"
      name_ru: "ĞœĞ¾Ğ¸ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸"
      name_en: "My Models"
      desc_ru: "ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ½Ñ‹Ñ… Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹"
      desc_en: "View trained models"
      callback: "avatar_my_models"
      cost: 0

    UPDATE_MODEL:
      id: "update_model"
      emoji: "ğŸ”„"
      name_ru: "ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ"
      name_en: "Update Model"
      desc_ru: "ĞŸĞµÑ€ĞµĞ¾Ğ±ÑƒÑ‡Ğ¸Ñ‚Ğµ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ñ Ğ½Ğ¾Ğ²Ñ‹Ğ¼Ğ¸ Ñ„Ğ¾Ñ‚Ğ¾"
      desc_en: "Retrain model with new photos"
      callback: "avatar_update_model"
      cost: 150

    AVATAR_PROFILE:
      id: "avatar_profile"
      emoji: "ğŸ‘¤"
      name_ru: "ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€Ğ°"
      name_en: "Avatar Profile"
      desc_ru: "ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ²Ğ°ÑˆĞµĞ³Ğ¾ Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€Ğ°"
      desc_en: "Your avatar settings"
      callback: "avatar_profile"
      cost: 0

    AVATAR_STATS:
      id: "avatar_stats"
      emoji: "ğŸ“ˆ"
      name_ru: "Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°"
      name_en: "Statistics"
      desc_ru: "Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ"
      desc_en: "Usage statistics"
      callback: "avatar_stats"
      cost: 0

    DELETE_MODEL:
      id: "delete_model"
      emoji: "ğŸ—‘ï¸"
      name_ru: "Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ"
      name_en: "Delete Model"
      desc_ru: "Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ½ÑƒÑ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ"
      desc_en: "Delete trained model"
      callback: "avatar_delete_model"
      cost: 0

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # TRAINING CONFIG
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  TRAINING_STEPS:
    BASIC:
      steps: 500
      cost: 50
      time_minutes: 5
      quality: "basic"

    STANDARD:
      steps: 1000
      cost: 100
      time_minutes: 10
      quality: "standard"

    ADVANCED:
      steps: 2000
      cost: 150
      time_minutes: 15
      quality: "advanced"

    PREMIUM:
      steps: 4000
      cost: 200
      time_minutes: 25
      quality: "premium"

  # Requirements
  MIN_PHOTOS: 10
  MAX_PHOTOS: 50
  RECOMMENDED_PHOTOS: 20

  # Layout
  COLUMNS: 3
  ROWS: 3
