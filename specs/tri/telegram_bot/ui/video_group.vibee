name: video_group
version: "3.0.0"
language: zig
module: video_group

description: |
  ğŸ¬ VIDEO GROUP - All Video Functions
  
  Trinity Formula: V = n Ã— 3^k where k=1 (Primary Level)
  Golden Layout: 3 columns, Ï†-based spacing
  
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  ğŸ¬ Ğ’Ğ˜Ğ”Ğ•Ğ / VIDEO                                           â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                                                             â”‚
  â”‚  ğŸ“ Ğ¢ĞµĞºÑÑ‚â†’Ğ’Ğ¸Ğ´ĞµĞ¾    ğŸ–¼ï¸ Ğ¤Ğ¾Ñ‚Ğ¾â†’Ğ’Ğ¸Ğ´ĞµĞ¾    ğŸ‘„ Ğ¡Ğ¸Ğ½Ñ…Ñ€. Ğ³ÑƒĞ±          â”‚
  â”‚     50â­ ğŸ†•           30â­              56â­                  â”‚
  â”‚                                                             â”‚
  â”‚  ğŸ“º Ğ£Ğ»ÑƒÑ‡ÑˆĞ¸Ñ‚ÑŒ       ğŸ“„ Ğ’Ğ¸Ğ´ĞµĞ¾â†’Ğ¢ĞµĞºÑÑ‚   ğŸï¸ ĞœĞ¾Ñ€Ñ„Ğ¸Ğ½Ğ³             â”‚
  â”‚     20â­              5â­               15â­                  â”‚
  â”‚                                                             â”‚
  â”‚  ğŸ¥ Kling Pro      âš¡ Ray V2         ğŸŒŸ Veo3                â”‚
  â”‚     80â­              60â­              100â­ ğŸ”¥              â”‚
  â”‚                                                             â”‚
  â”‚  â—€ï¸ ĞĞ°Ğ·Ğ°Ğ´                              ğŸ  ĞœĞµĞ½Ñ              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

imports:
  - trinity_menu_system
  - ux_design_system

types:
  VideoFunction:
    description: "Video function type"
    variants:
      - TextToVideo        # Generate from text
      - ImageToVideo       # Animate image
      - LipSync            # Sync lips to audio
      - VideoUpscaler      # Enhance quality (NEW: crystal-video-upscaler)
      - VideoTranscription # Video to text
      - Morphing           # Face morphing
      - MotionControl      # Character animation (NEW: kling-v2.6-motion-control)
      - KlingPro           # Kling AI model
      - RayV2              # Ray AI model
      - Veo3               # Google Veo3 model

  VideoModel:
    description: "Video generation model"
    variants:
      - KlingV1_6Pro
      - RayV2
      - Veo3
      - Veo3Fast
      - MinimaxVideo
      - HaiperVideo
      - RunwayAleph

  VideoRequest:
    description: "Video generation request"
    fields:
      function: VideoFunction
      model: Option<VideoModel>
      prompt: Option<String>
      image_url: Option<String>
      audio_url: Option<String>
      duration: Int
      aspect_ratio: String
      telegram_id: String

  VideoResult:
    description: "Video generation result"
    fields:
      success: Bool
      video_url: Option<String>
      job_id: Option<String>
      error: Option<String>
      cost_charged: Int

behaviors:
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # GROUP MENU
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - name: show_video_menu
    given: Context and user state
    when: User enters video group
    then: Shows all video functions in 3-column grid

  - name: handle_video_selection
    given: Context and function ID
    when: User selects function
    then: Starts appropriate wizard

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # VIDEO FUNCTIONS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - name: start_text_to_video
    given: Context
    when: User selects Text to Video
    then: Starts text-to-video wizard with model selection

  - name: start_image_to_video
    given: Context
    when: User selects Image to Video
    then: Starts image-to-video wizard

  - name: start_lip_sync
    given: Context
    when: User selects Lip Sync
    then: Starts lip sync wizard (requires voice)

  - name: start_video_upscaler
    given: Context
    when: User selects Video Upscaler
    then: Starts video enhancement wizard

  - name: start_video_transcription
    given: Context
    when: User selects Video Transcription
    then: Starts transcription wizard

  - name: start_morphing
    given: Context
    when: User selects Morphing
    then: Starts face morphing wizard

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # MODEL SELECTION
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - name: show_model_selection
    given: Context and function
    when: Function requires model choice
    then: Shows available models with prices

  - name: get_model_price
    given: Model and duration
    when: Calculating cost
    then: Returns cost in stars

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # KEYBOARD BUILDER
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - name: build_video_keyboard
    given: Language and user state
    when: Building menu keyboard
    then: Returns 3-column video functions grid

  - name: build_model_keyboard
    given: Function and language
    when: Building model selection
    then: Returns model options with prices

constants:
  GROUP_ID: "video"
  GROUP_EMOJI: "ğŸ¬"
  GROUP_NAME_RU: "Ğ’Ğ˜Ğ”Ğ•Ğ"
  GROUP_NAME_EN: "VIDEO"
  GROUP_COLOR: "#4ECDC4"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # VIDEO FUNCTIONS (9 items = 3Â² for Trinity)
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  FUNCTIONS:
    TEXT_TO_VIDEO:
      id: "text_to_video"
      emoji: "ğŸ“"
      name_ru: "Ğ¢ĞµĞºÑÑ‚ â†’ Ğ’Ğ¸Ğ´ĞµĞ¾"
      name_en: "Text â†’ Video"
      desc_ru: "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ²Ğ¸Ğ´ĞµĞ¾ Ğ¿Ğ¾ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ"
      desc_en: "Create video from description"
      callback: "video_text_to_video"
      cost: 50
      is_new: true

    IMAGE_TO_VIDEO:
      id: "image_to_video"
      emoji: "ğŸ–¼ï¸"
      name_ru: "Ğ¤Ğ¾Ñ‚Ğ¾ â†’ Ğ’Ğ¸Ğ´ĞµĞ¾"
      name_en: "Photo â†’ Video"
      desc_ru: "ĞĞ¶Ğ¸Ğ²Ğ¸Ñ‚Ğµ Ñ„Ğ¾Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ"
      desc_en: "Animate your photo"
      callback: "video_image_to_video"
      cost: 30

    LIP_SYNC:
      id: "lip_sync"
      emoji: "ğŸ‘„"
      name_ru: "Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ³ÑƒĞ±"
      name_en: "Lip Sync"
      desc_ru: "Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ğ³ÑƒĞ±Ñ‹ Ñ Ğ°ÑƒĞ´Ğ¸Ğ¾"
      desc_en: "Sync lips to audio"
      callback: "video_lip_sync"
      cost: 56
      requires_voice: true

    VIDEO_UPSCALER:
      id: "video_upscaler"
      emoji: "ğŸ“¹"
      name_ru: "ĞĞ¿ÑĞºĞµĞ¹Ğ» Ğ²Ğ¸Ğ´ĞµĞ¾"
      name_en: "Video Upscaler"
      desc_ru: "Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ° Ğ´Ğ¾ 4K"
      desc_en: "Upscale to 4K quality"
      callback: "video_upscale"
      cost: 9
      cost_unit: "per_second"
      is_new: true
      model: "philz1337x/crystal-video-upscaler"

    VIDEO_TRANSCRIPTION:
      id: "video_transcription"
      emoji: "ğŸ“"
      name_ru: "Ğ’Ğ¸Ğ´ĞµĞ¾ â†’ Ğ¢ĞµĞºÑÑ‚"
      name_en: "Video â†’ Text"
      desc_ru: "Ğ¢Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ±Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ğ²Ğ¸Ğ´ĞµĞ¾ (Whisper)"
      desc_en: "Transcribe video (Whisper)"
      callback: "video_transcription"
      cost: 1
      cost_unit: "per_minute"
      model: "turian/insanely-fast-whisper-with-video"

    MORPHING:
      id: "morphing"
      emoji: "ğŸï¸"
      name_ru: "ĞœĞ¾Ñ€Ñ„Ğ¸Ğ½Ğ³"
      name_en: "Morphing"
      desc_ru: "ĞŸĞ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¿Ñ€ĞµĞ²Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ Ğ»Ğ¸Ñ†"
      desc_en: "Smooth face transformation"
      callback: "video_morphing"
      cost: 15

    MOTION_CONTROL:
      id: "motion_control"
      emoji: "ğŸ•º"
      name_ru: "Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸ĞµĞ¼"
      name_en: "Motion Control"
      desc_ru: "ĞĞ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ° Ñ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ĞµĞ¼ Ğ¿Ğ¾Ğ·"
      desc_en: "Character animation with pose control"
      callback: "video_motion_control"
      cost: 38
      cost_unit: "per_5_seconds"
      is_new: true
      model: "kwaivgi/kling-v2.6-motion-control"

    KLING_PRO:
      id: "kling_pro"
      emoji: "ğŸ¥"
      name_ru: "Kling Pro"
      name_en: "Kling Pro"
      desc_ru: "ĞŸÑ€ĞµĞ¼Ğ¸ÑƒĞ¼ Ğ²Ğ¸Ğ´ĞµĞ¾ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ"
      desc_en: "Premium video generation"
      callback: "video_kling_pro"
      cost: 80

    RAY_V2:
      id: "ray_v2"
      emoji: "âš¡"
      name_ru: "Ray V2"
      name_en: "Ray V2"
      desc_ru: "Ğ‘Ñ‹ÑÑ‚Ñ€Ğ°Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ²Ğ¸Ğ´ĞµĞ¾"
      desc_en: "Fast video generation"
      callback: "video_ray_v2"
      cost: 60

    VEO3:
      id: "veo3"
      emoji: "ğŸŒŸ"
      name_ru: "Veo3"
      name_en: "Veo3"
      desc_ru: "Google Veo3 - Ñ‚Ğ¾Ğ¿ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾"
      desc_en: "Google Veo3 - top quality"
      callback: "video_veo3"
      cost: 100
      is_popular: true

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # VIDEO MODELS CONFIG
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  MODELS:
    KLING_V1_6_PRO:
      id: "kling-v1.6-pro"
      name: "Kling v1.6 Pro"
      cost_per_5s: 80
      max_duration: 10
      quality: "high"

    RAY_V2:
      id: "ray-v2"
      name: "Ray V2"
      cost_per_5s: 60
      max_duration: 10
      quality: "medium"

    VEO3:
      id: "veo3"
      name: "Google Veo3"
      cost_per_5s: 100
      max_duration: 8
      quality: "ultra"

    VEO3_FAST:
      id: "veo3_fast"
      name: "Veo3 Fast"
      cost_per_5s: 70
      max_duration: 8
      quality: "high"

    MINIMAX:
      id: "minimax"
      name: "Minimax"
      cost_per_5s: 40
      max_duration: 6
      quality: "medium"

    HAIPER:
      id: "haiper"
      name: "Haiper"
      cost_per_5s: 35
      max_duration: 4
      quality: "medium"

  # Layout
  COLUMNS: 3
  ROWS: 3

  # Duration options
  DURATION_OPTIONS: [5, 10, 15, 30]
  DEFAULT_DURATION: 5
