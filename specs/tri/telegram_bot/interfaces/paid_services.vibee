name: paid_services
version: "1.0.0"
language: zig
module: paid_services

description: |
  Paid services enumeration and configuration for VIBEE Telegram bot.
  Defines all monetized AI services with pricing types and costs.

types:
  PaidServiceEnum:
    description: "Enumeration of all paid services"
    variants:
      # Image generation services
      - NeuroPhoto
      - NeuroPhotoV2
      - ImageToPrompt
      - ImageUpscaler
      # Video generation services
      - KlingVideo
      - HaiperVideo
      - VideoGenerationOther
      - MinimaxVideo
      - ImageToVideo
      - TextToVideo
      # Audio services
      - TextToSpeech
      - Voice
      - VoiceToText
      - LipSync
      - VideoTranscription
      # Avatar services
      - DigitalAvatarBody
      - DigitalAvatarBodyV2

  PricingType:
    description: "Type of pricing calculation"
    variants:
      - Simple    # Fixed price
      - Complex   # Depends on parameters

  ServiceCategory:
    description: "Category of service"
    variants:
      - Image
      - Video
      - Audio
      - Avatar

  PaidServiceConfig:
    description: "Configuration for a paid service"
    fields:
      name: String
      pricing_type: PricingType
      base_cost_usd: Option<Float>
      description: String
      category: ServiceCategory

  CostCalculationParams:
    description: "Parameters for cost calculation"
    fields:
      mode: String
      steps: Option<Int>
      num_images: Option<Int>
      model_id: Option<String>

  CostCalculationResult:
    description: "Result of cost calculation"
    fields:
      stars: Int
      rubles: Int
      dollars: Float

behaviors:
  - name: get_paid_service_config
    given: A paid service enum value
    when: Configuration is requested
    then: Returns the service configuration

  - name: is_paid_service
    given: A service string identifier
    when: Checking if service is paid
    then: Returns true if service is in PaidServiceEnum

  - name: get_services_by_category
    given: A service category
    when: Filtering services
    then: Returns list of services in that category

  - name: get_simple_pricing_services
    given: Request for simple pricing services
    when: Filtering by pricing type
    then: Returns services with fixed prices

  - name: get_complex_pricing_services
    given: Request for complex pricing services
    when: Filtering by pricing type
    then: Returns services with parameter-dependent prices

  - name: calculate_final_price_in_stars
    given: Base cost in USD, star cost, and markup
    when: Calculating final price
    then: Returns price in stars with markup applied

constants:
  STAR_COST_USD: 0.016
  DEFAULT_MARKUP: 1.5
  
  # Base costs in USD for simple pricing services
  NEURO_PHOTO_COST: 0.08
  NEURO_PHOTO_V2_COST: 0.14
  IMAGE_TO_PROMPT_COST: 0.03
  IMAGE_UPSCALER_COST: 0.04
  TEXT_TO_SPEECH_COST: 0.12
  VOICE_COST: 0.9
  VOICE_TO_TEXT_COST: 0.08
  LIP_SYNC_COST: 0.9
  VIDEO_TRANSCRIPTION_COST: 0.03
