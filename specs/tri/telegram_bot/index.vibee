name: telegram_bot
version: "1.0.0"
language: zig
module: telegram_bot

description: |
  VIBEE Telegram Bot - AI-powered multi-bot platform.
  
  Main features:
  - ü§ñ Digital Avatar Body (–¶–∏—Ñ—Ä–æ–≤–æ–µ —Ç–µ–ª–æ)
  - üì∏ Neuro Photo (–ù–µ–π—Ä–æ—Ñ–æ—Ç–æ)
  - üîç Image to Prompt (–ü—Ä–æ–º–ø—Ç –∏–∑ —Ñ–æ—Ç–æ)
  - üß† Avatar Brain / Model Training (–ú–æ–∑–≥ –∞–≤–∞—Ç–∞—Ä–∞)
  - üí≠ Chat with Avatar (–ß–∞—Ç —Å –∞–≤–∞—Ç–∞—Ä–æ–º)
  - ü§ñ AI Model Selection (–í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –ò–ò)
  - üé§ Voice Avatar (–ì–æ–ª–æ—Å –∞–≤–∞—Ç–∞—Ä–∞)
  - üéôÔ∏è Text to Speech (–¢–µ–∫—Å—Ç –≤ –≥–æ–ª–æ—Å)
  - üé• Image to Video (–§–æ—Ç–æ –≤ –≤–∏–¥–µ–æ)
  - üé¨ Text to Video (–í–∏–¥–µ–æ –∏–∑ —Ç–µ–∫—Å—Ç–∞)
  
  Converted from: https://github.com/gHashTag/999-multibots-telegraf

imports:
  # Interfaces
  - interfaces/paid_services
  - interfaces/modes
  - interfaces/user
  - interfaces/telegram
  
  # Core
  - core/bot
  - core/supabase_client
  - core/openai_client
  - core/replicate_client
  - core/elevenlabs_client
  
  # Services
  - services/neuro_photo
  - services/text_to_speech
  - services/text_to_video
  - services/image_to_video
  - services/image_to_prompt
  - services/voice_avatar
  - services/lip_sync
  - services/model_training
  - services/face_swap
  - services/chat_with_avatar
  
  # Handlers
  - handlers/callback_handler
  - handlers/text_message_handler
  - handlers/photo_handler
  - handlers/payment_handler
  - handlers/admin_commands
  
  # Database
  - db/user_repository
  - db/payment_repository
  - db/model_repository
  - db/generation_repository
  
  # Utils
  - utils/logger
  - utils/language
  - utils/cost_calculator
  
  # Menu
  - menu/main_menu
  
  # Scenes
  - scenes/neuro_photo_wizard
  - scenes/digital_avatar_wizard
  - scenes/text_to_video_wizard
  
  # Middleware
  - middleware/auth_middleware
  - middleware/balance_middleware

types:
  BotApplication:
    description: "Main bot application"
    fields:
      config: BotConfig
      bot: BotInstance
      db: SupabaseClient
      is_running: Bool

behaviors:
  - name: create_application
    given: Configuration
    when: Initializing application
    then: Returns BotApplication

  - name: start_application
    given: BotApplication
    when: Starting bot
    then: Bot begins processing

  - name: stop_application
    given: BotApplication
    when: Stopping bot
    then: Graceful shutdown

  - name: register_all_handlers
    given: BotApplication
    when: Setting up handlers
    then: All handlers registered

  - name: register_all_scenes
    given: BotApplication
    when: Setting up scenes
    then: All scenes registered

  - name: register_all_middleware
    given: BotApplication
    when: Setting up middleware
    then: All middleware registered

constants:
  APP_NAME: "VIBEE"
  APP_VERSION: "1.0.0"
  
  # Environment variables
  ENV_BOT_TOKEN: "BOT_TOKEN"
  ENV_SUPABASE_URL: "SUPABASE_URL"
  ENV_SUPABASE_KEY: "SUPABASE_SERVICE_KEY"
  ENV_OPENAI_KEY: "OPENAI_API_KEY"
  ENV_REPLICATE_TOKEN: "REPLICATE_API_TOKEN"
  ENV_ELEVENLABS_KEY: "ELEVENLABS_API_KEY"
