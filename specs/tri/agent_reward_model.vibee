# Reward Model Module
# Evaluate action quality and task progress
# Supports verbal and scalar feedback

name: agent_reward_model
version: "1.0.0"
language: zig
module: agent_reward_model

types:
  Reward:
    fields:
      reward_id: String
      value: Float
      reward_type: String
      source: String
      explanation: String

  RewardSignal:
    fields:
      signal_id: String
      signal_type: String
      scalar_value: Option<Float>
      verbal_feedback: Option<String>

  ProgressMetric:
    fields:
      metric_id: String
      metric_name: String
      current_value: Float
      target_value: Float
      progress_percent: Float

  RewardModel:
    fields:
      model_id: String
      reward_components: List<String>
      weights: Map<String,Float>
      normalization: String

  TaskCompletion:
    fields:
      completion_id: String
      is_complete: Bool
      completion_score: Float
      missing_criteria: List<String>

behaviors:
  - name: compute_reward
    given: Action and outcome
    when: Reward computation needed
    then: Returns computed reward

  - name: evaluate_progress
    given: Current state and goal
    When: Progress evaluation needed
    then: Returns progress metrics

  - name: generate_verbal_feedback
    given: Action trajectory
    when: Verbal feedback needed
    then: Returns verbal reward signal

  - name: check_task_completion
    given: State and success criteria
    when: Completion check needed
    then: Returns completion status

  - name: aggregate_rewards
    given: Multiple reward signals
    when: Aggregation needed
    then: Returns aggregated reward

  - name: shape_reward
    given: Raw reward and shaping config
    when: Reward shaping needed
    then: Returns shaped reward
