# VIBEE Specification v12980
# IoT Protocol - Communication protocols for IoT devices
name: iot_protocol_v12980
version: "1.0.0"
language: zig
module: iot_protocol

types:
  Protocol:
    fields:
      mqtt: String
      coap: String
      lorawan: String
      zigbee: String
      matter: String

  IoTMessage:
    fields:
      id: String
      protocol: String
      topic: String
      payload: String
      qos: Int
      timestamp: Timestamp

  Connection:
    fields:
      id: String
      protocol: String
      endpoint: String
      status: String
      latency_ms: Int

  Subscription:
    fields:
      connection_id: String
      topic: String
      callback: String

  ProtocolStats:
    fields:
      connection_id: String
      messages_sent: Int
      messages_received: Int
      bytes_transferred: Int
      errors: Int

behaviors:
  - name: connect
    given: Protocol and endpoint
    When: Connection established
    then: Returns connection

  - name: publish
    given: Connection and message
    When: Message published
    then: Returns publish status

  - name: subscribe
    given: Connection and topic
    When: Subscription created
    then: Returns subscription

  - name: get_stats
    given: Connection
    When: Stats requested
    then: Returns protocol stats
