# FFI Ada v56600 - Ada pragma Import
# VIBEE → Ada Native Bindings
# φ² + 1/φ² = 3 | PHOENIX = 999

name: ffi_ada_v56600
version: "56.6.0"
language: zig
module: ffi_ada

creation_pattern:
  source: VibeeSpec
  transformer: AdaBindingsGenerator
  result: AdaPackage

types:
  AdaType:
    fields:
      name: String
      ada_type: String
      c_type: String
      convention: String

  AdaImport:
    fields:
      name: String
      external_name: String
      convention: String
      link_name: Option<String>

  AdaRecord:
    fields:
      name: String
      components: List<String>
      is_tagged: Bool
      convention: Option<String>

  AdaSubprogram:
    fields:
      name: String
      params: List<String>
      return_type: Option<String>
      is_function: Bool

  AdaPackage:
    fields:
      name: String
      with_clauses: List<String>
      types: List<AdaType>
      subprograms: List<AdaSubprogram>
      imports: List<AdaImport>

  GPRProject:
    fields:
      name: String
      source_dirs: List<String>
      languages: List<String>
      library_options: List<String>

  AdaAccess:
    fields:
      type_name: String
      is_constant: Bool
      is_all: Bool

  AdaCallback:
    fields:
      name: String
      access_type: String
      convention: String

behaviors:
  - name: generate_ada_package
    given: VibeeSpec
    when: Ada package needed
    then: Ada spec and body files

  - name: generate_pragma_import
    given: C function
    when: pragma Import needed
    then: AdaImport

  - name: map_vibee_to_ada_type
    given: Vibee type
    when: Type mapping needed
    then: Ada type with convention

  - name: generate_record
    given: C struct
    when: Ada record needed
    then: AdaRecord

  - name: generate_gpr
    given: Project config
    when: .gpr file needed
    then: GPRProject

  - name: handle_access_type
    given: C pointer
    when: Access type needed
    then: AdaAccess

  - name: handle_callback
    given: C callback
    when: Access to subprogram needed
    then: AdaCallback

  - name: handle_string
    given: C string
    when: Interfaces.C.Strings needed
    then: chars_ptr conversion
