# FFI C Bindings v56010 - C Language Bindings Generator
# VIBEE → C Header/Source Generation
# φ² + 1/φ² = 3 | PHOENIX = 999

name: ffi_c_bindings_v56010
version: "56.0.10"
language: zig
module: ffi_c_bindings

creation_pattern:
  source: VibeeSpec
  transformer: CBindingsGenerator
  result: CHeaderAndSource

types:
  CType:
    fields:
      name: String
      c_name: String
      size: Int
      alignment: Int
      is_typedef: Bool
      original_type: Option<String>

  CFunction:
    fields:
      name: String
      return_type: String
      parameters: List<CParameter>
      is_static: Bool
      is_inline: Bool
      attributes: List<String>

  CParameter:
    fields:
      name: String
      type_name: String
      is_const: Bool
      is_pointer: Bool
      array_size: Option<Int>

  CStruct:
    fields:
      name: String
      fields: List<CField>
      is_packed: Bool
      alignment: Option<Int>

  CField:
    fields:
      name: String
      type_name: String
      bit_width: Option<Int>
      offset: Int

  CEnum:
    fields:
      name: String
      values: List<CEnumValue>
      underlying_type: String

  CEnumValue:
    fields:
      name: String
      value: Int

  CHeader:
    fields:
      name: String
      includes: List<String>
      types: List<CType>
      structs: List<CStruct>
      enums: List<CEnum>
      functions: List<CFunction>
      macros: List<String>

  CSource:
    fields:
      name: String
      header: String
      implementations: List<String>

behaviors:
  - name: generate_header
    given: VibeeSpec with types and functions
    when: C header generation requested
    then: Complete .h file with guards

  - name: generate_source
    given: VibeeSpec and header
    when: C implementation needed
    then: Complete .c file

  - name: map_vibee_to_c_type
    given: Vibee type definition
    when: Type mapping needed
    then: Equivalent C type

  - name: generate_struct
    given: Vibee struct definition
    when: C struct needed
    then: Properly aligned C struct

  - name: generate_function_decl
    given: Vibee function
    when: C declaration needed
    then: C function prototype

  - name: generate_enum
    given: Vibee enum
    when: C enum needed
    then: C enum definition

  - name: generate_typedef
    given: Vibee type alias
    when: C typedef needed
    then: C typedef statement

  - name: generate_include_guard
    given: Header name
    when: Header protection needed
    then: #ifndef/#define/#endif block
