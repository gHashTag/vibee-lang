name: agent_navigation_scroll
version: "1.0.0"
language: zig
module: agent_navigation_scroll

description: |
  Agent Navigation Scroll - скролл и hover
  Проблема OpenAI Operator: ненадежная прокрутка
  Решение: умный скролл с верификацией
  φ² + 1/φ² = 3 | PHOENIX = 999

types:
  ScrollDirection:
    fields:
      direction: String
      amount: Int
      unit: String

  ScrollTarget:
    fields:
      selector: Option<String>
      coordinates: Option<String>
      to_element: Option<String>

  ScrollResult:
    fields:
      success: Bool
      scroll_position: String
      visible_content: String
      reached_end: Bool

  HoverTarget:
    fields:
      selector: String
      duration_ms: Int
      expect_tooltip: Bool

  HoverResult:
    fields:
      success: Bool
      tooltip_appeared: Bool
      menu_appeared: Bool
      element_state: String

behaviors:
  - name: scroll_down
    given: Количество пикселей или страниц
    when: Прокрутка вниз
    then: ScrollResult с новой позицией

  - name: scroll_up
    given: Количество пикселей или страниц
    when: Прокрутка вверх
    then: ScrollResult с новой позицией

  - name: scroll_to_element
    given: ScrollTarget элемент
    when: Прокрутка до элемента
    then: ScrollResult элемент в viewport

  - name: scroll_to_bottom
    given: Текущая страница
    when: Прокрутка до конца
    then: ScrollResult reached_end true

  - name: hover
    given: HoverTarget элемент
    when: Наведение мыши
    then: HoverResult с состоянием

  - name: hover_and_wait
    given: HoverTarget и ожидаемый результат
    when: Наведение и ожидание tooltip/menu
    then: HoverResult с появившимся элементом
