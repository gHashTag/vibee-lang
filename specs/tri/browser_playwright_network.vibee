# Playwright Network Module
# Request interception, mocking, monitoring
# Network traffic control

name: browser_playwright_network
version: "1.0.0"
language: zig
module: browser_playwright_network

types:
  NetworkRequest:
    fields:
      request_id: String
      url: String
      method: String
      headers: Map<String,String>
      post_data: Option<String>
      resource_type: String

  NetworkResponse:
    fields:
      response_id: String
      request_id: String
      status: Int
      status_text: String
      headers: Map<String,String>
      body: Option<String>

  RouteHandler:
    fields:
      handler_id: String
      url_pattern: String
      handler_type: String

  MockResponse:
    fields:
      status: Int
      headers: Map<String,String>
      body: String
      content_type: String

  NetworkConditions:
    fields:
      offline: Bool
      download_throughput: Int
      upload_throughput: Int
      latency: Int

  RequestFilter:
    fields:
      url_pattern: Option<String>
      resource_types: List<String>
      methods: List<String>

behaviors:
  - name: intercept_route
    given: Page and URL pattern
    when: Request interception needed
    then: Returns route handler

  - name: fulfill_route
    given: Route and mock response
    when: Mock response needed
    then: Returns fulfill result

  - name: abort_route
    given: Route and error reason
    when: Request abort needed
    then: Returns abort result

  - name: continue_route
    given: Route and modifications
    when: Modified continue needed
    then: Returns continue result

  - name: wait_for_request
    given: Page and URL pattern
    when: Request wait needed
    then: Returns captured request

  - name: wait_for_response
    given: Page and URL pattern
    when: Response wait needed
    then: Returns captured response

  - name: set_offline
    given: Context and offline state
    when: Offline mode needed
    then: Returns state change result

  - name: emulate_network
    given: Context and conditions
    when: Network throttling needed
    then: Returns emulation result
