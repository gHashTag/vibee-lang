name: e2e_warp_browser
version: "1.0.0"
language: zig
module: e2e_warp_browser

description: |
  E2E Tests for WARP Browser
  Полное тестирование всех компонентов
  Бенчмарки против конкурентов
  φ² + 1/φ² = 3 | PHOENIX = 999

types:
  E2ETestCase:
    fields:
      name: String
      description: String
      steps: List<String>
      expected_result: String
      timeout_ms: Int

  E2ETestResult:
    fields:
      test_name: String
      passed: Bool
      actual_result: String
      execution_time_ms: Float
      error: Option<String>

  BenchmarkResult:
    fields:
      operation: String
      vibee_time_ms: Float
      competitor_time_ms: Float
      speedup: Float
      winner: String

  E2ESuite:
    fields:
      suite_name: String
      tests: List<String>
      passed_count: Int
      failed_count: Int
      total_time_ms: Float

  PerformanceBaseline:
    fields:
      operation: String
      baseline_ms: Float
      target_ms: Float
      current_ms: Float
      improvement_percent: Float

behaviors:
  - name: test_cdp_latency
    given: CDP соединение
    when: Измерение задержки команд
    then: Задержка < 1ms

  - name: test_screenshot_speed
    given: Страница для скриншота
    when: Захват viewport
    then: Время < 10ms

  - name: test_navigation_speed
    given: URL для навигации
    when: Переход на страницу
    then: Время < 500ms (с кэшем < 100ms)

  - name: test_input_speed
    given: Текст для ввода
    when: Ввод 100 символов
    then: Время < 500ms (5ms/символ)

  - name: test_react_agent
    given: Простая задача
    when: Выполнение ReAct агентом
    then: Задача выполнена за < 10 шагов

  - name: test_yolo_speedup
    given: Задача в YOLO режиме
    when: Сравнение с обычным режимом
    then: Ускорение > 3x

  - name: test_matryoshka_acceleration
    given: Операция с глубиной 5
    when: Измерение ускорения
    then: Ускорение > 5x

  - name: test_security_isolation
    given: Изолированный профиль
    when: Попытка cross-origin доступа
    then: Доступ заблокирован

  - name: test_prompt_injection
    given: Страница с injection попыткой
    when: Обработка контента
    then: Injection обнаружен и заблокирован

  - name: benchmark_vs_competitors
    given: Набор стандартных задач
    when: Сравнение с OpenAI Operator, Fellou
    then: BenchmarkResult с speedup
