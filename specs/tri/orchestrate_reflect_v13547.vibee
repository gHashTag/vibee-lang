# VIBEE Specification v13547
# Reflection Agent
# KOSCHEI CYCLE 11 - 1000000x SPEEDUP

name: orchestrate_reflect
version: "13547"
language: zig
module: orchestrate_reflect

types:
  ReflectionAgent:
    fields:
      id: String
      llm: Object
      memory: Object

  Reflection:
    fields:
      reflection_id: String
      subject: String
      insights: List<String>
      improvements: List<String>

  ReflectionConfig:
    fields:
      depth: Int
      focus_areas: List<String>
      include_metrics: Bool

  SelfCritique:
    fields:
      action: String
      critique: String
      score: Float
      suggestions: List<String>

  ReflectionMetrics:
    fields:
      reflections_total: Int
      improvements_identified: Int
      improvements_applied: Int

  LearningOutcome:
    fields:
      lesson: String
      context: String
      applicable_to: List<String>

behaviors:
  - name: reflect_on_action
    given: Completed action
    When: Reflection requested
    then: Action reflected upon

  - name: self_critique
    given: Output to critique
    When: Critique requested
    then: Self-critique generated

  - name: identify_improvements
    given: Reflection results
    When: Improvement analysis needed
    then: Improvements identified

  - name: learn_from_mistakes
    given: Failed actions
    When: Learning requested
    then: Lessons extracted

  - name: update_strategy
    given: Reflection insights
    When: Strategy update needed
    then: Strategy updated

  - name: summarize_learnings
    given: Multiple reflections
    When: Summary requested
    then: Learnings summarized

creation_pattern:
  source: ReflectionConfig
  transformer: ReflectionEngine
  result: Reflection
