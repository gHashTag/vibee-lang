name: agent_extract_text
version: "1.0.0"
language: zig
module: agent_extract_text

description: |
  Agent Extract Text - извлечение текста со страниц
  Научные основы: Mind2Web (Deng et al., 2023)
  φ² + 1/φ² = 3 | PHOENIX = 999

types:
  TextSelector:
    fields:
      selector: Option<String>
      xpath: Option<String>
      contains_text: Option<String>

  ExtractedText:
    fields:
      text: String
      source_selector: String
      html: Option<String>
      word_count: Int

  TextExtractionConfig:
    fields:
      include_hidden: Bool
      trim_whitespace: Bool
      preserve_formatting: Bool
      max_length: Option<Int>

  PageText:
    fields:
      title: String
      main_content: String
      headings: List<String>
      paragraphs: List<String>

behaviors:
  - name: extract_by_selector
    given: TextSelector и TextExtractionConfig
    when: Извлечение текста по селектору
    then: ExtractedText

  - name: extract_all_text
    given: Текущая страница
    when: Извлечение всего текста
    then: PageText со структурой

  - name: extract_visible_text
    given: Текущий viewport
    when: Извлечение видимого текста
    then: ExtractedText только видимое

  - name: extract_by_pattern
    given: Regex паттерн
    when: Извлечение по паттерну
    then: Список совпадений

  - name: extract_headings
    given: Текущая страница
    when: Извлечение заголовков h1-h6
    then: Список заголовков с уровнями

  - name: extract_main_content
    given: Текущая страница
    when: Извлечение основного контента
    then: ExtractedText без навигации и рекламы
