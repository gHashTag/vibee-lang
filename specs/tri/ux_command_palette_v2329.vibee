# VIBEE Command Palette v2329
# VS Code-style Command Palette
# φ² + 1/φ² = 3 | PHOENIX = 999

name: ux_command_palette_v2329
version: "2329.0.0"
language: zig
module: ux_command_palette

sacred_formula:
  phi: 1.618033988749895
  identity: "φ² + 1/φ² = 3"
  phoenix: 999

creation_pattern:
  source: PaletteConfig
  transformer: CommandPaletteEngine
  result: CommandPalette

types:
  Command:
    fields:
      id: String
      label: String
      description: Option<String>
      shortcut: Option<String>
      category: String
      action: String
      icon: Option<String>

  PaletteState:
    fields:
      open: Bool
      query: String
      filtered_commands: List<Command>
      selected_index: Int
      mode: String

  CommandCategory:
    fields:
      name: String
      commands: List<Command>
      icon: String

behaviors:
  - name: open_palette
    given: "Palette closed"
    when: "Ctrl+Shift+P pressed"
    then: "Palette opens"
    test_cases:
      - name: test_open
        input: { shortcut: "Ctrl+Shift+P" }
        expected: { open: true }

  - name: close_palette
    given: "Palette open"
    when: "Escape pressed"
    then: "Palette closes"
    test_cases:
      - name: test_close
        input: { key: "Escape" }
        expected: { open: false }

  - name: filter_commands
    given: "Query entered"
    when: "Input changes"
    then: "Commands filtered"
    test_cases:
      - name: test_filter
        input: { query: "nav" }
        expected: { filtered_count_less_than_total: true }

  - name: execute_command
    given: "Command selected"
    when: "Enter pressed"
    then: "Command executed"
    test_cases:
      - name: test_execute
        input: { command_id: "navigate.home" }
        expected: { executed: true }

  - name: navigate_results
    given: "Filtered results"
    when: "Arrow keys pressed"
    then: "Selection moves"
    test_cases:
      - name: test_navigate_down
        input: { key: "ArrowDown", current: 0 }
        expected: { selected: 1 }

  - name: fuzzy_search
    given: "Query string"
    when: "Search performed"
    then: "Fuzzy matches returned"
    test_cases:
      - name: test_fuzzy
        input: { query: "nv hm" }
        expected: { matches: ["navigate.home"] }

  - name: show_recent
    given: "Palette opened"
    when: "No query"
    then: "Recent commands shown"
    test_cases:
      - name: test_recent
        input: { query: "" }
        expected: { recent_shown: true }

# Default Commands
default_commands:
  navigation:
    - id: "navigate.home"
      label: "Go to Home"
      shortcut: "Ctrl+H"
    - id: "navigate.modules"
      label: "Go to Modules"
      shortcut: "Ctrl+M"
    - id: "navigate.pas"
      label: "Go to PAS"
      shortcut: "Ctrl+P"
      
  view:
    - id: "view.toggle_sidebar"
      label: "Toggle Sidebar"
      shortcut: "Ctrl+B"
    - id: "view.toggle_fullscreen"
      label: "Toggle Fullscreen"
      shortcut: "F11"
      
  tools:
    - id: "tools.open_devtools"
      label: "Open DevTools"
      shortcut: "F12"
    - id: "tools.run_tests"
      label: "Run Tests"
      shortcut: "Ctrl+Shift+T"

pas_analysis:
  current_algorithm: "Linear search O(n)"
  predicted_improvement: "Trie-based fuzzy search O(log n)"
  confidence: 0.80
  patterns_applied: [HSH, PRE]
  timeline: "2026 Q2"

self_evolution:
  enabled: true
  mutation_rate: 0.0382
  fitness_function: "search_speed"
  generation: 2329
