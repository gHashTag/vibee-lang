# VIBEE ⲦⲢⲒⲚⲒⲦⲨ Documentation - .vibee Format Specification
# Документация формата .vibee спецификаций
# φ² + 1/φ² = 3 | 27 символов = 3³

name: coptic_docs_vibee_format
version: "1.0.0"
language: zig
module: coptic_docs_vibee_format

sacred_formula:
  phi: 1.618033988749895
  identity: "φ² + 1/φ² = 3"
  trinity: 27
  phoenix: 999

creation_patterns:
  format_doc_from_schema:
    source: FormatSchema
    transformer: FormatDocGenerator
    result: FormatDocumentation

  example_from_section:
    source: SectionDefinition
    transformer: ExampleBuilder
    result: FormatExample

types:
  FormatSchema:
    fields:
      version: String
      sections: List<String>
      required_fields: List<String>
      optional_fields: List<String>

  FormatDocumentation:
    fields:
      title: String
      overview: String
      structure: String
      sections: List<String>
      examples: List<String>
      best_practices: String

  SectionDefinition:
    fields:
      name: String
      required: Bool
      description: String
      fields: List<String>
      example: String

  HeaderSection:
    fields:
      name_field: String
      version_field: String
      language_field: String
      module_field: String

  SacredFormulaSection:
    fields:
      phi: Float
      identity: String
      trinity: Int
      phoenix: Int

  CreationPatternSection:
    fields:
      pattern_name: String
      source: String
      transformer: String
      result: String

  TypeDefinition:
    fields:
      type_name: String
      fields: List<String>
      description: String

  BehaviorDefinition:
    fields:
      name: String
      given: String
      when_clause: String
      then_clause: String

  TestCaseDefinition:
    fields:
      name: String
      input: String
      expected: String

  VibeeTypeMapping:
    fields:
      vibee_type: String
      zig_type: String
      python_type: String
      rust_type: String

behaviors:
  - name: generate_format_doc
    given: FormatSchema with all sections
    when: Documentation generation requested
    then: Returns complete FormatDocumentation

  - name: validate_vibee_file
    given: Path to .vibee file
    when: Validation requested
    then: Returns validation result with errors

  - name: parse_header_section
    given: Raw header text
    when: Header parsing requested
    then: Returns HeaderSection struct

  - name: parse_sacred_formula
    given: Sacred formula section text
    when: Parsing requested
    then: Returns SacredFormulaSection

  - name: parse_types_section
    given: Types section text
    when: Parsing requested
    then: Returns list of TypeDefinition

  - name: parse_behaviors_section
    given: Behaviors section text
    when: Parsing requested
    then: Returns list of BehaviorDefinition

  - name: get_type_mapping
    given: VIBEE type name
    when: Mapping lookup requested
    then: Returns VibeeTypeMapping for target languages

  - name: generate_example
    given: SectionDefinition
    when: Example generation requested
    then: Returns formatted example code

  - name: list_required_sections
    given: FormatSchema
    when: Required sections query
    then: Returns list of required section names

  - name: list_supported_types
    given: Target language
    when: Type list requested
    then: Returns all supported VIBEE types

test_cases:
  - name: test_header_parsing
    input: "name: test\nversion: 1.0.0"
    expected: "HeaderSection{name: test, version: 1.0.0}"

  - name: test_type_mapping_string
    input: "String"
    expected: "zig: []const u8, python: str"

  - name: test_type_mapping_int
    input: "Int"
    expected: "zig: i64, python: int"

  - name: test_validate_required
    input: "file without name field"
    expected: "error: missing required field 'name'"

pas_analysis:
  paper_references:
    - "DSL Design Patterns"
    - "YAML-based Configuration Languages"
    - "Specification-First Development"
  key_insights:
    - "Header section always required"
    - "Types before behaviors"
    - "Sacred formula for VIBEE identity"

self_evolution:
  metrics:
    - "Format compliance rate"
    - "Parsing success rate"
    - "Type mapping coverage"
  improvement_targets:
    - "Add more type mappings"
    - "Support nested types"
    - "Generic type parameters"
