# Accessibility Tree Module
# A11y tree extraction for agent understanding
# ARIA roles, labels, states

name: browser_accessibility_tree
version: "1.0.0"
language: zig
module: browser_accessibility_tree

types:
  A11yNode:
    fields:
      node_id: String
      role: String
      name: String
      description: Option<String>
      value: Option<String>
      children: List<String>

  A11yTree:
    fields:
      tree_id: String
      root: String
      node_count: Int

  A11yRole:
    fields:
      role_name: String
      is_interactive: Bool
      is_landmark: Bool

  A11yState:
    fields:
      checked: Option<Bool>
      disabled: Bool
      expanded: Option<Bool>
      focused: Bool
      pressed: Option<Bool>
      selected: Bool

  A11ySnapshot:
    fields:
      snapshot_id: String
      tree: String
      interesting_only: Bool
      timestamp: Timestamp

behaviors:
  - name: get_accessibility_tree
    given: Page
    when: A11y tree needed
    then: Returns accessibility tree

  - name: get_node_by_role
    given: Tree and role
    when: Role-based search needed
    then: Returns matching nodes

  - name: get_node_by_name
    given: Tree and name
    when: Name-based search needed
    then: Returns matching nodes

  - name: get_interactive_nodes
    given: Tree
    when: Interactive elements needed
    then: Returns actionable nodes

  - name: get_landmarks
    given: Tree
    when: Landmark navigation needed
    then: Returns landmark nodes

  - name: snapshot_a11y
    given: Page and options
    when: A11y snapshot needed
    then: Returns a11y snapshot

  - name: describe_element
    given: A11y node
    when: Element description needed
    then: Returns human-readable description

  - name: find_by_label
    given: Tree and label text
    when: Label search needed
    then: Returns labeled element
