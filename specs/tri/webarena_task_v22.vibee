# webarena_task_v22.vibee
# KOSCHEI CYCLE 22 - WebArena Task Format
# Standard benchmark task format
# φ² + 1/φ² = 3 | PHOENIX = 999

name: webarena_task_v22
version: "22.0.0"
language: zig
module: webarena_task_v22

types:
  WebArenaTask:
    fields:
      task_id: Int
      intent: String
      start_url: String
      require_login: Bool
      eval_type: String

  TaskCategory:
    enum:
      - Navigation
      - Information
      - FormFilling
      - Shopping
      - ContentManagement

  EvalType:
    enum:
      - StringMatch
      - URLMatch
      - ElementPresent
      - ProgramJudge

  TaskConfig:
    fields:
      max_steps: Int
      timeout_seconds: Int
      viewport_width: Int
      viewport_height: Int

  TaskResult:
    fields:
      task_id: Int
      success: Bool
      steps_taken: Int
      final_answer: String
      trajectory: String

  Trajectory:
    fields:
      steps: String
      total_actions: Int
      total_time_ms: Int

  TrajectoryStep:
    fields:
      step_num: Int
      url: String
      action: String
      observation: String

  EvalResult:
    fields:
      passed: Bool
      expected: String
      actual: String
      eval_type: String

  TaskSet:
    fields:
      name: String
      tasks_count: Int
      categories: String

behaviors:
  - name: parse_task
    given: Task JSON
    when: Parsing WebArena task
    then: Return WebArenaTask

  - name: create_config
    given: Task requirements
    when: Creating task config
    then: Return TaskConfig

  - name: run_task
    given: WebArenaTask and agent
    when: Executing task
    then: Return TaskResult

  - name: evaluate_result
    given: TaskResult and expected
    when: Evaluating task completion
    then: Return EvalResult

  - name: record_trajectory
    given: Task execution
    when: Recording step trajectory
    then: Return Trajectory

  - name: add_step
    given: Trajectory and step
    when: Adding step to trajectory
    then: Return updated trajectory

  - name: serialize_result
    given: TaskResult
    when: Serializing to JSON
    then: Return JSON string

  - name: load_task_set
    given: Task set path
    when: Loading task set
    then: Return TaskSet

  - name: get_task_by_id
    given: Task ID
    when: Getting specific task
    then: Return WebArenaTask

  - name: validate_task
    given: WebArenaTask
    when: Validating task format
    then: Return validation result

test_cases:
  - name: parse_navigation_task
    input: {intent: go to page, start_url: example.com}
    expected: valid task

  - name: evaluate_string_match
    input: expected=hello, actual=hello
    expected: passed=true

  - name: record_trajectory
    input: 3 steps
    expected: trajectory with 3 steps

sacred_constants:
  phi: 1.618033988749895
  phi_squared_plus_inverse_squared: 3
  phoenix: 999
