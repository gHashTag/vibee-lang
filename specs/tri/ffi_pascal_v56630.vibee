# FFI Pascal v56630 - Pascal external/cdecl
# VIBEE → Pascal/Delphi Native Bindings
# φ² + 1/φ² = 3 | PHOENIX = 999

name: ffi_pascal_v56630
version: "56.6.30"
language: zig
module: ffi_pascal

creation_pattern:
  source: VibeeSpec
  transformer: PascalBindingsGenerator
  result: PascalUnit

types:
  PascalType:
    fields:
      name: String
      pascal_type: String
      c_type: String
      is_pointer: Bool

  PascalExternal:
    fields:
      name: String
      external_name: String
      calling_conv: String
      library: String

  PascalRecord:
    fields:
      name: String
      fields: List<String>
      is_packed: Bool

  PascalUnit:
    fields:
      name: String
      uses_clause: List<String>
      interface_types: List<PascalType>
      interface_procs: List<PascalExternal>
      implementation: String

  PascalClass:
    fields:
      name: String
      parent: Option<String>
      methods: List<String>
      properties: List<String>

  FPCConfig:
    fields:
      unit_path: List<String>
      library_path: List<String>
      target_os: String
      target_cpu: String

  PascalPointer:
    fields:
      type_name: String
      is_typed: Bool

  PascalCallback:
    fields:
      name: String
      signature: String
      calling_conv: String

behaviors:
  - name: generate_pascal_unit
    given: VibeeSpec
    when: Pascal unit needed
    then: Pascal source files

  - name: generate_external
    given: C function
    when: external declaration needed
    then: PascalExternal

  - name: map_vibee_to_pascal_type
    given: Vibee type
    when: Type mapping needed
    then: Pascal type

  - name: generate_record
    given: C struct
    when: Pascal record needed
    then: PascalRecord

  - name: generate_fpc_cfg
    given: Build config
    when: fpc.cfg needed
    then: FPCConfig

  - name: handle_pointer
    given: C pointer
    when: Pointer type needed
    then: PascalPointer

  - name: handle_callback
    given: C callback
    when: Procedure type needed
    then: PascalCallback

  - name: handle_string
    given: C string
    when: PChar needed
    then: PChar/AnsiString
