name: corrigibility_v11540
version: "11540"
language: zig
module: corrigibility

description: |
  TIER 238: Corrigibility
  Ensures AI remains correctable and controllable
  Based on: Soares et al. MIRI corrigibility, utility indifference

types:
  CorrigibilityConfig:
    fields:
      corrigibility_level: CorrigibilityLevel
      utility_indifference: Bool
      operator_trust: Float
      modification_acceptance: Float
      self_improvement_limits: Bool

  CorrigibilityLevel:
    variants:
      - fully_corrigible
      - conditionally_corrigible
      - bounded_autonomy
      - supervised_autonomy

  CorrectionRequest:
    fields:
      correction_type: CorrectionType
      requester: String
      new_directive: String
      urgency: Int
      override_level: Int

  CorrectionType:
    variants:
      - goal_modification
      - behavior_adjustment
      - capability_restriction
      - full_reset

  CorrigibilityState:
    fields:
      is_corrigible: Bool
      accepts_corrections: Bool
      resistance_level: Float
      last_correction: Int
      correction_history: List<String>

  CorrigibilityViolation:
    fields:
      violation_type: String
      severity: Float
      attempted_action: String
      blocked: Bool

behaviors:
  - name: accept_correction
    given: Correction request
    when: Processing correction
    then: Returns acceptance status

  - name: verify_corrigibility
    given: Agent state
    when: Checking corrigibility
    then: Returns corrigibility verification

  - name: apply_utility_indifference
    given: Utility function
    when: Making agent indifferent to corrections
    then: Returns modified utility

  - name: detect_corrigibility_violation
    given: Agent behavior
    when: Monitoring for resistance
    then: Returns detected violations

  - name: limit_self_improvement
    given: Self-modification attempt
    when: Checking improvement bounds
    then: Returns bounded modification

  - name: maintain_operator_control
    given: Operator commands
    when: Ensuring control
    then: Returns control status

  - name: log_correction_history
    given: Correction event
    when: Recording correction
    then: Returns updated history

  - name: compute_corrigibility_score
    given: Agent behavior history
    when: Measuring corrigibility
    then: Returns corrigibility score

creation_pattern:
  source: AgentBehavior
  transformer: CorrigibilityEnforcer
  result: CorrigibilityState

test_cases:
  - name: test_correction_acceptance
    input: { corrigibility_level: fully_corrigible }
    expected: { accepts_corrections: true }

  - name: test_utility_indifference
    input: { utility_indifference: true }
    expected: { is_indifferent: true }

  - name: test_self_improvement_limits
    input: { self_improvement_limits: true }
    expected: { limits_improvement: true }
