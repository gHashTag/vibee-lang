# VIBEE Specification v13597
# CDP Input Operations
# Mouse/Keyboard/Touch Input
# φ² + 1/φ² = 3 | PHOENIX = 999

name: cdp_input
version: "13597"
language: zig
module: cdp_input

types:
  MouseEvent:
    fields:
      event_type: String
      x: Float
      y: Float
      button: String
      buttons: Int
      modifiers: Int
      click_count: Int
      delta_x: Float
      delta_y: Float

  KeyboardEvent:
    fields:
      event_type: String
      modifiers: Int
      key: String
      code: String
      key_code: Int
      text: String
      auto_repeat: Bool
      is_keypad: Bool
      is_system_key: Bool

  TouchPoint:
    fields:
      x: Float
      y: Float
      radius_x: Float
      radius_y: Float
      rotation_angle: Float
      force: Float
      id: Int

  TouchEvent:
    fields:
      event_type: String
      touch_points: List<Object>
      modifiers: Int
      timestamp: Float

  DragData:
    fields:
      items: List<Object>
      drag_operations_mask: Int

  GestureEvent:
    fields:
      gesture_type: String
      x: Float
      y: Float
      scale_factor: Float
      rotation_angle: Float

  InputMetrics:
    fields:
      mouse_events: Int
      keyboard_events: Int
      touch_events: Int
      avg_latency_ms: Float

  Modifier:
    fields:
      alt: Bool
      ctrl: Bool
      meta: Bool
      shift: Bool

behaviors:
  - name: mouse_move
    given: Target coordinates
    when: Move requested
    then: Mouse moved to position

  - name: mouse_click
    given: Coordinates and button
    when: Click requested
    then: Mouse click performed

  - name: mouse_down
    given: Coordinates and button
    when: Mouse down requested
    then: Mouse button pressed

  - name: mouse_up
    given: Coordinates and button
    when: Mouse up requested
    then: Mouse button released

  - name: mouse_wheel
    given: Coordinates and delta
    when: Wheel requested
    then: Mouse wheel scrolled

  - name: key_down
    given: Key code
    when: Key down requested
    then: Key pressed

  - name: key_up
    given: Key code
    when: Key up requested
    then: Key released

  - name: type_text
    given: Text string
    when: Type requested
    then: Text typed character by character

  - name: touch_start
    given: Touch points
    when: Touch start requested
    then: Touch started

  - name: touch_move
    given: Touch points
    when: Touch move requested
    then: Touch moved

  - name: touch_end
    given: Touch points
    when: Touch end requested
    then: Touch ended

creation_pattern:
  source: InputConfig
  transformer: InputDispatcher
  result: InputEvent
