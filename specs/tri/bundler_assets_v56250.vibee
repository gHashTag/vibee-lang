# Bundler Assets v56250 - Asset Handling
# Static Asset Processing
# φ² + 1/φ² = 3 | PHOENIX = 999

name: bundler_assets_v56250
version: "56.2.50"
language: zig
module: bundler_assets

creation_pattern:
  source: AssetFile
  transformer: AssetProcessor
  result: ProcessedAsset

types:
  Asset:
    fields:
      path: String
      type_name: String
      size: Int
      hash: String
      content: String

  AssetType:
    fields:
      name: String
      extensions: List<String>
      mime_type: String
      is_binary: Bool

  ImageAsset:
    fields:
      asset: Asset
      width: Int
      height: Int
      format: String
      has_alpha: Bool

  FontAsset:
    fields:
      asset: Asset
      family: String
      weight: Int
      style: String
      formats: List<String>

  AssetReference:
    fields:
      source_module: String
      asset_path: String
      import_type: String
      output_path: String

  AssetManifest:
    fields:
      assets: List<Asset>
      references: List<AssetReference>
      total_size: Int

  AssetOptimization:
    fields:
      asset: Asset
      original_size: Int
      optimized_size: Int
      optimization_type: String

  InlineThreshold:
    fields:
      max_size: Int
      asset_types: List<String>
      use_data_url: Bool

behaviors:
  - name: process_asset
    given: Asset file path
    When: Asset processing needed
    then: ProcessedAsset

  - name: hash_asset
    given: Asset content
    when: Content hashing needed
    then: Asset hash

  - name: inline_asset
    given: Asset and threshold
    when: Inlining decision needed
    then: Inlined or referenced

  - name: optimize_image
    given: ImageAsset
    when: Image optimization needed
    then: AssetOptimization

  - name: generate_asset_manifest
    given: All assets
    when: Manifest needed
    then: AssetManifest

  - name: copy_asset
    given: Asset and output path
    when: Asset copying needed
    then: Copied asset

  - name: resolve_asset_url
    given: AssetReference
    when: URL resolution needed
    then: Final URL

  - name: extract_asset_references
    given: Module source
    when: Reference extraction needed
    then: List of AssetReference
