# Session Manager Module
# Multi-tab, multi-window management
# Session persistence

name: browser_session_manager
version: "1.0.0"
language: zig
module: browser_session_manager

types:
  Session:
    fields:
      session_id: String
      context_id: String
      pages: List<String>
      active_page: String
      created_at: Timestamp

  TabInfo:
    fields:
      tab_id: String
      url: String
      title: String
      is_active: Bool

  WindowInfo:
    fields:
      window_id: String
      tabs: List<String>
      bounds: String
      is_focused: Bool

  SessionState:
    fields:
      state_id: String
      cookies: List<String>
      local_storage: Map<String,String>
      open_tabs: List<String>

  SessionConfig:
    fields:
      persist_storage: Bool
      restore_tabs: Bool
      max_tabs: Int

behaviors:
  - name: create_session
    given: Context and config
    when: New session needed
    then: Returns session handle

  - name: open_tab
    given: Session and URL
    when: New tab needed
    then: Returns tab info

  - name: close_tab
    given: Session and tab ID
    when: Tab close needed
    then: Returns close result

  - name: switch_tab
    given: Session and tab ID
    when: Tab switch needed
    then: Returns switch result

  - name: get_all_tabs
    given: Session
    when: Tab listing needed
    then: Returns all tabs

  - name: save_session
    given: Session and path
    when: Session persistence needed
    then: Returns save result

  - name: restore_session
    given: Path
    When: Session restoration needed
    then: Returns restored session

  - name: duplicate_tab
    given: Session and tab ID
    when: Tab duplication needed
    then: Returns new tab info
