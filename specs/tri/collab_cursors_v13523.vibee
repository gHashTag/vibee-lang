# VIBEE Specification v13523
# Shared Cursors
# KOSCHEI CYCLE 11 - 1000000x SPEEDUP

name: collab_cursors
version: "13523"
language: zig
module: collab_cursors

types:
  CursorState:
    fields:
      user_id: String
      position: Object
      color: String
      label: String

  CursorPosition:
    fields:
      file: String
      line: Int
      column: Int
      offset: Int

  CursorUpdate:
    fields:
      user_id: String
      position: Object
      timestamp: Timestamp

  CursorConfig:
    fields:
      show_labels: Bool
      fade_inactive: Bool
      update_throttle_ms: Int

  CursorMetrics:
    fields:
      cursors_active: Int
      updates_sent: Int
      updates_received: Int

  CursorStyle:
    fields:
      color: String
      width: Int
      blink: Bool
      label_position: String

behaviors:
  - name: update_cursor
    given: New cursor position
    When: Cursor moved
    then: Position broadcast

  - name: get_cursors
    given: Session ID
    When: Cursors requested
    then: All cursor positions returned

  - name: hide_cursor
    given: User ID
    When: Hide requested
    then: Cursor hidden

  - name: show_cursor
    given: User ID
    When: Show requested
    then: Cursor shown

  - name: follow_cursor
    given: Target user ID
    When: Follow requested
    then: View follows cursor

  - name: customize_cursor
    given: Style settings
    When: Customization requested
    then: Cursor style updated

creation_pattern:
  source: CursorConfig
  transformer: CursorManager
  result: CursorState
