# v4502 - Evolution Strategies
# =============================
# Эволюционные стратегии для NAS
# φ² + 1/φ² = 3 | PHOENIX = 999

name: evolution_strategies
version: "4.5.2"
language: zig
module: evolution_strategies

constants:
  PHI: 1.618033988749895
  POPULATION_SIZE: 100
  MUTATION_RATE: 0.1
  TOURNAMENT_SIZE: 5

types:
  ESConfig:
    fields:
      population_size: Int
      mutation_rate: Float
      crossover_rate: Float
      
  Individual:
    fields:
      genome: List
      fitness: Float
      age: Int
      
  Population:
    fields:
      individuals: List
      generation: Int
      best_fitness: Float
      
  MutationOp:
    fields:
      mutation_type: String
      probability: Float
      strength: Float
      
  CrossoverOp:
    fields:
      crossover_type: String
      num_points: Int
      
  SelectionOp:
    fields:
      selection_type: String
      tournament_size: Int
      elitism: Int
      
  FitnessLandscape:
    fields:
      evaluations: List
      local_optima: List
      
  EvolutionHistory:
    fields:
      generations: List
      best_per_generation: List
      diversity: List

behaviors:
  - name: initialize_population
    given: Размер и пространство поиска
    when: Создание начальной популяции
    then: Вернуть популяцию
    
  - name: evaluate_fitness
    given: Индивид и функция приспособленности
    when: Оценка индивида
    then: Вернуть fitness
    
  - name: select_parents
    given: Популяция и стратегия отбора
    when: Отбор родителей
    then: Вернуть выбранных родителей
    
  - name: mutate
    given: Индивид и оператор мутации
    when: Мутация генома
    then: Вернуть мутанта
    
  - name: crossover
    given: Два родителя и оператор
    when: Скрещивание
    then: Вернуть потомков
    
  - name: survivor_selection
    given: Родители, потомки и стратегия
    when: Отбор выживших
    then: Вернуть новую популяцию
    
  - name: compute_diversity
    given: Популяция
    when: Измерение разнообразия
    then: Вернуть метрику разнообразия
    
  - name: adaptive_mutation_rate
    given: История эволюции
    when: Адаптация параметров
    then: Вернуть новый mutation rate
