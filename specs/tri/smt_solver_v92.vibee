# SMT Solver V92 - Satisfiability Modulo Theories
name: smt_solver_v92
version: "92.0.0"
language: zig
module: smt_solver

creation_pattern:
  source: Formula
  transformer: SMTEngine
  result: SolverResult

types:
  Formula:
    fields:
      expression: String
      variables: List<Variable>
      theory: Theory

  Variable:
    fields:
      name: String
      sort: Sort

  Sort:
    variants:
      - Bool
      - Int
      - Real
      - BitVec
      - Array
      - String

  Theory:
    variants:
      - QF_LIA
      - QF_LRA
      - QF_BV
      - QF_AUFLIA
      - ALL

  SolverResult:
    variants:
      - Sat
      - Unsat
      - Unknown

  Model:
    fields:
      assignments: Map<String, String>
      is_complete: Bool

  SolverConfig:
    fields:
      timeout_ms: Int
      theory: Theory
      incremental: Bool

behaviors:
  - name: parse_formula
    given: "SMT-LIB string"
    when: "Parsing"
    then: "Formula AST"
    test_cases:
      - name: parse_simple
        input: "(and (> x 0) (< x 10))"
        expected: "Formula AST"

  - name: check_sat
    given: "Formula"
    when: "SAT check"
    then: "SAT/UNSAT/Unknown"
    test_cases:
      - name: simple_sat
        input: "x > 0"
        expected: "Sat"
      - name: simple_unsat
        input: "x > 0 && x < 0"
        expected: "Unsat"

  - name: get_model
    given: "SAT formula"
    when: "Model extraction"
    then: "Variable assignments"
    test_cases:
      - name: extract_model
        input: "x > 5"
        expected: "x = 6"

  - name: push_context
    given: "Solver state"
    when: "Push"
    then: "New context level"
    test_cases:
      - name: push
        input: "level 0"
        expected: "level 1"

  - name: pop_context
    given: "Solver state"
    when: "Pop"
    then: "Previous context"
    test_cases:
      - name: pop
        input: "level 1"
        expected: "level 0"

  - name: add_assertion
    given: "Formula"
    when: "Assert"
    then: "Added to context"
    test_cases:
      - name: assert_constraint
        input: "x > 0"
        expected: "constraint added"

# φ² + 1/φ² = 3 | PHOENIX = 999
