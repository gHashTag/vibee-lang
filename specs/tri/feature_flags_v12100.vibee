name: feature_flags_v12100
version: "12100"
language: zig
module: feature_flags
types:
  FlagConfig:
    fields:
      default_value: Bool
      targeting_rules: List<String>
      rollout_percentage: Float
  FeatureFlag:
    fields:
      flag_id: String
      name: String
      enabled: Bool
      rules: List<String>
      created_at: Int
  FlagEvaluation:
    fields:
      flag_id: String
      user_id: String
      value: Bool
      reason: String
  FlagAnalytics:
    fields:
      flag_id: String
      evaluations: Int
      true_count: Int
      false_count: Int
behaviors:
  - name: create_flag
    given: Flag config
    when: Creating
    then: Returns flag
  - name: evaluate_flag
    given: Flag and user
    when: Evaluating
    then: Returns evaluation
  - name: update_flag
    given: Flag changes
    when: Updating
    then: Returns updated flag
  - name: delete_flag
    given: Flag ID
    when: Deleting
    then: Returns deletion status
  - name: add_targeting_rule
    given: Flag and rule
    when: Adding rule
    then: Returns updated flag
  - name: set_rollout_percentage
    given: Flag and percentage
    when: Setting rollout
    then: Returns updated flag
  - name: get_flag_analytics
    given: Flag ID
    when: Getting analytics
    then: Returns analytics
  - name: list_flags
    given: Filters
    when: Listing
    then: Returns flag list
creation_pattern:
  source: FlagRequest
  transformer: FlagManager
  result: FlagEvaluation
