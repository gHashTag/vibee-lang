name: codegen_http_v22
version: "22.6.0"
language: zig
module: codegen_http_v22

types:
  HttpTemplate:
    fields:
      name: String
      method: String
      path_template: String
      body_template: Option<String>

  GeneratedEndpoint:
    fields:
      name: String
      code: String
      imports: List<String>

  HttpCodegen:
    fields:
      templates: List<String>
      base_url: String

behaviors:
  - name: create_codegen
    given: Config
    when: Initialize codegen
    then: HttpCodegen instance

  - name: generate_client
    given: HttpCodegen and spec
    when: Generate HTTP client
    then: Generated code

  - name: generate_get
    given: HttpCodegen and endpoint
    when: Generate GET method
    then: GeneratedEndpoint

  - name: generate_post
    given: HttpCodegen and endpoint
    when: Generate POST method
    then: GeneratedEndpoint

  - name: generate_request
    given: HttpCodegen and template
    when: Generate request code
    then: Request code

  - name: generate_response_parser
    given: HttpCodegen and response type
    when: Generate parser
    then: Parser code

  - name: add_template
    given: HttpCodegen and HttpTemplate
    when: Add template
    then: Updated codegen

  - name: generate_all
    given: HttpCodegen
    when: Generate all endpoints
    then: All generated code

  - name: validate_template
    given: HttpTemplate
    when: Validate template
    then: Validation result

  - name: export_code
    given: HttpCodegen
    when: Export generated code
    then: Exported code
