# v5501 - Code Understanding
# ===========================
# Понимание кода - анализ, семантика
# φ² + 1/φ² = 3 | PHOENIX = 999

name: code_understanding
version: "5.5.1"
language: zig
module: code_understanding

constants:
  PHI: 1.618033988749895
  MAX_FILE_SIZE: 100000
  EMBEDDING_DIM: 768

types:
  CodeEmbedding:
    fields:
      embedding: List
      code_type: String
      
  ASTNode:
    fields:
      node_type: String
      children: List
      value: String
      
  CodeGraph:
    fields:
      nodes: List
      edges: List
      
  SemanticAnalysis:
    fields:
      symbols: List
      types: List
      dependencies: List
      
  CodeSummary:
    fields:
      summary: String
      key_functions: List
      complexity: Float
      
  SimilarCode:
    fields:
      code: String
      similarity: Float
      source: String
      
  VulnerabilityReport:
    fields:
      vulnerabilities: List
      severity: String
      
  CodeMetrics:
    fields:
      lines_of_code: Int
      cyclomatic_complexity: Int
      maintainability_index: Float

behaviors:
  - name: embed_code
    given: Code snippet
    when: Code embedding
    then: Вернуть code embedding
    
  - name: parse_to_ast
    given: Code и language
    when: AST parsing
    then: Вернуть AST
    
  - name: build_code_graph
    given: Codebase
    when: Graph construction
    then: Вернуть code graph
    
  - name: analyze_semantics
    given: Code
    when: Semantic analysis
    then: Вернуть semantic analysis
    
  - name: summarize_code
    given: Code file
    when: Code summarization
    then: Вернуть code summary
    
  - name: find_similar_code
    given: Query code
    when: Code search
    then: Вернуть similar code
    
  - name: detect_vulnerabilities
    given: Code
    when: Security analysis
    then: Вернуть vulnerability report
    
  - name: compute_metrics
    given: Codebase
    when: Metrics computation
    then: Вернуть code metrics
