# ═══════════════════════════════════════════════════════════════════════════════
# GEN UI - Generative UI через BEAM Photon Diffusion
# UI генерируется волнами, не рисуется вручную
# ═══════════════════════════════════════════════════════════════════════════════
#
# Концепция:
# • UI элементы = паттерны интерференции волн
# • Layout = honeycomb grid с φ-пропорциями
# • Анимации = эволюция волновых функций
# • Стили = эмоции как latent codes
# • Интерактивность = курсор влияет на волны
#
# φ² + 1/φ² = 3 | PHOENIX = 999
# ═══════════════════════════════════════════════════════════════════════════════

name: gen_ui
version: "1.0.0"
language: zig
module: gen_ui

creation_pattern:
  source: UISpec
  transformer: WaveGenerator
  result: RenderedUI

constants:
  PHI: 1.618033988749895
  PHI_INV: 0.618033988749895
  GOLDEN_IDENTITY: 3.0
  PHOENIX: 999

types:
  # UI элемент как волновой паттерн
  WaveElement:
    fields:
      id: String
      element_type: String
      x: Float
      y: Float
      width: Float
      height: Float
      wave_pattern: String
      emotion: String
      children: String

  # Типы элементов
  ElementType:
    fields:
      name: String
      base_frequency: Float
      base_amplitude: Float
      decay_rate: Float

  # Кнопка = пульсирующая волна
  ButtonWave:
    fields:
      label: String
      x: Float
      y: Float
      width: Float
      height: Float
      pulse_freq: Float
      hover_amplitude: Float
      click_burst: Float

  # Текст = стоячая волна
  TextWave:
    fields:
      content: String
      x: Float
      y: Float
      font_size: Float
      wave_density: Float
      coherence: Float

  # Панель = интерференционный паттерн
  PanelWave:
    fields:
      x: Float
      y: Float
      width: Float
      height: Float
      border_wave: Float
      fill_pattern: String
      children: String

  # Слайдер = бегущая волна
  SliderWave:
    fields:
      x: Float
      y: Float
      width: Float
      min_val: Float
      max_val: Float
      current: Float
      wave_position: Float

  # Input = волновой резонатор
  InputWave:
    fields:
      x: Float
      y: Float
      width: Float
      height: Float
      placeholder: String
      value: String
      focus_resonance: Float

  # Layout на основе φ
  PhiLayout:
    fields:
      direction: String
      gap: Float
      phi_ratio: Float
      children: String

  # Grid = honeycomb
  HoneycombGrid:
    fields:
      columns: Int
      rows: Int
      cell_size: Float
      gap: Float
      cells: String

  # Тема = набор эмоций
  EmotionTheme:
    fields:
      name: String
      primary_hue: Float
      secondary_hue: Float
      saturation: Float
      brightness: Float
      wave_speed: Float

  # Анимация = эволюция волны
  WaveAnimation:
    fields:
      element_id: String
      property: String
      from_value: Float
      to_value: Float
      duration_ms: Int
      easing: String

  # Событие взаимодействия
  InteractionEvent:
    fields:
      event_type: String
      element_id: String
      x: Float
      y: Float
      pressure: Float
      timestamp: Int

  # Сгенерированный UI
  GeneratedUI:
    fields:
      width: Int
      height: Int
      elements: String
      pixel_buffer: String
      coherence: Float

behaviors:
  # === ГЕНЕРАЦИЯ ЭЛЕМЕНТОВ ===

  - name: gen_button
    given: "Label, position, size, emotion"
    when: "Нужна кнопка"
    then: "ButtonWave с пульсирующим паттерном"

  - name: gen_text
    given: "Content, position, font_size"
    when: "Нужен текст"
    then: "TextWave со стоячей волной"

  - name: gen_panel
    given: "Position, size, children"
    when: "Нужна панель"
    then: "PanelWave с интерференцией"

  - name: gen_slider
    given: "Position, range, value"
    when: "Нужен слайдер"
    then: "SliderWave с бегущей волной"

  - name: gen_input
    given: "Position, placeholder"
    when: "Нужен input"
    then: "InputWave с резонатором"

  # === LAYOUT ===

  - name: phi_row
    given: "Children elements"
    when: "Горизонтальный layout"
    then: "Элементы по φ-пропорциям"

  - name: phi_column
    given: "Children elements"
    when: "Вертикальный layout"
    then: "Элементы по φ-пропорциям"

  - name: honeycomb_layout
    given: "Elements, grid size"
    when: "Grid layout"
    then: "Гексагональная сетка"

  - name: golden_split
    given: "Container, ratio"
    when: "Разделение области"
    then: "Две области в φ-пропорции"

  # === ВОЛНОВОЙ РЕНДЕРИНГ ===

  - name: render_element
    given: "WaveElement, time"
    when: "Рендер одного элемента"
    then: "Пиксели из волновой функции"

  - name: render_ui
    given: "All elements, time"
    when: "Полный рендер"
    then: "Суперпозиция всех волн"

  - name: wave_to_pixels
    given: "Wave pattern, bounds"
    when: "Конвертация"
    then: "RGBA пиксели"

  # === ИНТЕРАКТИВНОСТЬ ===

  - name: hover_effect
    given: "Element, cursor position"
    when: "Курсор над элементом"
    then: "Увеличение амплитуды"

  - name: click_effect
    given: "Element, click position"
    when: "Клик по элементу"
    then: "Волновой burst"

  - name: focus_effect
    given: "Input element"
    when: "Фокус на input"
    then: "Резонанс усиливается"

  - name: drag_effect
    given: "Slider, drag position"
    when: "Перетаскивание"
    then: "Волна следует за курсором"

  # === АНИМАЦИИ ===

  - name: animate_appear
    given: "Element"
    when: "Появление"
    then: "Амплитуда 0 → 1"

  - name: animate_disappear
    given: "Element"
    when: "Исчезновение"
    then: "Амплитуда 1 → 0"

  - name: animate_pulse
    given: "Element, frequency"
    when: "Пульсация"
    then: "Периодическое изменение"

  - name: animate_wave_travel
    given: "Element, direction"
    when: "Бегущая волна"
    then: "Фаза изменяется"

  # === ТЕМЫ ===

  - name: apply_theme
    given: "UI, EmotionTheme"
    when: "Смена темы"
    then: "Все элементы перекрашиваются"

  - name: theme_joy
    given: "UI"
    when: "Радостная тема"
    then: "Тёплые цвета, быстрые волны"

  - name: theme_calm
    given: "UI"
    when: "Спокойная тема"
    then: "Холодные цвета, медленные волны"

  - name: theme_energy
    given: "UI"
    when: "Энергичная тема"
    then: "Яркие цвета, высокая частота"

  # === КОМПОЗИЦИЯ ===

  - name: compose_form
    given: "Fields spec"
    when: "Нужна форма"
    then: "Inputs + labels + button"

  - name: compose_card
    given: "Title, content, actions"
    when: "Нужна карточка"
    then: "Panel + text + buttons"

  - name: compose_navbar
    given: "Items"
    when: "Нужна навигация"
    then: "Horizontal buttons"

  - name: compose_sidebar
    given: "Items"
    when: "Нужен sidebar"
    then: "Vertical panel + items"

# ═══════════════════════════════════════════════════════════════════════════════
# АРХИТЕКТУРА GEN UI
# ═══════════════════════════════════════════════════════════════════════════════
#
#  ┌─────────────────────────────────────────────────────────────────────────┐
#  │                         GEN UI PIPELINE                                 │
#  ├─────────────────────────────────────────────────────────────────────────┤
#  │                                                                         │
#  │   UI Spec (DSL)                                                         │
#  │   ┌─────────────────────────────────────────────────────────────────┐   │
#  │   │  button("Click me", emotion: joy)                               │   │
#  │   │  panel(phi_row([text("Hello"), slider(0, 100)]))                │   │
#  │   └─────────────────────────────────────────────────────────────────┘   │
#  │                              │                                          │
#  │                              ▼                                          │
#  │   Wave Generator                                                        │
#  │   ┌─────────────────────────────────────────────────────────────────┐   │
#  │   │  button → pulsing wave (f=φ, A=1.0)                             │   │
#  │   │  text   → standing wave (nodes at char boundaries)              │   │
#  │   │  panel  → interference pattern (border + fill)                  │   │
#  │   │  slider → traveling wave (phase = value)                        │   │
#  │   └─────────────────────────────────────────────────────────────────┘   │
#  │                              │                                          │
#  │                              ▼                                          │
#  │   BEAM Photon Engine                                                    │
#  │   ┌─────────────────────────────────────────────────────────────────┐   │
#  │   │  Photons spawn at element centers                               │   │
#  │   │  Waves propagate and interfere                                  │   │
#  │   │  Emotions modulate colors                                       │   │
#  │   │  Cursor creates local perturbations                             │   │
#  │   └─────────────────────────────────────────────────────────────────┘   │
#  │                              │                                          │
#  │                              ▼                                          │
#  │   Rendered Pixels                                                       │
#  │   ┌─────────────────────────────────────────────────────────────────┐   │
#  │   │  ████████████████████████████████████████████████████████████   │   │
#  │   │  ██  [  Click me  ]  ██  Hello  ██  ═══●═══════  ██████████   │   │
#  │   │  ████████████████████████████████████████████████████████████   │   │
#  │   └─────────────────────────────────────────────────────────────────┘   │
#  │                                                                         │
#  └─────────────────────────────────────────────────────────────────────────┘
#
# ═══════════════════════════════════════════════════════════════════════════════
