# VIBEE Specification - IGLA SWE Debugger
# Bug diagnosis and fixing agent
# V = n × 3^k × π^m × φ^p | φ² + 1/φ² = 3 | PHOENIX = 999

name: igla_swe_debugger
version: "1.0.0"
language: zig
module: igla_swe_debugger

types:
  BugReport:
    fields:
      description: String
      stack_trace: String
      reproduction_steps: String
      expected_behavior: String

  Diagnosis:
    fields:
      root_cause: String
      affected_files: String
      confidence: Float
      suggested_fix: String

  DebugSession:
    fields:
      id: String
      bug_report: String
      diagnosis: String
      status: String

  DebuggerConfig:
    fields:
      max_depth: Int
      use_symbolic: Bool
      trace_execution: Bool

  DebuggerMetrics:
    fields:
      bugs_diagnosed: Int
      bugs_fixed: Int
      avg_diagnosis_time_ms: Float

behaviors:
  - name: diagnose_bug
    given: Bug report
    when: Diagnosis
    then: Root cause identified

  - name: localize_fault
    given: Stack trace
    when: Fault localization
    then: Faulty location found

  - name: suggest_fix
    given: Diagnosis
    when: Fix suggestion
    then: Fix suggested

  - name: verify_fix
    given: Fix and tests
    when: Verification
    then: Fix verified

  - name: trace_execution
    given: Code and input
    when: Tracing
    then: Execution trace returned

  - name: get_metrics
    given: Debugger
    when: Metrics requested
    then: Debugger metrics returned

test_cases:
  - name: test_diagnose
    input: { error: "null pointer exception" }
    expected: { has_diagnosis: true }

  - name: test_localize
    input: { stack_trace: "line 42" }
    expected: { location_found: true }

  - name: test_fix
    input: { diagnosis: "missing null check" }
    expected: { has_fix: true }

  - name: test_metrics
    input: {}
    expected: { bugs_diagnosed: 0 }
