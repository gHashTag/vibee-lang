# VIBEE Specification - IGLA Issue Tracker
# Issue and task tracking
# V = n × 3^k × π^m × φ^p | φ² + 1/φ² = 3 | PHOENIX = 999

name: igla_issue_tracker
version: "1.0.0"
language: zig
module: igla_issue_tracker

types:
  Issue:
    fields:
      id: Int
      title: String
      description: String
      status: String
      priority: String
      labels: String

  IssueComment:
    fields:
      author: String
      content: String
      timestamp: Int

  IssueConfig:
    fields:
      auto_assign: Bool
      auto_label: Bool
      templates: String

  IssueMetrics:
    fields:
      issues_created: Int
      issues_closed: Int
      avg_resolution_time_ms: Float

behaviors:
  - name: create_issue
    given: Title and description
    when: Creation
    then: Issue created

  - name: update_issue
    given: Issue ID and changes
    when: Update
    then: Issue updated

  - name: assign_issue
    given: Issue and assignee
    when: Assignment
    then: Issue assigned

  - name: close_issue
    given: Issue ID
    when: Closing
    then: Issue closed

  - name: add_comment
    given: Issue and comment
    when: Commenting
    then: Comment added

  - name: get_metrics
    given: Tracker
    when: Metrics requested
    then: Issue metrics returned

test_cases:
  - name: test_create
    input: { title: "Bug report" }
    expected: { created: true }

  - name: test_assign
    input: { issue_id: 1, assignee: "bob" }
    expected: { assigned: true }

  - name: test_close
    input: { issue_id: 1 }
    expected: { closed: true }

  - name: test_metrics
    input: {}
    expected: { issues_created: 0 }
