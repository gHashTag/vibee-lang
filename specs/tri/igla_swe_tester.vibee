# VIBEE Specification - IGLA SWE Tester
# Test generation agent
# V = n × 3^k × π^m × φ^p | φ² + 1/φ² = 3 | PHOENIX = 999

name: igla_swe_tester
version: "1.0.0"
language: zig
module: igla_swe_tester

types:
  TestGenRequest:
    fields:
      code: String
      language: String
      coverage_target: Float

  GeneratedTests:
    fields:
      tests: String
      coverage: Float
      test_count: Int

  TestCase:
    fields:
      name: String
      input: String
      expected: String
      test_type: String

  TesterConfig:
    fields:
      min_coverage: Float
      include_edge_cases: Bool
      include_property_tests: Bool

  TesterMetrics:
    fields:
      tests_generated: Int
      avg_coverage: Float
      edge_cases_found: Int

behaviors:
  - name: generate_tests
    given: Code to test
    when: Test generation
    then: Tests generated

  - name: generate_unit_tests
    given: Function
    when: Unit test generation
    then: Unit tests created

  - name: generate_edge_cases
    given: Function
    when: Edge case generation
    then: Edge case tests created

  - name: generate_property_tests
    given: Function
    when: Property test generation
    then: Property tests created

  - name: measure_coverage
    given: Tests and code
    when: Coverage measurement
    then: Coverage percentage returned

  - name: get_metrics
    given: Tester
    when: Metrics requested
    then: Tester metrics returned

test_cases:
  - name: test_generate
    input: { code: "fn add(a, b) { return a + b; }" }
    expected: { test_count: 3 }

  - name: test_edge_cases
    input: { function: "divide" }
    expected: { has_zero_case: true }

  - name: test_coverage
    input: { tests: 10, lines: 100 }
    expected: { coverage_range: [0.0, 1.0] }

  - name: test_metrics
    input: {}
    expected: { tests_generated: 0 }
