# Bridge Page API
# Page-level operations
# Navigation, actions, extraction

name: bridge_page_api
version: "1.0.0"
language: zig
module: bridge_page_api

types:
  PageAPI:
    fields:
      api_id: String
      client: String
      page_id: String

  PageInfo:
    fields:
      page_id: String
      url: String
      title: String
      is_closed: Bool

  GotoOptions:
    fields:
      wait_until: String
      timeout: Int
      referer: Option<String>

  GotoResult:
    fields:
      success: Bool
      url: String
      status: Int
      load_time_ms: Int

  WaitOptions:
    fields:
      state: String
      timeout: Int

  EvaluateResult:
    fields:
      success: Bool
      value: String
      error: Option<String>

  ContentResult:
    fields:
      html: String
      text: String

behaviors:
  - name: goto
    given: URL and options
    when: Navigation needed
    then: Returns goto result

  - name: reload
    given: Page and options
    when: Reload needed
    then: Returns reload result

  - name: go_back
    given: Page
    When: Back navigation needed
    then: Returns navigation result

  - name: go_forward
    given: Page
    when: Forward navigation needed
    then: Returns navigation result

  - name: wait_for_load
    given: Page and wait options
    when: Load wait needed
    then: Returns wait result

  - name: evaluate
    given: Page and JavaScript
    when: Script evaluation needed
    then: Returns evaluate result

  - name: content
    given: Page
    when: Content extraction needed
    then: Returns content result

  - name: close
    given: Page
    when: Page close needed
    then: Returns close result

  - name: get_info
    given: Page
    when: Info query needed
    then: Returns page info
