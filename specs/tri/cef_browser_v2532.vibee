# cef_browser_v2532.vibee - CEF Browser
# Создание и управление браузером
# φ² + 1/φ² = 3 | PHOENIX = 999

name: cef_browser_v2532
version: "2532.0.0"
language: zig
module: cef_browser_v2532

types:
  CefWindowInfo:
    fields:
      window_name: String
      x: Int
      y: Int
      width: Int
      height: Int
      parent_window: Int
      windowless_rendering_enabled: Bool
      shared_texture_enabled: Bool
      external_begin_frame_enabled: Bool

  CefBrowserSettings:
    fields:
      size: Int
      windowless_frame_rate: Int
      default_encoding: String
      javascript_disabled: Bool
      image_loading_disabled: Bool
      remote_fonts_disabled: Bool
      tab_to_links_disabled: Bool
      local_storage_disabled: Bool
      databases_disabled: Bool
      webgl_disabled: Bool
      background_color: Int

  CefBrowser:
    fields:
      identifier: Int
      is_valid: Bool
      host: Object
      can_go_back: Bool
      can_go_forward: Bool
      is_loading: Bool
      main_frame: Object

  CefFrame:
    fields:
      identifier: Int
      is_valid: Bool
      is_main: Bool
      is_focused: Bool
      name: String
      url: String
      parent: Object
      browser: Object

behaviors:
  - name: cef_browser_host_create_browser
    given: CefWindowInfo, CefClient, URL, CefBrowserSettings
    when: Browser creation requested
    then: Create browser asynchronously

  - name: cef_browser_host_create_browser_sync
    given: CefWindowInfo, CefClient, URL, CefBrowserSettings
    when: Sync browser creation requested
    then: Create browser and return immediately

  - name: browser_go_back
    given: CefBrowser with history
    when: Back navigation requested
    then: Navigate to previous page

  - name: browser_go_forward
    given: CefBrowser with forward history
    when: Forward navigation requested
    then: Navigate to next page

  - name: browser_reload
    given: CefBrowser
    when: Reload requested
    then: Reload current page

  - name: browser_stop_load
    given: Loading CefBrowser
    when: Stop requested
    then: Cancel current navigation

  - name: frame_load_url
    given: CefFrame and URL
    when: Navigation requested
    then: Load URL in frame

  - name: frame_execute_javascript
    given: CefFrame, JS code, URL
    when: JS execution requested
    then: Execute JavaScript in frame context

sacred_constants:
  phi: 1.618033988749895
  phi_squared_plus_inverse_squared: 3
  phoenix: 999
