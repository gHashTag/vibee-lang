# iGLA KOSHEY - Anti-Catastrophic Forgetting (EWC++)
# arXiv:1612.00796 - Elastic Weight Consolidation
# Enhanced with progressive memory protection
# φ² + 1/φ² = 3 | PHOENIX = 999

name: igla_koshey_ewc
version: "1.0.0"
language: zig
module: igla_koshey_ewc

sacred_constants:
  phi: 1.618033988749895
  trinity: 3.0
  phoenix: 999

types:
  FisherInfo:
    fields:
      diagonal: Float
      importance: Float
      task_id: Int
      computed_at: Timestamp

  EWCConfig:
    fields:
      lambda_ewc: Float
      fisher_samples: Int
      online_mode: Bool
      progressive: Bool

  ForgettingMetrics:
    fields:
      backward_transfer: Float
      forward_transfer: Float
      average_accuracy: Float
      forgetting_rate: Float

behaviors:
  - name: compute_fisher
    given: "Trained model"
    when: "Task completion"
    then: "Fisher information diagonal computed"

  - name: consolidate_weights
    given: "Fisher information"
    when: "Consolidation"
    then: "Important weights protected via EWC penalty"

  - name: ewc_loss
    given: "Current weights, Fisher, Old weights"
    when: "Loss computation"
    then: "EWC regularization added to task loss"

  - name: progressive_consolidation
    given: "Multiple tasks"
    when: "Progressive mode"
    then: "Fisher accumulated across all tasks"

  - name: phi_importance
    given: "Weight w"
    when: "Importance scaling"
    then: "Importance scaled by φ for critical weights"
