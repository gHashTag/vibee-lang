name: warp_agent_react
version: "1.0.0"
language: zig
module: warp_agent_react

description: |
  WARP Agent ReAct - Reasoning + Acting агент
  Научные основы: ReAct (Yao et al., 2022), WebVoyager (He et al., 2024)
  Бенчмарки: WebArena 35.8%, Mind2Web 41.6%
  φ² + 1/φ² = 3 | PHOENIX = 999

types:
  AgentState:
    fields:
      thought: String
      action: String
      observation: String
      step_number: Int
      total_steps: Int
      success: Bool

  AgentAction:
    fields:
      action_type: String
      target_selector: Option<String>
      target_som_id: Option<Int>
      value: Option<String>
      coordinates: Option<String>

  AgentObservation:
    fields:
      screenshot: Option<String>
      dom_summary: String
      action_result: String
      error: Option<String>

  AgentPlan:
    fields:
      goal: String
      steps: List<String>
      current_step: Int
      estimated_time_ms: Int
      confidence: Float

  AgentConfig:
    fields:
      max_steps: Int
      timeout_ms: Int
      yolo_mode: Bool
      verbose: Bool

  AgentResult:
    fields:
      success: Bool
      final_answer: String
      steps_taken: Int
      total_time_ms: Float
      actions_log: List<String>

behaviors:
  - name: think
    given: Текущее состояние и цель
    when: Генерация мысли (Thought)
    then: Обновлённый AgentState с thought

  - name: act
    given: AgentAction действие
    when: Выполнение действия в браузере
    then: AgentObservation результат

  - name: observe
    given: Текущее состояние браузера
    when: Наблюдение за результатом
    then: AgentObservation с DOM и скриншотом

  - name: plan
    given: Цель пользователя
    when: Создание плана действий
    then: AgentPlan с шагами

  - name: execute_step
    given: AgentPlan и номер шага
    when: Выполнение одного шага
    then: AgentState после шага

  - name: run_task
    given: Цель и AgentConfig
    when: Полное выполнение задачи
    then: AgentResult с результатом
