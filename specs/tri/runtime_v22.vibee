name: runtime_v22
version: "22.5.0"
language: zig
module: runtime_v22

types:
  RuntimeConfig:
    fields:
      config_path: String
      log_level: String
      output_dir: String

  RuntimeState:
    fields:
      status: String
      uptime_ms: Int
      tasks_completed: Int
      current_task: Option<String>

  RuntimeMetrics:
    fields:
      total_tasks: Int
      successful_tasks: Int
      failed_tasks: Int
      avg_task_duration_ms: Float
      total_llm_tokens: Int

  RuntimeEvent:
    fields:
      event_type: String
      timestamp: Timestamp
      data: Object

  Runtime:
    fields:
      config: Object
      state: Object
      agent: Object
      metrics: Object

behaviors:
  - name: create_runtime
    given: RuntimeConfig
    when: Initialize runtime
    then: Runtime instance

  - name: start
    given: Runtime
    when: Start runtime
    then: Started

  - name: stop
    given: Runtime
    when: Stop runtime
    then: Stopped

  - name: run_task
    given: Runtime and task
    when: Execute task
    then: Task result

  - name: run_interactive
    given: Runtime
    when: Start interactive mode
    then: Interactive session

  - name: run_batch
    given: Runtime and task list
    When: Run batch of tasks
    then: Batch results

  - name: get_state
    given: Runtime
    When: Get runtime state
    then: RuntimeState

  - name: get_metrics
    given: Runtime
    When: Get runtime metrics
    then: RuntimeMetrics

  - name: on_event
    given: Runtime and event handler
    When: Register event handler
    then: Handler registered

  - name: emit_event
    given: Runtime and RuntimeEvent
    When: Emit event
    then: Event emitted

  - name: shutdown
    given: Runtime
    When: Graceful shutdown
    then: Shutdown complete
