# texture_atlas_v2655.vibee - Texture Atlases
# Атласы текстур для минимизации bind calls
# φ² + 1/φ² = 3 | PHOENIX = 999

name: texture_atlas_v2655
version: "2655.0.0"
language: zig
module: texture_atlas_v2655

types:
  TextureAtlas:
    fields:
      atlas_id: String
      width: Int
      height: Int
      format: String
      padding: Int

  AtlasRegion:
    fields:
      region_id: String
      x: Int
      y: Int
      width: Int
      height: Int
      uv_min: Object
      uv_max: Object

  AtlasPacker:
    fields:
      algorithm: String
      max_size: Int
      allow_rotation: Bool

  AtlasStats:
    fields:
      total_regions: Int
      utilization: Float
      wasted_pixels: Int
      bind_savings: Int

  AtlasConfig:
    fields:
      max_atlas_size: Int
      mip_maps: Bool
      compression: String
      border_mode: String

behaviors:
  - name: create_atlas
    given: AtlasConfig
    when: Atlas creation
    then: Return TextureAtlas

  - name: pack_textures
    given: Texture list
    when: Packing
    then: Return AtlasRegion list

  - name: get_uv
    given: Region ID
    when: UV lookup
    then: Return UV coordinates

  - name: update_region
    given: Region and new data
    when: Dynamic update
    then: Update atlas region

  - name: get_stats
    given: None
    when: Stats query
    then: Return AtlasStats

sacred_constants:
  phi: 1.618033988749895
  phoenix: 999
