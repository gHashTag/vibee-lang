# VIBEE Roadmap 2025 Q1: Element Queries v219
# Foundation Phase - DOM Element Selection and Interaction

name: elements_v219
version: "219.0.0"
language: zig
module: elements

types:
  ElementHandle:
    fields:
      object_id: String
      node_id: Int
      backend_node_id: Int
      frame_id: String

  Selector:
    fields:
      css: String
      xpath: String
      text: String
      role: String

  BoundingBox:
    fields:
      x: Float
      y: Float
      width: Float
      height: Float

  ElementState:
    fields:
      visible: Bool
      enabled: Bool
      editable: Bool
      checked: Bool

  QueryOptions:
    fields:
      timeout_ms: Int
      strict: Bool
      has_text: String

  ElementInfo:
    fields:
      tag_name: String
      attributes: Object
      text_content: String
      inner_html: String

  QueryMetrics:
    fields:
      queries_executed: Int
      avg_time_ms: Float
      cache_hits: Int

behaviors:
  - name: query_selector
    given: "CSS selector"
    when: "Element query"
    then: "Return element handle"
    deliverables:
      - "CSS selector support"
      - "XPath support"
      - "Text selector"
    timeline: "Week 1-2"

  - name: query_all
    given: "Selector matching multiple"
    when: "Query all"
    then: "Return all matches"
    deliverables:
      - "Multiple element query"
      - "Iteration support"
      - "Filtering"
    timeline: "Week 2-3"

  - name: wait_for_selector
    given: "Selector"
    when: "Element not present"
    then: "Wait until appears"
    deliverables:
      - "Visibility wait"
      - "Attached wait"
      - "Hidden wait"
    timeline: "Week 3-4"

  - name: get_bounding_box
    given: "Element handle"
    when: "Position needed"
    then: "Return coordinates"
    deliverables:
      - "Element bounds"
      - "Viewport position"
      - "Scroll position"
    timeline: "Week 4"

  - name: get_attributes
    given: "Element handle"
    when: "Attributes needed"
    then: "Return attribute map"
    deliverables:
      - "All attributes"
      - "Specific attribute"
      - "Data attributes"
    timeline: "Week 5"

  - name: get_text_content
    given: "Element handle"
    when: "Text needed"
    then: "Return text content"
    deliverables:
      - "Text content"
      - "Inner text"
      - "Inner HTML"
    timeline: "Week 5-6"

  - name: check_state
    given: "Element handle"
    when: "State check"
    then: "Return element state"
    deliverables:
      - "Visibility check"
      - "Enabled check"
      - "Checked state"
    timeline: "Week 6-7"

test_cases:
  - name: test_query
    input: { selector: "#submit" }
    expected: { found: true }

  - name: test_query_all
    input: { selector: ".item" }
    expected: { count: 5 }

  - name: test_wait
    input: { selector: ".loading", state: "hidden" }
    expected: { hidden: true }

  - name: test_bounds
    input: { element: true }
    expected: { box: true }

  - name: test_attributes
    input: { element: true }
    expected: { attrs: true }

  - name: test_text
    input: { element: true }
    expected: { text: true }

  - name: test_state
    input: { element: true }
    expected: { state: true }
