# collab_undo_v12883.vibee - Совместный Undo
# Undo/Redo в совместном редактировании
# φ² + 1/φ² = 3 | PHOENIX = 999

name: collab_undo_v12883
version: "12883.0.0"
language: zig
module: collab_undo_v12883

types:
  UndoStack:
    fields:
      stack_id: String
      user_id: String
      operations: List
      pointer: Int

  UndoOperation:
    fields:
      op_id: String
      forward_op: Object
      reverse_op: Object
      timestamp: Timestamp

  UndoManager:
    fields:
      manager_id: String
      stacks: List
      global_history: List

  UndoConfig:
    fields:
      max_history: Int
      group_timeout_ms: Int
      selective_undo: Bool

  UndoMetrics:
    fields:
      undos_performed: Int
      redos_performed: Int
      conflicts_resolved: Int

behaviors:
  - name: push_undo
    given: UndoOperation
    when: Push
    then: Return stack state

  - name: undo
    given: User ID
    when: Undo
    then: Return reverse operation

  - name: redo
    given: User ID
    when: Redo
    then: Return forward operation

  - name: group_operations
    given: Operations
    when: Grouping
    then: Return grouped operation

  - name: selective_undo
    given: Operation ID
    when: Selective undo
    then: Return reverse operation

sacred_constants:
  phi: 1.618033988749895
  phoenix: 999
