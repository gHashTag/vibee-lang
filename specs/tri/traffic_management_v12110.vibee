name: traffic_management_v12110
version: "12110"
language: zig
module: traffic_management
types:
  TrafficConfig:
    fields:
      load_balancing: LoadBalancing
      rate_limiting: Bool
      circuit_breaker: Bool
  LoadBalancing:
    variants:
      - round_robin
      - least_connections
      - weighted
      - random
  TrafficRule:
    fields:
      rule_id: String
      source: String
      destination: String
      weight: Float
      conditions: List<String>
  TrafficMetrics:
    fields:
      requests_per_second: Float
      error_rate: Float
      latency_avg: Float
behaviors:
  - name: route_request
    given: Request
    when: Routing
    then: Returns destination
  - name: apply_rate_limit
    given: Request
    when: Rate limiting
    then: Returns limit status
  - name: check_circuit_breaker
    given: Service
    when: Checking
    then: Returns circuit status
  - name: add_traffic_rule
    given: Rule config
    when: Adding
    then: Returns rule
  - name: update_weights
    given: New weights
    when: Updating
    then: Returns updated config
  - name: get_traffic_metrics
    given: Service
    when: Getting metrics
    then: Returns metrics
  - name: enable_mirroring
    given: Source and target
    when: Enabling
    then: Returns mirror config
  - name: disable_mirroring
    given: Mirror config
    when: Disabling
    then: Returns status
creation_pattern:
  source: TrafficRequest
  transformer: TrafficRouter
  result: TrafficMetrics
