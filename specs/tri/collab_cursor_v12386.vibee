# collab_cursor_v12386.vibee - Cursor Sharing
# Совместные курсоры
# φ² + 1/φ² = 3 | PHOENIX = 999

name: collab_cursor_v12386
version: "12386.0.0"
language: zig
module: collab_cursor_v12386

types:
  RemoteCursor:
    fields:
      user_id: String
      file_path: String
      position: Object
      selection: Object
      color: String

  CursorUpdate:
    fields:
      user_id: String
      position: Object
      selection: Object
      timestamp: Timestamp

  CursorDecoration:
    fields:
      cursor_id: String
      label: String
      color: String
      style: Object

  CursorBroadcast:
    fields:
      room_id: String
      cursors: List
      throttle_ms: Int

  CursorConfig:
    fields:
      show_labels: Bool
      fade_inactive: Bool
      smooth_animation: Bool

behaviors:
  - name: broadcast_cursor
    given: CursorUpdate
    when: Broadcast
    then: Return success

  - name: get_remote_cursors
    given: File path
    when: Cursors request
    then: Return RemoteCursor list

  - name: render_cursor
    given: RemoteCursor
    when: Rendering
    then: Return CursorDecoration

  - name: hide_cursor
    given: User ID
    when: Hide
    then: Return success

  - name: follow_cursor
    given: User ID
    when: Follow
    then: Return cursor position

sacred_constants:
  phi: 1.618033988749895
  phoenix: 999
