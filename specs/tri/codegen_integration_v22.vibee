name: codegen_integration_v22
version: "22.6.0"
language: zig
module: codegen_integration_v22

types:
  IntegrationSpec:
    fields:
      name: String
      http_endpoints: List<String>
      ws_handlers: List<String>
      types: List<String>

  GeneratedModule:
    fields:
      name: String
      code: String
      tests: String
      dependencies: List<String>

  IntegrationCodegen:
    fields:
      http_codegen: Object
      ws_codegen: Object
      type_system: Object

behaviors:
  - name: create_codegen
    given: Config
    when: Initialize codegen
    then: IntegrationCodegen instance

  - name: generate_module
    given: IntegrationCodegen and IntegrationSpec
    when: Generate full module
    then: GeneratedModule

  - name: generate_agent
    given: IntegrationCodegen and agent spec
    when: Generate agent code
    then: Agent code

  - name: generate_cdp_client
    given: IntegrationCodegen
    when: Generate CDP client
    then: CDP client code

  - name: generate_ollama_client
    given: IntegrationCodegen
    when: Generate Ollama client
    then: Ollama client code

  - name: generate_tests
    given: IntegrationCodegen and module
    When: Generate tests
    then: Test code

  - name: link_modules
    given: IntegrationCodegen and modules
    When: Link modules together
    then: Linked code

  - name: validate_integration
    given: IntegrationCodegen and spec
    When: Validate integration
    then: Validation result

  - name: export_all
    given: IntegrationCodegen
    When: Export all code
    then: Exported code

  - name: get_dependencies
    given: IntegrationCodegen
    When: Get dependencies
    then: Dependency list
