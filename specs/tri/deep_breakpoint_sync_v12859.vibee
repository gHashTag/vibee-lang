# deep_breakpoint_sync_v12859.vibee - Синхронизация точек останова
# Единые breakpoints
# φ² + 1/φ² = 3 | PHOENIX = 999

name: deep_breakpoint_sync_v12859
version: "12859.0.0"
language: zig
module: deep_breakpoint_sync_v12859

types:
  SyncedBreakpoint:
    fields:
      breakpoint_id: String
      file_path: String
      line: Int
      column: Int
      browser_id: String
      vscode_id: String

  BreakpointMapping:
    fields:
      mapping_id: String
      source_map: Object
      browser_to_vscode: Object
      vscode_to_browser: Object

  BreakpointEvent:
    fields:
      event_type: String
      breakpoint: Object
      source: String
      timestamp: Timestamp

  SyncState:
    fields:
      synced_count: Int
      pending_count: Int
      failed_count: Int

  SyncConfig:
    fields:
      auto_sync: Bool
      use_source_maps: Bool
      sync_conditions: Bool

behaviors:
  - name: sync_breakpoint
    given: Breakpoint
    when: Sync
    then: Return SyncedBreakpoint

  - name: map_location
    given: Location and direction
    when: Mapping
    then: Return mapped location

  - name: handle_breakpoint_event
    given: BreakpointEvent
    when: Event handling
    then: Return sync result

  - name: get_sync_state
    given: Session ID
    when: State request
    then: Return SyncState

  - name: resolve_source_map
    given: File path
    when: Source map resolution
    then: Return BreakpointMapping

sacred_constants:
  phi: 1.618033988749895
  phoenix: 999
