name: agent_search_compare
version: "1.0.0"
language: zig
module: agent_search_compare

description: |
  Agent Search Compare - сравнение цен и товаров
  OpenAI Operator: сравнение цен на нескольких сайтах
  φ² + 1/φ² = 3 | PHOENIX = 999

types:
  CompareQuery:
    fields:
      product_name: String
      sites: List<String>
      include_shipping: Bool
      currency: String

  PricePoint:
    fields:
      site: String
      price: Float
      currency: String
      in_stock: Bool
      shipping_cost: Option<Float>
      url: String

  CompareResult:
    fields:
      product: String
      prices: List<String>
      best_price: String
      price_range: String
      comparison_time_ms: Float

  PriceAlert:
    fields:
      product: String
      target_price: Float
      current_best: Float
      alert_triggered: Bool

behaviors:
  - name: compare_prices
    given: CompareQuery запрос
    when: Сравнение цен на сайтах
    then: CompareResult

  - name: find_best_price
    given: CompareResult результаты
    when: Поиск лучшей цены
    then: PricePoint с лучшей ценой

  - name: track_price
    given: Продукт и URL
    when: Отслеживание цены
    then: PricePoint текущая цена

  - name: set_price_alert
    given: PriceAlert настройки
    when: Установка алерта
    then: Алерт активирован

  - name: compare_features
    given: Список продуктов
    when: Сравнение характеристик
    then: Таблица сравнения

  - name: find_alternatives
    given: Продукт
    when: Поиск альтернатив
    then: Список похожих продуктов
