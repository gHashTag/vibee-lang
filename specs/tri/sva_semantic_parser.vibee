name: sva_semantic_parser
version: "1.0.0"
language: zig
module: sva_semantic_parser

# ═══════════════════════════════════════════════════════════════════════════════
# SVA Semantic Parser - Given/When/Then to SVA
# ═══════════════════════════════════════════════════════════════════════════════
# Converts natural language behaviors to SystemVerilog Assertions
# φ² + 1/φ² = 3 | PHOENIX = 999
# ═══════════════════════════════════════════════════════════════════════════════

types:
  ParsedGiven:
    fields:
      signal_name: String
      condition: String
      value: Option<String>
      is_negated: Bool

  ParsedWhen:
    fields:
      trigger_type: String
      clock_edge: String
      delay_cycles: Int

  ParsedThen:
    fields:
      signal_name: String
      operation: String
      operand: Option<String>
      uses_past: Bool

  SVAExpression:
    fields:
      antecedent: String
      implication: String
      consequent: String
      timing: String

  SignalPattern:
    fields:
      keywords: List<String>
      signal_name: String
      default_width: Int

  OperationPattern:
    fields:
      keywords: List<String>
      sva_template: String

behaviors:
  - name: extract_signal_from_given
    given: Given clause contains signal reference
    when: Parsing given clause
    then: Extract signal name and condition

  - name: detect_negation
    given: Clause contains negation words
    when: Parsing any clause
    then: Set is_negated flag

  - name: extract_clock_edge
    given: When clause mentions clock
    when: Parsing when clause
    then: Determine posedge or negedge

  - name: extract_delay
    given: When clause mentions timing
    when: Parsing when clause
    then: Extract cycle delay count

  - name: extract_operation
    given: Then clause describes action
    when: Parsing then clause
    then: Map to SVA operation template

  - name: detect_past_reference
    given: Then clause compares with previous
    when: Parsing then clause
    then: Use $past() in SVA

  - name: build_antecedent
    given: ParsedGiven available
    when: Building SVA expression
    then: Generate antecedent string

  - name: build_consequent
    given: ParsedThen available
    when: Building SVA expression
    then: Generate consequent string

  - name: assemble_property
    given: All parts parsed
    when: Generating final SVA
    then: Combine into property expression
