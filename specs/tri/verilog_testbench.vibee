name: verilog_testbench
version: "1.0.0"
language: zig
module: verilog_testbench

# ═══════════════════════════════════════════════════════════════════════════════
# VIBEE → Verilog Testbench Generator
# ═══════════════════════════════════════════════════════════════════════════════
# Священная Формула: V = n × 3^k × π^m × φ^p × e^q
# Золотое Тождество: φ² + 1/φ² = 3 | PHOENIX = 999
#
# Автоматическая генерация testbench из VIBEE behaviors
# Поддержка: clock gen, reset, stimulus, assertions
# ═══════════════════════════════════════════════════════════════════════════════

types:
  TestbenchConfig:
    fields:
      dut_name: String
      clock_period_ns: Int
      reset_cycles: Int
      timeout_cycles: Int

  ClockConfig:
    fields:
      name: String
      period_ns: Int
      duty_cycle: Float

  ResetConfig:
    fields:
      name: String
      active_low: Bool
      duration_cycles: Int

  Stimulus:
    fields:
      signal_name: String
      time_ns: Int
      value: Int

  Assertion:
    fields:
      name: String
      condition: String
      message: String
      severity: String

  TestCase:
    fields:
      name: String
      stimuli: List<Object>
      expected: List<Object>
      timeout: Int

behaviors:
  - name: generate_testbench_header
    given: TestbenchConfig with DUT name
    when: Testbench header generation
    then: Output timescale, module declaration

  - name: generate_clock
    given: ClockConfig with period
    when: Clock generation
    then: Output always block for clock

  - name: generate_reset
    given: ResetConfig with duration
    when: Reset generation
    then: Output initial block for reset sequence

  - name: generate_dut_instance
    given: DUT module name and ports
    when: DUT instantiation
    then: Output module instance with port connections

  - name: generate_stimulus
    given: List of Stimulus events
    when: Stimulus generation
    then: Output initial block with timed assignments

  - name: generate_assertions
    given: List of Assertion conditions
    when: Assertion generation
    then: Output SVA or $display-based checks

  - name: generate_waveform_dump
    given: Signals to dump
    when: VCD generation
    then: Output $dumpfile and $dumpvars

  - name: generate_test_from_behavior
    given: VIBEE behavior with given/when/then
    when: Test case extraction
    then: Convert behavior to stimulus + assertion

  - name: generate_coverage
    given: FSM states and transitions
    when: Coverage generation
    then: Output covergroup for functional coverage
