# reprojection_v2676.vibee - Frame Reprojection
# Репроекция кадров для снижения латентности
# φ² + 1/φ² = 3 | PHOENIX = 999

name: reprojection_v2676
version: "2676.0.0"
language: zig
module: reprojection_v2676

types:
  ReprojectionConfig:
    fields:
      mode: String
      motion_vectors: Bool
      depth_based: Bool
      extrapolation: Bool

  ReprojectedFrame:
    fields:
      color: String
      confidence: String
      holes_mask: String
      latency_saved_ms: Float

  MotionData:
    fields:
      camera_motion: Object
      object_motion: List
      optical_flow: String

  ReprojectionStats:
    fields:
      frames_reprojected: Int
      avg_quality: Float
      holes_percent: Float
      latency_reduction_ms: Float

  HoleFillConfig:
    fields:
      method: String
      search_radius: Int
      temporal_blend: Float

behaviors:
  - name: reproject_frame
    given: Previous frame and motion
    when: Reprojection
    then: Return ReprojectedFrame

  - name: compute_motion
    given: Current and previous
    when: Motion estimation
    then: Return MotionData

  - name: fill_holes
    given: ReprojectedFrame
    when: Hole filling
    then: Return filled frame

  - name: blend_frames
    given: Reprojected and rendered
    when: Quality blend
    then: Return blended frame

  - name: get_stats
    given: None
    when: Stats query
    then: Return ReprojectionStats

sacred_constants:
  phi: 1.618033988749895
  phoenix: 999
