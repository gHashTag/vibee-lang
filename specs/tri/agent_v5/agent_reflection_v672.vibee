# VIBEE YOLO MODE V - Agent Reflection v672
# φ² + 1/φ² = 3 | PHOENIX = 999
# Reflective agents that learn from experience

name: agent_reflection_v672
version: "5.0.0"
language: zig
module: agent_reflection

sacred_constants:
  phi: 1.618033988749895
  phi_squared_plus_inverse_squared: 3
  phoenix: 999

creation_pattern:
  source: Experience
  transformer: ReflectionEngine
  result: Insight

types:
  ReflectionTrigger:
    fields:
      event_type: String
      importance: Float
      timing: String

  ReflectionProcess:
    fields:
      experience: String
      analysis: String
      conclusions: String
      action_items: String

  Insight:
    fields:
      content: String
      confidence: Float
      applicability: String
      source_experience: String

  ReflectionMetrics:
    fields:
      reflections_count: Int
      insights_generated: Int
      insights_applied: Int
      improvement_from_reflection: Float

behaviors:
  - name: trigger_reflection
    given: Significant event
    when: Trigger detection
    then: Reflection process initiated

  - name: recall_experience
    given: Reflection trigger
    when: Memory recall
    then: Relevant experiences retrieved

  - name: analyze_experience
    given: Retrieved experiences
    when: Analysis
    then: Patterns and lessons identified

  - name: generate_insight
    given: Analysis results
    when: Insight generation
    then: Actionable insight created

  - name: validate_insight
    given: Generated insight
    when: Validation
    then: Insight checked for consistency

  - name: store_insight
    given: Validated insight
    when: Storage
    then: Insight added to knowledge base

  - name: apply_insight
    given: Relevant situation
    when: Application
    then: Insight used to guide action

  - name: update_insight
    given: New evidence
    when: Update
    then: Insight refined based on feedback

test_cases:
  - name: test_reflection_trigger
    input:
      event: significant
    expected:
      triggered: true

  - name: test_experience_recall
    input:
      trigger: valid
    expected:
      recalled: true

  - name: test_experience_analyze
    input:
      experiences: retrieved
    expected:
      analyzed: true

  - name: test_insight_generate
    input:
      analysis: complete
    expected:
      insight_created: true

  - name: test_insight_validate
    input:
      insight: generated
    expected:
      validated: true

  - name: test_insight_store
    input:
      insight: validated
    expected:
      stored: true

  - name: test_insight_apply
    input:
      situation: relevant
    expected:
      applied: true

  - name: test_insight_update
    input:
      evidence: new
    expected:
      updated: true

  - name: test_phi_reflection
    input:
      phi: 1.618033988749895
    expected:
      golden_insight_rate: 0.618033988749895
