name: cli_parser_v22
version: "22.5.0"
language: zig
module: cli_parser_v22

types:
  CLIConfig:
    fields:
      program_name: String
      version: String
      description: String

  CLIOption:
    fields:
      short: Option<String>
      long: String
      description: String
      required: Bool
      default: Option<String>

  CLICommand:
    fields:
      name: String
      description: String
      options: List<String>
      handler: String

  ParsedArgs:
    fields:
      command: String
      options: Object
      positional: List<String>

  ParseError:
    fields:
      message: String
      position: Int

  CLIParser:
    fields:
      config: Object
      commands: List<String>
      global_options: List<String>

behaviors:
  - name: create_parser
    given: CLIConfig
    when: Initialize parser
    then: CLIParser instance

  - name: add_command
    given: CLIParser and CLICommand
    when: Add command
    then: Updated parser

  - name: add_option
    given: CLIParser and CLIOption
    when: Add global option
    then: Updated parser

  - name: parse
    given: CLIParser and args
    when: Parse arguments
    then: ParsedArgs or error

  - name: get_option
    given: ParsedArgs and option name
    when: Get option value
    then: Option value

  - name: has_option
    given: ParsedArgs and option name
    When: Check option exists
    then: Boolean

  - name: get_positional
    given: ParsedArgs and index
    When: Get positional arg
    then: Positional value

  - name: print_help
    given: CLIParser
    When: Print help message
    then: Help string

  - name: print_version
    given: CLIParser
    When: Print version
    then: Version string

  - name: validate_args
    given: CLIParser and ParsedArgs
    When: Validate arguments
    then: Validation result

  - name: suggest_command
    given: CLIParser and input
    When: Suggest similar command
    then: Suggestion
