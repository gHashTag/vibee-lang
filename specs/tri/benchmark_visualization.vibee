# VIBEE BitNet Benchmark Visualization Specification
# Священная Формула: V = n × 3^k × π^m × φ^p × e^q
# Золотое Тождество: φ² + 1/φ² = 3 | PHOENIX = 999

name: benchmark_visualization
version: "1.0.0"
language: python
module: visualization

description: |
  Модуль визуализации результатов бенчмарков BitNet.
  Генерирует графики latency, throughput, memory bandwidth.

# ═══════════════════════════════════════════════════════════════════════════════
# Типы данных
# ═══════════════════════════════════════════════════════════════════════════════

types:
  PlotConfig:
    description: "Конфигурация графика"
    fields:
      title: String
      xlabel: String
      ylabel: String
      figsize: List<Int>
      style: String
      colormap: String

  ChartType:
    description: "Тип графика"
    enum:
      - histogram
      - bar
      - line
      - scatter
      - box
      - heatmap

  VisualizationResult:
    description: "Результат визуализации"
    fields:
      chart_type: ChartType
      file_path: String
      format: String
      width: Int
      height: Int

# ═══════════════════════════════════════════════════════════════════════════════
# Поведения - Latency Charts
# ═══════════════════════════════════════════════════════════════════════════════

behaviors:
  # --- Latency ---
  - name: plot_latency_histogram
    given: BenchmarkResult с raw_data latency измерений
    when: Вызов plot_latency_histogram(result)
    then: Гистограмма распределения latency с mean/median линиями

  - name: plot_latency_percentiles
    given: BenchmarkResult с metrics p50, p95, p99
    when: Вызов plot_latency_percentiles(result)
    then: Bar chart с percentiles

  - name: plot_latency_over_time
    given: Список BenchmarkResult по времени
    when: Вызов plot_latency_over_time(results)
    then: Line chart latency vs time

  # --- Throughput ---
  - name: plot_throughput_bar
    given: BenchmarkResult с tokens_per_second
    when: Вызов plot_throughput_bar(result)
    then: Bar chart throughput по batch sizes

  - name: plot_throughput_comparison
    given: Список BenchmarkResult для сравнения
    when: Вызов plot_throughput_comparison(results)
    then: Grouped bar chart для сравнения конфигураций

  - name: plot_throughput_scaling
    given: Результаты с разными batch sizes
    when: Вызов plot_throughput_scaling(results)
    then: Line chart scaling efficiency

  # --- Memory ---
  - name: plot_memory_bandwidth
    given: BenchmarkResult с bandwidth_gbps
    when: Вызов plot_memory_bandwidth(result)
    then: Bar chart bandwidth по transfer sizes

  - name: plot_memory_heatmap
    given: Матрица bandwidth для разных размеров
    when: Вызов plot_memory_heatmap(data)
    then: Heatmap bandwidth vs transfer_size vs iterations

  # --- Dashboard ---
  - name: plot_summary_dashboard
    given: BenchmarkSuite со всеми результатами
    when: Вызов plot_summary_dashboard(suite)
    then: Multi-panel figure с ключевыми метриками

  - name: save_all_plots
    given: BenchmarkSuite и output directory
    when: Вызов save_all_plots(suite, output_dir)
    then: Все графики сохранены в PNG/SVG

# ═══════════════════════════════════════════════════════════════════════════════
# Стили
# ═══════════════════════════════════════════════════════════════════════════════

styles:
  default:
    figsize: [10, 6]
    dpi: 150
    style: "seaborn-v0_8-whitegrid"
    colormap: "viridis"
    font_size: 12

  dark:
    figsize: [10, 6]
    dpi: 150
    style: "dark_background"
    colormap: "plasma"
    font_size: 12

  publication:
    figsize: [8, 5]
    dpi: 300
    style: "seaborn-v0_8-paper"
    colormap: "tab10"
    font_size: 10

# ═══════════════════════════════════════════════════════════════════════════════
# Цветовая схема VIBEE
# ═══════════════════════════════════════════════════════════════════════════════

colors:
  primary: "#6366F1"      # Indigo
  secondary: "#8B5CF6"    # Violet
  success: "#10B981"      # Emerald
  warning: "#F59E0B"      # Amber
  error: "#EF4444"        # Red
  latency: "#3B82F6"      # Blue
  throughput: "#10B981"   # Green
  memory: "#F59E0B"       # Orange

# ═══════════════════════════════════════════════════════════════════════════════
# Метаданные
# ═══════════════════════════════════════════════════════════════════════════════

metadata:
  author: "VIBEE Project"
  created: "2025-01-25"
  dependencies:
    - matplotlib>=3.5.0
    - numpy>=1.20.0
    - seaborn>=0.12.0
