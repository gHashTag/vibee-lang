# FFI Jai v56590 - Jai #foreign
# VIBEE → Jai Native Bindings
# φ² + 1/φ² = 3 | PHOENIX = 999

name: ffi_jai_v56590
version: "56.5.90"
language: zig
module: ffi_jai

creation_pattern:
  source: VibeeSpec
  transformer: JaiBindingsGenerator
  result: JaiModule

types:
  JaiType:
    fields:
      name: String
      jai_type: String
      c_type: String
      is_pointer: Bool

  JaiForeignProc:
    fields:
      name: String
      c_name: String
      params: List<String>
      return_type: String
      library: String

  JaiStruct:
    fields:
      name: String
      fields: List<String>
      is_union: Bool
      notes: List<String>

  JaiEnum:
    fields:
      name: String
      backing_type: String
      values: List<String>
      is_flags: Bool

  JaiForeignLibrary:
    fields:
      name: String
      path: String
      system: Bool

  JaiModule:
    fields:
      name: String
      imports: List<String>
      foreign_libs: List<JaiForeignLibrary>
      foreign_procs: List<JaiForeignProc>
      structs: List<JaiStruct>

  JaiCallback:
    fields:
      name: String
      signature: String

  JaiArray:
    fields:
      element_type: String
      count: Option<Int>
      is_dynamic: Bool

behaviors:
  - name: generate_jai_module
    given: VibeeSpec
    when: Jai module needed
    then: Jai source files

  - name: generate_foreign_proc
    given: C function
    when: #foreign proc needed
    then: JaiForeignProc

  - name: map_vibee_to_jai_type
    given: Vibee type
    when: Type mapping needed
    then: Jai type

  - name: generate_struct
    given: C struct
    when: Jai struct needed
    then: JaiStruct

  - name: generate_foreign_library
    given: Library config
    when: #foreign_library needed
    then: JaiForeignLibrary

  - name: handle_string
    given: C string
    when: string conversion needed
    then: *u8 to string

  - name: handle_callback
    given: C callback
    when: proc pointer needed
    then: JaiCallback

  - name: handle_array
    given: C array
    when: Array needed
    then: JaiArray
