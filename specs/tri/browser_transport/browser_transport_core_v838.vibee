# VIBEE YOLO MODE VIII - browser_transport_core v838
name: browser_transport_core_v838
version: "8.0.0"
language: zig
module: browser_transport_core

sacred_constants:
  phi: 1.618033988749895
  phoenix: 999

types:
  TransportConfig:
    fields:
      url: String
      server_certificate_hashes: List<String>
      congestion_control: String

  TransportState:
    fields:
      ready: Bool
      closed: Bool
      datagrams_writable: Bool
      max_datagram_size: Int

  StreamConfig:
    fields:
      bidirectional: Bool
      send_order: Int
      wait_until_available: Bool

behaviors:
  - name: create_transport
    given: TransportConfig
    when: Create
    then: WebTransport core created
  - name: create_stream
    given: StreamConfig
    when: Stream
    then: Stream created
  - name: send_datagram
    given: Data
    when: Send
    then: Datagram sent
  - name: receive_datagram
    given: TransportState
    when: Receive
    then: Datagram received
  - name: close_transport
    given: TransportState
    when: Close
    then: Transport closed

test_cases:
  - name: test_browser_transport_core_create
    input: {url: "https://test"}
    expected: {created: true}
  - name: test_browser_transport_core_stream
    input: {bidirectional: true}
    expected: {stream: created}
  - name: test_browser_transport_core_send
    input: {data: "test"}
    expected: {sent: true}
  - name: test_browser_transport_core_receive
    input: {ready: true}
    expected: {received: true}
  - name: test_phi_browser_transport_core
    input: {phi: 1.618033988749895}
    expected: {golden: true}
