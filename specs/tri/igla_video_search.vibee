# iGLA Video Search
# Video retrieval and search
# Scientific basis: Bain et al. 2021, Luo et al. 2022
# φ² + 1/φ² = 3 | V = n × 3^k × π^m × φ^p

name: igla_video_search
version: "1.0.0"
language: zig
module: igla_video_search

sacred_constants:
  phi: 1.618033988749895
  trinity: 3.0
  phoenix: 999

types:
  VideoSearchConfig:
    fields:
      k: Int
      temporal_weight: Float
      visual_weight: Float

  VideoQuery:
    fields:
      text: String
      reference_clip: String
      timestamp_hint: Int

  VideoSearchResult:
    fields:
      video_id: Int
      start_ms: Int
      end_ms: Int
      score: Float

  VideoIndex:
    fields:
      video_embeddings: String
      frame_index: String
      metadata: String

  MomentLocalization:
    fields:
      video_id: Int
      start_ms: Int
      end_ms: Int
      confidence: Float

  VideoStats:
    fields:
      total_videos: Int
      total_frames: Int
      total_duration_hours: Float

behaviors:
  - name: search_by_text
    given: "Text query, k"
    when: "Text-to-video search"
    then: "Matching videos"

  - name: search_by_clip
    given: "Reference clip, k"
    when: "Video-to-video search"
    then: "Similar videos"

  - name: localize_moment
    given: "Video, text query"
    when: "Moment localization"
    then: "Temporal segment"

  - name: index_video
    given: "Video"
    when: "Indexing"
    then: "Video indexed"

  - name: search_frames
    given: "Query, video_id"
    when: "Frame search"
    then: "Matching frames"

  - name: temporal_grounding
    given: "Query, video"
    when: "Grounding"
    then: "Grounded segment"

  - name: batch_search
    given: "Query batch"
    when: "Batch search"
    then: "Batch results"

  - name: phi_temporal_ranking
    given: "Results"
    when: "Sacred ranking"
    then: "φ-weighted ranking"
