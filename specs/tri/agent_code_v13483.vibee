# VIBEE Specification v13483
# Code Generation Agent
# KOSCHEI CYCLE 11 - 1000000x SPEEDUP

name: agent_code
version: "13483"
language: zig
module: agent_code

types:
  CodeAgent:
    fields:
      id: String
      language: String
      framework: String
      style_guide: String
      context_files: List<String>

  CodeRequest:
    fields:
      request_type: String
      description: String
      language: String
      constraints: List<String>
      examples: List<String>

  GeneratedCode:
    fields:
      code: String
      language: String
      imports: List<String>
      dependencies: List<String>
      explanation: String

  CodeEdit:
    fields:
      file_path: String
      start_line: Int
      end_line: Int
      old_code: String
      new_code: String
      reason: String

  CodeAnalysis:
    fields:
      complexity: Int
      lines_of_code: Int
      functions: List<String>
      issues: List<String>
      suggestions: List<String>

  CodeMetrics:
    fields:
      generations: Int
      edits: Int
      accepted: Int
      rejected: Int
      avg_quality: Float

behaviors:
  - name: generate_code
    given: Code request with requirements
    when: Generation triggered
    then: Code generated matching requirements

  - name: edit_existing_code
    given: File and edit instructions
    when: Edit requested
    then: Code modified preserving style

  - name: analyze_code
    given: Source code file
    when: Analysis requested
    then: Code analysis report generated

  - name: suggest_improvements
    given: Code with potential issues
    when: Improvement scan triggered
    then: Improvement suggestions provided

  - name: generate_tests
    given: Source code
    when: Test generation requested
    then: Unit tests generated

  - name: document_code
    given: Undocumented code
    when: Documentation requested
    then: Comments and docs added

creation_pattern:
  source: CodeRequest
  transformer: CodeAgent
  result: GeneratedCode
