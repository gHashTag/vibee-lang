# VIBEE Specification v13540
# Autoregressive Generation - Sequential generation models
name: autoregressive_gen_v13540
version: "1.0.0"
language: zig
module: autoregressive_gen

types:
  ARModel:
    fields:
      pixelcnn: String
      wavenet: String
      transformer_ar: String
      mamba_ar: String

  ARContext:
    fields:
      past_tokens: String
      context_length: Int
      cache: String

  GenerationStep:
    fields:
      logits: String
      sampled_token: Int
      probability: Float

  ARConfig:
    fields:
      vocab_size: Int
      max_length: Int
      temperature: Float
      top_k: Int
      top_p: Float

  AROutput:
    fields:
      sequence: String
      log_probs: String
      total_log_prob: Float

behaviors:
  - name: compute_next_logits
    given: AR context
    when: Logits computed
    then: Returns generation step

  - name: sample_token
    given: Logits and config
    when: Sampling done
    then: Returns sampled token

  - name: generate_sequence
    given: Prompt and config
    when: Generation done
    then: Returns AR output

  - name: compute_perplexity
    given: Sequence
    when: Perplexity computed
    then: Returns perplexity score
