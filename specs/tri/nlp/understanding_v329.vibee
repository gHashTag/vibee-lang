# ═══════════════════════════════════════════════════════════════════════════════
# UNDERSTANDING v329 - Natural Language Understanding
# ═══════════════════════════════════════════════════════════════════════════════
# Based on: BERT, RoBERTa, DeBERTa
# Scientific: ACL 2024, EMNLP 2024
# PAS Pattern: MLS + D&C
# φ² + 1/φ² = 3 | PHOENIX = 999
# ═══════════════════════════════════════════════════════════════════════════════

name: understanding
version: "3.2.9"
language: zig
module: understanding

sacred_constants:
  phi: 1.618033988749895
  trinity: 3.0
  phoenix: 999

creation_pattern:
  source: Text
  transformer: NLUEngine
  result: Understanding

types:
  NLUTask:
    enum:
      - classification
      - ner
      - qa
      - sentiment
      - entailment

  Entity:
    fields:
      text: String
      label: String
      start: Int
      end: Int
      confidence: Float

  ClassificationResult:
    fields:
      label: String
      score: Float
      all_scores: List<Float>

  QAResult:
    fields:
      answer: String
      start: Int
      end: Int
      score: Float

  SentimentResult:
    fields:
      sentiment: String
      score: Float
      aspects: List<String>

  EntailmentResult:
    fields:
      label: String
      score: Float

behaviors:
  - name: classify
    given: "Text"
    when: "Classification"
    then: "Classify text"
    pas_pattern: MLS
    complexity: O(n)
    test_cases:
      - name: test_classify
        input: '{"text": "Great product!"}'
        expected: '{"label": "positive"}'

  - name: extract_entities
    given: "Text"
    when: "NER"
    then: "Extract entities"
    pas_pattern: MLS
    complexity: O(n)
    test_cases:
      - name: test_ner
        input: '{"text": "John lives in New York"}'
        expected: '{"entities": [...]}'

  - name: answer_question
    given: "Question and context"
    when: "QA"
    then: "Answer question"
    pas_pattern: MLS
    complexity: O(n * m)
    test_cases:
      - name: test_qa
        input: '{"question": "...", "context": "..."}'
        expected: '{"answer": "..."}'

  - name: analyze_sentiment
    given: "Text"
    when: "Sentiment"
    then: "Analyze sentiment"
    pas_pattern: MLS
    complexity: O(n)
    test_cases:
      - name: test_sentiment
        input: '{"text": "I love this!"}'
        expected: '{"sentiment": "positive"}'

  - name: check_entailment
    given: "Premise and hypothesis"
    when: "Entailment"
    then: "Check entailment"
    pas_pattern: MLS
    complexity: O(n + m)
    test_cases:
      - name: test_entail
        input: '{"premise": "...", "hypothesis": "..."}'
        expected: '{"label": "entailment"}'

  - name: summarize
    given: "Text"
    when: "Summarization"
    then: "Generate summary"
    pas_pattern: D&C
    complexity: O(n)
    test_cases:
      - name: test_summarize
        input: '{"text": "..."}'
        expected: '{"summary": "..."}'

# ═══════════════════════════════════════════════════════════════════════════════
# φ² + 1/φ² = 3 | PHOENIX = 999
# ═══════════════════════════════════════════════════════════════════════════════
