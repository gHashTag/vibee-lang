# FFI Clojure v56520 - Clojure JNI/JNA
# VIBEE → Clojure Native Bindings
# φ² + 1/φ² = 3 | PHOENIX = 999

name: ffi_clojure_v56520
version: "56.5.20"
language: zig
module: ffi_clojure

creation_pattern:
  source: VibeeSpec
  transformer: ClojureBindingsGenerator
  result: ClojureProject

types:
  ClojureType:
    fields:
      name: String
      clojure_type: String
      java_type: String

  JNAFunction:
    fields:
      name: String
      library: String
      return_type: String
      arg_types: List<String>

  JNAStructure:
    fields:
      name: String
      fields: List<String>
      by_reference: Bool

  ClojureNamespace:
    fields:
      name: String
      requires: List<String>
      imports: List<String>
      functions: List<String>

  ClojureProject:
    fields:
      name: String
      namespaces: List<ClojureNamespace>
      project_clj: String
      deps_edn: String

  JNACallback:
    fields:
      name: String
      interface_name: String
      method_sig: String

  JNAPointer:
    fields:
      type_name: String
      is_typed: Bool

  LeiningenConfig:
    fields:
      name: String
      version: String
      dependencies: List<String>
      java_source_paths: List<String>

behaviors:
  - name: generate_clojure_ns
    given: VibeeSpec
    when: Clojure namespace needed
    then: Clojure source files

  - name: generate_jna_function
    given: C function
    when: JNA function needed
    then: JNAFunction

  - name: map_vibee_to_clojure_type
    given: Vibee type
    when: Type mapping needed
    then: Clojure type

  - name: generate_jna_structure
    given: C struct
    when: JNA Structure needed
    then: JNAStructure

  - name: generate_project_clj
    given: Project config
    when: project.clj needed
    then: LeiningenConfig

  - name: generate_deps_edn
    given: Project config
    when: deps.edn needed
    then: EDN config

  - name: handle_callback
    given: C callback
    when: JNA Callback needed
    then: JNACallback

  - name: handle_pointer
    given: C pointer
    when: JNA Pointer needed
    then: JNAPointer
