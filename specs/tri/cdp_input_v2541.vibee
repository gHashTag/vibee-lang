# cdp_input_v2541.vibee - CDP Input Domain
# Клавиатура и мышь
# YOLO MODE + AMPLIFICATION + MATRYOSHKA
# φ² + 1/φ² = 3 | PHOENIX = 999

name: cdp_input_v2541
version: "2541.0.0"
language: zig
module: cdp_input_v2541

types:
  MouseEvent:
    fields:
      type: String
      x: Float
      y: Float
      button: String
      buttons: Int
      modifiers: Int
      click_count: Int
      delta_x: Float
      delta_y: Float

  KeyEvent:
    fields:
      type: String
      modifiers: Int
      key: String
      code: String
      text: String
      unmodified_text: String
      windows_virtual_key_code: Int
      native_virtual_key_code: Int
      auto_repeat: Bool
      is_keypad: Bool
      is_system_key: Bool

  TouchPoint:
    fields:
      x: Float
      y: Float
      radius_x: Float
      radius_y: Float
      rotation_angle: Float
      force: Float
      id: Int

  DragData:
    fields:
      items: Object
      drag_operations_mask: Int

behaviors:
  - name: input_dispatch_mouse_event
    given: CDPConnection and MouseEvent
    when: Mouse event dispatched
    then: Simulate mouse action

  - name: input_dispatch_key_event
    given: CDPConnection and KeyEvent
    when: Key event dispatched
    then: Simulate keyboard action

  - name: input_insert_text
    given: CDPConnection and text
    when: Text insertion requested
    then: Type text into focused element

  - name: input_dispatch_touch_event
    given: CDPConnection and TouchPoints
    when: Touch event dispatched
    then: Simulate touch action

  - name: mouse_click
    given: CDPConnection, x, y, button
    when: Click requested
    then: Dispatch mousedown + mouseup

  - name: mouse_double_click
    given: CDPConnection, x, y
    when: Double click requested
    then: Dispatch two clicks with click_count=2

  - name: mouse_move
    given: CDPConnection, x, y
    when: Move requested
    then: Dispatch mousemove event

  - name: mouse_wheel
    given: CDPConnection, x, y, delta_x, delta_y
    when: Scroll requested
    then: Dispatch wheel event

  - name: key_press
    given: CDPConnection and key
    when: Key press requested
    then: Dispatch keydown + keyup

  - name: type_text
    given: CDPConnection and text
    when: Typing requested
    then: Type each character with delays

sacred_constants:
  phi: 1.618033988749895
  phi_squared_plus_inverse_squared: 3
  phoenix: 999
