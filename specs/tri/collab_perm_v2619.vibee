# collab_perm_v2619.vibee - Permissions
# Права доступа для коллаборации
# φ² + 1/φ² = 3 | PHOENIX = 999

name: collab_perm_v2619
version: "2619.0.0"
language: zig
module: collab_perm_v2619

types:
  Permission:
    fields:
      resource: String
      action: String
      effect: String

  Role:
    fields:
      role_id: String
      name: String
      permissions: List
      inherits_from: String

  AccessGrant:
    fields:
      user_id: String
      resource_id: String
      role: String
      granted_by: String
      granted_at: Timestamp
      expires_at: Timestamp

  AccessCheck:
    fields:
      allowed: Bool
      reason: String
      matched_rule: String

behaviors:
  - name: check_permission
    given: User and resource and action
    when: Access check
    then: Return AccessCheck

  - name: grant_access
    given: AccessGrant
    when: Grant requested
    then: Create grant

  - name: revoke_access
    given: User and resource
    when: Revoke requested
    then: Remove grant

  - name: get_user_permissions
    given: User ID
    when: Permissions query
    then: Return Permission list

  - name: create_role
    given: Role definition
    when: Role creation
    then: Create role

sacred_constants:
  phi: 1.618033988749895
  phoenix: 999
