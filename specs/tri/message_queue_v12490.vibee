# VIBEE Specification v12490
# Message Queue - Distributed message queuing
name: message_queue_v12490
version: "1.0.0"
language: zig
module: message_queue

types:
  DeliveryMode:
    fields:
      at_most_once: String
      at_least_once: String
      exactly_once: String

  QueueMessage:
    fields:
      id: String
      topic: String
      payload: String
      priority: Int
      timestamp: Timestamp

  Queue:
    fields:
      id: String
      name: String
      delivery_mode: String
      max_size: Int
      retention_ms: Int

  Consumer:
    fields:
      id: String
      queue_id: String
      group: String
      offset: Int

  MessageAck:
    fields:
      message_id: String
      consumer_id: String
      acked: Bool
      acked_at: Timestamp

behaviors:
  - name: create_queue
    given: Queue configuration
    When: Queue created
    then: Returns new queue

  - name: publish_message
    given: Topic and payload
    When: Message published
    then: Returns message ID

  - name: consume_message
    given: Consumer
    When: Consumption requested
    then: Returns next message

  - name: acknowledge
    given: Message and consumer
    When: Ack sent
    then: Returns ack status
