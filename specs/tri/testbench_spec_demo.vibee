name: testbench_spec_demo
version: "1.0.0"
language: varlog
module: testbench_spec_demo

# Testbench Specification Demo
# Behaviors describe test scenarios for each FSM transition

fsm:
  - name: processor
    initial: IDLE
    states:
      - IDLE
      - LOAD
      - EXEC
      - DONE
    transitions:
      - from: IDLE
        to: LOAD
        condition: "start"
      - from: LOAD
        to: EXEC
        condition: "data_ready"
      - from: EXEC
        to: DONE
        condition: "exec_done"
      - from: DONE
        to: IDLE
        condition: "ack"
    outputs:
      - state: IDLE
        busy: "1'b0"
        valid: "1'b0"
        result: "8'd0"
      - state: LOAD
        busy: "1'b1"
        valid: "1'b0"
        result: "8'd0"
      - state: EXEC
        busy: "1'b1"
        valid: "1'b0"
        result: "8'hAA"
      - state: DONE
        busy: "1'b0"
        valid: "1'b1"
        result: "8'hFF"

# Behaviors define test scenarios
behaviors:
  - name: test_idle_to_load
    given: FSM in IDLE state
    when: start signal asserted
    then: FSM transitions to LOAD, busy becomes 1

  - name: test_load_to_exec
    given: FSM in LOAD state
    when: data_ready signal asserted
    then: FSM transitions to EXEC, result becomes 0xAA

  - name: test_exec_to_done
    given: FSM in EXEC state
    when: exec_done signal asserted
    then: FSM transitions to DONE, valid becomes 1, result becomes 0xFF

  - name: test_done_to_idle
    given: FSM in DONE state
    when: ack signal asserted
    then: FSM transitions to IDLE, busy and valid become 0

  - name: test_full_cycle
    given: FSM starts in IDLE
    when: Complete processing cycle executed
    then: FSM returns to IDLE with correct outputs at each state
