# IGLA Query Expander
# Expands search queries with synonyms and related terms
# φ² + 1/φ² = 3 | PHOENIX = 999

name: igla_query_expander
version: "1.0.0"
language: zig
module: igla_query_expander

sacred_constants:
  phi: 1.618033988749895
  phoenix: 999
  trinity: 3

types:
  ExpansionType:
    enum: [Synonym, CodePattern, Abbreviation, CamelCase, SnakeCase]

  ExpandedQuery:
    fields:
      original: String
      expanded_terms: List<String>
      expansion_types: List<String>

  ExpansionConfig:
    fields:
      max_expansions: Int
      include_code_patterns: Bool
      case_variations: Bool

behaviors:
  - name: expand_query
    given: Query and config
    when: Expansion requested
    then: Returns ExpandedQuery

  - name: add_synonyms
    given: Term
    when: Synonym expansion requested
    then: Returns synonyms list

  - name: add_code_patterns
    given: Term
    when: Code pattern expansion requested
    then: Returns code patterns

  - name: expand_camel_case
    given: Term
    when: CamelCase expansion requested
    then: Returns split terms

  - name: expand_snake_case
    given: Term
    when: SnakeCase expansion requested
    then: Returns split terms

  - name: combine_expansions
    given: List of expansions
    when: Combination requested
    then: Returns deduplicated list

test_cases:
  - name: test_synonym_expansion
    expected: synonyms_added
  - name: test_camel_case
    expected: camel_split
  - name: test_snake_case
    expected: snake_split
  - name: test_code_patterns
    expected: patterns_added
  - name: test_deduplication
    expected: duplicates_removed
