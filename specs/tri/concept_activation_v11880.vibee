name: concept_activation_v11880
version: "11880"
language: zig
module: concept_activation

description: |
  TIER 272: Concept Activation Vectors
  Explains models using human concepts
  Based on: TCAV, concept bottleneck models

types:
  ConceptConfig:
    fields:
      layer_name: String
      num_random_concepts: Int
      statistical_test: String

  Concept:
    fields:
      concept_name: String
      positive_examples: List<String>
      negative_examples: List<String>
      cav_vector: List<Float>

  TCAVScore:
    fields:
      concept: String
      target_class: Int
      score: Float
      p_value: Float
      significant: Bool

  ConceptExplanation:
    fields:
      concepts: List<String>
      scores: List<Float>
      layer: String
      class_name: String

behaviors:
  - name: train_cav
    given: Concept examples
    when: Training CAV
    then: Returns concept vector

  - name: compute_tcav_score
    given: CAV and inputs
    when: Computing TCAV
    then: Returns TCAV score

  - name: test_significance
    given: TCAV scores
    when: Statistical testing
    then: Returns significance

  - name: find_relevant_concepts
    given: Model and layer
    when: Discovering concepts
    then: Returns relevant concepts

  - name: visualize_concept
    given: Concept and examples
    when: Visualizing
    then: Returns visualization

  - name: compare_concepts
    given: Multiple concepts
    when: Comparing importance
    then: Returns comparison

  - name: concept_sensitivity
    given: Input and concept
    when: Computing sensitivity
    then: Returns sensitivity score

  - name: generate_concept_examples
    given: Concept description
    when: Generating examples
    then: Returns examples

creation_pattern:
  source: ConceptDefinition
  transformer: TCAVEngine
  result: ConceptExplanation
