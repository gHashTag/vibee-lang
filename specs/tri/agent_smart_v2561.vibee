# agent_smart_v2561.vibee - Smart Element Finder
# Умный поиск элементов с fallback стратегиями
# YOLO MODE + AMPLIFICATION + MATRYOSHKA
# φ² + 1/φ² = 3 | PHOENIX = 999

name: agent_smart_v2561
version: "2561.0.0"
language: zig
module: agent_smart_v2561

types:
  SmartSelector:
    fields:
      primary: String
      fallbacks: Object
      text_hint: String
      role: String
      near_text: String

  ElementMatch:
    fields:
      element: Object
      confidence: Float
      strategy_used: String
      selector_found: String

  FindStrategy:
    fields:
      by_id: Bool
      by_name: Bool
      by_class: Bool
      by_text: Bool
      by_placeholder: Bool
      by_label: Bool
      by_role: Bool
      by_test_id: Bool

  SmartClickOptions:
    fields:
      strategies: Object
      timeout_ms: Int
      retry_count: Int
      screenshot_on_fail: Bool

behaviors:
  - name: smart_find
    given: CDPClient and SmartSelector
    when: Smart search requested
    then: Try strategies until element found

  - name: smart_click
    given: CDPClient and SmartSelector
    when: Smart click requested
    then: Find and click with fallbacks

  - name: smart_type
    given: CDPClient, SmartSelector, text
    when: Smart type requested
    then: Find input and type with fallbacks

  - name: find_button_by_text
    given: CDPClient and button text
    when: Button search requested
    then: Find button/input[submit] by text

  - name: find_link_by_text
    given: CDPClient and link text
    when: Link search requested
    then: Find anchor by text content

  - name: find_input_by_label
    given: CDPClient and label text
    when: Labeled input search requested
    then: Find input associated with label

  - name: find_by_test_id
    given: CDPClient and test_id
    when: Test ID search requested
    then: Find by data-testid attribute

  - name: find_near_text
    given: CDPClient, element_type, near_text
    when: Proximity search requested
    then: Find element near specified text

  - name: auto_detect_form_fields
    given: CDPClient
    when: Form detection requested
    then: Return all fillable fields with labels

  - name: suggest_selectors
    given: CDPClient and element description
    when: Selector suggestion requested
    then: Return ranked selector options

sacred_constants:
  phi: 1.618033988749895
  phi_squared_plus_inverse_squared: 3
  phoenix: 999
