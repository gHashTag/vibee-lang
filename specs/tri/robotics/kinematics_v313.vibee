# ═══════════════════════════════════════════════════════════════════════════════
# KINEMATICS v313 - Robot Kinematics
# ═══════════════════════════════════════════════════════════════════════════════
# Based on: ROS, MoveIt, Drake
# Scientific: IJRR 2024, IEEE T-RO 2024
# PAS Pattern: ALG + TEN
# φ² + 1/φ² = 3 | PHOENIX = 999
# ═══════════════════════════════════════════════════════════════════════════════

name: kinematics
version: "3.1.3"
language: zig
module: kinematics

sacred_constants:
  phi: 1.618033988749895
  trinity: 3.0
  phoenix: 999

creation_pattern:
  source: JointConfig
  transformer: KinematicsSolver
  result: EndEffectorPose

types:
  JointType:
    enum:
      - revolute
      - prismatic
      - fixed
      - continuous

  DHParams:
    fields:
      a: Float
      alpha: Float
      d: Float
      theta: Float

  Joint:
    fields:
      joint_type: JointType
      dh: DHParams
      limits: List<Float>

  Pose:
    fields:
      position: List<Float>
      orientation: List<Float>

  Jacobian:
    fields:
      matrix: List<Float>
      rows: Int
      cols: Int

  RobotChain:
    fields:
      joints: List<Joint>
      base_frame: Pose
      tool_frame: Pose

behaviors:
  - name: forward_kinematics
    given: "Joint angles"
    when: "FK computation"
    then: "Compute end effector pose"
    pas_pattern: TEN
    complexity: O(n)
    test_cases:
      - name: test_fk
        input: '{"angles": [0, 0, 0, 0, 0, 0]}'
        expected: '{"pose": {...}}'

  - name: inverse_kinematics
    given: "Target pose"
    when: "IK computation"
    then: "Compute joint angles"
    pas_pattern: ALG
    complexity: O(n^3)
    test_cases:
      - name: test_ik
        input: '{"pose": {...}}'
        expected: '{"angles": [...]}'

  - name: compute_jacobian
    given: "Joint angles"
    when: "Jacobian computation"
    then: "Compute Jacobian"
    pas_pattern: TEN
    complexity: O(n^2)
    test_cases:
      - name: test_jacobian
        input: '{"angles": [...]}'
        expected: '{"jacobian": {...}}'

  - name: velocity_kinematics
    given: "Joint velocities"
    when: "Velocity computation"
    then: "Compute end effector velocity"
    pas_pattern: TEN
    complexity: O(n)
    test_cases:
      - name: test_vel
        input: '{"velocities": [...]}'
        expected: '{"ee_velocity": [...]}'

  - name: check_singularity
    given: "Jacobian"
    when: "Singularity check"
    then: "Check for singularity"
    pas_pattern: ALG
    complexity: O(n^3)
    test_cases:
      - name: test_sing
        input: '{"jacobian": {...}}'
        expected: '{"singular": false}'

  - name: workspace_analysis
    given: "Robot chain"
    when: "Workspace analysis"
    then: "Compute workspace"
    pas_pattern: D&C
    complexity: O(n^d)
    test_cases:
      - name: test_workspace
        input: '{"chain": {...}}'
        expected: '{"volume": 1.5}'

# ═══════════════════════════════════════════════════════════════════════════════
# φ² + 1/φ² = 3 | PHOENIX = 999
# ═══════════════════════════════════════════════════════════════════════════════
