# VIBEE YOLO MODE XII - browser_agent_planning v1163
# Task Planning - Hierarchical Task Network
# Reference: Liu et al. (2023) - LLM+P
name: browser_agent_planning_v1163
version: "12.0.0"
language: zig
module: browser_agent_planning

sacred_constants:
  phi: 1.618033988749895
  phi_identity: 3
  phoenix: 999
  yolo_mode: 12

types:
  TaskNode:
    fields:
      id: String
      name: String
      description: String
      subtasks: List<String>
      dependencies: List<String>
      status: String

  Plan:
    fields:
      goal: String
      steps: List<String>
      current_step: Int
      success_criteria: String

  HTNMethod:
    fields:
      name: String
      task: String
      preconditions: List<String>
      subtasks: List<String>

  PlanRepair:
    fields:
      failed_step: Int
      error: String
      alternative_plans: List<String>

behaviors:
  - name: decompose_task
    given: High-level task
    when: Decompose
    then: Task decomposed into subtasks
  - name: create_plan
    given: Goal
    when: Plan
    then: Plan created with steps
  - name: execute_step
    given: Plan step
    when: Execute
    then: Step executed
  - name: repair_plan
    given: PlanRepair
    when: Repair
    then: Plan repaired with alternative
  - name: verify_goal
    given: Plan and state
    when: Verify
    then: Goal achievement verified

test_cases:
  - name: test_planning_decompose
    input: {task: "build app"}
    expected: {decomposed: true}
  - name: test_planning_create
    input: {goal: "deploy"}
    expected: {created: true}
  - name: test_planning_execute
    input: {step: 1}
    expected: {executed: true}
  - name: test_planning_repair
    input: {failed: 2}
    expected: {repaired: true}
  - name: test_planning_verify
    input: {goal: "deploy"}
    expected: {verified: true}
  - name: test_phi_planning
    input: {phi: 1.618033988749895}
    expected: {identity: 3}
