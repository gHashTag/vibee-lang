# VIBEE YOLO MODE XII - browser_agent_reflection v1167
# Self-Reflection - Metacognition
# Reference: Shinn et al. (2023) - Reflexion
name: browser_agent_reflection_v1167
version: "12.0.0"
language: zig
module: browser_agent_reflection

sacred_constants:
  phi: 1.618033988749895
  phi_identity: 3
  phoenix: 999
  yolo_mode: 12

types:
  ReflectionEntry:
    fields:
      action: String
      outcome: String
      success: Bool
      lesson: String
      timestamp: Timestamp

  ConfidenceScore:
    fields:
      value: Float
      calibrated: Bool
      history: List<Float>

  StrategySwitch:
    fields:
      current_strategy: String
      new_strategy: String
      trigger: String
      performance_delta: Float

  ErrorAnalysis:
    fields:
      error_type: String
      root_cause: String
      correction: String
      prevention: String

behaviors:
  - name: reflect_on_action
    given: Action and outcome
    when: Reflect
    then: Reflection generated and stored
  - name: calibrate_confidence
    given: Predictions and outcomes
    when: Calibrate
    then: Confidence calibrated
  - name: switch_strategy
    given: Performance metrics
    when: Switch
    then: Strategy switched based on performance
  - name: analyze_error
    given: Error
    when: Analyze
    then: Error analyzed and correction proposed
  - name: learn_from_failure
    given: Failed action
    when: Learn
    then: Lesson learned and stored

test_cases:
  - name: test_reflection_reflect
    input: {action: "search", outcome: "found"}
    expected: {reflected: true}
  - name: test_reflection_calibrate
    input: {predictions: [0.8, 0.9]}
    expected: {calibrated: true}
  - name: test_reflection_switch
    input: {performance: 0.3}
    expected: {switched: true}
  - name: test_reflection_error
    input: {error: "timeout"}
    expected: {analyzed: true}
  - name: test_reflection_learn
    input: {failure: "api_error"}
    expected: {learned: true}
  - name: test_phi_reflection
    input: {phi: 1.618033988749895}
    expected: {identity: 3}
