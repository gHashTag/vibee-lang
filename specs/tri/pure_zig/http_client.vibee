name: http_client
version: "11.0.0"
language: zig
module: http_client

# INFRA: HTTP Client
# Pure Zig HTTP implementation

types:
  HttpRequest:
    fields:
      method: String
      url: String
      headers: Map<String,String>
      body: Option<String>
      timeout_ms: Int

  HttpResponse:
    fields:
      status: Int
      headers: Map<String,String>
      body: String
      latency_ms: Int

  ConnectionPool:
    fields:
      host: String
      port: Int
      max_connections: Int
      active: Int

  TLSConfig:
    fields:
      verify_cert: Bool
      ca_path: Option<String>
      client_cert: Option<String>

behaviors:
  - name: request
    given: HttpRequest
    when: Making HTTP request
    then: Return HttpResponse

  - name: get
    given: URL
    when: GET request
    then: Return HttpResponse

  - name: post
    given: URL and body
    when: POST request
    then: Return HttpResponse

  - name: create_pool
    given: Host and max_connections
    when: Creating connection pool
    then: Return ConnectionPool

  - name: close_pool
    given: ConnectionPool
    when: Closing pool
    then: Return close status

  - name: set_tls
    given: TLSConfig
    when: Configuring TLS
    then: Return config status
