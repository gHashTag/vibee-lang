name: zig_webarena_task
version: "1.0.0"
language: zig
module: webarena_task

description: |
  WebArena task format parser.
  Parses JSON task configs from WebArena benchmark.
  φ² + 1/φ² = 3

types:
  EvalType:
    enum:
      - string_match
      - url_match
      - program_html

  TaskEval:
    fields:
      eval_types: List<EvalType>
      reference_answers: Option<List<String>>
      reference_url: String
  
  ActionSequence:
    fields:
      action_set_tag: String
      actions: List<String>

  WebArenaTask:
    fields:
      task_id: Int
      sites: List<String>
      require_login: Bool
      storage_state: Option<String>
      start_url: String
      intent_template: String
      intent: String
      require_reset: Bool
      eval: TaskEval
      reference_action_sequence: Option<ActionSequence>

behaviors:
  - name: parse_task
    given: JSON string containing WebArena task config
    when: Parsing the JSON
    then: Returns WebArenaTask struct or error

  - name: get_start_url
    given: WebArenaTask
    when: Extracting start URL
    then: Returns the URL to navigate to

  - name: get_intent
    given: WebArenaTask
    when: Getting task intent
    then: Returns human-readable task description

  - name: evaluate_string_match
    given: WebArenaTask and agent response
    when: Checking string match evaluation
    then: Returns true if response matches reference

  - name: evaluate_url_match
    given: WebArenaTask and current URL
    when: Checking URL match evaluation
    then: Returns true if URL matches reference
