name: zig_webarena_executor
version: "1.0.0"
language: zig
module: webarena_executor

description: |
  WebArena task executor.
  Connects Browser API to WebArena tasks.
  Uses ReAct pattern for task execution.
  φ² + 1/φ² = 3

types:
  ExecutionStatus:
    enum:
      - pending
      - running
      - success
      - failure
      - timeout

  ActionType:
    enum:
      - click
      - type_text
      - navigate
      - scroll
      - wait
      - screenshot
      - stop

  Action:
    fields:
      action_type: ActionType
      selector: Option<String>
      value: Option<String>
      x: Option<Float>
      y: Option<Float>

  ExecutionResult:
    fields:
      task_id: Int
      status: ExecutionStatus
      steps_taken: Int
      final_answer: Option<String>
      screenshot: Option<String>
      error_message: Option<String>
      elapsed_ms: Int

  ExecutorConfig:
    fields:
      max_steps: Int
      timeout_ms: Int
      screenshot_on_error: Bool
      verbose: Bool

behaviors:
  - name: execute_task
    given: WebArenaTask and Browser instance
    when: Running the task
    then: Returns ExecutionResult with success/failure

  - name: parse_action
    given: Action string from LLM
    when: Parsing action command
    then: Returns Action struct

  - name: perform_action
    given: Action and Browser
    when: Executing single action
    then: Browser state changes, returns success/error

  - name: evaluate_task
    given: WebArenaTask and current state
    when: Checking if task is complete
    then: Returns true if evaluation passes

  - name: get_observation
    given: Browser state
    when: Extracting current page state
    then: Returns text observation for LLM
