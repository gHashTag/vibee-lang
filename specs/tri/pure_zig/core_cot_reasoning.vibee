name: core_cot_reasoning
version: "11.0.0"
language: zig
module: core_cot_reasoning

# CORE: Chain of Thought Reasoning
# Step-by-step reasoning for complex problems
# V = n × 3^k × π^m × φ^p

types:
  ReasoningStep:
    fields:
      step_number: Int
      premise: String
      inference: String
      conclusion: String
      confidence: Float

  ChainOfThought:
    fields:
      question: String
      steps: List<String>
      final_answer: String
      total_confidence: Float

  CoTConfig:
    fields:
      max_steps: Int
      min_confidence: Float
      enable_self_consistency: Bool
      num_samples: Int

  SelfConsistencyResult:
    fields:
      answers: List<String>
      counts: Map<String,Int>
      majority_answer: String
      agreement_ratio: Float

  ReasoningTrace:
    fields:
      trace_id: String
      steps: List<String>
      metadata: Map<String,String>

behaviors:
  - name: generate_cot
    given: Question and context
    when: Need step-by-step reasoning
    then: Return ChainOfThought with steps

  - name: add_step
    given: Current chain and new inference
    when: Extending reasoning chain
    then: Return updated ChainOfThought

  - name: validate_step
    given: ReasoningStep
    when: Checking logical validity
    then: Return validation result

  - name: self_consistency
    given: Question and num_samples
    when: Using self-consistency decoding
    then: Return SelfConsistencyResult

  - name: extract_answer
    given: ChainOfThought
    when: Getting final answer from chain
    then: Return extracted answer string

  - name: score_reasoning
    given: ChainOfThought
    when: Evaluating reasoning quality
    then: Return quality score 0-1
