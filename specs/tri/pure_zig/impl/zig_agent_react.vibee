name: zig_agent_react
version: "13.0.0"
language: zig
module: zig_agent_react

# IMPLEMENTATION: ReAct Loop
# Reasoning and Acting interleaved
# Based on arXiv:2210.03629
# φ² + 1/φ² = 3

types:
  ReActPrompt:
    fields:
      task: String
      tools: List<String>
      examples: List<String>
      history: List<String>

  ReActOutput:
    fields:
      thought: String
      action: String
      action_input: String

  ReActConfig:
    fields:
      max_steps: Int
      thought_prefix: String
      action_prefix: String
      observation_prefix: String
      final_answer_prefix: String

  ParsedAction:
    fields:
      action_type: String
      action_name: String
      action_input: String
      is_final: Bool

behaviors:
  - name: build_prompt
    given: ReActPrompt
    when: Building LLM prompt
    then: Return formatted prompt string

  - name: parse_output
    given: LLM output string
    when: Parsing thought/action
    then: Return ReActOutput

  - name: format_observation
    given: Observation string
    when: Formatting for history
    then: Return formatted observation

  - name: is_final_answer
    given: ReActOutput
    when: Checking if final answer
    then: Return bool and answer

  - name: add_to_history
    given: History and step
    when: Adding step to history
    then: Return updated history
