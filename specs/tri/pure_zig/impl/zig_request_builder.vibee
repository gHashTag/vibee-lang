name: zig_request_builder
version: "12.0.0"
language: zig
module: zig_request_builder

# IMPLEMENTATION: HTTP Request Builder
# Fluent API for building requests
# OpenAI/Anthropic compatible
# φ² + 1/φ² = 3

types:
  RequestBuilder:
    fields:
      method: String
      uri: String
      headers: Map<String,String>
      body: Option<String>
      timeout_ms: Int

  AuthType:
    fields:
      auth_type: String
      token: Option<String>

  ContentType:
    fields:
      mime_type: String
      charset: Option<String>

  BuiltRequest:
    fields:
      method: String
      uri: String
      headers: List<String>
      body: Option<String>

behaviors:
  - name: new
    given: Method and URI
    when: Creating new request builder
    then: Return RequestBuilder

  - name: header
    given: RequestBuilder, name, value
    when: Adding header
    then: Return updated RequestBuilder

  - name: bearer_auth
    given: RequestBuilder and token
    when: Adding Bearer authentication
    then: Return RequestBuilder with Authorization header

  - name: json_body
    given: RequestBuilder and JSON string
    when: Setting JSON body
    then: Return RequestBuilder with Content-Type

  - name: timeout
    given: RequestBuilder and timeout_ms
    when: Setting request timeout
    then: Return updated RequestBuilder

  - name: build
    given: RequestBuilder
    when: Building final request
    then: Return BuiltRequest ready to send
