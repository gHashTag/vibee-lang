name: zig_tls_client
version: "12.0.0"
language: zig
module: zig_tls_client

# IMPLEMENTATION: TLS/SSL Client
# Uses std.crypto.tls for secure connections
# Required for HTTPS to OpenAI/Anthropic
# φ² + 1/φ² = 3

types:
  TlsConfig:
    fields:
      verify_cert: Bool
      ca_bundle_path: Option<String>
      min_version: String

  TlsConnection:
    fields:
      connected: Bool
      cipher_suite: String
      protocol_version: String

  Certificate:
    fields:
      subject: String
      issuer: String
      valid_from: Timestamp
      valid_to: Timestamp

  TlsError:
    fields:
      error_type: String
      message: String
      code: Int

behaviors:
  - name: create_tls_client
    given: TlsConfig
    when: Initializing TLS with std.crypto.tls
    then: Return TLS client handle

  - name: connect
    given: Host and port
    when: Establishing TLS connection
    then: Return TlsConnection

  - name: handshake
    given: TlsConnection
    when: Performing TLS handshake
    then: Return handshake result

  - name: send
    given: TlsConnection and data
    when: Sending encrypted data
    then: Return bytes sent

  - name: receive
    given: TlsConnection and buffer
    when: Receiving encrypted data
    then: Return bytes received

  - name: close
    given: TlsConnection
    when: Closing TLS connection
    then: Return close status
