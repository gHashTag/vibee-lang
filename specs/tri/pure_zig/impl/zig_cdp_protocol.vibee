name: zig_cdp_protocol
version: "14.0.0"
language: zig
module: zig_cdp_protocol

# IMPLEMENTATION: CDP Protocol Methods
# All major CDP domains
# φ² + 1/φ² = 3

types:
  PageNavigateParams:
    fields:
      url: String
      referrer: Option<String>
      transition_type: Option<String>

  PageNavigateResult:
    fields:
      frame_id: String
      loader_id: Option<String>
      error_text: Option<String>

  DOMNode:
    fields:
      node_id: Int
      node_type: Int
      node_name: String
      node_value: String
      children: Option<List<String>>

  RuntimeEvaluateParams:
    fields:
      expression: String
      return_by_value: Bool
      await_promise: Bool

  RuntimeEvaluateResult:
    fields:
      result_type: String
      value: Option<String>
      exception: Option<String>

behaviors:
  - name: page_enable
    given: Nothing
    when: Enabling Page domain
    then: Return enable status

  - name: page_navigate
    given: PageNavigateParams
    when: Navigating to URL
    then: Return PageNavigateResult

  - name: page_get_frame_tree
    given: Nothing
    when: Getting frame hierarchy
    then: Return frame tree

  - name: dom_enable
    given: Nothing
    when: Enabling DOM domain
    then: Return enable status

  - name: dom_get_document
    given: Nothing
    when: Getting document root
    then: Return DOMNode

  - name: dom_query_selector
    given: Node ID and selector
    when: Finding element
    then: Return node ID or null

  - name: runtime_enable
    given: Nothing
    when: Enabling Runtime domain
    then: Return enable status

  - name: runtime_evaluate
    given: RuntimeEvaluateParams
    when: Evaluating JavaScript
    then: Return RuntimeEvaluateResult
