name: simd_json
version: "11.0.0"
language: zig
module: simd_json

# INFRA: SIMD JSON
# SIMD-accelerated JSON parsing
# 10x faster than standard parsing

types:
  SimdParser:
    fields:
      buffer_size: Int
      simd_width: Int

  SimdParseResult:
    fields:
      success: Bool
      value: String
      parse_time_ns: Int
      throughput_gbps: Float

  SimdConfig:
    fields:
      use_avx2: Bool
      use_avx512: Bool
      use_neon: Bool

  ParseStats:
    fields:
      bytes_processed: Int
      time_ns: Int
      throughput_mbps: Float

behaviors:
  - name: create_parser
    given: SimdConfig
    when: Creating SIMD parser
    then: Return SimdParser

  - name: parse_simd
    given: JSON bytes
    when: SIMD parsing
    then: Return SimdParseResult

  - name: validate_simd
    given: JSON bytes
    when: SIMD validation
    then: Return validation result

  - name: find_key_simd
    given: JSON bytes and key
    when: Finding key with SIMD
    then: Return value position

  - name: benchmark_parse
    given: JSON bytes and iterations
    when: Benchmarking parser
    then: Return ParseStats

  - name: get_capabilities
    given: Nothing
    when: Checking SIMD support
    then: Return SimdConfig
