name: action_code_execute
version: "11.0.0"
language: zig
module: action_code_execute

# ACTION: Code Execution
# Running code in sandboxed environment

types:
  ExecuteRequest:
    fields:
      code: String
      language: String
      timeout_ms: Int
      stdin: Option<String>

  ExecuteResult:
    fields:
      success: Bool
      stdout: String
      stderr: String
      exit_code: Int
      duration_ms: Int

  SandboxConfig:
    fields:
      memory_limit_mb: Int
      cpu_limit_percent: Int
      network_enabled: Bool
      filesystem_access: List<String>

  ExecutionEnvironment:
    fields:
      language: String
      version: String
      packages: List<String>

behaviors:
  - name: execute
    given: ExecuteRequest
    when: Running code
    then: Return ExecuteResult

  - name: execute_python
    given: Code and timeout
    when: Running Python code
    then: Return ExecuteResult

  - name: execute_shell
    given: Command and timeout
    when: Running shell command
    then: Return ExecuteResult

  - name: create_sandbox
    given: SandboxConfig
    when: Creating execution sandbox
    then: Return sandbox handle

  - name: install_package
    given: Package name and language
    when: Installing dependency
    then: Return install status

  - name: get_environment
    given: Language
    when: Getting execution environment
    then: Return ExecutionEnvironment
