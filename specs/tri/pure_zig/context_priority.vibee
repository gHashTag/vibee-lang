name: context_priority
version: "11.0.0"
language: zig
module: context_priority

# CONTEXT: Priority Management
# Intelligent prioritization of context elements
# What to keep, what to drop

types:
  PriorityScore:
    fields:
      item_id: String
      recency_score: Float
      relevance_score: Float
      importance_score: Float
      final_score: Float

  PriorityConfig:
    fields:
      recency_weight: Float
      relevance_weight: Float
      importance_weight: Float
      decay_rate: Float

  PrioritizedItem:
    fields:
      item_id: String
      content: String
      priority: Float
      token_count: Int

  PriorityQueue:
    fields:
      items: List<String>
      total_tokens: Int
      max_tokens: Int

behaviors:
  - name: compute_priority
    given: Item and context
    when: Scoring item priority
    then: Return PriorityScore

  - name: rank_items
    given: List of items
    when: Ordering by priority
    then: Return sorted list

  - name: select_top_k
    given: Items and k
    when: Selecting highest priority
    then: Return top k items

  - name: select_by_budget
    given: Items and token_budget
    when: Fitting to token limit
    then: Return items within budget

  - name: update_priorities
    given: PriorityQueue and new_item
    when: Adding new item
    then: Return updated queue

  - name: evict_lowest
    given: PriorityQueue
    when: Queue full
    then: Return evicted item
