name: memory_episodic
version: "11.0.0"
language: zig
module: memory_episodic

# MEMORY: Episodic Memory
# Based on JARVIS-1 (arXiv:2311.05997)
# Stores task execution experiences for future retrieval
# φ² + 1/φ² = 3

types:
  Episode:
    fields:
      episode_id: String
      task: String
      start_time: Timestamp
      end_time: Timestamp
      success: Bool
      steps: List<String>
      outcome: String

  EpisodeStep:
    fields:
      step_id: Int
      action: String
      observation: String
      reward: Float
      timestamp: Timestamp

  EpisodicMemory:
    fields:
      episodes: List<String>
      max_episodes: Int
      index: Map<String,List<String>>

  RetrievalQuery:
    fields:
      task_description: String
      context: String
      k: Int

  RetrievalResult:
    fields:
      episodes: List<String>
      relevance_scores: List<Float>
      total_found: Int

behaviors:
  - name: store_episode
    given: Episode
    when: Task completed (success or failure)
    then: Add to episodic memory

  - name: retrieve_similar
    given: RetrievalQuery
    when: Need relevant past experiences
    then: Return RetrievalResult

  - name: get_successful_episodes
    given: Task type
    when: Need successful examples
    then: Return list of successful Episodes

  - name: get_failed_episodes
    given: Task type
    when: Learning from failures
    then: Return list of failed Episodes

  - name: compute_similarity
    given: Two Episodes
    when: Comparing experiences
    then: Return similarity score

  - name: prune_old
    given: EpisodicMemory and max_age
    when: Memory cleanup
    then: Return pruned EpisodicMemory
