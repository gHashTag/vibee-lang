name: memory_long_term
version: "11.0.0"
language: zig
module: memory_long_term

# MEMORY: Long-Term Memory
# Persistent storage across sessions
# Vector database integration

types:
  MemoryEntry:
    fields:
      entry_id: String
      content: String
      embedding: List<Float>
      metadata: Map<String,String>
      created_at: Timestamp
      last_accessed: Timestamp

  MemoryIndex:
    fields:
      index_type: String
      dimension: Int
      num_entries: Int
      index_path: String

  SearchResult:
    fields:
      entry_id: String
      content: String
      score: Float
      metadata: Map<String,String>

  LongTermMemory:
    fields:
      index: String
      storage_path: String
      total_entries: Int
      embedding_model: String

  PersistConfig:
    fields:
      storage_path: String
      auto_save: Bool
      save_interval_ms: Int
      compression: Bool

behaviors:
  - name: store
    given: Content and metadata
    when: Persisting to long-term memory
    then: Return entry_id

  - name: search
    given: Query embedding and k
    when: Searching long-term memory
    then: Return list of SearchResults

  - name: search_by_text
    given: Query text and k
    when: Text-based search
    then: Return list of SearchResults

  - name: delete
    given: Entry ID
    when: Removing from memory
    then: Return success status

  - name: save_to_disk
    given: LongTermMemory and path
    when: Persisting to disk
    then: Return save status

  - name: load_from_disk
    given: Path
    when: Loading from disk
    then: Return LongTermMemory

  - name: get_stats
    given: LongTermMemory
    when: Getting memory statistics
    then: Return stats map
