name: benchmark_runner
version: "11.0.0"
language: zig
module: benchmark_runner

# BENCHMARK: Runner
# Benchmark execution engine

types:
  BenchmarkSuite:
    fields:
      name: String
      benchmarks: List<String>
      config: String

  BenchmarkRun:
    fields:
      run_id: String
      suite: String
      start_time: Timestamp
      end_time: Option<Timestamp>
      status: String

  RunResult:
    fields:
      run_id: String
      success: Bool
      metrics: Map<String,Float>
      errors: List<String>

  RunnerConfig:
    fields:
      parallel: Bool
      max_workers: Int
      timeout_ms: Int
      retry_failed: Bool

behaviors:
  - name: create_suite
    given: Name and benchmarks
    when: Creating benchmark suite
    then: Return BenchmarkSuite

  - name: run_suite
    given: BenchmarkSuite and RunnerConfig
    when: Running benchmark suite
    then: Return RunResult

  - name: run_single
    given: Benchmark name
    when: Running single benchmark
    then: Return RunResult

  - name: get_status
    given: Run ID
    when: Checking run status
    then: Return BenchmarkRun

  - name: cancel_run
    given: Run ID
    when: Cancelling run
    then: Return cancel status

  - name: get_history
    given: Suite name
    when: Getting run history
    then: Return list of BenchmarkRuns
