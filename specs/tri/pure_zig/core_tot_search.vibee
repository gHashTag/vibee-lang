name: core_tot_search
version: "11.0.0"
language: zig
module: core_tot_search

# CORE: Tree of Thoughts Search
# Based on arXiv:2305.10601
# Deliberate problem solving with exploration
# Game of 24: 4% â†’ 74% success rate

types:
  ThoughtNode:
    fields:
      node_id: Int
      parent_id: Option<Int>
      thought: String
      value: Float
      depth: Int
      children: List<Int>

  ThoughtTree:
    fields:
      root_id: Int
      nodes: Map<Int,String>
      current_path: List<Int>
      best_path: List<Int>
      best_value: Float

  SearchStrategy:
    fields:
      strategy_type: String
      beam_width: Int
      max_depth: Int
      pruning_threshold: Float

  EvaluationResult:
    fields:
      node_id: Int
      value: Float
      is_terminal: Bool
      reasoning: String

  ToTConfig:
    fields:
      max_thoughts_per_step: Int
      max_depth: Int
      search_strategy: String
      value_threshold: Float
      enable_backtrack: Bool

behaviors:
  - name: generate_thoughts
    given: Current state and num_thoughts
    when: Expanding thought tree
    then: Return list of ThoughtNodes

  - name: evaluate_thought
    given: ThoughtNode and context
    when: Scoring thought quality
    then: Return EvaluationResult

  - name: select_best
    given: List of ThoughtNodes
    when: Choosing next thought to explore
    then: Return best ThoughtNode

  - name: bfs_search
    given: ThoughtTree and ToTConfig
    when: Using breadth-first search
    then: Return solution path

  - name: dfs_search
    given: ThoughtTree and ToTConfig
    when: Using depth-first search
    then: Return solution path

  - name: beam_search
    given: ThoughtTree and beam_width
    when: Using beam search
    then: Return top-k solution paths

  - name: backtrack
    given: ThoughtTree and failed_node
    when: Current path fails
    then: Return alternative path

  - name: solve
    given: Problem and ToTConfig
    when: Running full ToT search
    then: Return solution or failure
