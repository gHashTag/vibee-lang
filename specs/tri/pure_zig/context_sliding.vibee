name: context_sliding
version: "11.0.0"
language: zig
module: context_sliding

# CONTEXT: Sliding Window
# Efficient context management for long conversations
# Maintains coherence across window shifts

types:
  SlidingWindow:
    fields:
      buffer: List<String>
      window_size: Int
      overlap_size: Int
      current_position: Int

  WindowShift:
    fields:
      dropped_items: List<String>
      kept_items: List<String>
      new_items: List<String>
      summary_of_dropped: String

  SlidingConfig:
    fields:
      window_size: Int
      overlap_ratio: Float
      summarize_dropped: Bool
      preserve_system: Bool

  WindowState:
    fields:
      total_processed: Int
      current_window_start: Int
      current_window_end: Int
      summaries: List<String>

behaviors:
  - name: slide
    given: SlidingWindow and new_items
    when: Adding new content
    then: Return WindowShift

  - name: get_current_window
    given: SlidingWindow
    when: Getting active context
    then: Return current window content

  - name: summarize_dropped
    given: Dropped items
    when: Preserving dropped info
    then: Return summary string

  - name: restore_context
    given: WindowState and position
    when: Restoring previous context
    then: Return restored window

  - name: get_overlap
    given: SlidingWindow
    when: Getting overlap region
    then: Return overlap content

  - name: optimize_overlap
    given: SlidingWindow and task
    when: Adjusting overlap for task
    then: Return optimized overlap_size
