name: json_parser
version: "11.0.0"
language: zig
module: json_parser

# INFRA: JSON Parser
# High-performance JSON parsing

types:
  JsonValue:
    fields:
      value_type: String
      raw: String

  ParseResult:
    fields:
      success: Bool
      value: Option<String>
      error: Option<String>
      parse_time_ns: Int

  JsonPath:
    fields:
      path: String
      segments: List<String>

  JsonBuilder:
    fields:
      buffer: String
      depth: Int

behaviors:
  - name: parse
    given: JSON string
    when: Parsing JSON
    then: Return ParseResult

  - name: stringify
    given: JsonValue
    when: Converting to string
    then: Return JSON string

  - name: get_path
    given: JsonValue and JsonPath
    when: Extracting by path
    then: Return value at path

  - name: set_path
    given: JsonValue, path, value
    when: Setting value at path
    then: Return updated JsonValue

  - name: validate
    given: JSON string
    when: Validating JSON
    then: Return validation result

  - name: stream_parse
    given: JSON stream
    when: Parsing streaming JSON
    then: Yield parsed values
