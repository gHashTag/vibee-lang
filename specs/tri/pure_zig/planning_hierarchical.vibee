name: planning_hierarchical
version: "11.0.0"
language: zig
module: planning_hierarchical

# PLANNING: Hierarchical Task Planning
# Multi-level goal decomposition
# High-level strategy to low-level actions

types:
  Goal:
    fields:
      goal_id: String
      description: String
      level: Int
      parent_id: Option<String>
      children: List<String>
      status: String

  Plan:
    fields:
      plan_id: String
      root_goal: String
      goals: Map<String,String>
      current_goal: String
      completed_goals: List<String>

  PlanStep:
    fields:
      step_id: Int
      goal_id: String
      action: String
      preconditions: List<String>
      effects: List<String>

  PlanningConfig:
    fields:
      max_depth: Int
      max_subgoals: Int
      enable_replanning: Bool
      timeout_ms: Int

behaviors:
  - name: create_plan
    given: High-level goal
    when: Starting task planning
    then: Return Plan with goal hierarchy

  - name: decompose_goal
    given: Goal
    when: Breaking into subgoals
    then: Return list of subgoals

  - name: get_next_action
    given: Plan and current_state
    when: Deciding next action
    then: Return PlanStep

  - name: update_plan
    given: Plan and observation
    when: Adapting to new information
    then: Return updated Plan

  - name: replan
    given: Plan and failure_reason
    when: Current plan fails
    then: Return new Plan

  - name: is_goal_achieved
    given: Goal and current_state
    when: Checking goal completion
    then: Return bool
