name: action_api_call
version: "11.0.0"
language: zig
module: action_api_call

# ACTION: API Calls
# HTTP API requests

types:
  APIRequest:
    fields:
      method: String
      url: String
      headers: Map<String,String>
      body: Option<String>
      timeout_ms: Int

  APIResponse:
    fields:
      status_code: Int
      headers: Map<String,String>
      body: String
      latency_ms: Int

  AuthConfig:
    fields:
      auth_type: String
      token: Option<String>
      username: Option<String>
      password: Option<String>

  RateLimitInfo:
    fields:
      limit: Int
      remaining: Int
      reset_at: Timestamp

behaviors:
  - name: call
    given: APIRequest
    when: Making API call
    then: Return APIResponse

  - name: get
    given: URL and headers
    when: GET request
    then: Return APIResponse

  - name: post
    given: URL, body, headers
    when: POST request
    then: Return APIResponse

  - name: put
    given: URL, body, headers
    when: PUT request
    then: Return APIResponse

  - name: delete
    given: URL and headers
    when: DELETE request
    then: Return APIResponse

  - name: with_auth
    given: APIRequest and AuthConfig
    when: Adding authentication
    then: Return authenticated request
