name: memory_working
version: "11.0.0"
language: zig
module: memory_working

# MEMORY: Working Memory
# Short-term active memory for current task
# Limited capacity, high accessibility

types:
  WorkingMemorySlot:
    fields:
      slot_id: Int
      content: String
      content_type: String
      priority: Float
      last_access: Timestamp
      access_count: Int

  WorkingMemory:
    fields:
      slots: List<String>
      max_slots: Int
      current_focus: Option<Int>
      total_tokens: Int
      max_tokens: Int

  AttentionWeight:
    fields:
      slot_id: Int
      weight: Float
      decay_rate: Float

  WorkingMemoryConfig:
    fields:
      max_slots: Int
      max_tokens: Int
      decay_enabled: Bool
      priority_threshold: Float

behaviors:
  - name: add_item
    given: Content and priority
    when: Adding to working memory
    then: Return slot_id or eviction

  - name: get_item
    given: Slot ID
    when: Accessing memory item
    then: Return content and update access

  - name: update_focus
    given: Slot ID
    when: Shifting attention
    then: Update current_focus

  - name: evict_lowest
    given: WorkingMemory
    when: Memory full
    then: Remove lowest priority item

  - name: decay_priorities
    given: WorkingMemory and time_delta
    when: Time passes
    then: Apply priority decay

  - name: get_context
    given: WorkingMemory
    when: Building LLM context
    then: Return formatted context string

  - name: clear
    given: WorkingMemory
    when: Task complete
    then: Return empty WorkingMemory
