name: agent_state
version: "11.0.0"
language: zig
module: agent_state

# AGENT: State Management
# Agent state tracking

types:
  AgentState:
    fields:
      phase: String
      current_task: Option<String>
      step_count: Int
      start_time: Timestamp
      last_action: Option<String>

  TaskState:
    fields:
      task_id: String
      goal: String
      progress: Float
      steps_taken: Int
      observations: List<String>

  StateSnapshot:
    fields:
      snapshot_id: String
      state: String
      timestamp: Timestamp

  StateTransition:
    fields:
      from_state: String
      to_state: String
      trigger: String
      timestamp: Timestamp

behaviors:
  - name: get_state
    given: Agent
    when: Getting current state
    then: Return AgentState

  - name: update_state
    given: AgentState and updates
    when: Updating state
    then: Return updated AgentState

  - name: create_snapshot
    given: AgentState
    when: Creating state snapshot
    then: Return StateSnapshot

  - name: restore_snapshot
    given: StateSnapshot
    when: Restoring state
    then: Return restored AgentState

  - name: get_history
    given: Agent
    when: Getting state history
    then: Return list of StateTransitions

  - name: reset_state
    given: Agent
    when: Resetting to initial
    then: Return fresh AgentState
