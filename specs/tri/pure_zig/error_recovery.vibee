name: error_recovery
version: "11.0.0"
language: zig
module: error_recovery

# ERROR: Recovery Strategies
# Graceful error handling

types:
  ErrorInfo:
    fields:
      error_type: String
      message: String
      stack_trace: Option<String>
      context: Map<String,String>

  RecoveryStrategy:
    fields:
      strategy_type: String
      max_attempts: Int
      backoff_ms: Int

  RecoveryResult:
    fields:
      recovered: Bool
      attempts: Int
      final_error: Option<String>
      recovery_action: String

  ErrorHandler:
    fields:
      error_types: List<String>
      strategy: String
      fallback: Option<String>

behaviors:
  - name: handle_error
    given: ErrorInfo
    when: Error occurred
    then: Return RecoveryResult

  - name: classify_error
    given: ErrorInfo
    when: Determining error type
    then: Return error classification

  - name: get_strategy
    given: Error type
    when: Getting recovery strategy
    then: Return RecoveryStrategy

  - name: attempt_recovery
    given: ErrorInfo and RecoveryStrategy
    when: Trying to recover
    then: Return RecoveryResult

  - name: log_error
    given: ErrorInfo
    when: Logging error
    then: Return log status

  - name: notify_error
    given: ErrorInfo
    when: Notifying about error
    then: Return notification status
