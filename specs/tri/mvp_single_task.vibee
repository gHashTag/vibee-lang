name: mvp_single_task
version: "1.0.0"
language: zig
module: mvp_single_task

# MVP: Single Task Execution
# Execute exactly one WebArena-style task
# Validates end-to-end pipeline

types:
  SingleTaskConfig:
    fields:
      task_json: String
      llm_provider: String
      llm_api_key: String
      headless: Bool

  TaskDefinition:
    fields:
      task_id: String
      intent: String
      start_url: String
      expected_answer: Option<String>

  ExecutionTrace:
    fields:
      steps: List<String>
      actions: List<String>
      observations: List<String>
      timestamps: List<Int>

  SingleTaskResult:
    fields:
      task_id: String
      success: Bool
      answer: Option<String>
      trace: String
      duration_ms: Int
      step_count: Int

behaviors:
  - name: parse_task
    given: Task JSON string
    when: Loading task definition
    then: Return TaskDefinition

  - name: execute
    given: SingleTaskConfig
    when: Running single task
    then: Return SingleTaskResult

  - name: validate_answer
    given: SingleTaskResult and expected answer
    when: Checking task success
    then: Return validation result

  - name: save_trace
    given: ExecutionTrace and path
    when: Saving execution trace
    then: Return save status

  - name: report
    given: SingleTaskResult
    when: Generating task report
    then: Return formatted report string
