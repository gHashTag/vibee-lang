# VIBEE YOLO MODE VI - diffusion_forward v710
name: diffusion_forward_v710
version: "6.0.0"
language: zig
module: diffusion_forward

sacred_constants:
  phi: 1.618033988749895
  phi_squared_plus_inverse_squared: 3
  phoenix: 999

types:
  DiffusionConfig:
    fields:
      timesteps: Int
      beta_schedule: String
      noise_type: String

  DiffusionState:
    fields:
      x_t: String
      t: Int
      noise: String

behaviors:
  - name: add_noise
    given: Clean data
    when: Noise addition
    then: forward diffusion applied
  - name: predict_noise
    given: Noisy data
    when: Prediction
    then: Noise predicted
  - name: denoise_step
    given: Noisy data and prediction
    when: Denoising
    then: One step denoised
  - name: sample
    given: Random noise
    when: Sampling
    then: Sample generated

test_cases:
  - name: test_diffusion_forward_noise
    input: {data: valid}
    expected: {noised: true}
  - name: test_diffusion_forward_predict
    input: {noisy: valid}
    expected: {predicted: true}
  - name: test_diffusion_forward_denoise
    input: {step: 1}
    expected: {denoised: true}
  - name: test_diffusion_forward_sample
    input: {steps: 50}
    expected: {sampled: true}
  - name: test_phi_diffusion_forward
    input: {phi: 1.618033988749895}
    expected: {golden_steps: 1000}
