name: cdp_navigator_v22
version: "22.3.0"
language: zig
module: cdp_navigator_v22

types:
  NavigatorConfig:
    fields:
      timeout_ms: Int
      wait_for_load: Bool
      handle_redirects: Bool
      max_redirects: Int

  NavigationResult:
    fields:
      success: Bool
      final_url: String
      status_code: Int
      load_time_ms: Int
      redirects: List<String>

  PageInfo:
    fields:
      url: String
      title: String
      is_loaded: Bool
      has_errors: Bool

  HistoryEntry:
    fields:
      url: String
      title: String
      timestamp: Timestamp

  Navigator:
    fields:
      config: Object
      cdp_session: Object
      history: List<String>

behaviors:
  - name: create_navigator
    given: NavigatorConfig and CDP session
    when: Initialize navigator
    then: Navigator instance

  - name: goto
    given: Navigator and URL
    when: Navigate to URL
    then: NavigationResult

  - name: back
    given: Navigator
    when: Go back in history
    then: NavigationResult

  - name: forward
    given: Navigator
    when: Go forward in history
    then: NavigationResult

  - name: refresh
    given: Navigator
    when: Reload page
    then: NavigationResult

  - name: get_current_url
    given: Navigator
    when: Get current URL
    then: URL string

  - name: get_page_info
    given: Navigator
    when: Get page info
    then: PageInfo

  - name: wait_for_navigation
    given: Navigator and timeout
    when: Wait for nav complete
    then: Navigation status

  - name: get_history
    given: Navigator
    when: Get nav history
    then: History list

  - name: can_go_back
    given: Navigator
    when: Check back available
    then: Boolean

  - name: can_go_forward
    given: Navigator
    when: Check forward available
    then: Boolean
