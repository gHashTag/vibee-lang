name: demo_agent_v22
version: "22.4.0"
language: zig
module: demo_agent_v22

types:
  DemoConfig:
    fields:
      cdp_host: String
      cdp_port: Int
      ollama_endpoint: String
      ollama_model: String
      max_steps: Int
      verbose: Bool

  DemoTask:
    fields:
      name: String
      url: String
      goal: String
      expected_result: String

  DemoResult:
    fields:
      task_name: String
      success: Bool
      steps: Int
      final_state: String
      duration_ms: Int
      trajectory: List<String>

  DemoStep:
    fields:
      step_num: Int
      observation: String
      thought: String
      action: String
      result: String

  DemoAgent:
    fields:
      config: Object
      cdp_client: Object
      ollama_client: Object
      current_task: Object

behaviors:
  - name: create_agent
    given: DemoConfig
    when: Initialize demo agent
    then: DemoAgent instance

  - name: run_demo
    given: DemoAgent and DemoTask
    when: Run demo task
    then: DemoResult

  - name: run_step
    given: DemoAgent
    when: Execute one step
    then: DemoStep

  - name: observe
    given: DemoAgent
    when: Get page state
    then: Observation string

  - name: think
    given: DemoAgent and observation
    when: Query LLM
    then: Action decision

  - name: act
    given: DemoAgent and action
    when: Execute action
    then: Action result

  - name: check_goal
    given: DemoAgent
    when: Check if goal reached
    then: Goal status

  - name: get_trajectory
    given: DemoAgent
    when: Get action history
    then: Trajectory list

  - name: reset
    given: DemoAgent
    when: Reset for new task
    then: Reset agent

  - name: run_example_task
    given: DemoAgent
    when: Run built-in example
    then: DemoResult

  - name: print_result
    given: DemoResult
    when: Format output
    then: Formatted string
