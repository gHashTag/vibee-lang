name: browser_console_v334
version: "1.0.0"
language: zig
module: browser_console_v334

types:
  ConsoleMessage:
    fields:
      type: String
      text: String
      args: List<Object>
      url: Option<String>
      line: Option<Int>
      timestamp: Timestamp

  ConsoleError:
    fields:
      message: String
      stack: Option<String>
      url: String
      line: Int
      column: Int

  ConsoleFilter:
    fields:
      types: List<String>
      text_pattern: Option<String>
      url_pattern: Option<String>

  ConsoleCapture:
    fields:
      messages: List<ConsoleMessage>
      errors: List<ConsoleError>
      warnings: Int
      infos: Int

  ConsoleConfig:
    fields:
      capture_enabled: Bool
      max_messages: Int
      include_stack: Bool

behaviors:
  - name: capture_log
    given: console.log called
    when: Capture enabled
    then: Message captured

  - name: capture_error
    given: console.error called
    when: Capture enabled
    then: Error captured with stack

  - name: capture_warning
    given: console.warn called
    when: Capture enabled
    then: Warning captured

  - name: filter_messages
    given: Filter criteria
    When: Filter applied
    then: Matching messages returned

  - name: clear_console
    given: Console has messages
    When: Clear called
    then: Messages cleared

  - name: inject_console
    given: Custom handler
    When: Injection runs
    then: Console methods intercepted

  - name: export_logs
    given: Captured messages
    When: Export runs
    then: Logs exported to format

  - name: assert_no_errors
    given: Test running
    When: Assertion runs
    then: Fails if errors present
