# NETWORK INTERCEPTION V160 - Request/Response Interception
# φ² + 1/φ² = 3 | PHOENIX = 999
name: network_interception_v160
version: "160.0.0"
language: zig
module: network_interception

creation_pattern:
  source: NetworkTraffic
  transformer: Interceptor
  result: ModifiedTraffic

types:
  InterceptRule:
    fields:
      rule_id: String
      url_pattern: String
      resource_type: String
      action: String

  InterceptedRequest:
    fields:
      request_id: String
      url: String
      method: String
      headers: Map<String, String>
      body: Option<String>

  InterceptedResponse:
    fields:
      request_id: String
      status: Int
      headers: Map<String, String>
      body: String

  MockResponse:
    fields:
      status: Int
      headers: Map<String, String>
      body: String

behaviors:
  - name: enable_interception
    given: "Patterns"
    when: "Enable"
    then: "Interception active"
    test_cases:
      - name: enable
        input: "*.js"
        expected: "enabled"

  - name: add_rule
    given: "Rule"
    when: "Add"
    then: "Rule added"
    test_cases:
      - name: rule
        input: "rule"
        expected: "added"

  - name: intercept_request
    given: "Request"
    when: "Intercept"
    then: "Request paused"
    test_cases:
      - name: intercept
        input: "request"
        expected: "paused"

  - name: continue_request
    given: "Request ID"
    when: "Continue"
    then: "Request continued"
    test_cases:
      - name: continue
        input: "request_id"
        expected: "continued"

  - name: mock_response
    given: "Mock data"
    when: "Fulfill"
    then: "Response mocked"
    test_cases:
      - name: mock
        input: "mock"
        expected: "fulfilled"

  - name: block_request
    given: "Request ID"
    when: "Block"
    then: "Request blocked"
    test_cases:
      - name: block
        input: "request_id"
        expected: "blocked"

# φ² + 1/φ² = 3 | PHOENIX = 999
