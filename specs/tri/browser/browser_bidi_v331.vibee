name: browser_bidi_v331
version: "1.0.0"
language: zig
module: browser_bidi_v331

types:
  BiDiSession:
    fields:
      session_id: String
      capabilities: Object
      browser_name: String
      browser_version: String

  BiDiCommand:
    fields:
      id: Int
      method: String
      params: Object

  BiDiResult:
    fields:
      id: Int
      result: Object
      realm: Option<String>

  BiDiEvent:
    fields:
      method: String
      params: Object

  BrowsingContext:
    fields:
      context_id: String
      url: String
      parent: Option<String>
      children: List<String>

behaviors:
  - name: create_session
    given: Capabilities
    when: Session creation runs
    then: BiDi session established

  - name: navigate_context
    given: URL and context
    when: Navigation runs
    then: Page navigated via BiDi

  - name: execute_script
    given: Script and context
    when: Execution runs
    then: Script executed via BiDi

  - name: subscribe_events
    given: Event types
    when: Subscribe called
    then: Events received via BiDi

  - name: capture_screenshot
    given: Context ID
    when: Capture runs
    then: Screenshot via BiDi

  - name: handle_dialog
    given: Dialog appears
    when: Handler runs
    then: Dialog handled via BiDi

  - name: intercept_request
    given: Interception enabled
    when: Request made
    then: Request intercepted via BiDi

  - name: close_context
    given: Context ID
    when: Close called
    then: Context closed via BiDi
