name: browser_storage_v333
version: "1.0.0"
language: zig
module: browser_storage_v333

types:
  Cookie:
    fields:
      name: String
      value: String
      domain: String
      path: String
      expires: Option<Timestamp>
      secure: Bool
      http_only: Bool
      same_site: String

  LocalStorageItem:
    fields:
      key: String
      value: String
      origin: String

  SessionStorageItem:
    fields:
      key: String
      value: String
      origin: String

  IndexedDBDatabase:
    fields:
      name: String
      version: Int
      object_stores: List<String>

  StorageQuota:
    fields:
      usage_bytes: Int
      quota_bytes: Int
      percent_used: Float

behaviors:
  - name: get_cookies
    given: Domain filter
    when: Get called
    then: Matching cookies returned

  - name: set_cookie
    given: Cookie data
    when: Set called
    then: Cookie stored

  - name: delete_cookie
    given: Cookie identifier
    when: Delete called
    then: Cookie removed

  - name: get_local_storage
    given: Origin
    when: Get called
    then: LocalStorage items returned

  - name: set_local_storage
    given: Key and value
    when: Set called
    then: Item stored in localStorage

  - name: clear_storage
    given: Storage type
    when: Clear called
    then: All items removed

  - name: export_storage
    given: Export format
    When: Export runs
    then: Storage exported to file

  - name: import_storage
    given: Storage file
    When: Import runs
    then: Storage restored from file
