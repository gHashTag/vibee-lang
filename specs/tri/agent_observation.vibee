# Observation Processing Module
# Handle and compress observations
# Manus insight: Restorable compression

name: agent_observation
version: "1.0.0"
language: zig
module: agent_observation

types:
  Observation:
    fields:
      observation_id: String
      source: String
      raw_content: String
      processed_content: String
      token_count: Int
      is_compressed: Bool

  ObservationProcessor:
    fields:
      processor_id: String
      compression_strategy: String
      max_tokens: Int
      preserve_urls: Bool

  CompressedObservation:
    fields:
      compressed_id: String
      summary: String
      restoration_info: String
      original_tokens: Int
      compressed_tokens: Int

  ObservationFilter:
    fields:
      filter_id: String
      include_patterns: List<String>
      exclude_patterns: List<String>
      max_length: Int

  ObservationHistory:
    fields:
      history_id: String
      observations: List<String>
      total_tokens: Int
      compression_ratio: Float

behaviors:
  - name: process_observation
    given: Raw observation
    when: Processing needed
    then: Returns processed observation

  - name: compress_observation
    given: Observation and strategy
    when: Compression needed
    then: Returns compressed with restoration info

  - name: restore_observation
    given: Compressed observation
    when: Full content needed
    then: Returns restored observation

  - name: filter_observation
    given: Observation and filter
    When: Filtering needed
    then: Returns filtered observation

  - name: merge_observations
    given: Multiple observations
    when: Merging needed
    then: Returns merged observation

  - name: extract_key_info
    given: Observation
    when: Key extraction needed
    then: Returns key information only
