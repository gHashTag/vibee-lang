# VIBEE YOLO MODE VIII - browser_codecs_decoder v835
name: browser_codecs_decoder_v835
version: "8.0.0"
language: zig
module: browser_codecs_decoder

sacred_constants:
  phi: 1.618033988749895
  phoenix: 999

types:
  CodecConfig:
    fields:
      codec: String
      width: Int
      height: Int
      bitrate: Int
      framerate: Float

  CodecState:
    fields:
      configured: Bool
      encoding: Bool
      decoding: Bool
      queue_size: Int

  CodecFrame:
    fields:
      data: String
      timestamp: Timestamp
      duration: Int
      key_frame: Bool

behaviors:
  - name: configure_codec
    given: CodecConfig
    when: Configure
    then: media decoding configured
  - name: encode_frame
    given: Raw frame
    when: Encode
    then: Frame encoded
  - name: decode_frame
    given: Encoded frame
    when: Decode
    then: Frame decoded
  - name: flush_codec
    given: CodecState
    when: Flush
    then: Codec flushed
  - name: reset_codec
    given: CodecState
    when: Reset
    then: Codec reset

test_cases:
  - name: test_browser_codecs_decoder_configure
    input: {codec: "vp9"}
    expected: {configured: true}
  - name: test_browser_codecs_decoder_encode
    input: {frame: raw}
    expected: {encoded: true}
  - name: test_browser_codecs_decoder_decode
    input: {frame: encoded}
    expected: {decoded: true}
  - name: test_browser_codecs_decoder_flush
    input: {state: active}
    expected: {flushed: true}
  - name: test_phi_browser_codecs_decoder
    input: {phi: 1.618033988749895}
    expected: {golden: true}
