# VIBEE Specification v13563
# Virtual Machine
# KOSCHEI CYCLE 11 - 1000000x SPEEDUP

name: sandbox_vm
version: "13563"
language: zig
module: sandbox_vm

types:
  VirtualMachine:
    fields:
      id: String
      vm_type: String
      memory_mb: Int
      status: String

  VMConfig:
    fields:
      memory_mb: Int
      cpu_cores: Int
      disk_gb: Int
      network: Object

  VMSnapshot:
    fields:
      snapshot_id: String
      vm_id: String
      created_at: Timestamp
      size_mb: Int

  VMState:
    fields:
      vm_id: String
      status: String
      uptime_ms: Int
      resources: Object

  VMMetrics:
    fields:
      vms_created: Int
      vms_running: Int
      snapshots_total: Int
      avg_boot_time_ms: Float

  VMImage:
    fields:
      image_id: String
      name: String
      size_mb: Int
      os: String

behaviors:
  - name: create_vm
    given: VM configuration
    When: Creation requested
    then: VM created

  - name: start_vm
    given: VM ID
    When: Start requested
    then: VM started

  - name: stop_vm
    given: VM ID
    When: Stop requested
    then: VM stopped

  - name: snapshot_vm
    given: VM ID
    When: Snapshot requested
    then: Snapshot created

  - name: restore_snapshot
    given: Snapshot ID
    When: Restore requested
    then: VM restored

  - name: destroy_vm
    given: VM ID
    When: Destruction requested
    then: VM destroyed

creation_pattern:
  source: VMConfig
  transformer: VMManager
  result: VirtualMachine
