# VIBEE Specification v13559
# Database Tool
# KOSCHEI CYCLE 11 - 1000000x SPEEDUP

name: tools_db
version: "13559"
language: zig
module: tools_db

types:
  DatabaseTool:
    fields:
      id: String
      connection_string: String
      db_type: String

  DBQuery:
    fields:
      query: String
      parameters: List<Object>
      timeout_ms: Int

  DBResult:
    fields:
      rows: List<Object>
      affected_rows: Int
      columns: List<String>
      duration_ms: Int

  DBConfig:
    fields:
      max_connections: Int
      timeout_ms: Int
      ssl_enabled: Bool

  DBMetrics:
    fields:
      queries_total: Int
      successful: Int
      failed: Int
      avg_query_time_ms: Float

  DBTransaction:
    fields:
      transaction_id: String
      status: String
      queries: List<String>

behaviors:
  - name: query
    given: SQL query
    When: Query requested
    then: Query executed

  - name: insert
    given: Table and data
    When: Insert requested
    then: Data inserted

  - name: update
    given: Table and changes
    When: Update requested
    then: Data updated

  - name: delete
    given: Table and condition
    When: Delete requested
    then: Data deleted

  - name: transaction
    given: Multiple queries
    When: Transaction needed
    then: Transaction executed

  - name: schema
    given: Table name
    When: Schema requested
    then: Schema returned

creation_pattern:
  source: DBQuery
  transformer: DatabaseClient
  result: DBResult
