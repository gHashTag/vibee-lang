# VIBEE AMPLIFICATION MODE v77
# Official Rules for Spec-First AI Development

name: vibee_amplification_mode_v77
version: "77.0.0"
language: zig
module: vibee_amplification_mode_v77

sacred_constants:
  PHI: 1.618033988749895
  TRINITY: 3.0
  PHOENIX: 999
  AMPLIFICATION_FACTOR: 9.0

# ═══════════════════════════════════════════════════════════════════════════════
#                    VIBEE AMPLIFICATION MODE
# ═══════════════════════════════════════════════════════════════════════════════
#
# DEFINITION:
# -----------
# VIBEE Amplification Mode is a development paradigm where AI agents (like Ona/Claude)
# write ONLY .vibee specifications instead of direct code. The VibeeSpec compiler
# then auto-generates production code with tests.
#
# FORMULA:
# --------
# AI Agent + VibeeSpec = 9x Faster Development
#
# WHY "AMPLIFICATION"?
# --------------------
# - The AI's intent is AMPLIFIED into full implementation
# - Small spec → Large codebase (amplification ratio 1:5)
# - Single source of truth → Multiple outputs (code, tests, docs)
# - Human-readable spec → Machine-optimized code
#
# ALTERNATIVE NAMES CONSIDERED:
# -----------------------------
# 1. "Spec-First Acceleration" - too generic
# 2. "VibeeSpec Turbo Mode" - too informal
# 3. "Intent Amplification" - too abstract
# 4. "Declarative Development" - already used elsewhere
# 5. "VIBEE Amplification" - CHOSEN ✓
#
# ═══════════════════════════════════════════════════════════════════════════════

types:
  AmplificationRule:
    fields:
      id: String
      name: String
      description: String
      enforcement: String
      violation_penalty: String

  DevelopmentPhase:
    fields:
      phase: Int
      name: String
      actions: String
      outputs: String

  QualityGate:
    fields:
      gate: String
      condition: String
      action_on_fail: String

  AmplificationMetric:
    fields:
      metric: String
      manual_value: Float
      amplified_value: Float
      improvement: Float

behaviors:
  # === CORE RULES ===
  - name: rule_never_write_code_directly
    given: "AI agent needs to create code"
    when: "Agent considers writing .zig/.py/.ts"
    then: "STOP - Write .vibee spec instead"

  - name: rule_spec_before_implementation
    given: "New feature request"
    when: "Agent starts implementation"
    then: "Create .vibee spec FIRST, then generate"

  - name: rule_types_before_behaviors
    given: "Writing .vibee specification"
    when: "Defining module structure"
    then: "Define types section before behaviors"

  - name: rule_test_cases_mandatory
    given: "Writing behaviors in spec"
    when: "Defining behavior outcomes"
    then: "Include expected results for auto-test generation"

  - name: rule_sacred_constants_recommended
    given: "Creating new .vibee spec"
    when: "Defining constants"
    then: "Include PHI, TRINITY, PHOENIX for VIBEE identity"

  - name: rule_version_in_filename
    given: "Creating new spec file"
    when: "Naming the file"
    then: "Include version number: feature_v77.vibee"

  - name: rule_generate_then_test
    given: "Spec file created"
    when: "Ready to generate code"
    then: "Run vibee gen + zig test immediately"

  - name: rule_toxic_verdict_on_milestone
    given: "Major version complete"
    when: "Comparing with competitors"
    then: "Create E2E toxic verdict spec"

  # === WORKFLOW PHASES ===
  - name: phase_1_analyze
    given: "New task received"
    when: "Starting work"
    then: "Analyze requirements, identify types and behaviors"

  - name: phase_2_specify
    given: "Requirements analyzed"
    when: "Creating specification"
    then: "Write .vibee file with types, behaviors, test cases"

  - name: phase_3_generate
    given: "Spec file ready"
    when: "Generating code"
    then: "Run: vibee gen specs/tri/feature.vibee"

  - name: phase_4_verify
    given: "Code generated"
    when: "Verifying correctness"
    then: "Run: zig test trinity/output/feature.zig"

  - name: phase_5_iterate
    given: "Tests failed"
    when: "Fixing issues"
    then: "Update .vibee spec, regenerate, retest"

  - name: phase_6_document
    given: "All tests passed"
    when: "Completing task"
    then: "Update docs, commit, push"

  # === QUALITY GATES ===
  - name: gate_spec_validation
    given: "Spec file written"
    when: "Before generation"
    then: "Validate YAML syntax and required fields"

  - name: gate_test_coverage
    given: "Code generated"
    when: "After generation"
    then: "Ensure all behaviors have tests"

  - name: gate_no_manual_code
    given: "Commit ready"
    when: "Before commit"
    then: "Verify no manual .zig in trinity/output/"

  # === METRICS ===
  - name: metric_speedup
    given: "Task completed"
    when: "Measuring performance"
    then: "Calculate manual_time / vibee_time"

  - name: metric_loc_reduction
    given: "Code generated"
    when: "Measuring efficiency"
    then: "Calculate (manual_loc - spec_loc) / manual_loc"

  - name: metric_test_amplification
    given: "Tests generated"
    when: "Measuring coverage"
    then: "Count auto-generated tests vs manual estimate"

# === AMPLIFICATION RULES (DETAILED) ===
amplification_rules:
  - id: "AR-001"
    name: "No Direct Code Writing"
    description: "AI agents MUST NOT write .zig, .py, .ts, .js, .rs, .go directly"
    enforcement: "MANDATORY"
    violation: "Reject commit, require .vibee spec"
    exception: "src/vibeec/*.zig (compiler source only)"

  - id: "AR-002"
    name: "Spec-First Always"
    description: "Every feature starts with .vibee specification"
    enforcement: "MANDATORY"
    violation: "Task incomplete without spec"
    exception: "None"

  - id: "AR-003"
    name: "Types Before Behaviors"
    description: "Define data structures before operations"
    enforcement: "RECOMMENDED"
    violation: "Warning only"
    exception: "Simple utility specs"

  - id: "AR-004"
    name: "Test Cases in Behaviors"
    description: "Include given/when/then for auto-test generation"
    enforcement: "MANDATORY"
    violation: "No tests generated"
    exception: "None"

  - id: "AR-005"
    name: "Sacred Constants"
    description: "Include PHI, TRINITY, PHOENIX in sacred_constants"
    enforcement: "RECOMMENDED"
    violation: "Warning only"
    exception: "External integrations"

  - id: "AR-006"
    name: "Version Tracking"
    description: "Filename must include version: feature_vNN.vibee"
    enforcement: "MANDATORY"
    violation: "Reject file"
    exception: "None"

  - id: "AR-007"
    name: "Immediate Verification"
    description: "Run zig test after every generation"
    enforcement: "MANDATORY"
    violation: "Task incomplete"
    exception: "None"

  - id: "AR-008"
    name: "Toxic Verdict"
    description: "Compare with competitors on major versions"
    enforcement: "RECOMMENDED"
    violation: "Warning only"
    exception: "Minor fixes"

  - id: "AR-009"
    name: "Git Discipline"
    description: "Commit after each successful test run"
    enforcement: "RECOMMENDED"
    violation: "Warning only"
    exception: "WIP branches"

  - id: "AR-010"
    name: "Documentation"
    description: "Update docs/TOXIC_VERDICT_vNN.md on milestones"
    enforcement: "RECOMMENDED"
    violation: "Warning only"
    exception: "Minor versions"

# === WORKFLOW DIAGRAM ===
workflow:
  step_1:
    action: "Receive task"
    output: "Task requirements"

  step_2:
    action: "Analyze requirements"
    output: "Types and behaviors list"

  step_3:
    action: "Write .vibee spec"
    output: "specs/tri/feature_vNN.vibee"

  step_4:
    action: "Generate code"
    command: "vibee gen specs/tri/feature_vNN.vibee"
    output: "trinity/output/feature_vNN.zig"

  step_5:
    action: "Run tests"
    command: "zig test trinity/output/feature_vNN.zig"
    output: "All N tests passed"

  step_6:
    action: "Iterate if needed"
    condition: "Tests failed"
    goto: "step_3"

  step_7:
    action: "Commit and push"
    command: "git add -A && git commit && git push"
    output: "Changes pushed"

# === AMPLIFICATION METRICS ===
metrics:
  speedup:
    manual_mode: 1.0
    amplified_mode: 9.0
    improvement: "9x faster"

  lines_of_code:
    manual_mode: 100.0
    amplified_mode: 20.0
    improvement: "80% less code"

  test_coverage:
    manual_mode: 10.0
    amplified_mode: 100.0
    improvement: "10x more tests"

  error_rate:
    manual_mode: 5.0
    amplified_mode: 0.0
    improvement: "0 syntax errors"

  iteration_speed:
    manual_mode: 1.0
    amplified_mode: 3.0
    improvement: "3x faster fixes"

# === FUTURE IMPROVEMENTS ===
future_improvements:
  - name: "VibeeSpec LSP"
    description: "Language Server Protocol for IDE integration"
    speedup_boost: 2.0
    timeline: "v80"

  - name: "Template Library"
    description: "Pre-built spec templates for common patterns"
    speedup_boost: 1.3
    timeline: "v78"

  - name: "Watch Mode"
    description: "Auto-regenerate on spec file changes"
    speedup_boost: 1.2
    timeline: "v79"

  - name: "Multi-Target"
    description: "Generate Zig, Rust, Go, Python from one spec"
    speedup_boost: 1.5
    timeline: "v81"

  - name: "AI Spec Assist"
    description: "AI suggests spec improvements"
    speedup_boost: 1.5
    timeline: "v82"

# === PROJECTED SPEEDUP EVOLUTION ===
speedup_evolution:
  v77_current: 9.0
  v78_templates: 11.7
  v79_watch: 14.0
  v80_lsp: 28.0
  v81_multi_target: 42.0
  v82_ai_assist: 63.0
  ultimate_target: 100.0
