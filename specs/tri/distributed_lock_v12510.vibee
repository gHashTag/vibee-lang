# VIBEE Specification v12510
# Distributed Lock - Distributed locking mechanism
name: distributed_lock_v12510
version: "1.0.0"
language: zig
module: distributed_lock

types:
  LockType:
    fields:
      exclusive: String
      shared: String
      optimistic: String

  Lock:
    fields:
      id: String
      resource: String
      type: String
      owner: String
      acquired_at: Timestamp
      expires_at: Timestamp

  LockRequest:
    fields:
      resource: String
      requester: String
      type: String
      timeout_ms: Int

  LockResult:
    fields:
      request_id: String
      acquired: Bool
      lock_id: String
      wait_time_ms: Int

  LockRelease:
    fields:
      lock_id: String
      released_by: String
      released_at: Timestamp
      held_duration_ms: Int

behaviors:
  - name: acquire_lock
    given: Lock request
    When: Acquisition attempted
    then: Returns lock result

  - name: release_lock
    given: Lock ID and owner
    When: Release requested
    then: Returns release status

  - name: extend_lock
    given: Lock and duration
    When: Extension requested
    then: Returns extended lock

  - name: check_lock
    given: Resource
    When: Check requested
    then: Returns lock status
