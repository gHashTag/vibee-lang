# cdp_dom_snapshot_v2701.vibee - DOM Snapshots
# Быстрые снэпшоты DOM через CDP
# φ² + 1/φ² = 3 | PHOENIX = 999

name: cdp_dom_snapshot_v2701
version: "2701.0.0"
language: zig
module: cdp_dom_snapshot_v2701

types:
  DOMSnapshot:
    fields:
      documents: List
      strings: List
      nodes: List
      layout: List

  SnapshotConfig:
    fields:
      include_dom_rects: Bool
      include_blended_colors: Bool
      include_text_color_opacities: Bool
      computed_styles: List

  NodeInfo:
    fields:
      node_type: Int
      node_name: String
      node_value: String
      backend_node_id: Int
      attributes: List

  LayoutInfo:
    fields:
      node_index: Int
      bounds: Object
      text: String
      styles: Object

  SnapshotStats:
    fields:
      nodes_count: Int
      snapshot_time_ms: Float
      size_bytes: Int

behaviors:
  - name: capture_snapshot
    given: SnapshotConfig
    when: Snapshot requested
    then: Return DOMSnapshot

  - name: get_document
    given: None
    when: Document query
    then: Return root document

  - name: query_selector
    given: Selector
    when: Element query
    then: Return NodeInfo

  - name: get_box_model
    given: Node ID
    when: Box model query
    then: Return box dimensions

  - name: get_computed_style
    given: Node ID
    when: Style query
    then: Return computed styles

sacred_constants:
  phi: 1.618033988749895
  phoenix: 999
