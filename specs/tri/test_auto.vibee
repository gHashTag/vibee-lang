# ═══════════════════════════════════════════════════════════════════════════════
# TEST AUTO CODEGEN - Тестовая спецификация для автогенерации
# ═══════════════════════════════════════════════════════════════════════════════
#
# Проверяет работу AutoCodeGenerator
# φ² + 1/φ² = 3
#
# ═══════════════════════════════════════════════════════════════════════════════

name: test_auto
version: "1.0.0"
author: "Dmitrii Vasilev"
license: "MIT"
language: zig

# ═══════════════════════════════════════════════════════════════════════════════
# CREATION PATTERN
# ═══════════════════════════════════════════════════════════════════════════════

creation_pattern:
  source: TestInput
  transformer: AutoCodeGenerator
  result: GeneratedZigCode

# ═══════════════════════════════════════════════════════════════════════════════
# TYPES
# ═══════════════════════════════════════════════════════════════════════════════

types:
  - name: User
    description: "User entity"
    fields:
      - name: id
        type: Int
      - name: name
        type: String
      - name: email
        type: String
      - name: active
        type: Bool

  - name: Product
    description: "Product entity"
    fields:
      - name: id
        type: Int
      - name: title
        type: String
      - name: price
        type: Float

# ═══════════════════════════════════════════════════════════════════════════════
# BEHAVIORS
# ═══════════════════════════════════════════════════════════════════════════════

behaviors:
  - name: create_user
    given: "Valid user data"
    when: "create_user is called with id, name, email"
    then: "Return new User struct"
    test_cases:
      - name: test_create_user_valid
        input: '{"id": 1, "name": "John", "email": "john@example.com"}'
        expected: '{"id": 1}'

  - name: calculate_total
    given: "List of products"
    when: "calculate_total is called"
    then: "Return sum of all prices"
    test_cases:
      - name: test_empty_list
        input: '{"products": []}'
        expected: '0.0'
      - name: test_single_product
        input: '{"products": [{"price": 10.0}]}'
        expected: '10.0'

# ═══════════════════════════════════════════════════════════════════════════════
# PAS DAEMONS
# ═══════════════════════════════════════════════════════════════════════════════

pas_predictions:
  - target: "AutoCodeGenerator"
    current: "O(n)"
    predicted: "O(n)"
    confidence: 0.95
    pattern: "PRE"
    status: "validated"
