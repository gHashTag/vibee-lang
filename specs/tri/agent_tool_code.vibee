# Code Execution Tools Module
# Safe code execution in sandbox
# Python, JavaScript, Shell support

name: agent_tool_code
version: "1.0.0"
language: zig
module: agent_tool_code

types:
  CodeExecution:
    fields:
      execution_id: String
      language: String
      code: String
      timeout_ms: Int
      sandbox_id: String

  ExecutionResult:
    fields:
      result_id: String
      stdout: String
      stderr: String
      exit_code: Int
      execution_time_ms: Int

  Sandbox:
    fields:
      sandbox_id: String
      sandbox_type: String
      memory_limit_mb: Int
      cpu_limit_percent: Int
      network_enabled: Bool

  CodeAnalysis:
    fields:
      analysis_id: String
      is_safe: Bool
      detected_risks: List<String>
      estimated_resources: String

  REPLSession:
    fields:
      session_id: String
      language: String
      history: List<String>
      variables: Map<String,String>

behaviors:
  - name: execute_python
    given: Python code and sandbox
    when: Python execution needed
    then: Returns execution result

  - name: execute_javascript
    given: JavaScript code and sandbox
    when: JS execution needed
    then: Returns execution result

  - name: execute_shell
    given: Shell command and sandbox
    when: Shell execution needed
    then: Returns execution result

  - name: analyze_code_safety
    given: Code to analyze
    when: Safety check needed
    then: Returns safety analysis

  - name: create_sandbox
    given: Sandbox configuration
    when: New sandbox needed
    then: Returns sandbox instance

  - name: destroy_sandbox
    given: Sandbox ID
    when: Cleanup needed
    then: Returns cleanup result

  - name: repl_execute
    given: REPL session and code
    when: Interactive execution needed
    then: Returns REPL result with state
