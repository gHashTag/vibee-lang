# FFI Dart v56560 - Dart dart:ffi
# VIBEE → Dart Native Bindings
# φ² + 1/φ² = 3 | PHOENIX = 999

name: ffi_dart_v56560
version: "56.5.60"
language: zig
module: ffi_dart

creation_pattern:
  source: VibeeSpec
  transformer: DartBindingsGenerator
  result: DartPackage

types:
  DartType:
    fields:
      name: String
      dart_type: String
      native_type: String
      is_nullable: Bool

  DartNativeFunction:
    fields:
      name: String
      native_name: String
      return_type: String
      param_types: List<String>

  DartStruct:
    fields:
      name: String
      fields: List<String>
      is_packed: Bool

  DartCallback:
    fields:
      name: String
      native_function_type: String
      dart_function_type: String

  DartLibrary:
    fields:
      name: String
      path: String
      functions: List<DartNativeFunction>
      structs: List<DartStruct>

  DartPackage:
    fields:
      name: String
      libraries: List<DartLibrary>
      pubspec: String
      ffigen_yaml: Option<String>

  PubspecConfig:
    fields:
      name: String
      version: String
      dependencies: List<String>
      dev_dependencies: List<String>

  DartPointer:
    fields:
      type_name: String
      is_void: Bool
      is_array: Bool

behaviors:
  - name: generate_dart_bindings
    given: VibeeSpec
    when: Dart bindings needed
    then: Dart source files

  - name: generate_native_function
    given: C function
    when: Native function needed
    then: DartNativeFunction

  - name: map_vibee_to_dart_type
    given: Vibee type
    when: Type mapping needed
    then: Dart FFI type

  - name: generate_struct
    given: C struct
    when: Dart Struct needed
    then: DartStruct

  - name: generate_pubspec
    given: Package config
    when: pubspec.yaml needed
    then: PubspecConfig

  - name: generate_ffigen_config
    given: Header files
    when: ffigen.yaml needed
    then: FFIgen config

  - name: handle_pointer
    given: C pointer
    when: Pointer wrapper needed
    then: DartPointer

  - name: handle_callback
    given: C callback
    when: NativeCallable needed
    then: DartCallback
