name: agent_search_deep
version: "1.0.0"
language: zig
module: agent_search_deep

description: |
  Agent Search Deep - глубокий поиск по нескольким источникам
  Как Perplexity но быстрее и безопаснее
  φ² + 1/φ² = 3 | PHOENIX = 999

types:
  DeepSearchQuery:
    fields:
      query: String
      sources: List<String>
      depth: Int
      max_pages_per_source: Int

  DeepSearchSource:
    fields:
      name: String
      url: String
      reliability: Float
      last_updated: Option<Timestamp>

  DeepSearchResult:
    fields:
      query: String
      sources_searched: Int
      pages_analyzed: Int
      findings: List<String>
      summary: String
      search_time_ms: Float

  Finding:
    fields:
      content: String
      source_url: String
      relevance: Float
      confidence: Float

behaviors:
  - name: deep_search
    given: DeepSearchQuery запрос
    when: Глубокий поиск по источникам
    then: DeepSearchResult

  - name: add_source
    given: DeepSearchSource источник
    when: Добавление источника
    then: Источник добавлен

  - name: search_source
    given: Запрос и DeepSearchSource
    when: Поиск в одном источнике
    then: Список Finding

  - name: aggregate_findings
    given: Список Finding из разных источников
    when: Агрегация результатов
    then: Объединённые Finding

  - name: generate_summary
    given: DeepSearchResult результаты
    when: Генерация summary
    then: Текстовое резюме

  - name: verify_finding
    given: Finding для проверки
    when: Верификация информации
    then: Finding с обновлённой confidence
