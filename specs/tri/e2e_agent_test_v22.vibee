name: e2e_agent_test_v22
version: "22.5.0"
language: zig
module: e2e_agent_test_v22

types:
  AgentTestConfig:
    fields:
      cdp_host: String
      cdp_port: Int
      ollama_endpoint: String
      ollama_model: String
      max_steps: Int
      timeout_ms: Int

  AgentTestResult:
    fields:
      test_name: String
      passed: Bool
      steps_taken: Int
      duration_ms: Int
      trajectory: List<String>
      error: Option<String>

  TestScenario:
    fields:
      name: String
      start_url: String
      goal: String
      expected_result: String
      max_steps: Int

  AgentTestSuite:
    fields:
      config: Object
      scenarios: List<String>
      results: List<String>

behaviors:
  - name: create_test_suite
    given: AgentTestConfig
    when: Initialize test suite
    then: AgentTestSuite instance

  - name: add_scenario
    given: AgentTestSuite and TestScenario
    when: Add test scenario
    then: Updated suite

  - name: run_scenario
    given: AgentTestSuite and scenario name
    when: Run single scenario
    then: AgentTestResult

  - name: run_all_scenarios
    given: AgentTestSuite
    when: Run all scenarios
    then: All results

  - name: test_navigation_task
    given: AgentTestSuite
    when: Test navigation task
    then: AgentTestResult

  - name: test_click_task
    given: AgentTestSuite
    when: Test click task
    then: AgentTestResult

  - name: test_form_fill_task
    given: AgentTestSuite
    When: Test form fill task
    then: AgentTestResult

  - name: test_extraction_task
    given: AgentTestSuite
    When: Test data extraction
    then: AgentTestResult

  - name: test_multi_step_task
    given: AgentTestSuite
    When: Test multi-step task
    then: AgentTestResult

  - name: verify_result
    given: AgentTestResult and expected
    When: Verify result
    then: Verification status

  - name: generate_report
    given: AgentTestSuite
    When: Generate test report
    then: Report string
