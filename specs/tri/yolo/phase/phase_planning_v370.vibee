name: phase_planning_v370
version: "1.0.0"
language: zig
module: phase_planning_v370

types:
  PhaseConfig:
    fields:
      name: String
      timeout_ms: Int
      auto_start: Bool
      dependencies: List<String>

  PhaseState:
    fields:
      status: String
      progress: Float
      started_at: Timestamp
      artifacts: List<String>

  PhaseResult:
    fields:
      success: Bool
      outputs: List<Object>
      duration_ms: Int
      next_phase: String

  PhaseMetrics:
    fields:
      tasks_completed: Int
      errors_count: Int
      quality_score: Float

behaviors:
  - name: start_phase
    given: Phase config
    when: Start triggered
    then: Phase execution begins

  - name: execute_phase_tasks
    given: Phase started
    when: Task execution runs
    then: All tasks executed

  - name: validate_phase_output
    given: Tasks complete
    when: Validation runs
    then: Outputs validated

  - name: complete_phase
    given: Validation passed
    when: Completion runs
    then: Phase marked complete

  - name: handle_phase_error
    given: Error occurs
    when: Error handling runs
    then: Error handled appropriately

  - name: rollback_phase
    given: Rollback needed
    when: Rollback triggered
    then: Phase changes reverted

  - name: skip_phase
    given: Skip condition
    when: Skip check runs
    then: Phase skipped

  - name: report_phase_status
    given: Phase active
    when: Status check runs
    then: Status reported
