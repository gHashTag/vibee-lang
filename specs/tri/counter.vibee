name: counter
version: "1.0.0"
language: zig
module: counter

# Generated from Python by py2vibee
# Sacred Formula: φ² + 1/φ² = 3

constants:
  MAX_VALUE: 255
  MIN_VALUE: 0

types:
  CounterState:
    description: "Counter internal state"
    fields:
      value: Int
      overflow: Bool
      underflow: Bool
  CounterInput:
    description: "Input signals for counter"
    fields:
      clk: Bool
      reset: Bool
      enable: Bool
      direction: Bool
      load: Bool
      load_value: Int

behaviors:
  - name: increment
    given: "Current counter state"
    when: "Direction is up and enabled"
    then: "Counter increments with overflow detection"
    params:
      - name: state
        type: CounterState
    returns: CounterState
  - name: decrement
    given: "Current counter state"
    when: "Direction is down and enabled"
    then: "Counter decrements with underflow detection"
    params:
      - name: state
        type: CounterState
    returns: CounterState
  - name: load_value
    given: "Value to load"
    when: "Load signal is active"
    then: "Counter is set to specified value"
    params:
      - name: value
        type: Int
    returns: CounterState
  - name: reset_counter
    given: "Reset signal active"
    when: "Reset is processed"
    then: "Counter returns to zero"
    returns: CounterState
  - name: process_counter
    given: "Current state and input signals"
    when: "Rising clock edge"
    then: "Returns updated counter state"
    params:
      - name: state
        type: CounterState
      - name: input
        type: CounterInput
    returns: CounterState
  - name: get_counter_value
    given: "Counter state"
    when: "Value is requested"
    then: "Returns current count"
    params:
      - name: state
        type: CounterState
    returns: Int
  - name: is_zero
    given: "Counter state"
    when: "Zero check requested"
    then: "Returns true if counter is zero"
    params:
      - name: state
        type: CounterState
    returns: Bool
  - name: is_max
    given: "Counter state"
    when: "Max check requested"
    then: "Returns true if counter is at max"
    params:
      - name: state
        type: CounterState
    returns: Bool
