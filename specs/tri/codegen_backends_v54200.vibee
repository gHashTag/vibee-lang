name: codegen_backends_v54200
version: "54200.0.0"
language: zig
module: codegen_backends

# CODE GENERATION BACKENDS
# Бэкенды для генерации кода во все поддерживаемые языки

types:
  # ═══════════════════════════════════════════════════════════════
  # BACKEND CONFIGURATION
  # ═══════════════════════════════════════════════════════════════

  BackendConfig:
    fields:
      indent_style: String
      indent_size: Int
      line_ending: String
      max_line_length: Int
      emit_comments: Bool

  # ═══════════════════════════════════════════════════════════════
  # ZIG BACKEND
  # ═══════════════════════════════════════════════════════════════

  ZigBackend:
    fields:
      emit_wasm_exports: Bool
      emit_tests: Bool
      use_comptime: Bool
      optimization_level: Int

  ZigOutput:
    fields:
      imports: String
      constants: String
      types: String
      functions: String
      tests: String

  # ═══════════════════════════════════════════════════════════════
  # RUST BACKEND
  # ═══════════════════════════════════════════════════════════════

  RustBackend:
    fields:
      edition: String
      emit_derives: Bool
      use_serde: Bool
      emit_tests: Bool

  RustOutput:
    fields:
      uses: String
      structs: String
      impls: String
      tests: String

  # ═══════════════════════════════════════════════════════════════
  # PYTHON BACKEND
  # ═══════════════════════════════════════════════════════════════

  PythonBackend:
    fields:
      python_version: String
      use_dataclasses: Bool
      use_typing: Bool
      emit_docstrings: Bool

  PythonOutput:
    fields:
      imports: String
      classes: String
      functions: String
      tests: String

  # ═══════════════════════════════════════════════════════════════
  # GO BACKEND
  # ═══════════════════════════════════════════════════════════════

  GoBackend:
    fields:
      package_name: String
      emit_json_tags: Bool
      use_pointers: Bool
      emit_tests: Bool

  GoOutput:
    fields:
      package_decl: String
      imports: String
      structs: String
      methods: String
      tests: String

  # ═══════════════════════════════════════════════════════════════
  # TYPESCRIPT BACKEND
  # ═══════════════════════════════════════════════════════════════

  TypeScriptBackend:
    fields:
      use_strict: Bool
      emit_interfaces: Bool
      emit_classes: Bool
      target_version: String

  TypeScriptOutput:
    fields:
      imports: String
      interfaces: String
      classes: String
      functions: String
      exports: String

  # ═══════════════════════════════════════════════════════════════
  # GLEAM BACKEND
  # ═══════════════════════════════════════════════════════════════

  GleamBackend:
    fields:
      target: String
      emit_docs: Bool
      use_external: Bool

  GleamOutput:
    fields:
      imports: String
      types: String
      functions: String
      tests: String

  # ═══════════════════════════════════════════════════════════════
  # C BACKEND
  # ═══════════════════════════════════════════════════════════════

  CBackend:
    fields:
      c_standard: String
      emit_header: Bool
      use_stdint: Bool
      emit_comments: Bool

  COutput:
    fields:
      includes: String
      typedefs: String
      structs: String
      functions: String
      header: String

  # ═══════════════════════════════════════════════════════════════
  # WASM BACKEND
  # ═══════════════════════════════════════════════════════════════

  WasmBackend:
    fields:
      memory_pages: Int
      export_memory: Bool
      emit_wat: Bool
      optimize: Bool

  WasmOutput:
    fields:
      module_bytes: Int
      exports_count: Int
      imports_count: Int

behaviors:
  # ═══════════════════════════════════════════════════════════════
  # ZIG BACKEND
  # ═══════════════════════════════════════════════════════════════

  - name: zig_emit_struct
    given: AST type definition
    when: Zig struct generation triggered
    then: Zig struct with fields

  - name: zig_emit_function
    given: AST function definition
    when: Zig function generation triggered
    then: Zig function with body

  - name: zig_emit_test
    given: Behavior definition
    when: Zig test generation triggered
    then: Zig test block

  # ═══════════════════════════════════════════════════════════════
  # RUST BACKEND
  # ═══════════════════════════════════════════════════════════════

  - name: rust_emit_struct
    given: AST type definition
    when: Rust struct generation triggered
    then: Rust struct with derives

  - name: rust_emit_impl
    given: AST function definition
    when: Rust impl generation triggered
    then: Rust impl block

  - name: rust_emit_test
    given: Behavior definition
    when: Rust test generation triggered
    then: Rust test function

  # ═══════════════════════════════════════════════════════════════
  # PYTHON BACKEND
  # ═══════════════════════════════════════════════════════════════

  - name: python_emit_class
    given: AST type definition
    when: Python class generation triggered
    then: Python dataclass

  - name: python_emit_method
    given: AST function definition
    when: Python method generation triggered
    then: Python method with type hints

  - name: python_emit_test
    given: Behavior definition
    when: Python test generation triggered
    then: Python pytest function

  # ═══════════════════════════════════════════════════════════════
  # GO BACKEND
  # ═══════════════════════════════════════════════════════════════

  - name: go_emit_struct
    given: AST type definition
    when: Go struct generation triggered
    then: Go struct with json tags

  - name: go_emit_method
    given: AST function definition
    when: Go method generation triggered
    then: Go method with receiver

  - name: go_emit_test
    given: Behavior definition
    when: Go test generation triggered
    then: Go test function

  # ═══════════════════════════════════════════════════════════════
  # TYPESCRIPT BACKEND
  # ═══════════════════════════════════════════════════════════════

  - name: ts_emit_interface
    given: AST type definition
    when: TypeScript interface generation triggered
    then: TypeScript interface

  - name: ts_emit_class
    given: AST type definition
    when: TypeScript class generation triggered
    then: TypeScript class

  - name: ts_emit_function
    given: AST function definition
    when: TypeScript function generation triggered
    then: TypeScript function

  # ═══════════════════════════════════════════════════════════════
  # GLEAM BACKEND
  # ═══════════════════════════════════════════════════════════════

  - name: gleam_emit_type
    given: AST type definition
    when: Gleam type generation triggered
    then: Gleam type definition

  - name: gleam_emit_function
    given: AST function definition
    when: Gleam function generation triggered
    then: Gleam function

  # ═══════════════════════════════════════════════════════════════
  # C BACKEND
  # ═══════════════════════════════════════════════════════════════

  - name: c_emit_struct
    given: AST type definition
    when: C struct generation triggered
    then: C struct typedef

  - name: c_emit_function
    given: AST function definition
    when: C function generation triggered
    then: C function

  - name: c_emit_header
    given: Module definition
    when: C header generation triggered
    then: C header file

  # ═══════════════════════════════════════════════════════════════
  # WASM BACKEND
  # ═══════════════════════════════════════════════════════════════

  - name: wasm_emit_module
    given: AST module
    when: WASM generation triggered
    then: WASM binary module

  - name: wasm_emit_exports
    given: Public functions
    when: WASM export generation triggered
    then: WASM export section
