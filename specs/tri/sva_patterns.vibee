name: sva_patterns
version: "1.0.0"
language: zig
module: sva_patterns

# ═══════════════════════════════════════════════════════════════════════════════
# SVA Pattern Recognition Database
# ═══════════════════════════════════════════════════════════════════════════════
# Keyword patterns for given/when/then parsing
# φ² + 1/φ² = 3 | PHOENIX = 999
# ═══════════════════════════════════════════════════════════════════════════════

types:
  SignalKeywords:
    fields:
      pattern: String
      signal: String
      condition: String

  TimingKeywords:
    fields:
      pattern: String
      edge: String
      delay: Int

  OperationKeywords:
    fields:
      pattern: String
      template: String
      uses_past: Bool

  NegationKeywords:
    fields:
      words: List<String>

  StateKeywords:
    fields:
      pattern: String
      state_name: String

behaviors:
  - name: match_running_signal
    given: Text contains running or active
    when: Matching signal patterns
    then: Map to running == 1

  - name: match_reset_signal
    given: Text contains reset
    when: Matching signal patterns
    then: Map to rst_n condition

  - name: match_valid_signal
    given: Text contains valid
    when: Matching signal patterns
    then: Map to valid_in or valid_out

  - name: match_ready_signal
    given: Text contains ready
    when: Matching signal patterns
    then: Map to ready signal

  - name: match_count_signal
    given: Text contains count or counter
    when: Matching signal patterns
    then: Map to count register

  - name: match_state_signal
    given: Text contains state or idle or process
    when: Matching signal patterns
    then: Map to FSM state

  - name: match_clock_rising
    given: Text contains rising or posedge or clock
    when: Matching timing patterns
    then: Map to posedge clk

  - name: match_clock_falling
    given: Text contains falling or negedge
    when: Matching timing patterns
    then: Map to negedge clk

  - name: match_next_cycle
    given: Text contains next or after
    when: Matching timing patterns
    then: Map to ##1 delay

  - name: match_increment_op
    given: Text contains increment or add or plus
    when: Matching operation patterns
    then: Map to $past + 1 template

  - name: match_decrement_op
    given: Text contains decrement or subtract or minus
    when: Matching operation patterns
    then: Map to $past - 1 template

  - name: match_set_op
    given: Text contains set or assign or becomes
    when: Matching operation patterns
    then: Map to == value template

  - name: match_clear_op
    given: Text contains clear or reset or zero
    when: Matching operation patterns
    then: Map to == 0 template

  - name: match_negation
    given: Text contains not or no or never or without
    when: Matching negation
    then: Set negation flag
