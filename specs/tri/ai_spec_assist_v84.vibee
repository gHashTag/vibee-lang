# AI Spec Assist V84 - Intelligent Completion
name: ai_spec_assist_v84
version: "84.0.0"
language: zig
module: ai_spec_assist

creation_pattern:
  source: PartialSpec
  transformer: AIAssistant
  result: CompletedSpec

types:
  SpecContext:
    fields:
      current_spec: String
      cursor_position: Int
      project_specs: List<String>
      history: List<String>

  Suggestion:
    fields:
      text: String
      confidence: Float
      explanation: String
      source: SuggestionSource

  SuggestionSource:
    variants:
      - PatternMatch
      - SemanticAnalysis
      - ProjectContext
      - LLMGenerated

  CompletionRequest:
    fields:
      context: SpecContext
      max_suggestions: Int
      include_explanations: Bool

  TypeSuggestion:
    fields:
      name: String
      fields: List<FieldSuggestion>
      rationale: String

  FieldSuggestion:
    fields:
      name: String
      suggested_type: String
      confidence: Float

  BehaviorSuggestion:
    fields:
      name: String
      given: String
      when_clause: String
      then_clause: String
      test_cases: List<String>

  AIConfig:
    fields:
      model: String
      temperature: Float
      max_tokens: Int
      use_local: Bool

behaviors:
  - name: suggest_type_fields
    given: "Type name"
    when: "Field suggestion"
    then: "Likely fields"
    test_cases:
      - name: user_fields
        input: "User type"
        expected: "[id, name, email, created_at]"
      - name: config_fields
        input: "Config type"
        expected: "[timeout, retries, debug]"

  - name: suggest_behavior_name
    given: "Type context"
    when: "Behavior naming"
    then: "Suggested names"
    test_cases:
      - name: crud_behaviors
        input: "User type"
        expected: "[create_user, get_user, update_user, delete_user]"

  - name: complete_test_case
    given: "Behavior definition"
    when: "Test case completion"
    then: "Test cases"
    test_cases:
      - name: validation_tests
        input: "validate_email behavior"
        expected: "[valid_email, invalid_email, empty_email]"

  - name: infer_type_from_name
    given: "Field name"
    when: "Type inference"
    then: "Suggested type"
    test_cases:
      - name: id_field
        input: "id"
        expected: "Int"
      - name: name_field
        input: "name"
        expected: "String"
      - name: is_active_field
        input: "is_active"
        expected: "Bool"
      - name: created_at_field
        input: "created_at"
        expected: "Timestamp"

  - name: suggest_pas_patterns
    given: "Algorithm description"
    when: "PAS analysis"
    then: "Applicable patterns"
    test_cases:
      - name: sorting_algo
        input: "sorting algorithm"
        expected: "[D&C, PRE]"

  - name: generate_spec_from_description
    given: "Natural language"
    when: "Spec generation"
    then: "Complete .vibee spec"
    test_cases:
      - name: user_service
        input: "user management service"
        expected: "full User spec with CRUD"

  - name: validate_spec_semantics
    given: "Complete spec"
    when: "Semantic validation"
    then: "Warnings and suggestions"
    test_cases:
      - name: missing_tests
        input: "behavior without tests"
        expected: "warning: add test_cases"

  - name: auto_fix_spec
    given: "Spec with issues"
    when: "Auto-fix request"
    then: "Fixed spec"
    test_cases:
      - name: fix_indentation
        input: "malformed YAML"
        expected: "properly formatted"

# φ² + 1/φ² = 3 | PHOENIX = 999
