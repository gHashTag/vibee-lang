# IGLA File Filter
# Filter files by patterns, gitignore, binary detection
# φ² + 1/φ² = 3 | PHOENIX = 999

name: igla_file_filter
version: "1.0.0"
language: zig
module: igla_file_filter

sacred_constants:
  phi: 1.618033988749895
  phoenix: 999
  trinity: 3

types:
  FilterRule:
    fields:
      pattern: String
      is_include: Bool
      is_regex: Bool

  FilterConfig:
    fields:
      rules: List<FilterRule>
      respect_gitignore: Bool
      skip_binary: Bool
      max_file_size: Int

  FilterResult:
    fields:
      included: List<String>
      excluded: List<String>
      binary_skipped: Int
      size_skipped: Int

behaviors:
  - name: filter_files
    given: File list and config
    when: Filtering requested
    then: Returns FilterResult

  - name: parse_gitignore
    given: Gitignore content
    when: Parsing requested
    then: Returns list of FilterRule

  - name: is_binary
    given: File path
    when: Binary check requested
    then: Returns true if binary

  - name: match_pattern
    given: Path and pattern
    when: Pattern matching requested
    then: Returns true if matches

  - name: should_include
    given: Path and rules
    when: Inclusion check requested
    then: Returns true if should include

  - name: get_file_size
    given: File path
    when: Size check requested
    then: Returns file size in bytes

test_cases:
  - name: test_gitignore_parsing
    expected: rules_parsed
  - name: test_binary_detection
    expected: binary_detected
  - name: test_pattern_matching
    expected: patterns_matched
  - name: test_size_filtering
    expected: large_files_skipped
  - name: test_inclusion_logic
    expected: files_filtered
