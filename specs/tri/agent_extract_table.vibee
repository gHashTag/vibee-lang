name: agent_extract_table
version: "1.0.0"
language: zig
module: agent_extract_table

description: |
  Agent Extract Table - извлечение таблиц
  Проблема OpenAI Operator: сложности с выбором ячеек
  VIBEE: умное извлечение таблиц
  φ² + 1/φ² = 3 | PHOENIX = 999

types:
  TableInfo:
    fields:
      selector: String
      rows_count: Int
      cols_count: Int
      has_header: Bool

  TableCell:
    fields:
      row: Int
      col: Int
      value: String
      colspan: Int
      rowspan: Int

  TableData:
    fields:
      headers: List<String>
      rows: List<String>
      total_rows: Int
      total_cols: Int

  TableExportFormat:
    fields:
      format: String
      delimiter: Option<String>
      include_headers: Bool

behaviors:
  - name: find_tables
    given: Текущая страница
    when: Поиск всех таблиц
    then: Список TableInfo

  - name: extract_table
    given: TableInfo таблица
    when: Извлечение данных таблицы
    then: TableData со всеми ячейками

  - name: extract_cell
    given: TableInfo и координаты row, col
    when: Извлечение одной ячейки
    then: TableCell

  - name: extract_column
    given: TableInfo и индекс колонки
    when: Извлечение колонки
    then: Список значений

  - name: extract_row
    given: TableInfo и индекс строки
    when: Извлечение строки
    then: Список значений

  - name: export_table
    given: TableData и TableExportFormat
    when: Экспорт в CSV/JSON
    then: Строка в нужном формате
