# VIBEE Specification - IGLA SWE Reviewer
# Code review agent
# V = n × 3^k × π^m × φ^p | φ² + 1/φ² = 3 | PHOENIX = 999

name: igla_swe_reviewer
version: "1.0.0"
language: zig
module: igla_swe_reviewer

types:
  ReviewRequest:
    fields:
      code: String
      language: String
      context: String
      focus_areas: String

  ReviewResult:
    fields:
      approved: Bool
      issues: String
      suggestions: String
      quality_score: Float

  ReviewIssue:
    fields:
      severity: String
      line: Int
      message: String
      suggestion: String

  ReviewerConfig:
    fields:
      strictness: String
      check_style: Bool
      check_security: Bool
      check_performance: Bool

  ReviewerMetrics:
    fields:
      reviews_completed: Int
      issues_found: Int
      avg_quality_score: Float

behaviors:
  - name: review_code
    given: Code to review
    when: Review
    then: Review result returned

  - name: check_style
    given: Code
    When: Style check
    then: Style issues found

  - name: check_security
    given: Code
    when: Security check
    then: Security issues found

  - name: check_performance
    given: Code
    when: Performance check
    then: Performance issues found

  - name: suggest_improvements
    given: Code
    when: Suggestions
    then: Improvement suggestions

  - name: get_metrics
    given: Reviewer
    when: Metrics requested
    then: Reviewer metrics returned

test_cases:
  - name: test_review
    input: { code: "fn main() {}", language: "zig" }
    expected: { has_result: true }

  - name: test_style
    input: { code: "bad_style" }
    expected: { issues_found: true }

  - name: test_security
    input: { code: "unsafe_code" }
    expected: { checked: true }

  - name: test_metrics
    input: {}
    expected: { reviews_completed: 0 }
