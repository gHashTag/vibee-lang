# VIBEE Specification v13561
# Sandbox Core
# KOSCHEI CYCLE 11 - 1000000x SPEEDUP

name: sandbox_core
version: "13561"
language: zig
module: sandbox_core

types:
  Sandbox:
    fields:
      id: String
      sandbox_type: String
      status: String
      resources: Object

  SandboxConfig:
    fields:
      memory_limit_mb: Int
      cpu_limit: Float
      timeout_ms: Int
      network_enabled: Bool

  SandboxExecution:
    fields:
      execution_id: String
      code: String
      language: String
      result: Object

  SandboxResult:
    fields:
      success: Bool
      output: String
      error: String
      duration_ms: Int
      resources_used: Object

  SandboxMetrics:
    fields:
      executions_total: Int
      successful: Int
      failed: Int
      timeouts: Int

  SandboxState:
    fields:
      sandbox_id: String
      memory_used_mb: Int
      cpu_used: Float
      files_created: List<String>

behaviors:
  - name: create_sandbox
    given: Sandbox configuration
    When: Creation requested
    then: Sandbox created

  - name: execute_code
    given: Code and language
    When: Execution requested
    then: Code executed in sandbox

  - name: destroy_sandbox
    given: Sandbox ID
    When: Destruction requested
    then: Sandbox destroyed

  - name: get_state
    given: Sandbox ID
    When: State requested
    then: Sandbox state returned

  - name: reset_sandbox
    given: Sandbox ID
    When: Reset requested
    then: Sandbox reset to clean state

  - name: extend_timeout
    given: Sandbox ID
    When: Extension requested
    then: Timeout extended

creation_pattern:
  source: SandboxConfig
  transformer: SandboxManager
  result: Sandbox
