# iGLA Config Manager
# Configuration management for IGLA system
# φ² + 1/φ² = 3 | V = n × 3^k × π^m × φ^p

name: igla_config_manager
version: "1.0.0"
language: zig
module: igla_config_manager

sacred_constants:
  phi: 1.618033988749895
  trinity: 3.0
  phoenix: 999

types:
  IGLAConfig:
    fields:
      version: String
      search_mode: String
      index_type: String
      embedding_dim: Int
      chunk_size: Int
      top_k: Int

  EmbeddingConfig:
    fields:
      model: String
      dim: Int
      normalize: Bool

  SearchConfig:
    fields:
      mode: String
      bm25_weight: Float
      dense_weight: Float

  IndexingConfig:
    fields:
      index_type: String
      hnsw_M: Int
      hnsw_ef: Int
      use_pq: Bool

  CacheConfig:
    fields:
      enabled: Bool
      max_size_mb: Int
      ttl_seconds: Int

  ServerConfig:
    fields:
      host: String
      port: Int
      enable_rag: Bool

behaviors:
  - name: load_config
    given: "Config path"
    when: "Loading"
    then: "Config loaded"

  - name: save_config
    given: "Config, path"
    when: "Saving"
    then: "Config saved"

  - name: get_default
    given: "Config type"
    when: "Default request"
    then: "Default config"

  - name: validate_config
    given: "Config"
    when: "Validation"
    then: "Validation result"

  - name: merge_configs
    given: "Base, override"
    when: "Merging"
    then: "Merged config"

  - name: get_embedding_config
    given: "IGLAConfig"
    when: "Embedding config"
    then: "EmbeddingConfig"

  - name: get_search_config
    given: "IGLAConfig"
    when: "Search config"
    then: "SearchConfig"

  - name: phi_config_defaults
    given: "Config type"
    when: "Sacred defaults"
    then: "φ-ratio defaults"
