name: network_graphql_v342
version: "1.0.0"
language: zig
module: network_graphql_v342

types:
  GraphQLOperation:
    fields:
      type: String
      name: String
      query: String
      variables: Object

  GraphQLResponse:
    fields:
      data: Option<Object>
      errors: Option<List<Object>>
      extensions: Option<Object>

  GraphQLMock:
    fields:
      operation_name: String
      response: GraphQLResponse
      delay_ms: Int
      error_rate: Float

  GraphQLCapture:
    fields:
      operations: List<GraphQLOperation>
      responses: List<GraphQLResponse>
      endpoint: String

  GraphQLConfig:
    fields:
      endpoint: String
      headers: Object
      batch_enabled: Bool

behaviors:
  - name: intercept_graphql
    given: GraphQL endpoint
    When: Request made
    then: Operation intercepted

  - name: mock_query
    given: Query name
    When: Query executed
    then: Mock response returned

  - name: mock_mutation
    given: Mutation name
    When: Mutation executed
    then: Mock response returned

  - name: capture_operations
    given: Capture enabled
    When: Operations run
    then: All operations captured

  - name: wait_for_query
    given: Query name
    When: Wait runs
    then: Resolves when query completes

  - name: assert_variables
    given: Expected variables
    When: Assertion runs
    then: Passes if variables match

  - name: simulate_error
    given: Error config
    When: Operation runs
    then: GraphQL error returned

  - name: batch_operations
    given: Multiple operations
    When: Batch runs
    then: Operations batched
