name: rollback_system_v12090
version: "12090"
language: zig
module: rollback_system
types:
  RollbackConfig:
    fields:
      auto_rollback: Bool
      rollback_threshold: Float
      max_rollback_depth: Int
  RollbackRequest:
    fields:
      request_id: String
      target_version: String
      reason: String
      requester: String
  RollbackResult:
    fields:
      success: Bool
      from_version: String
      to_version: String
      duration_ms: Int
      issues: List<String>
  RollbackHistory:
    fields:
      rollbacks: List<String>
      total_count: Int
      success_rate: Float
behaviors:
  - name: initiate_rollback
    given: Request
    when: Initiating
    then: Returns rollback result
  - name: validate_target
    given: Target version
    when: Validating
    then: Returns validation status
  - name: execute_rollback
    given: Validated request
    when: Executing
    then: Returns execution result
  - name: verify_rollback
    given: Completed rollback
    when: Verifying
    then: Returns verification
  - name: auto_rollback
    given: Failure detection
    when: Auto rolling back
    then: Returns auto rollback result
  - name: cancel_rollback
    given: In-progress rollback
    when: Cancelling
    then: Returns cancellation status
  - name: get_rollback_history
    given: Service
    when: Getting history
    then: Returns history
  - name: set_rollback_policy
    given: Policy config
    when: Setting policy
    then: Returns policy
creation_pattern:
  source: RollbackRequest
  transformer: RollbackEngine
  result: RollbackResult
