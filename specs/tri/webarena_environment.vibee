# WebArena Environment Module
# Self-hostable web environment
# Shopping, Forum, GitLab, Map, Wiki

name: webarena_environment
version: "1.0.0"
language: zig
module: webarena_environment

types:
  WebArenaEnv:
    fields:
      env_id: String
      sites: Map<String,String>
      browser_state: String
      is_ready: Bool

  SiteInstance:
    fields:
      instance_id: String
      site_type: String
      url: String
      port: Int
      status: String

  EnvironmentState:
    fields:
      state_id: String
      current_url: String
      page_content: String
      cookies: Map<String,String>
      local_storage: Map<String,String>

  EnvironmentAction:
    fields:
      action_id: String
      action_type: String
      parameters: Map<String,String>
      timestamp: Timestamp

  EnvironmentObservation:
    fields:
      observation_id: String
      dom_content: String
      accessibility_tree: String
      screenshot: Option<String>

behaviors:
  - name: initialize_environment
    given: Environment configuration
    when: Environment setup needed
    then: Returns ready environment

  - name: reset_environment
    given: Environment ID
    when: Reset needed
    then: Returns fresh environment state

  - name: execute_action
    given: Action and environment
    when: Action execution needed
    then: Returns new state and observation

  - name: get_observation
    given: Environment state
    when: Observation needed
    then: Returns current observation

  - name: check_site_health
    given: Site instance
    when: Health check needed
    then: Returns site health status

  - name: capture_state
    given: Environment
    when: State capture needed
    then: Returns serialized state
