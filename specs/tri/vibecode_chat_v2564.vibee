# vibecode_chat_v2564.vibee - AI Code Chat
# Чат с AI по коду
# YOLO MODE + AMPLIFICATION + MATRYOSHKA
# φ² + 1/φ² = 3 | PHOENIX = 999

name: vibecode_chat_v2564
version: "2564.0.0"
language: zig
module: vibecode_chat_v2564

types:
  ChatMessage:
    fields:
      role: String
      content: String
      timestamp: Timestamp
      code_blocks: Object
      attachments: Object

  ChatSession:
    fields:
      id: String
      messages: Object
      context: Object
      model: String
      created_at: Timestamp

  CodeAttachment:
    fields:
      file_path: String
      content: String
      language: String
      selection: Object

  ChatResponse:
    fields:
      message: String
      code_suggestions: Object
      actions: Object
      tokens_used: Int

behaviors:
  - name: create_chat_session
    given: AIProvider and initial context
    when: New chat requested
    then: Return ChatSession

  - name: send_message
    given: ChatSession and user message
    when: Message sent
    then: Return AI ChatResponse

  - name: attach_code
    given: ChatSession and CodeAttachment
    when: Code attached
    then: Add code to context

  - name: ask_about_selection
    given: ChatSession and selected code
    when: Selection question
    then: Explain selected code

  - name: request_code_change
    given: ChatSession and change description
    when: Change requested
    then: Return modified code

  - name: apply_suggestion
    given: ChatSession and suggestion index
    when: Apply requested
    then: Apply code change to file

  - name: get_chat_history
    given: ChatSession
    when: History requested
    then: Return all messages

  - name: clear_context
    given: ChatSession
    when: Clear requested
    then: Reset conversation context

sacred_constants:
  phi: 1.618033988749895
  phi_squared_plus_inverse_squared: 3
  phoenix: 999
