# VIBEE E2E File Upload v254

name: e2e_upload_v254
version: "254.0.0"
language: zig
module: e2e_upload

types:
  FileInfo:
    fields:
      name: String
      size: Int
      type: String
      path: String

  UploadProgress:
    fields:
      percent: Float
      bytes_uploaded: Int
      bytes_total: Int

  UploadResult:
    fields:
      success: Bool
      url: String
      error: String

behaviors:
  - name: e2e_single_upload
    given: "Single file"
    when: "Upload triggered"
    then: "File uploaded"
    benchmark:
      vibee_ms: 300
      playwright_ms: 450
      puppeteer_ms: 520
      selenium_ms: 750

  - name: e2e_multiple_upload
    given: "Multiple files"
    when: "Upload triggered"
    then: "All uploaded"
    benchmark:
      vibee_ms: 500
      playwright_ms: 750
      puppeteer_ms: 850
      selenium_ms: 1200

  - name: e2e_drag_drop
    given: "File dragged"
    when: "Dropped on zone"
    then: "Upload started"
    benchmark:
      vibee_ms: 350
      playwright_ms: 550
      puppeteer_ms: 620
      selenium_ms: 900

  - name: e2e_progress_tracking
    given: "Upload in progress"
    when: "Progress updates"
    then: "Progress shown"
    benchmark:
      vibee_ms: 50
      playwright_ms: 100
      puppeteer_ms: 120
      selenium_ms: 200

  - name: e2e_file_validation
    given: "Invalid file type"
    when: "Upload attempted"
    then: "Error shown"
    benchmark:
      vibee_ms: 80
      playwright_ms: 150
      puppeteer_ms: 180
      selenium_ms: 280

  - name: e2e_cancel_upload
    given: "Upload in progress"
    when: "Cancel clicked"
    then: "Upload cancelled"
    benchmark:
      vibee_ms: 100
      playwright_ms: 180
      puppeteer_ms: 220
      selenium_ms: 350

  - name: e2e_resume_upload
    given: "Upload interrupted"
    when: "Resume clicked"
    then: "Upload resumed"
    benchmark:
      vibee_ms: 200
      playwright_ms: 350
      puppeteer_ms: 400
      selenium_ms: 600

test_cases:
  - name: test_single
    input: { file: "test.pdf" }
    expected: { uploaded: true }

  - name: test_multiple
    input: { files: ["a.pdf", "b.pdf", "c.pdf"] }
    expected: { count: 3 }

  - name: test_drag_drop
    input: { file: "image.png", drop_zone: "#upload" }
    expected: { uploaded: true }

  - name: test_progress
    input: { file_size_mb: 10 }
    expected: { progress: true }

  - name: test_validation
    input: { file: "virus.exe", allowed: ["pdf", "png"] }
    expected: { error: "Invalid type" }

  - name: test_cancel
    input: { uploading: true }
    expected: { cancelled: true }

  - name: test_resume
    input: { interrupted: true }
    expected: { resumed: true }

benchmark_summary:
  vibee_avg_ms: 226
  playwright_avg_ms: 361
  puppeteer_avg_ms: 416
  selenium_avg_ms: 611
  vibee_speedup: "1.6x-2.7x"
