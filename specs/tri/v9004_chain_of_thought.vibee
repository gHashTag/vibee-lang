# v9004 - Chain of Thought
# =========================
# Reasoning chains
# Based on: CoT, Tree of Thoughts, Graph of Thoughts
# φ² + 1/φ² = 3 | PHOENIX = 999

name: chain_of_thought
version: "9.0.4"
language: zig
module: chain_of_thought

constants:
  PHI: 1.618033988749895

types:
  CoTConfig:
    fields:
      max_steps: Int
      branching_factor: Int
      evaluation_method: String
      
  ThoughtNode:
    fields:
      thought: String
      score: Float
      children: List
      
  ReasoningChain:
    fields:
      steps: List
      final_answer: String
      confidence: Float

behaviors:
  - name: generate_thought
    given: Context и previous thoughts
    when: Generating next thought
    then: Вернуть next thought step
    
  - name: evaluate_thought
    given: Thought и context
    when: Evaluating quality
    then: Вернуть thought score
    
  - name: branch_thoughts
    given: Current thought
    when: Branching
    then: Вернуть multiple branches
    
  - name: select_best_path
    given: Thought tree
    when: Path selection
    then: Вернуть best reasoning path
    
  - name: self_consistency
    given: Multiple chains
    when: Aggregating answers
    then: Вернуть majority answer
    
  - name: verify_reasoning
    given: Reasoning chain
    when: Verification
    then: Вернуть verification result
    
  - name: backtrack
    given: Failed thought
    when: Backtracking
    then: Вернуть alternative path
    
  - name: extract_answer
    given: Reasoning chain
    when: Answer extraction
    then: Вернуть final answer
