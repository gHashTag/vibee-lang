name: benchmark_analysis_v22
version: "22.5.0"
language: zig
module: benchmark_analysis_v22

types:
  AnalysisConfig:
    fields:
      include_trajectories: Bool
      include_errors: Bool
      group_by_category: Bool

  TaskAnalysis:
    fields:
      task_id: String
      success: Bool
      failure_reason: Option<String>
      bottleneck: Option<String>
      suggestions: List<String>

  CategoryAnalysis:
    fields:
      category: String
      total_tasks: Int
      passed: Int
      failed: Int
      success_rate: Float
      common_failures: List<String>

  TrendAnalysis:
    fields:
      metric_name: String
      trend: String
      change_percent: Float
      is_improving: Bool

  FullAnalysis:
    fields:
      summary: String
      by_category: List<String>
      trends: List<String>
      recommendations: List<String>

  Analyzer:
    fields:
      config: Object
      results: Object

behaviors:
  - name: create_analyzer
    given: AnalysisConfig
    when: Initialize analyzer
    then: Analyzer instance

  - name: analyze_results
    given: Analyzer and benchmark results
    when: Analyze results
    then: FullAnalysis

  - name: analyze_task
    given: Analyzer and task result
    when: Analyze single task
    then: TaskAnalysis

  - name: analyze_category
    given: Analyzer and category results
    when: Analyze category
    then: CategoryAnalysis

  - name: analyze_trends
    given: Analyzer and historical data
    when: Analyze trends
    then: TrendAnalysis list

  - name: find_bottlenecks
    given: Analyzer
    When: Find bottlenecks
    then: Bottleneck list

  - name: find_common_failures
    given: Analyzer
    When: Find common failures
    then: Failure patterns

  - name: generate_recommendations
    given: Analyzer
    When: Generate recommendations
    then: Recommendation list

  - name: compare_runs
    given: Analyzer and run1 and run2
    When: Compare benchmark runs
    then: Comparison analysis

  - name: export_analysis
    given: Analyzer and format
    When: Export analysis
    then: Exported analysis

  - name: generate_summary
    given: Analyzer
    When: Generate summary
    then: Summary string
