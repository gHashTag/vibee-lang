name: gleam_codegen_backend_v55400
version: "55400.0.0"
language: zig
module: gleam_codegen_backend

# GLEAM CODEGEN BACKEND
# Генерация Gleam кода из VIBEE AST

types:
  GleamConfig:
    fields:
      target: String
      emit_docs: Bool
      use_external: Bool
      otp_app: String

  GleamModule:
    fields:
      name: String
      imports_count: Int
      types_count: Int
      functions_count: Int

  GleamType:
    fields:
      name: String
      is_pub: Bool
      is_opaque: Bool
      variants_count: Int

  GleamVariant:
    fields:
      name: String
      fields_count: Int

  GleamField:
    fields:
      name: String
      gleam_type: String
      is_labeled: Bool

  GleamFunction:
    fields:
      name: String
      is_pub: Bool
      params: String
      return_type: String

  GleamTest:
    fields:
      name: String
      module: String

  GleamOutput:
    fields:
      code: String
      size_bytes: Int
      types_generated: Int
      functions_generated: Int

behaviors:
  - name: emit_gleam_header
    given: GleamConfig
    when: Header generation triggered
    then: Gleam imports

  - name: emit_gleam_type
    given: VIBEE type definition
    when: Type generation triggered
    then: Gleam type definition

  - name: emit_gleam_variant
    given: VIBEE enum variant
    when: Variant generation triggered
    then: Gleam variant

  - name: emit_gleam_function
    given: VIBEE behavior
    when: Function generation triggered
    then: Gleam function

  - name: emit_gleam_test
    given: VIBEE behavior
    when: Test generation triggered
    then: Gleam test

  - name: map_type_to_gleam
    given: VIBEE type name
    when: Type mapping requested
    then: Gleam type returned

  - name: generate_gleam_module
    given: Complete VIBEE spec
    when: Full generation triggered
    then: Complete Gleam module
