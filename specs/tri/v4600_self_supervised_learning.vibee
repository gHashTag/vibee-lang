# v4600 - Self-Supervised Learning
# ==================================
# Обучение без разметки - будущее AI
# φ² + 1/φ² = 3 | PHOENIX = 999

name: self_supervised_learning
version: "4.6.0"
language: zig
module: self_supervised_learning

constants:
  PHI: 1.618033988749895
  PROJECTION_DIM: 128
  TEMPERATURE: 0.07
  QUEUE_SIZE: 65536

types:
  SSLConfig:
    fields:
      method: String
      encoder: Object
      projector: Object
      
  Augmentation:
    fields:
      aug_type: String
      strength: Float
      probability: Float
      
  AugmentedView:
    fields:
      view1: List
      view2: List
      original: List
      
  Representation:
    fields:
      embedding: List
      projection: List
      
  PretrainObjective:
    fields:
      objective_type: String
      loss_weight: Float
      
  SSLBatch:
    fields:
      views: List
      labels: List
      indices: List
      
  DownstreamTask:
    fields:
      task_type: String
      num_classes: Int
      
  TransferResult:
    fields:
      linear_probe: Float
      fine_tuned: Float
      few_shot: Float

behaviors:
  - name: create_augmented_views
    given: Изображение и аугментации
    when: Создание двух views
    then: Вернуть аугментированные views
    
  - name: encode_views
    given: Views и encoder
    when: Извлечение представлений
    then: Вернуть embeddings
    
  - name: project_representations
    given: Embeddings и projector
    when: Проекция в пространство
    then: Вернуть projections
    
  - name: compute_ssl_loss
    given: Projections и метод
    when: Вычисление SSL loss
    then: Вернуть loss
    
  - name: update_momentum_encoder
    given: Online и target encoder
    when: EMA обновление
    then: Вернуть обновлённый target
    
  - name: linear_probe
    given: Frozen encoder и данные
    when: Линейная оценка
    then: Вернуть accuracy
    
  - name: fine_tune
    given: Pretrained модель и задача
    when: Fine-tuning
    then: Вернуть результат
    
  - name: evaluate_representations
    given: Encoder и benchmark
    when: Оценка качества
    then: Вернуть метрики transfer
