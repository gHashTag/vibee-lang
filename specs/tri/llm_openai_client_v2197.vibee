# VIBEE Specification: OpenAI Client v2197
# YOLO XVIII - Critical Integrations
# Based on: OpenAI API Reference

name: llm_openai_client
version: "2197"
language: zig
module: llm_openai_client

types:
  OpenAIClient:
    fields:
      api_key: String
      organization: String
      base_url: String
      timeout_ms: Int

  OpenAIConfig:
    fields:
      model: String
      temperature: Float
      max_tokens: Int
      top_p: Float

  OpenAIResponse:
    fields:
      id: String
      object: String
      created: Int
      model: String
      usage: TokenUsage

  TokenUsage:
    fields:
      prompt_tokens: Int
      completion_tokens: Int
      total_tokens: Int

behaviors:
  - name: create_client
    given: "API key, optional organization"
    when: "Creating OpenAI client"
    then: "Returns initialized client"

  - name: set_base_url
    given: "Client, base URL"
    when: "Setting custom endpoint"
    then: "Updates base URL"

  - name: set_timeout
    given: "Client, timeout in ms"
    when: "Setting timeout"
    then: "Updates timeout"

  - name: validate_api_key
    given: "Client"
    when: "Validating API key"
    then: "Returns validation result"

test_cases:
  - name: test_client_creation
    input: {api_key: "sk-test"}
    expected: {created: true}

  - name: test_base_url
    input: {url: "https://api.openai.com/v1"}
    expected: {url_set: true}

  - name: test_timeout
    input: {timeout_ms: 30000}
    expected: {timeout_set: true}

  - name: test_validation
    input: {api_key: "sk-valid"}
    expected: {valid: true}
