name: agent_extract_links
version: "1.0.0"
language: zig
module: agent_extract_links

description: |
  Agent Extract Links - извлечение ссылок и изображений
  φ² + 1/φ² = 3 | PHOENIX = 999

types:
  LinkInfo:
    fields:
      href: String
      text: String
      title: Option<String>
      is_external: Bool
      is_download: Bool

  ImageInfo:
    fields:
      src: String
      alt: String
      width: Int
      height: Int
      is_lazy: Bool

  MediaInfo:
    fields:
      media_type: String
      src: String
      duration: Option<Float>
      poster: Option<String>

  LinkFilter:
    fields:
      domain: Option<String>
      contains_text: Option<String>
      file_type: Option<String>

behaviors:
  - name: extract_all_links
    given: Текущая страница
    when: Извлечение всех ссылок
    then: Список LinkInfo

  - name: extract_links_filtered
    given: LinkFilter фильтр
    when: Извлечение ссылок по фильтру
    then: Отфильтрованный список LinkInfo

  - name: extract_images
    given: Текущая страница
    when: Извлечение всех изображений
    then: Список ImageInfo

  - name: extract_media
    given: Текущая страница
    when: Извлечение видео и аудио
    then: Список MediaInfo

  - name: extract_download_links
    given: Текущая страница
    when: Извлечение ссылок на скачивание
    then: Список LinkInfo с is_download true

  - name: resolve_relative_urls
    given: Список относительных URL
    when: Преобразование в абсолютные
    then: Список абсолютных URL
