# VIBEE Specification v12960
# TinyML - Machine learning for microcontrollers
name: tinyml_v12960
version: "1.0.0"
language: zig
module: tinyml

types:
  MCUTarget:
    fields:
      cortex_m0: String
      cortex_m4: String
      cortex_m7: String
      esp32: String
      riscv: String

  TinyModel:
    fields:
      id: String
      target: String
      flash_kb: Int
      ram_kb: Int
      ops_per_inference: Int

  MemoryLayout:
    fields:
      model_id: String
      tensor_arena_kb: Int
      scratch_buffer_kb: Int
      stack_kb: Int

  PowerProfile:
    fields:
      model_id: String
      active_power_mw: Float
      sleep_power_uw: Float
      inference_energy_uj: Float

  TinyInference:
    fields:
      model_id: String
      input: String
      output: String
      cycles: Int

behaviors:
  - name: optimize_for_mcu
    given: Model and target
    when: Optimization done
    then: Returns tiny model

  - name: allocate_memory
    given: Model and constraints
    when: Allocation done
    then: Returns memory layout

  - name: profile_power
    given: Model and MCU
    when: Profiling done
    then: Returns power profile

  - name: run_tiny_inference
    given: Model and input
    when: Inference executed
    then: Returns tiny inference
