name: distributed_sharding_v20320
version: "1.0.0"
language: zig
module: distributed_sharding_v20320

types:
  Shard:
    fields:
      id: Int
      range_start: String
      range_end: String
      replicas: List<String>

  ShardingResult:
    fields:
      shard_id: Int
      node: String
      success: Bool

behaviors:
  - name: shard_route
    given: "Key"
    when: "Router routes"
    then: "Returns target shard"

  - name: shard_rebalance
    given: "Load imbalance"
    when: "Rebalancer runs"
    then: "Returns new distribution"

  - name: shard_split
    given: "Overloaded shard"
    when: "Splitter splits"
    then: "Returns new shards"
