# VIBEE Specification v14360
# Domain-Incremental Learning - Adapting to new domains
name: domain_incremental_v14360
version: "1.0.0"
language: zig
module: domain_incremental

types:
  DomainShift:
    fields:
      source_domain: String
      target_domain: String
      shift_type: String

  DomainAdapter:
    fields:
      adapter_weights: String
      domain_id: Int
      frozen_backbone: Bool

  DILModel:
    fields:
      shared_model: String
      domain_adapters: String
      domain_detector: String

  DILResult:
    fields:
      domain_accuracies: String
      adaptation_cost: Float
      backward_transfer: Float

behaviors:
  - name: detect_domain
    given: Input batch
    when: Detection done
    then: Returns domain id

  - name: add_adapter
    given: New domain
    when: Addition done
    then: Returns domain adapter

  - name: adapt_to_domain
    given: Domain data
    when: Adaptation done
    then: Returns adapted model

  - name: evaluate_domains
    given: All domain data
    when: Evaluation done
    then: Returns DIL result
