# Bridge Message Types
# All message types for Playwright bridge
# Request/Response definitions

name: bridge_message_types
version: "1.0.0"
language: zig
module: bridge_message_types

types:
  BrowserLaunchRequest:
    fields:
      browser_type: String
      headless: Bool
      slow_mo: Int
      args: List<String>

  BrowserLaunchResponse:
    fields:
      browser_id: String
      version: String
      success: Bool

  PageCreateRequest:
    fields:
      browser_id: String
      url: Option<String>

  PageCreateResponse:
    fields:
      page_id: String
      url: String
      title: String

  NavigateRequest:
    fields:
      page_id: String
      url: String
      wait_until: String
      timeout: Int

  NavigateResponse:
    fields:
      success: Bool
      final_url: String
      load_time_ms: Int

  ClickRequest:
    fields:
      page_id: String
      selector: String
      button: String
      click_count: Int

  ClickResponse:
    fields:
      success: Bool
      error: Option<String>

  TypeRequest:
    fields:
      page_id: String
      selector: String
      text: String
      delay: Int

  TypeResponse:
    fields:
      success: Bool
      error: Option<String>

  ExtractRequest:
    fields:
      page_id: String
      selector: String
      extract_type: String

  ExtractResponse:
    fields:
      success: Bool
      content: String
      element_count: Int

  ScreenshotRequest:
    fields:
      page_id: String
      full_page: Bool
      format: String

  ScreenshotResponse:
    fields:
      success: Bool
      data: String
      width: Int
      height: Int

behaviors:
  - name: serialize_request
    given: Request object
    when: Serialization needed
    then: Returns JSON string

  - name: deserialize_response
    given: JSON string and response type
    when: Deserialization needed
    then: Returns typed response

  - name: validate_request
    given: Request object
    when: Validation needed
    then: Returns validation result

  - name: create_launch_request
    given: Browser options
    when: Launch request needed
    then: Returns BrowserLaunchRequest

  - name: create_navigate_request
    given: Page ID and URL
    when: Navigate request needed
    then: Returns NavigateRequest

  - name: create_click_request
    given: Page ID and selector
    when: Click request needed
    then: Returns ClickRequest

  - name: create_type_request
    given: Page ID, selector, and text
    when: Type request needed
    then: Returns TypeRequest

  - name: create_extract_request
    given: Page ID and selector
    when: Extract request needed
    then: Returns ExtractRequest
