name: agent_memory_episodic
version: "1.0.0"
language: zig
module: agent_memory_episodic

description: |
  Agent Memory Episodic - эпизодическая память
  Научные основы: MemGPT (Packer et al., 2023)
  Память о конкретных событиях и задачах
  φ² + 1/φ² = 3 | PHOENIX = 999

types:
  Episode:
    fields:
      episode_id: String
      task: String
      actions: List<String>
      outcome: String
      timestamp: Timestamp
      duration_ms: Float

  EpisodeQuery:
    fields:
      task_similar_to: Option<String>
      time_range: Option<String>
      outcome_filter: Option<String>

  EpisodeMemory:
    fields:
      episodes: List<String>
      total_count: Int
      oldest: Timestamp
      newest: Timestamp

  LessonLearned:
    fields:
      episode_id: String
      lesson: String
      applicable_to: List<String>
      confidence: Float

behaviors:
  - name: record_episode
    given: Завершённая задача
    when: Запись эпизода в память
    then: Episode сохранён

  - name: recall_similar
    given: Текущая задача
    when: Поиск похожих эпизодов
    then: Список релевантных Episode

  - name: query_episodes
    given: EpisodeQuery запрос
    when: Поиск по критериям
    then: Список Episode

  - name: extract_lessons
    given: Episode эпизод
    when: Извлечение уроков
    then: Список LessonLearned

  - name: apply_lessons
    given: Текущая задача и уроки
    when: Применение уроков
    then: Улучшенная стратегия

  - name: forget_old
    given: Возраст для забывания
    when: Удаление старых эпизодов
    then: Память оптимизирована
