# v6506 - Uncertainty-Aware Training
# ====================================
# Training with uncertainty quantification
# Integration: v6011 Training + v11490 Uncertainty
# φ² + 1/φ² = 3 | PHOENIX = 999

name: uncertainty_aware
version: "6.5.6"
language: zig
module: uncertainty_aware

constants:
  PHI: 1.618033988749895

types:
  UncertaintyConfig:
    fields:
      method: String
      num_samples: Int
      calibration: Bool
      
  UncertaintyEstimate:
    fields:
      epistemic: Float
      aleatoric: Float
      total: Float

behaviors:
  - name: bayesian_train_step
    given: Batch и prior
    when: Bayesian training
    then: Вернуть posterior update
    
  - name: mc_dropout_forward
    given: Input и num_samples
    when: MC Dropout
    then: Вернуть uncertainty estimate
    
  - name: ensemble_train
    given: Batch и ensemble
    when: Ensemble training
    then: Вернуть ensemble update
    
  - name: calibrate_uncertainty
    given: Predictions и targets
    when: Calibration
    then: Вернуть calibrated predictions
    
  - name: uncertainty_weighted_loss
    given: Loss и uncertainty
    when: Weighted loss
    then: Вернуть uncertainty-weighted loss
    
  - name: active_learning_select
    given: Pool и uncertainty
    when: Active learning
    then: Вернуть most uncertain samples
