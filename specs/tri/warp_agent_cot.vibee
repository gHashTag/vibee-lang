name: warp_agent_cot
version: "1.0.0"
language: zig
module: warp_agent_cot

description: |
  WARP Agent Chain-of-Thought - пошаговое рассуждение
  Научные основы: Chain-of-Thought (Wei et al., 2022)
  Улучшение: +40% точности на сложных задачах
  φ² + 1/φ² = 3 | PHOENIX = 999

types:
  ThoughtStep:
    fields:
      step_number: Int
      reasoning: String
      conclusion: String
      confidence: Float

  ThoughtChain:
    fields:
      question: String
      steps: List<String>
      final_answer: String
      total_steps: Int

  CoTConfig:
    fields:
      max_steps: Int
      min_confidence: Float
      verbose: Bool
      self_consistency: Bool
      num_samples: Int

  CoTResult:
    fields:
      answer: String
      chain: String
      confidence: Float
      reasoning_time_ms: Float

behaviors:
  - name: generate_chain
    given: Вопрос или задача
    when: Генерация цепочки рассуждений
    then: ThoughtChain с шагами

  - name: step_by_step
    given: Текущий ThoughtStep
    when: Генерация следующего шага
    then: Следующий ThoughtStep

  - name: self_consistency
    given: Вопрос и количество сэмплов
    when: Генерация нескольких цепочек
    then: Наиболее частый ответ

  - name: verify_chain
    given: ThoughtChain для проверки
    when: Верификация логики
    then: Bool корректности и ошибки

  - name: compress_chain
    given: ThoughtChain полная цепочка
    when: Сжатие для экономии токенов
    then: Сжатая версия цепочки

  - name: extract_answer
    given: ThoughtChain с рассуждениями
    when: Извлечение финального ответа
    then: CoTResult с ответом
