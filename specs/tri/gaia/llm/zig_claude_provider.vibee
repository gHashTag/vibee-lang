name: zig_claude_provider
version: "1.0.0"
language: zig
module: claude_provider

description: |
  Claude Provider - Anthropic Claude API integration.
  Implements LLM client interface for Claude.
  φ² + 1/φ² = 3

constants:
  CLAUDE_API_URL: "https://api.anthropic.com/v1/messages"
  ANTHROPIC_VERSION: "2023-06-01"
  DEFAULT_MODEL: "claude-3-5-sonnet-20241022"
  CLAUDE_OPUS: "claude-3-opus-20240229"
  CLAUDE_HAIKU: "claude-3-haiku-20240307"

types:
  ClaudeConfig:
    fields:
      api_key: String
      model: String
      max_tokens: Int
      temperature: Float

  ClaudeUsage:
    fields:
      input_tokens: Int
      output_tokens: Int

  ClaudeContent:
    fields:
      content_type: String
      text: String

behaviors:
  - name: init
    given: ClaudeConfig
    when: Creating Claude provider
    then: Returns initialized provider

  - name: complete
    given: Messages array
    when: Calling messages API
    then: Returns response with content

  - name: build_request
    given: Messages and config
    when: Building JSON request body
    then: Returns JSON string

  - name: parse_response
    given: API response JSON
    when: Extracting content and usage
    then: Returns parsed response

  - name: build_headers
    given: API key
    when: Creating request headers
    then: Returns headers with x-api-key and anthropic-version
