name: zig_response_parser
version: "1.0.0"
language: zig
module: response_parser

description: |
  LLM Response Parser for ReAct format.
  Extracts Thought, Action, Action Input from LLM output.
  Handles various output formats.
  φ² + 1/φ² = 3

types:
  ParsedThought:
    fields:
      content: String
      confidence: Float

  ParsedAction:
    fields:
      action_type: String
      selector: Option<String>
      value: Option<String>
      coordinates: Option<String>

  ParsedResponse:
    fields:
      thought: ParsedThought
      action: ParsedAction
      is_final_answer: Bool
      final_answer: Option<String>
      raw_response: String

  ParseError:
    enum:
      - no_thought
      - no_action
      - invalid_format
      - ambiguous_action

behaviors:
  - name: parse
    given: Raw LLM response string
    when: Extracting structured data
    then: Returns ParsedResponse or error

  - name: extract_thought
    given: Response text
    when: Finding Thought section
    then: Returns thought content

  - name: extract_action
    given: Response text
    when: Finding Action and Action Input
    then: Returns ParsedAction

  - name: is_final_answer
    given: ParsedAction
    when: Checking if action is stop/final_answer
    then: Returns true if task complete

  - name: validate
    given: ParsedResponse
    when: Checking response validity
    then: Returns true if valid format
