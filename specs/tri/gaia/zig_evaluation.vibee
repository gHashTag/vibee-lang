name: zig_evaluation
version: "1.0.0"
language: zig
module: evaluation

description: |
  Task Success Evaluation.
  Multiple evaluation strategies for WebArena.
  Supports string_match, url_match, program_html.
  φ² + 1/φ² = 3

types:
  EvalStrategy:
    enum:
      - exact_match
      - contains
      - fuzzy_match
      - url_match
      - element_exists
      - element_value
      - page_state

  EvalCriterion:
    fields:
      strategy: EvalStrategy
      target: String
      tolerance: Float

  EvalResult:
    fields:
      passed: Bool
      score: Float
      matched_value: Option<String>
      reason: String

  EvalConfig:
    fields:
      criteria: List<EvalCriterion>
      require_all: Bool
      case_sensitive: Bool

behaviors:
  - name: evaluate
    given: Agent answer and EvalConfig
    when: Checking task completion
    then: Returns EvalResult

  - name: string_match
    given: Answer and reference
    when: Comparing strings
    then: Returns match score

  - name: url_match
    given: Current URL and reference URL
    when: Comparing URLs
    then: Returns true if match

  - name: element_check
    given: Selector and expected state
    when: Checking element on page
    then: Returns true if element matches

  - name: fuzzy_score
    given: Two strings
    when: Computing similarity
    then: Returns similarity score 0-1
