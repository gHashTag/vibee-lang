name: zig_prompt_template
version: "1.0.0"
language: zig
module: prompt_template

description: |
  Prompt Templates for LLM interaction.
  ReAct-style prompts with reasoning traces.
  Optimized for WebArena tasks.
  φ² + 1/φ² = 3

types:
  PromptRole:
    enum:
      - system
      - user
      - assistant

  PromptMessage:
    fields:
      role: PromptRole
      content: String

  PromptTemplate:
    fields:
      name: String
      system_prompt: String
      few_shot_examples: List<String>
      output_format: String

  PromptContext:
    fields:
      task_intent: String
      current_url: String
      observation: String
      history: List<String>
      available_actions: List<String>

behaviors:
  - name: build_system_prompt
    given: Task type and config
    when: Creating system message
    then: Returns system prompt string

  - name: build_user_prompt
    given: PromptContext
    when: Creating user message with observation
    then: Returns formatted user prompt

  - name: parse_response
    given: LLM response string
    when: Extracting thought and action
    then: Returns parsed thought and action

  - name: add_few_shot
    given: Template and examples
    when: Adding in-context examples
    then: Returns template with examples

  - name: format_observation
    given: Raw observation and max_tokens
    when: Formatting for prompt
    then: Returns truncated/formatted observation
