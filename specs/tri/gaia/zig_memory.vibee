name: zig_memory
version: "1.0.0"
language: zig
module: memory

description: |
  Agent Memory - Context and history management.
  Progressive summarization for long-horizon tasks.
  Key technique from ColorBrowserAgent (71.2%).
  φ² + 1/φ² = 3

types:
  MemoryType:
    enum:
      - working
      - episodic
      - semantic
      - procedural

  MemoryEntry:
    fields:
      entry_type: MemoryType
      content: String
      timestamp_ms: Int
      importance: Float
      step_number: Int

  WorkingMemory:
    fields:
      current_goal: String
      current_observation: String
      recent_actions: List<String>
      pending_subgoals: List<String>

  EpisodicMemory:
    fields:
      entries: List<MemoryEntry>
      max_entries: Int
      summary: String

  MemoryConfig:
    fields:
      working_memory_size: Int
      episodic_memory_size: Int
      summarization_threshold: Int
      importance_decay: Float

behaviors:
  - name: add_entry
    given: MemoryEntry
    when: Adding new memory
    then: Stores entry, triggers summarization if needed

  - name: get_context
    given: Max tokens
    when: Building context for LLM
    then: Returns formatted memory context

  - name: summarize
    given: List of entries
    when: Compressing old memories
    then: Returns summarized string

  - name: retrieve
    given: Query string
    when: Searching relevant memories
    then: Returns matching entries

  - name: clear
    given: Memory instance
    when: Resetting for new task
    then: Clears all entries
