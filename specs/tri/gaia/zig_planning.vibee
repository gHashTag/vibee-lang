name: zig_planning
version: "1.0.0"
language: zig
module: planning

description: |
  Task Planning and Decomposition.
  Hierarchical planning for complex tasks.
  Based on SteP (33.5%) high-level plans.
  φ² + 1/φ² = 3

types:
  PlanStatus:
    enum:
      - pending
      - in_progress
      - completed
      - failed
      - skipped

  SubGoal:
    fields:
      id: Int
      description: String
      status: PlanStatus
      parent_id: Option<Int>
      dependencies: List<Int>
      estimated_steps: Int

  Plan:
    fields:
      task_intent: String
      subgoals: List<SubGoal>
      current_subgoal_id: Int
      total_estimated_steps: Int

  PlanConfig:
    fields:
      max_subgoals: Int
      allow_replanning: Bool
      decomposition_depth: Int

behaviors:
  - name: create_plan
    given: Task intent
    when: Decomposing task into subgoals
    then: Returns Plan with subgoals

  - name: get_current_subgoal
    given: Plan
    when: Getting active subgoal
    then: Returns current SubGoal

  - name: advance
    given: Plan and completion status
    when: Moving to next subgoal
    then: Updates plan state

  - name: replan
    given: Plan and failure reason
    when: Adjusting plan after failure
    then: Returns updated Plan

  - name: is_complete
    given: Plan
    when: Checking if all subgoals done
    then: Returns true if plan complete
