name: zig_observation
version: "1.0.0"
language: zig
module: observation

description: |
  Page Observation Extraction.
  Extracts structured observations from browser state.
  Supports: HTML, accessibility tree, screenshot.
  φ² + 1/φ² = 3

types:
  ObservationType:
    enum:
      - html_raw
      - html_filtered
      - accessibility_tree
      - visible_text
      - screenshot_base64
      - dom_summary

  ElementObservation:
    fields:
      tag: String
      role: String
      name: String
      value: Option<String>
      bounds: String
      interactable: Bool

  PageObservation:
    fields:
      url: String
      title: String
      observation_type: ObservationType
      content: String
      elements: List<ElementObservation>
      viewport_width: Int
      viewport_height: Int

  ObservationConfig:
    fields:
      max_length: Int
      include_hidden: Bool
      filter_scripts: Bool
      extract_forms: Bool

behaviors:
  - name: extract_observation
    given: Browser state and ObservationConfig
    when: Extracting page observation
    then: Returns PageObservation

  - name: filter_html
    given: Raw HTML string
    when: Removing noise (scripts, styles, ads)
    then: Returns filtered HTML

  - name: summarize
    given: PageObservation and max_tokens
    when: Creating concise summary
    then: Returns summarized observation

  - name: extract_interactable
    given: PageObservation
    when: Finding clickable/typeable elements
    then: Returns list of ElementObservation
