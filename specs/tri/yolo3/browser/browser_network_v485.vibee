name: browser_network_v485
version: "485.0.0"
language: zig
module: browser_network_v485

types:
  NetworkRequest:
    fields:
      request_id: String
      method: String
      url: String
      headers: Map<String,String>
      body: Option<String>
      timestamp: Timestamp

  NetworkResponse:
    fields:
      request_id: String
      status_code: Int
      status_text: String
      headers: Map<String,String>
      body: String
      timing: Object

  NetworkTiming:
    fields:
      dns_lookup_ms: Int
      tcp_connect_ms: Int
      ssl_handshake_ms: Int
      request_sent_ms: Int
      waiting_ms: Int
      content_download_ms: Int

  NetworkInterceptor:
    fields:
      pattern: String
      action: String
      replacement_url: Option<String>
      mock_response: Option<String>

  WebSocket:
    fields:
      socket_id: String
      url: String
      state: String
      protocol: String
      messages_sent: Int
      messages_received: Int

behaviors:
  - name: intercept_request
    given: URL pattern
    when: Request matches
    then: Apply interception rules

  - name: mock_response
    given: Request pattern and mock data
    when: Request intercepted
    then: Return mock response

  - name: get_all_requests
    given: Page context
    when: Query network log
    then: Return all requests

  - name: wait_for_request
    given: URL pattern
    when: Wait for match
    then: Return matching request

  - name: block_resources
    given: Resource types
    when: Request made
    then: Block specified types

  - name: set_extra_headers
    given: Header map
    when: Any request
    then: Add headers

  - name: enable_caching
    given: Cache config
    when: Configure cache
    then: Apply settings

  - name: connect_websocket
    given: WebSocket URL
    when: Connect requested
    then: Establish connection

  - name: send_websocket_message
    given: Socket and message
    when: Send requested
    then: Transmit message
