name: browser_layout_v487
version: "487.0.0"
language: zig
module: browser_layout_v487

types:
  LayoutBox:
    fields:
      box_id: Int
      box_type: String
      content_width: Float
      content_height: Float
      padding: Object
      border: Object
      margin: Object

  FlexContainer:
    fields:
      direction: String
      wrap: String
      justify_content: String
      align_items: String
      align_content: String
      gap: Float

  GridContainer:
    fields:
      template_columns: String
      template_rows: String
      auto_flow: String
      gap_row: Float
      gap_column: Float

  LayoutConstraints:
    fields:
      min_width: Option<Float>
      max_width: Option<Float>
      min_height: Option<Float>
      max_height: Option<Float>

  InlineLayout:
    fields:
      line_boxes: List<Object>
      baseline: Float
      line_height: Float
      text_align: String

behaviors:
  - name: calculate_box_model
    given: Element styles
    when: Layout pass
    then: Compute box dimensions

  - name: layout_block
    given: Block element
    when: Block layout
    then: Position block and children

  - name: layout_inline
    given: Inline content
    when: Inline layout
    then: Create line boxes

  - name: layout_flex
    given: Flex container
    when: Flex layout
    then: Distribute flex items

  - name: layout_grid
    given: Grid container
    when: Grid layout
    then: Place grid items

  - name: resolve_percentages
    given: Containing block
    when: Percentage values
    then: Calculate actual values

  - name: handle_overflow
    given: Content overflow
    when: Content exceeds bounds
    then: Apply overflow rules

  - name: calculate_intrinsic_size
    given: Element
    when: Size query
    then: Return min/max content size

  - name: reflow_subtree
    given: Changed element
    when: Layout invalidated
    then: Recalculate affected nodes
