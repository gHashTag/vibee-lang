name: browser_paint_v488
version: "488.0.0"
language: zig
module: browser_paint_v488

types:
  PaintContext:
    fields:
      canvas_width: Int
      canvas_height: Int
      device_pixel_ratio: Float
      clip_rect: Object
      transform_matrix: Object

  PaintCommand:
    fields:
      command_type: String
      parameters: Object
      z_index: Int
      layer_id: Int

  DrawRect:
    fields:
      x: Float
      y: Float
      width: Float
      height: Float
      fill_color: Option<String>
      stroke_color: Option<String>
      stroke_width: Float

  DrawText:
    fields:
      text: String
      x: Float
      y: Float
      font_family: String
      font_size: Float
      color: String

  DrawImage:
    fields:
      image_id: String
      src_rect: Object
      dst_rect: Object
      opacity: Float

behaviors:
  - name: begin_paint
    given: Paint context
    when: Start paint pass
    then: Initialize canvas

  - name: draw_background
    given: Element background
    when: Paint background
    then: Fill background area

  - name: draw_border
    given: Border styles
    when: Paint borders
    then: Stroke border edges

  - name: draw_text
    given: Text content and styles
    when: Paint text
    then: Render glyphs

  - name: draw_image
    given: Image source and bounds
    when: Paint image
    then: Blit image data

  - name: apply_clip
    given: Clip path
    when: Clipping needed
    then: Set clip region

  - name: apply_transform
    given: Transform matrix
    when: Transform needed
    then: Update transform

  - name: draw_shadow
    given: Shadow parameters
    when: Shadow specified
    then: Render shadow

  - name: end_paint
    given: Paint context
    when: Paint complete
    then: Finalize and flush
