name: browser_js_v484
version: "484.0.0"
language: zig
module: browser_js_v484

types:
  JSRuntime:
    fields:
      context_id: String
      global_objects: List<String>
      memory_usage: Int
      execution_timeout_ms: Int

  JSValue:
    fields:
      value_type: String
      string_value: Option<String>
      number_value: Option<Float>
      bool_value: Option<Bool>
      object_ref: Option<String>

  JSFunction:
    fields:
      name: String
      parameters: List<String>
      body: String
      is_async: Bool
      is_generator: Bool

  JSPromise:
    fields:
      promise_id: String
      state: String
      resolved_value: Option<String>
      rejected_reason: Option<String>

  JSError:
    fields:
      error_type: String
      message: String
      stack_trace: String
      line_number: Int
      column_number: Int

behaviors:
  - name: evaluate_expression
    given: JavaScript expression
    when: Evaluate in context
    then: Return result value

  - name: call_function
    given: Function name and arguments
    when: Invoke function
    then: Return function result

  - name: define_function
    given: Function definition
    when: Add to context
    then: Register function

  - name: await_promise
    given: Promise reference
    when: Wait for resolution
    then: Return resolved value

  - name: handle_exception
    given: JS error
    when: Exception thrown
    then: Capture and report

  - name: inject_script
    given: Script content
    when: Inject into page
    then: Execute and return result

  - name: intercept_console
    given: Console methods
    when: Console called
    then: Capture output

  - name: get_global_variable
    given: Variable name
    when: Read global
    then: Return value

  - name: set_global_variable
    given: Name and value
    when: Set global
    then: Update context
