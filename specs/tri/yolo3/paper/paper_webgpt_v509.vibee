name: paper_webgpt_v509
version: "509.0.0"
language: zig
module: paper_webgpt_v509

types:
  WebGPTModel:
    fields:
      model_id: String
      base_model: String
      browsing_enabled: Bool
      citation_mode: Bool

  WebGPTQuery:
    fields:
      query_id: String
      question: String
      search_queries: List<String>
      browsed_pages: List<String>

  WebGPTResponse:
    fields:
      response_id: String
      answer: String
      citations: List<Object>
      confidence: Float
      sources_used: Int

  WebGPTCitation:
    fields:
      citation_id: String
      source_url: String
      quote: String
      relevance_score: Float

  WebGPTBrowsingAction:
    fields:
      action_type: String
      query: Option<String>
      url: Option<String>
      scroll_direction: Option<String>

behaviors:
  - name: process_query
    given: User question
    when: Query received
    then: Initialize browsing session

  - name: generate_search_query
    given: Question context
    when: Search needed
    then: Return search query

  - name: browse_page
    given: URL
    when: Browsing requested
    then: Extract page content

  - name: extract_relevant_info
    given: Page content and query
    when: Extraction needed
    then: Return relevant passages

  - name: synthesize_answer
    given: Collected information
    when: Synthesis needed
    then: Return answer with citations

  - name: verify_citations
    given: Answer and sources
    when: Verification needed
    then: Return verification result

  - name: compare_to_baseline
    given: WebGPT and baseline answers
    when: Comparison needed
    then: Return comparison metrics

  - name: human_feedback_training
    given: Human preferences
    when: Training requested
    then: Update model with RLHF

  - name: evaluate_factuality
    given: Answer and ground truth
    when: Factuality check
    then: Return factuality score
