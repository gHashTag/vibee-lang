name: agent_extractor_v494
version: "494.0.0"
language: zig
module: agent_extractor_v494

types:
  ExtractorAgent:
    fields:
      agent_id: String
      extraction_mode: String
      ml_enabled: Bool
      confidence_threshold: Float

  ExtractionSchema:
    fields:
      schema_id: String
      fields: List<Object>
      relationships: List<Object>
      validation_rules: List<String>

  ExtractedEntity:
    fields:
      entity_type: String
      value: String
      confidence: Float
      source_location: Object
      attributes: Map<String,String>

  ExtractionPattern:
    fields:
      pattern_id: String
      pattern_type: String
      regex: Option<String>
      xpath: Option<String>
      css_selector: Option<String>

  ExtractionResult:
    fields:
      success: Bool
      entities: List<Object>
      relationships: List<Object>
      confidence: Float
      processing_time_ms: Int

behaviors:
  - name: define_schema
    given: Schema definition
    when: Schema created
    then: Register extraction schema

  - name: extract_structured
    given: HTML and schema
    when: Structured extraction
    then: Return typed entities

  - name: extract_unstructured
    given: Text content
    when: NLP extraction
    then: Return discovered entities

  - name: extract_tables
    given: HTML tables
    when: Table extraction
    then: Return tabular data

  - name: extract_lists
    given: HTML lists
    when: List extraction
    then: Return list items

  - name: extract_metadata
    given: Page head
    when: Metadata extraction
    then: Return meta tags

  - name: extract_json_ld
    given: Script tags
    when: JSON-LD found
    then: Return structured data

  - name: merge_extractions
    given: Multiple results
    when: Merge needed
    then: Combine and dedupe

  - name: validate_extraction
    given: Extracted data
    when: Validation requested
    then: Check against schema
