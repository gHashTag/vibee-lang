name: agent_browser_v491
version: "491.0.0"
language: zig
module: agent_browser_v491

types:
  BrowserAgent:
    fields:
      agent_id: String
      name: String
      browser_engine: String
      current_url: String
      state: String
      capabilities: List<String>

  AgentTask:
    fields:
      task_id: String
      task_type: String
      target_url: String
      instructions: String
      timeout_ms: Int
      retry_count: Int

  AgentAction:
    fields:
      action_id: String
      action_type: String
      selector: Option<String>
      value: Option<String>
      timestamp: Timestamp

  AgentObservation:
    fields:
      observation_id: String
      page_state: String
      visible_elements: List<String>
      actionable_elements: List<String>
      screenshot: Option<String>

  AgentDecision:
    fields:
      decision_id: String
      reasoning: String
      chosen_action: String
      confidence: Float
      alternatives: List<String>

behaviors:
  - name: initialize_agent
    given: Agent configuration
    when: Create agent
    then: Return initialized browser agent

  - name: observe_page
    given: Current page state
    when: Observation requested
    then: Return page observation

  - name: decide_action
    given: Task and observation
    when: Decision needed
    then: Return reasoned action

  - name: execute_action
    given: Chosen action
    when: Execute requested
    then: Perform action on page

  - name: verify_result
    given: Expected outcome
    when: Action completed
    then: Verify success

  - name: handle_error
    given: Error condition
    when: Action fails
    then: Apply recovery strategy

  - name: report_progress
    given: Task state
    when: Progress update
    then: Return progress report

  - name: complete_task
    given: Task finished
    when: Goal achieved
    then: Return task result

  - name: shutdown_agent
    given: Active agent
    when: Shutdown requested
    then: Clean up resources
