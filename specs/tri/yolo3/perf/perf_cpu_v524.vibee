name: perf_cpu_v524
version: "524.0.0"
language: zig
module: perf_cpu_v524

types:
  CPUBenchmark:
    fields:
      benchmark_id: String
      workload_type: String
      threads: Int
      duration_ms: Int

  CPUMetrics:
    fields:
      utilization_percent: Float
      user_time_ms: Float
      system_time_ms: Float
      idle_time_ms: Float

  InstructionMetrics:
    fields:
      instructions_executed: Int
      cycles: Int
      ipc: Float
      cache_misses: Int

  ThreadMetrics:
    fields:
      thread_id: Int
      cpu_time_ms: Float
      wait_time_ms: Float
      context_switches: Int

  CPUBenchmarkResult:
    fields:
      benchmark_id: String
      cpu_metrics: Object
      instruction_metrics: Object
      thread_metrics: List<Object>
      hotspots: List<Object>

behaviors:
  - name: run_cpu_benchmark
    given: Workload
    when: Benchmark requested
    then: Return CPU metrics

  - name: run_instruction_benchmark
    given: Code path
    when: Benchmark requested
    then: Return instruction metrics

  - name: run_thread_benchmark
    given: Thread config
    when: Benchmark requested
    then: Return thread metrics

  - name: profile_hotspots
    given: Execution trace
    when: Profiling needed
    then: Return hotspots

  - name: analyze_parallelism
    given: Thread data
    when: Analysis needed
    then: Return parallelism analysis

  - name: compare_implementations
    given: Implementation list
    when: Comparison needed
    then: Return comparison

  - name: generate_report
    given: All metrics
    when: Report needed
    then: Return CPU report

  - name: suggest_optimizations
    given: Metrics
    when: Suggestions needed
    then: Return optimization tips

  - name: visualize_profile
    given: Profile data
    when: Visualization needed
    then: Return flame graph
