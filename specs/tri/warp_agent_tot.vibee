name: warp_agent_tot
version: "1.0.0"
language: zig
module: warp_agent_tot

description: |
  WARP Agent Tree-of-Thought - древовидное рассуждение
  Научные основы: Tree-of-Thoughts (Yao et al., 2023)
  Улучшение: +70% на Game of 24, +20% на Creative Writing
  φ² + 1/φ² = 3 | PHOENIX = 999

types:
  ThoughtNode:
    fields:
      node_id: Int
      parent_id: Option<Int>
      thought: String
      value: Float
      depth: Int
      children_ids: List<Int>

  ThoughtTree:
    fields:
      root_id: Int
      nodes: String
      max_depth: Int
      total_nodes: Int
      best_path: List<Int>

  ToTConfig:
    fields:
      branching_factor: Int
      max_depth: Int
      search_strategy: String
      value_threshold: Float
      pruning_enabled: Bool

  ToTResult:
    fields:
      best_path: List<String>
      final_answer: String
      nodes_explored: Int
      search_time_ms: Float

  SearchStrategy:
    fields:
      name: String
      params: String

behaviors:
  - name: generate_thoughts
    given: Текущий ThoughtNode
    when: Генерация дочерних мыслей
    then: Список новых ThoughtNode

  - name: evaluate_thought
    given: ThoughtNode для оценки
    when: Оценка качества мысли
    then: Float значение (0-1)

  - name: bfs_search
    given: ThoughtTree и ToTConfig
    when: Поиск в ширину
    then: ToTResult лучший путь

  - name: dfs_search
    given: ThoughtTree и ToTConfig
    when: Поиск в глубину
    then: ToTResult лучший путь

  - name: beam_search
    given: ThoughtTree и beam_width
    when: Лучевой поиск
    then: ToTResult топ-k путей

  - name: prune_tree
    given: ThoughtTree и threshold
    when: Отсечение плохих веток
    then: Оптимизированное ThoughtTree
