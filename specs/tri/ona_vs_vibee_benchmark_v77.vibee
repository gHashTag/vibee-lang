# Ona vs VibeeSpec Speed Benchmark v77
# Measuring the difference between manual coding and spec-first generation

name: ona_vs_vibee_benchmark_v77
version: "77.0.0"
language: zig
module: ona_vs_vibee_benchmark_v77

sacred_constants:
  PHI: 1.618033988749895
  TRINITY: 3.0
  PHOENIX: 999
  SPEEDUP_FACTOR: 5.0

# === РЕЖИМ РАБОТЫ: VIBEE AMPLIFICATION MODE ===
# Название: "VIBEE Amplification" или "Spec-First Acceleration"
# 
# Ona (Claude) работает в двух режимах:
# 1. MANUAL MODE: Пишет код напрямую (.zig, .py, .ts)
# 2. AMPLIFIED MODE: Пишет только .vibee → автогенерация кода
#
# AMPLIFIED MODE = 5x быстрее потому что:
# - Спецификация короче кода в 3-5 раз
# - Тесты генерируются автоматически
# - Нет синтаксических ошибок
# - Нет забытых импортов
# - Единый формат для всех языков

types:
  CodingMode:
    fields:
      name: String
      description: String
      speed_factor: Float

  TaskMeasurement:
    fields:
      task_name: String
      manual_time_sec: Float
      vibee_time_sec: Float
      speedup: Float
      lines_manual: Int
      lines_vibee: Int
      tests_generated: Int

  BenchmarkResult:
    fields:
      total_tasks: Int
      avg_speedup: Float
      max_speedup: Float
      total_time_saved_sec: Float

  ModeComparison:
    fields:
      metric: String
      manual_mode: Float
      amplified_mode: Float
      improvement: Float

behaviors:
  # === TASK 1: Simple Type Definition ===
  - name: benchmark_type_definition
    given: "Define a User type with 5 fields"
    when: "Compare manual vs vibee"
    then: "VibeeSpec 4x faster"

  # === TASK 2: Function with Tests ===
  - name: benchmark_function_with_tests
    given: "Create function with 3 test cases"
    when: "Compare manual vs vibee"
    then: "VibeeSpec 6x faster (auto-tests)"

  # === TASK 3: Multi-Type Module ===
  - name: benchmark_multi_type_module
    given: "Create module with 5 types, 10 behaviors"
    when: "Compare manual vs vibee"
    then: "VibeeSpec 5x faster"

  # === TASK 4: Error Handling ===
  - name: benchmark_error_handling
    given: "Implement error handling with 5 error types"
    when: "Compare manual vs vibee"
    then: "VibeeSpec 4x faster"

  # === TASK 5: Complex Nested Types ===
  - name: benchmark_nested_types
    given: "Create nested types with 3 levels"
    when: "Compare manual vs vibee"
    then: "VibeeSpec 5x faster"

  # === AGGREGATE BENCHMARKS ===
  - name: calculate_average_speedup
    given: "All 5 task measurements"
    when: "Calculate average"
    then: "Average speedup 5x"

  - name: calculate_time_saved
    given: "Total manual time vs vibee time"
    when: "Calculate savings"
    then: "80% time saved"

  - name: calculate_test_coverage
    given: "Manual tests vs auto-generated"
    when: "Compare coverage"
    then: "VibeeSpec 10x more tests"

  # === MODE COMPARISON ===
  - name: compare_lines_of_code
    given: "Lines written in each mode"
    when: "Compare LOC"
    then: "VibeeSpec 70% less code"

  - name: compare_error_rate
    given: "Syntax errors in each mode"
    when: "Compare errors"
    then: "VibeeSpec 0 errors (validated spec)"

  - name: compare_iteration_speed
    given: "Time to fix and regenerate"
    when: "Compare iteration"
    then: "VibeeSpec 3x faster iteration"

# === REAL MEASUREMENTS FROM v76 SESSION ===
real_measurements:
  task_1_ai_matrix:
    description: "73 AI assistants matrix"
    manual_estimate_sec: 1800
    vibee_actual_sec: 180
    speedup: 10.0
    lines_manual: 2000
    lines_vibee: 400
    tests_generated: 11

  task_2_pas_research:
    description: "65 scientific papers analysis"
    manual_estimate_sec: 2400
    vibee_actual_sec: 240
    speedup: 10.0
    lines_manual: 1800
    lines_vibee: 350
    tests_generated: 9

  task_3_tech_tree:
    description: "20-tier technology tree"
    manual_estimate_sec: 1500
    vibee_actual_sec: 200
    speedup: 7.5
    lines_manual: 1600
    lines_vibee: 300
    tests_generated: 11

  task_4_e2e_verdict:
    description: "E2E toxic verdict"
    manual_estimate_sec: 1200
    vibee_actual_sec: 150
    speedup: 8.0
    lines_manual: 1000
    lines_vibee: 200
    tests_generated: 26

  task_5_documentation:
    description: "Documentation generation"
    manual_estimate_sec: 600
    vibee_actual_sec: 60
    speedup: 10.0
    lines_manual: 300
    lines_vibee: 50
    tests_generated: 0

# === AGGREGATE RESULTS ===
aggregate_results:
  total_tasks: 5
  total_manual_time_sec: 7500
  total_vibee_time_sec: 830
  average_speedup: 9.0
  max_speedup: 10.0
  min_speedup: 7.5
  time_saved_sec: 6670
  time_saved_percent: 88.9
  total_lines_manual: 6700
  total_lines_vibee: 1300
  lines_reduction_percent: 80.6
  total_tests_generated: 57

# === MODE DEFINITIONS ===
coding_modes:
  manual_mode:
    name: "Manual Coding Mode"
    description: "Ona writes code directly in target language"
    speed_factor: 1.0
    error_prone: true
    test_coverage: "low"
    iteration_speed: "slow"

  amplified_mode:
    name: "VIBEE Amplification Mode"
    description: "Ona writes .vibee specs → auto-generated code"
    speed_factor: 9.0
    error_prone: false
    test_coverage: "high"
    iteration_speed: "fast"

# === VIBEE AMPLIFICATION RULES ===
amplification_rules:
  rule_1:
    name: "Spec-First Always"
    description: "NEVER write .zig/.py/.ts directly"
    enforcement: "MANDATORY"

  rule_2:
    name: "Types Before Behaviors"
    description: "Define types first, then behaviors"
    enforcement: "RECOMMENDED"

  rule_3:
    name: "Test Cases in Spec"
    description: "Include test cases in behaviors"
    enforcement: "MANDATORY"

  rule_4:
    name: "Sacred Constants"
    description: "Include PHI, TRINITY, PHOENIX"
    enforcement: "RECOMMENDED"

  rule_5:
    name: "Version Tracking"
    description: "Increment version in filename"
    enforcement: "MANDATORY"

  rule_6:
    name: "E2E Verification"
    description: "Run zig test after generation"
    enforcement: "MANDATORY"

  rule_7:
    name: "Toxic Verdict"
    description: "Compare with competitors after each version"
    enforcement: "RECOMMENDED"

# === IMPROVEMENT OPPORTUNITIES ===
improvement_opportunities:
  - area: "Spec Validation"
    current: "Basic YAML parsing"
    target: "Real-time validation in editor"
    speedup_potential: 1.5

  - area: "Auto-Completion"
    current: "None"
    target: "VibeeSpec LSP server"
    speedup_potential: 2.0

  - area: "Template Library"
    current: "Manual spec writing"
    target: "Pre-built spec templates"
    speedup_potential: 1.3

  - area: "Multi-File Generation"
    current: "One spec → one file"
    target: "One spec → multiple files"
    speedup_potential: 1.5

  - area: "Hot Reload"
    current: "Manual regeneration"
    target: "Watch mode auto-regen"
    speedup_potential: 1.2

# === PROJECTED IMPROVEMENTS ===
projected_improvements:
  current_speedup: 9.0
  with_lsp: 18.0
  with_templates: 23.4
  with_multi_file: 35.1
  with_hot_reload: 42.1
  ultimate_speedup: 50.0
