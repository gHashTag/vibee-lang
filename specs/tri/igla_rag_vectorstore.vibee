# iGLA RAG Vector Store
# Storage and retrieval of vector embeddings
# φ² + 1/φ² = 3 | V = n × 3^k × π^m × φ^p

name: igla_rag_vectorstore
version: "1.0.0"
language: zig
module: igla_rag_vectorstore

sacred_constants:
  phi: 1.618033988749895
  trinity: 3.0
  phoenix: 999

types:
  VectorStoreConfig:
    fields:
      dimensions: Int
      metric: String
      index_type: String
      persist_path: String

  VectorStore:
    fields:
      vectors: String
      metadata: String
      count: Int
      dimensions: Int

  VectorEntry:
    fields:
      id: String
      vector: String
      text: String
      metadata: String

  SearchResult:
    fields:
      id: String
      score: Float
      text: String
      metadata: String

  IndexStats:
    fields:
      total_vectors: Int
      dimensions: Int
      memory_mb: Float
      index_type: String

  VectorStoreMetrics:
    fields:
      searches_total: Int
      avg_search_ms: Float
      inserts_total: Int

behaviors:
  - name: create_store
    given: "Config"
    when: "Creation"
    then: "Empty vector store created"

  - name: add_vector
    given: "Vector and metadata"
    when: "Insertion"
    then: "Vector added to store"

  - name: add_batch
    given: "List of vectors"
    when: "Batch insertion"
    then: "All vectors added"

  - name: search
    given: "Query vector, k"
    when: "Search"
    then: "Top-K results returned"

  - name: delete_vector
    given: "Vector ID"
    when: "Deletion"
    then: "Vector removed"

  - name: save_store
    given: "File path"
    when: "Persistence"
    then: "Store saved to disk"

  - name: load_store
    given: "File path"
    when: "Loading"
    then: "Store loaded from disk"

  - name: get_stats
    given: "Store"
    when: "Stats request"
    then: "Index statistics returned"

  - name: phi_vectorstore_harmony
    given: "Vector store"
    when: "Harmony"
    then: "φ-optimal indexing"
