name: e2e_ollama_test_v22
version: "22.5.0"
language: zig
module: e2e_ollama_test_v22

types:
  OllamaTestConfig:
    fields:
      endpoint: String
      model: String
      timeout_ms: Int
      max_tokens: Int

  OllamaTestResult:
    fields:
      test_name: String
      passed: Bool
      duration_ms: Int
      tokens_used: Int
      error: Option<String>

  GenerationTest:
    fields:
      prompt: String
      expected_contains: List<String>
      max_tokens: Int

  OllamaTestSuite:
    fields:
      config: Object
      results: List<String>
      total_passed: Int
      total_failed: Int

behaviors:
  - name: create_test_suite
    given: OllamaTestConfig
    when: Initialize test suite
    then: OllamaTestSuite instance

  - name: test_health
    given: OllamaTestSuite
    when: Test Ollama health
    then: OllamaTestResult

  - name: test_list_models
    given: OllamaTestSuite
    when: Test list models
    then: OllamaTestResult

  - name: test_generate
    given: OllamaTestSuite and prompt
    when: Test generation
    then: OllamaTestResult

  - name: test_chat
    given: OllamaTestSuite and messages
    when: Test chat completion
    then: OllamaTestResult

  - name: test_action_generation
    given: OllamaTestSuite and observation
    when: Test action generation
    then: OllamaTestResult

  - name: test_reasoning
    given: OllamaTestSuite and goal
    When: Test reasoning
    then: OllamaTestResult

  - name: test_latency
    given: OllamaTestSuite
    When: Test response latency
    then: OllamaTestResult

  - name: run_all_tests
    given: OllamaTestSuite
    When: Run all Ollama tests
    then: Test results

  - name: benchmark_throughput
    given: OllamaTestSuite and iterations
    When: Benchmark throughput
    then: Throughput metrics

  - name: generate_report
    given: OllamaTestSuite
    When: Generate test report
    then: Report string
