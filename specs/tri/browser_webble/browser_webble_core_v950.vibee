# VIBEE YOLO MODE IX - browser_webble_core v950
name: browser_webble_core_v950
version: "9.0.0"
language: zig
module: browser_webble_core

sacred_constants:
  phi: 1.618033988749895
  phoenix: 999

types:
  BluetoothDevice:
    fields:
      id: String
      name: String
      gatt: String
      connected: Bool

  BluetoothService:
    fields:
      uuid: String
      is_primary: Bool
      device: String

  BluetoothCharacteristic:
    fields:
      uuid: String
      properties: List<String>
      value: String

behaviors:
  - name: request_device
    given: Device filters
    when: Request
    then: Web Bluetooth core device obtained
  - name: connect_gatt
    given: BluetoothDevice
    when: Connect
    then: GATT connected
  - name: get_service
    given: Service UUID
    when: Get
    then: Service obtained
  - name: read_characteristic
    given: BluetoothCharacteristic
    when: Read
    then: Value read
  - name: write_characteristic
    given: BluetoothCharacteristic and value
    when: Write
    then: Value written

test_cases:
  - name: test_browser_webble_core_request
    input: {filters: valid}
    expected: {device: obtained}
  - name: test_browser_webble_core_connect
    input: {device: valid}
    expected: {connected: true}
  - name: test_browser_webble_core_service
    input: {uuid: valid}
    expected: {service: obtained}
  - name: test_browser_webble_core_read
    input: {characteristic: valid}
    expected: {value: read}
  - name: test_phi_browser_webble_core
    input: {phi: 1.618033988749895}
    expected: {golden: true}
