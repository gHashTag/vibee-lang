name: e2e_cdp_test_v22
version: "22.5.0"
language: zig
module: e2e_cdp_test_v22

types:
  CDPTestConfig:
    fields:
      chrome_host: String
      chrome_port: Int
      test_url: String
      timeout_ms: Int

  CDPTestResult:
    fields:
      test_name: String
      passed: Bool
      duration_ms: Int
      error: Option<String>
      details: String

  PageState:
    fields:
      url: String
      title: String
      dom_ready: Bool
      elements_count: Int

  CDPTestSuite:
    fields:
      config: Object
      results: List<String>
      total_passed: Int
      total_failed: Int

behaviors:
  - name: create_test_suite
    given: CDPTestConfig
    when: Initialize test suite
    then: CDPTestSuite instance

  - name: test_connection
    given: CDPTestSuite
    when: Test CDP connection
    then: CDPTestResult

  - name: test_navigation
    given: CDPTestSuite and URL
    when: Test page navigation
    then: CDPTestResult

  - name: test_dom_query
    given: CDPTestSuite and selector
    when: Test DOM query
    then: CDPTestResult

  - name: test_click_action
    given: CDPTestSuite and selector
    when: Test click action
    then: CDPTestResult

  - name: test_type_action
    given: CDPTestSuite and selector and text
    when: Test type action
    then: CDPTestResult

  - name: test_screenshot
    given: CDPTestSuite
    when: Test screenshot capture
    then: CDPTestResult

  - name: test_evaluate_js
    given: CDPTestSuite and expression
    when: Test JS evaluation
    then: CDPTestResult

  - name: run_all_tests
    given: CDPTestSuite
    when: Run all CDP tests
    then: Test results

  - name: get_page_state
    given: CDPTestSuite
    When: Get current page state
    then: PageState

  - name: generate_report
    given: CDPTestSuite
    When: Generate test report
    then: Report string
