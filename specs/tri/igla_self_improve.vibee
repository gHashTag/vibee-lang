# VIBEE Specification - IGLA Self Improvement
# Agent self-improvement through reflection
# V = n × 3^k × π^m × φ^p | φ² + 1/φ² = 3 | PHOENIX = 999

name: igla_self_improve
version: "1.0.0"
language: zig
module: igla_self_improve

types:
  Reflection:
    fields:
      task_id: String
      outcome: String
      lessons: String
      improvements: String

  ImprovementPlan:
    fields:
      areas: String
      actions: String
      priority: Int

  PerformanceHistory:
    fields:
      task_results: String
      success_rate: Float
      trend: String

  SelfImproveConfig:
    fields:
      reflection_enabled: Bool
      learning_rate: Float
      history_size: Int

  SelfImproveMetrics:
    fields:
      reflections: Int
      improvements_applied: Int
      performance_gain: Float

behaviors:
  - name: reflect_on_task
    given: Task result
    when: Reflection
    then: Lessons learned

  - name: identify_weaknesses
    given: History
    when: Analysis
    then: Weaknesses identified

  - name: create_improvement_plan
    given: Weaknesses
    when: Planning
    then: Plan created

  - name: apply_improvement
    given: Plan
    when: Application
    then: Improvement applied

  - name: measure_progress
    given: History
    when: Measurement
    then: Progress measured

  - name: get_metrics
    given: Improver
    when: Metrics requested
    then: Self-improve metrics returned

test_cases:
  - name: test_reflect
    input: { task: "failed_task", outcome: "error" }
    expected: { has_lessons: true }

  - name: test_weaknesses
    input: { history: "task_history" }
    expected: { has_weaknesses: true }

  - name: test_plan
    input: { weaknesses: ["speed", "accuracy"] }
    expected: { has_plan: true }

  - name: test_metrics
    input: {}
    expected: { reflections: 0 }
