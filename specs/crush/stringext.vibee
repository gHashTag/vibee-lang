# stringext.vibee - String Extension Utilities
# Author: Dmitrii Vasilev
# Source: github.com/charmbracelet/crush/internal/stringext

name: stringext
version: "1.0.0"
language: zig
module: stringext

sacred_formula:
  V: "n × 3^k × π^m × φ^p × e^q"
  golden_identity: "φ² + 1/φ² = 3"
  self_evolution: enabled

creation_pattern:
  source: RawString
  transformer: StringProcessor
  result: TransformedString

# String manipulation utilities

behaviors:
  - name: capitalize
    given: "String with lowercase first letter"
    when: "Capitalize(text) is called"
    then: "Returns string with title case"
    test_cases:
      - name: capitalize_word
        input: "hello"
        expected: "Hello"
      - name: capitalize_sentence
        input: "hello world"
        expected: "Hello World"
      - name: capitalize_already_upper
        input: "HELLO"
        expected: "Hello"
      - name: capitalize_empty
        input: ""
        expected: ""
      - name: capitalize_single_char
        input: "a"
        expected: "A"

  - name: contains_any
    given: "String and list of substrings"
    when: "ContainsAny(str, args...) is called"
    then: "Returns true if any substring is found"
    test_cases:
      - name: contains_first
        input:
          str: "hello world"
          args: ["hello", "foo", "bar"]
        expected: true
      - name: contains_middle
        input:
          str: "hello world"
          args: ["foo", "world", "bar"]
        expected: true
      - name: contains_none
        input:
          str: "hello world"
          args: ["foo", "bar", "baz"]
        expected: false
      - name: contains_empty_args
        input:
          str: "hello"
          args: []
        expected: false
      - name: contains_empty_string
        input:
          str: ""
          args: ["hello"]
        expected: false
      - name: contains_partial_match
        input:
          str: "hello world"
          args: ["ell"]
        expected: true

algorithms:
  - name: title_case
    complexity: "O(n)"
    description: "Convert string to title case using Unicode-aware casing"
    steps:
      - "Iterate through words"
      - "Capitalize first letter of each word"
      - "Lowercase remaining letters"

  - name: contains_any_search
    complexity: "O(n * m) where n = string length, m = total args length"
    description: "Search for any of multiple substrings"
    steps:
      - "For each argument"
      - "Check if string contains argument"
      - "Return true on first match"
      - "Return false if no matches"

pas_analysis:
  current_algorithm: "Linear search with strings.Contains"
  current_complexity: "O(n * m)"
  theoretical_lower_bound: "Ω(n + m) with Aho-Corasick"
  gap: 1
  patterns_applicable:
    - pattern: PRE
      reason: "Aho-Corasick automaton for multiple pattern search"
    - pattern: HSH
      reason: "Rabin-Karp for substring matching"
  prediction:
    target: "ContainsAny"
    current: "O(n * m)"
    predicted: "O(n + m) with Aho-Corasick"
    confidence: 0.75
    timeline: "2026"
    reasoning: "Multiple pattern matching is well-studied problem"

dependencies:
  - "strings"
  - "golang.org/x/text/cases"
  - "golang.org/x/text/language"

test_generation:
  strategy: property_based
  coverage_target: 95
  edge_cases:
    - "empty string"
    - "empty args list"
    - "unicode characters"
    - "very long strings"
    - "overlapping patterns"
    - "case sensitivity"
