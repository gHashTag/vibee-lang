# log.vibee - Logging Module
# Author: Dmitrii Vasilev
# Source: github.com/charmbracelet/crush/internal/log

name: log
version: "1.0.0"
language: zig
module: log

sacred_formula:
  V: "n × 3^k × π^m × φ^p × e^q"
  golden_identity: "φ² + 1/φ² = 3"

creation_pattern:
  source: LogMessage
  transformer: LogHandler
  result: FormattedOutput

behaviors:
  - name: setup
    given: "Log file path and debug flag"
    when: "Setup is called"
    then: "Logger is initialized with rotation"

  - name: initialized
    given: "Logger state"
    when: "Initialized is called"
    then: "Returns true if setup was called"

  - name: recover_panic
    given: "Panic occurred"
    when: "RecoverPanic is called"
    then: "Logs panic and creates dump file"

dependencies:
  - "log/slog"
  - "runtime/debug"
