# fsext.vibee - Filesystem Extension Module
# Author: Dmitrii Vasilev
# Source: github.com/charmbracelet/crush/internal/fsext

name: fsext
version: "1.0.0"
language: zig
module: fsext

sacred_formula:
  V: "n × 3^k × π^m × φ^p × e^q"
  golden_identity: "φ² + 1/φ² = 3"

creation_pattern:
  source: DirectoryPath
  transformer: FilesystemWalker
  result: FileList

behaviors:
  - name: lookup
    given: "Directory and target files"
    when: "Lookup is called"
    then: "Returns paths to found targets walking up tree"

  - name: lookup_closest
    given: "Directory and single target"
    when: "LookupClosest is called"
    then: "Returns first found target path"

  - name: skip_hidden
    given: "Path to check"
    when: "SkipHidden is called"
    then: "Returns true for hidden files/common ignored dirs"

  - name: expand
    given: "String with shell symbols"
    when: "Expand is called"
    then: "Returns expanded string with ~ and env vars resolved"

dependencies:
  - "os"
  - "path/filepath"
