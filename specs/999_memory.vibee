# 999 Memory - Подсистема Памяти
# Author: Dmitrii Vasilev
# Version: 1.0.0

name: 999_memory
version: "1.0.0"
language: 999
module: ⲙⲛⲧⲥⲃⲱ

creation_pattern:
  source: MemoryRequirements
  transformer: AllocatorGenerator
  result: OptimizedAllocator

components:
  slab_allocator:
    name: "ⲤⲖⲀⲂ"
    description: "Slab аллокатор для объектов фиксированного размера"
    pas_target: "O(1) allocation"
    
  tlsf_allocator:
    name: "ⲦⲖⲤⲪ"
    description: "Two-Level Segregated Fit для общего назначения"
    pas_target: "O(1) allocation"
    
  zero_copy:
    name: "ⲌⲈⲢⲞ_ⲔⲞⲠⲒ"
    description: "Zero-copy передача данных"
    pas_target: "O(1) for large buffers"

behaviors:
  - name: allocate_small
    given: "Запрос < 256 байт"
    when: "Вызов аллокации"
    then: "Выделяется из slab за O(1)"
    
  - name: allocate_large
    given: "Запрос > 4KB"
    when: "Вызов аллокации"
    then: "Выделяется через TLSF за O(1)"
    
  - name: zero_copy_transfer
    given: "Буфер для передачи"
    when: "Передача между процессами"
    then: "Передаётся через page remapping без копирования"
