# VIBEE Agent Framework v1.1.0
# AI agent for browser automation (Eko analog)

name: vibee_agent_framework
version: "1.1.0"
language: zig
module: vibee_agent_framework

types:
  AgentConfig:
    fields:
      model: String
      max_steps: Int
      timeout_ms: Int
      verbose: Bool

  AgentStep:
    fields:
      step_num: Int
      thought: String
      action: String
      action_input: Object
      observation: String
      duration_ms: Int

  AgentTask:
    fields:
      id: String
      goal: String
      status: String
      steps: List<AgentStep>
      result: Option<String>
      total_duration_ms: Int

  AgentTool:
    fields:
      name: String
      description: String
      parameters: Object

  ToolResult:
    fields:
      success: Bool
      result: Option<Object>
      error: Option<String>

  AgentMemory:
    fields:
      task_history: List<AgentTask>
      learned_patterns: List<Object>

behaviors:
  - name: create_agent
    given: "Config"
    when: "Create"
    then: "Initialize agent instance"

  - name: run_task
    given: "Goal"
    when: "Run"
    then: "Execute agent loop"

  - name: think
    given: "Current state"
    when: "Think"
    then: "Generate thought and action"

  - name: act
    given: "Action and input"
    when: "Act"
    then: "Execute tool"

  - name: observe
    given: "Action result"
    when: "Observe"
    then: "Process observation"

  - name: tool_navigate
    given: "URL"
    when: "Navigate"
    then: "Go to URL"

  - name: tool_click
    given: "Selector"
    when: "Click"
    then: "Click element"

  - name: tool_type
    given: "Selector and text"
    when: "Type"
    then: "Enter text"

  - name: tool_scroll
    given: "Direction"
    when: "Scroll"
    then: "Scroll page"

  - name: tool_screenshot
    given: "Options"
    when: "Screenshot"
    then: "Capture page"

  - name: tool_extract
    given: "Selector"
    when: "Extract"
    then: "Get element text"

  - name: tool_wait
    given: "Milliseconds"
    when: "Wait"
    then: "Pause execution"

  - name: tool_done
    given: "Result"
    when: "Done"
    then: "Complete task"

  - name: save_memory
    given: "Task result"
    when: "Save"
    then: "Store in memory"

  - name: recall_similar
    given: "Goal"
    when: "Recall"
    then: "Find similar past tasks"

test_cases:
  - name: test_agent_creation
    input: { model: "gpt-4" }
    expected: { created: true }

  - name: test_simple_navigation
    input: { goal: "go to google.com" }
    expected: { completed: true }

  - name: test_click_task
    input: { goal: "click the search button" }
    expected: { completed: true }

  - name: test_form_fill
    input: { goal: "fill the login form" }
    expected: { completed: true }

  - name: test_multi_step
    input: { goal: "search for VIBEE" }
    expected: { steps_gt: 1 }

  - name: test_memory_recall
    input: { goal: "login again" }
    expected: { pattern_found: true }
