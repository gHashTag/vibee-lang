# VIBEE Monaco Integration v1.1.0
# VS Code editor core integration

name: vibee_monaco_integration
version: "1.1.0"
language: zig
module: vibee_monaco_integration

types:
  EditorConfig:
    fields:
      theme: String
      font_size: Int
      font_family: String
      line_numbers: Bool
      minimap: Bool
      word_wrap: String
      tab_size: Int

  EditorModel:
    fields:
      uri: String
      language: String
      content: String
      version: Int

  CursorPosition:
    fields:
      line: Int
      column: Int

  SelectionRange:
    fields:
      start_line: Int
      start_column: Int
      end_line: Int
      end_column: Int

  CompletionItem:
    fields:
      label: String
      kind: Int
      detail: Option<String>
      insert_text: String
      sort_text: Option<String>

  Diagnostic:
    fields:
      range: SelectionRange
      message: String
      severity: Int
      source: String

  EditorAction:
    fields:
      id: String
      label: String
      keybinding: Option<String>
      run: String

behaviors:
  - name: create_editor
    given: "Container and config"
    when: "Create"
    then: "Initialize Monaco editor"

  - name: set_model
    given: "Model"
    when: "Set"
    then: "Load content into editor"

  - name: get_value
    given: "Editor"
    when: "Get"
    then: "Return current content"

  - name: set_value
    given: "Content"
    when: "Set"
    then: "Replace editor content"

  - name: get_position
    given: "Editor"
    when: "Get"
    then: "Return cursor position"

  - name: set_position
    given: "Position"
    when: "Set"
    then: "Move cursor"

  - name: get_selection
    given: "Editor"
    when: "Get"
    then: "Return selection range"

  - name: set_selection
    given: "Range"
    when: "Set"
    then: "Select text range"

  - name: insert_text
    given: "Position and text"
    when: "Insert"
    then: "Add text at position"

  - name: format_document
    given: "Editor"
    when: "Format"
    then: "Auto-format code"

  - name: trigger_suggest
    given: "Editor"
    when: "Trigger"
    then: "Show autocomplete"

  - name: set_diagnostics
    given: "Diagnostics list"
    when: "Set"
    then: "Show error markers"

  - name: register_action
    given: "Action"
    when: "Register"
    then: "Add custom action"

  - name: set_theme
    given: "Theme name"
    when: "Set"
    then: "Change editor theme"

  - name: focus_editor
    given: "Editor"
    when: "Focus"
    then: "Give keyboard focus"

test_cases:
  - name: test_create_editor
    input: { theme: "vs-dark" }
    expected: { created: true }

  - name: test_set_get_value
    input: { content: "const x = 1;" }
    expected: { matches: true }

  - name: test_cursor_position
    input: { line: 5, column: 10 }
    expected: { position_set: true }

  - name: test_format_document
    input: { language: "javascript" }
    expected: { formatted: true }

  - name: test_autocomplete
    input: { trigger: true }
    expected: { suggestions_shown: true }

  - name: test_diagnostics
    input: { errors: 2 }
    expected: { markers_shown: true }
