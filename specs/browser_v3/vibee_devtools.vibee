# VIBEE DevTools v1.1.0
# Developer tools integration

name: vibee_devtools
version: "1.1.0"
language: zig
module: vibee_devtools

types:
  DevToolsConfig:
    fields:
      mode: String
      dock_side: String
      width: Int
      height: Int

  ConsoleMessage:
    fields:
      level: String
      text: String
      source: String
      timestamp: Timestamp

  NetworkRequest:
    fields:
      id: String
      url: String
      method: String
      status: Int
      duration_ms: Int
      size_bytes: Int

  ElementInspection:
    fields:
      node_id: Int
      tag_name: String
      attributes: Object
      computed_styles: Object
      bounding_box: Object

behaviors:
  - name: open_devtools
    given: "Config"
    when: "Open"
    then: "Show DevTools window"

  - name: close_devtools
    given: "DevTools"
    when: "Close"
    then: "Hide DevTools"

  - name: toggle_devtools
    given: "Current state"
    when: "Toggle"
    then: "Show/hide DevTools"

  - name: inspect_element
    given: "Coordinates"
    when: "Inspect"
    then: "Select element in DevTools"

  - name: get_console_messages
    given: "Filter"
    when: "Get"
    then: "Return console messages"

  - name: get_network_requests
    given: "Filter"
    when: "Get"
    then: "Return network log"

  - name: evaluate_in_console
    given: "Expression"
    when: "Evaluate"
    then: "Return result"

  - name: set_breakpoint
    given: "File and line"
    when: "Set"
    then: "Add breakpoint"

  - name: clear_console
    given: "DevTools"
    when: "Clear"
    then: "Clear console messages"

test_cases:
  - name: test_open_devtools
    input: { mode: "detach" }
    expected: { opened: true }

  - name: test_inspect_element
    input: { x: 100, y: 200 }
    expected: { element_selected: true }

  - name: test_console_messages
    input: { level: "error" }
    expected: { messages_returned: true }

  - name: test_network_requests
    input: { url_contains: "api" }
    expected: { requests_returned: true }

  - name: test_evaluate
    input: { expression: "1+1" }
    expected: { result: 2 }
