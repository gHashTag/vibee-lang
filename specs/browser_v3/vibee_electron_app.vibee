# VIBEE Electron App v1.1.0
# Full-featured Electron application

name: vibee_electron_app
version: "1.1.0"
language: zig
module: vibee_electron_app

constants:
  PHI: 1.6180339887498949
  TRINITY: 3.0
  PHOENIX: 999
  TOOLBAR_HEIGHT: 52
  MIN_WIDTH: 1000
  MIN_HEIGHT: 600

types:
  AppConfig:
    fields:
      width: Int
      height: Int
      min_width: Int
      min_height: Int
      dev_mode: Bool

  WindowState:
    fields:
      width: Int
      height: Int
      x: Int
      y: Int
      maximized: Bool
      fullscreen: Bool

  PanelState:
    fields:
      browser_visible: Bool
      chat_visible: Bool
      editor_visible: Bool
      browser_width: Float
      chat_width: Float
      editor_width: Float

  IPCChannel:
    fields:
      name: String
      handler: String

  AppEvent:
    fields:
      type: String
      payload: Object
      timestamp: Timestamp

behaviors:
  - name: create_app
    given: "App configuration"
    when: "Initialize"
    then: "Create Electron app with BrowserViews"

  - name: create_main_window
    given: "Window config"
    when: "App ready"
    then: "Create main BrowserWindow"

  - name: create_browser_view
    given: "Bounds"
    when: "Initialize"
    then: "Create Chromium WebView"

  - name: create_chat_view
    given: "Bounds"
    when: "Initialize"
    then: "Create chat panel view"

  - name: create_editor_view
    given: "Bounds"
    when: "Initialize"
    then: "Create Monaco editor view"

  - name: setup_ipc_handlers
    given: "Channel list"
    when: "Setup"
    then: "Register all IPC handlers"

  - name: setup_shortcuts
    given: "Shortcut list"
    when: "Setup"
    then: "Register global shortcuts"

  - name: handle_window_resize
    given: "New size"
    when: "Resize event"
    then: "Update all panel bounds"

  - name: save_window_state
    given: "Current state"
    when: "Close"
    then: "Persist window state"

  - name: restore_window_state
    given: "Saved state"
    when: "Open"
    then: "Restore window position/size"

test_cases:
  - name: test_app_creation
    input: { width: 1600, height: 1000 }
    expected: { created: true }

  - name: test_window_state
    input: { maximized: false }
    expected: { state_valid: true }

  - name: test_ipc_setup
    input: { channels: 10 }
    expected: { all_registered: true }

  - name: test_shortcuts
    input: { shortcuts: 5 }
    expected: { all_registered: true }
