# VIBEE Vibecoding v1.1.0
# Chat-to-code workflow

name: vibee_vibecoding
version: "1.1.0"
language: zig
module: vibee_vibecoding

types:
  VibecodeRequest:
    fields:
      prompt: String
      context: Option<String>
      language: String
      file_path: Option<String>

  VibecodeResponse:
    fields:
      code: String
      explanation: String
      language: String
      tokens_used: Int

  CodeAction:
    fields:
      type: String
      range: Option<Object>
      new_code: String
      description: String

  DiffView:
    fields:
      original: String
      modified: String
      hunks: List<Object>

  VibecodeSession:
    fields:
      id: String
      history: List<Object>
      current_file: Option<String>

behaviors:
  - name: generate_code
    given: "Prompt and context"
    when: "Generate"
    then: "Return code with explanation"

  - name: explain_code
    given: "Code snippet"
    when: "Explain"
    then: "Return explanation"

  - name: refactor_code
    given: "Code and instruction"
    when: "Refactor"
    then: "Return improved code"

  - name: fix_error
    given: "Code and error"
    when: "Fix"
    then: "Return corrected code"

  - name: add_tests
    given: "Code"
    when: "Generate tests"
    then: "Return test code"

  - name: apply_to_editor
    given: "Code action"
    when: "Apply"
    then: "Insert/replace in editor"

  - name: show_diff
    given: "Original and modified"
    when: "Show"
    then: "Display diff view"

  - name: accept_changes
    given: "Diff"
    when: "Accept"
    then: "Apply all changes"

  - name: reject_changes
    given: "Diff"
    when: "Reject"
    then: "Discard changes"

  - name: iterate_on_code
    given: "Feedback"
    when: "Iterate"
    then: "Improve based on feedback"

test_cases:
  - name: test_code_generation
    input: { prompt: "function to add two numbers" }
    expected: { code_generated: true }

  - name: test_code_explanation
    input: { code: "const x = 1" }
    expected: { explanation_exists: true }

  - name: test_refactoring
    input: { instruction: "use arrow function" }
    expected: { refactored: true }

  - name: test_error_fix
    input: { error: "undefined variable" }
    expected: { fixed: true }

  - name: test_diff_view
    input: { original: "a", modified: "b" }
    expected: { diff_shown: true }

  - name: test_apply_to_editor
    input: { action: "insert" }
    expected: { applied: true }
