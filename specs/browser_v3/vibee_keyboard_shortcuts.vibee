# VIBEE Keyboard Shortcuts v1.1.0
# Global and local hotkeys

name: vibee_keyboard_shortcuts
version: "1.1.0"
language: zig
module: vibee_keyboard_shortcuts

types:
  Shortcut:
    fields:
      id: String
      keys: String
      action: String
      scope: String
      description: String

  ShortcutEvent:
    fields:
      shortcut_id: String
      timestamp: Timestamp
      prevented: Bool

  KeyCombo:
    fields:
      key: String
      ctrl: Bool
      alt: Bool
      shift: Bool
      meta: Bool

behaviors:
  - name: register_shortcut
    given: "Shortcut definition"
    when: "Register"
    then: "Add to shortcut map"

  - name: unregister_shortcut
    given: "Shortcut ID"
    when: "Unregister"
    then: "Remove from map"

  - name: handle_keydown
    given: "Key event"
    when: "Handle"
    then: "Execute matching shortcut"

  - name: parse_key_combo
    given: "Key string"
    when: "Parse"
    then: "Return KeyCombo"

  - name: format_key_combo
    given: "KeyCombo"
    when: "Format"
    then: "Return display string"

  - name: get_shortcuts_for_scope
    given: "Scope"
    when: "Get"
    then: "Return matching shortcuts"

  - name: show_shortcut_help
    given: "All shortcuts"
    when: "Show"
    then: "Display help overlay"

  - name: customize_shortcut
    given: "ID and new keys"
    when: "Customize"
    then: "Update shortcut"

test_cases:
  - name: test_register_shortcut
    input: { keys: "Ctrl+L", action: "focus-url" }
    expected: { registered: true }

  - name: test_handle_keydown
    input: { key: "l", ctrl: true }
    expected: { action_executed: true }

  - name: test_parse_combo
    input: { keys: "Cmd+Shift+P" }
    expected: { meta: true, shift: true, key: "p" }

  - name: test_format_combo
    input: { meta: true, key: "k" }
    expected: { display: "âŒ˜K" }

  - name: test_scope_filter
    input: { scope: "editor" }
    expected: { shortcuts_gt: 0 }
