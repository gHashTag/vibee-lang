# VIBEE φ-Splitter v4.0.0
# Draggable panel splitter with φ snap points

name: vibee_phi_splitter
version: "4.0.0"
language: zig
module: vibee_phi_splitter

constants:
  PHI: 1.6180339887498948482
  PHOENIX: 999
  SNAP_THRESHOLD: 20
  MIN_PANEL_SIZE: 100

types:
  Splitter:
    fields:
      id: String
      orientation: String
      position: Float
      min: Float
      max: Float

  SplitterState:
    fields:
      dragging: Bool
      start_position: Float
      current_position: Float

  SnapPoint:
    fields:
      position: Float
      label: String
      strength: Float

  ResizeEvent:
    fields:
      splitter_id: String
      old_position: Float
      new_position: Float
      snapped: Bool

behaviors:
  - name: create_splitter
    given: Orientation and bounds
    when: Create splitter
    then: Splitter at φ position

  - name: start_drag
    given: Splitter and position
    when: Mouse down
    then: Drag started

  - name: update_drag
    given: Splitter and position
    when: Mouse move
    then: Position updated

  - name: end_drag
    given: Splitter
    when: Mouse up
    then: Drag ended with snap

  - name: snap_to_phi
    given: Position
    when: Near φ point
    then: Snapped position

  - name: get_snap_points
    given: Container size
    when: Calculate snaps
    then: SnapPoint list (φ, 1/φ, 0.5)

  - name: set_position
    given: Splitter and position
    when: Set directly
    then: Position set

  - name: reset_to_phi
    given: Splitter
    when: Reset
    then: Position at φ ratio

  - name: double_click_reset
    given: Splitter
    when: Double click
    then: Reset to φ

  - name: keyboard_adjust
    given: Splitter and delta
    when: Arrow key
    then: Position adjusted

  - name: animate_to
    given: Splitter and target
    when: Animate
    then: Smooth transition

test_cases:
  - name: test_snap_to_phi
    input:
      position: 0.60
      container: 1000
    expected:
      snapped_position: 0.618

  - name: test_double_click_reset
    input:
      current: 0.5
    expected:
      new_position: 0.618
