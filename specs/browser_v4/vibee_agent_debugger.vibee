# VIBEE Agent Debugger v4.0.0
# AI agent for debugging and error analysis

name: vibee_agent_debugger
version: "4.0.0"
language: zig
module: vibee_agent_debugger

constants:
  PHI: 1.6180339887498948482
  PHOENIX: 999
  MAX_STACK_FRAMES: 100
  BREAKPOINT_LIMIT: 50

types:
  DebugAgent:
    fields:
      id: String
      model: String
      debug_session: Option<String>
      breakpoints: List<Object>

  DebugSession:
    fields:
      id: String
      language: String
      state: String
      current_frame: Int

  StackFrame:
    fields:
      id: Int
      name: String
      file: String
      line: Int
      column: Int
      scopes: List<Object>

  Variable:
    fields:
      name: String
      value: String
      type: String
      children: List<Object>

  Breakpoint:
    fields:
      id: Int
      file: String
      line: Int
      condition: Option<String>
      hit_count: Int

  ErrorAnalysis:
    fields:
      error_type: String
      message: String
      root_cause: String
      suggested_fix: String
      confidence: Float

behaviors:
  - name: create_debugger
    given: Model config
    when: Initialize
    then: DebugAgent ready

  - name: analyze_error
    given: Error and context
    when: Analyze
    then: ErrorAnalysis

  - name: suggest_breakpoints
    given: Code and issue
    when: Analyze
    then: Breakpoint list

  - name: explain_stack_trace
    given: Stack frames
    when: Explain
    then: Explanation

  - name: find_root_cause
    given: Error and code
    when: Trace
    then: Root cause

  - name: suggest_fix
    given: Error
    when: Generate fix
    then: Fix suggestion

  - name: set_breakpoint
    given: File and line
    when: Set
    then: Breakpoint set

  - name: remove_breakpoint
    given: Breakpoint ID
    when: Remove
    then: Breakpoint removed

  - name: step_over
    given: Session
    when: Step
    then: Next line

  - name: step_into
    given: Session
    when: Step into
    then: Inside function

  - name: step_out
    given: Session
    when: Step out
    then: Outside function

  - name: evaluate_expression
    given: Expression
    when: Evaluate
    then: Result value

  - name: watch_variable
    given: Variable name
    when: Watch
    then: Variable tracked

test_cases:
  - name: test_analyze_error
    input:
      error: "TypeError: undefined is not a function"
    expected:
      has_root_cause: true

  - name: test_suggest_fix
    input:
      error: "null reference"
    expected:
      has_suggestion: true
