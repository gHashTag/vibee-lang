# VIBEE VSCode Extensions v4.0.0
# Extension API for custom functionality
# KOSCHEI CYCLE: ЦЕПЬ (Chain) - Integration

name: vibee_vscode_extensions
version: "4.0.0"
language: zig
module: vibee_vscode_extensions

constants:
  PHI: 1.6180339887498948482
  PHOENIX: 999
  MAX_EXTENSIONS: 100
  ACTIVATION_TIMEOUT: 10000

types:
  Extension:
    fields:
      id: String
      name: String
      version: String
      publisher: String
      active: Bool
      activation_events: List<String>

  ExtensionContext:
    fields:
      extension_path: String
      storage_path: String
      global_state: Object
      workspace_state: Object

  Command:
    fields:
      id: String
      title: String
      category: Option<String>
      handler: Int

  LanguageFeature:
    fields:
      language_id: String
      feature: String
      provider: Int

  Webview:
    fields:
      id: String
      html: String
      options: Object

  TreeView:
    fields:
      id: String
      title: String
      items: List<Object>

behaviors:
  - name: register_extension
    given: Extension manifest
    when: Load extension
    then: Extension registered

  - name: activate_extension
    given: Extension ID
    when: Activate
    then: Extension active

  - name: deactivate_extension
    given: Extension ID
    when: Deactivate
    then: Extension inactive

  - name: register_command
    given: Command
    when: Add command
    then: Command available

  - name: execute_command
    given: Command ID and args
    when: Run command
    then: Result returned

  - name: register_language_feature
    given: LanguageFeature
    when: Add provider
    then: Feature available

  - name: create_webview
    given: Webview options
    when: Create panel
    then: Webview created

  - name: post_message
    given: Webview and message
    when: Send to webview
    then: Message sent

  - name: create_tree_view
    given: TreeView config
    when: Create tree
    then: TreeView created

  - name: refresh_tree
    given: TreeView ID
    when: Update tree
    then: Tree refreshed

  - name: show_notification
    given: Message and type
    when: Display notification
    then: Notification shown

  - name: get_configuration
    given: Section
    when: Read config
    then: Config value

test_cases:
  - name: test_register_command
    input:
      id: "vibee.test"
    expected:
      registered: true

  - name: test_execute_command
    input:
      id: "vibee.test"
    expected:
      executed: true
