# VIBEE CDP Input v4.0.0
# Input simulation with 5ms click, 2ms type targets
# KOSCHEI CYCLE: ИГЛА (Needle) - Precision

name: vibee_cdp_input
version: "4.0.0"
language: zig
module: vibee_cdp_input

constants:
  PHI: 1.6180339887498948482
  PHOENIX: 999
  TARGET_CLICK_MS: 5
  TARGET_TYPE_MS: 2
  DEFAULT_DELAY_MS: 0

types:
  MouseButton:
    fields:
      button: String
      click_count: Int

  MouseEvent:
    fields:
      type: String
      x: Float
      y: Float
      button: String
      click_count: Int
      modifiers: Int

  KeyEvent:
    fields:
      type: String
      key: String
      code: String
      text: Option<String>
      modifiers: Int

  TouchPoint:
    fields:
      x: Float
      y: Float
      radius_x: Float
      radius_y: Float
      force: Float
      id: Int

  GestureEvent:
    fields:
      type: String
      x: Float
      y: Float
      scale: Float
      rotation: Float

  DragData:
    fields:
      items: List<Object>
      drag_operations_mask: Int

behaviors:
  - name: click
    given: X, Y coordinates
    when: Mouse click
    then: Click performed in <5ms

  - name: double_click
    given: X, Y coordinates
    when: Double click
    then: Double click performed

  - name: right_click
    given: X, Y coordinates
    when: Context menu click
    then: Right click performed

  - name: mouse_move
    given: X, Y coordinates
    when: Move mouse
    then: Mouse moved

  - name: mouse_down
    given: Button
    when: Press button
    then: Button pressed

  - name: mouse_up
    given: Button
    when: Release button
    then: Button released

  - name: type_text
    given: Text string
    when: Type characters
    then: Text typed in <2ms per char

  - name: press_key
    given: Key code
    when: Press key
    then: Key pressed

  - name: key_down
    given: Key code
    when: Key down
    then: Key held

  - name: key_up
    given: Key code
    when: Key up
    then: Key released

  - name: touch_start
    given: TouchPoint list
    when: Touch begin
    then: Touch started

  - name: touch_move
    given: TouchPoint list
    when: Touch move
    then: Touch moved

  - name: touch_end
    given: TouchPoint list
    when: Touch end
    then: Touch ended

  - name: drag_and_drop
    given: Start and end coords
    when: Drag operation
    then: Drag completed

  - name: scroll
    given: X, Y, delta_x, delta_y
    when: Scroll
    then: Scroll performed

test_cases:
  - name: test_click_speed
    input:
      x: 100
      y: 100
    expected:
      duration_ms_max: 5

  - name: test_type_speed
    input:
      text: "hello"
    expected:
      duration_ms_max: 10
