# VIBEE VSCode Core v4.0.0
# Embedded VSCode/Monaco with φ-layout integration
# KOSCHEI CYCLE: ДУБ (Oak) - Foundation

name: vibee_vscode_core
version: "4.0.0"
language: zig
module: vibee_vscode_core

constants:
  PHI: 1.6180339887498948482
  PHOENIX: 999
  MONACO_VERSION: "0.45.0"
  EXTENSION_HOST_TIMEOUT: 30000

types:
  EditorConfig:
    fields:
      theme: String
      font_family: String
      font_size: Int
      tab_size: Int
      word_wrap: String
      minimap_enabled: Bool

  EditorInstance:
    fields:
      id: String
      model_uri: String
      language: String
      value: String
      cursor_position: Object

  TextModel:
    fields:
      uri: String
      language_id: String
      version: Int
      line_count: Int

  EditorAction:
    fields:
      id: String
      label: String
      keybinding: Option<String>
      context_menu_group: Option<String>

  Decoration:
    fields:
      range: Object
      options: Object

  CompletionItem:
    fields:
      label: String
      kind: Int
      detail: Option<String>
      insert_text: String
      documentation: Option<String>

behaviors:
  - name: create_editor
    given: Container and config
    when: Initialize Monaco
    then: EditorInstance created

  - name: set_value
    given: Editor and text
    when: Set content
    then: Content updated

  - name: get_value
    given: Editor
    when: Get content
    then: Text returned

  - name: set_language
    given: Editor and language
    when: Change language
    then: Syntax highlighting updated

  - name: set_theme
    given: Theme name
    when: Change theme
    then: Theme applied

  - name: add_action
    given: EditorAction
    when: Register action
    then: Action available

  - name: trigger_action
    given: Action ID
    when: Execute action
    then: Action executed

  - name: set_decorations
    given: Decoration list
    when: Add decorations
    then: Decorations rendered

  - name: reveal_line
    given: Line number
    when: Scroll to line
    then: Line visible

  - name: set_selection
    given: Range
    when: Select text
    then: Selection updated

  - name: format_document
    given: Editor
    when: Format code
    then: Code formatted

  - name: provide_completions
    given: Position
    when: Request completions
    then: CompletionItem list

  - name: go_to_definition
    given: Position
    when: Navigate to definition
    then: Definition location

test_cases:
  - name: test_create_editor
    input:
      language: "typescript"
    expected:
      created: true

  - name: test_set_value
    input:
      value: "const x = 1;"
    expected:
      line_count: 1
