name: math_solver
version: "1.0.0"
language: zig
module: math_solver
target: math.zig
description: Mathematical equation solver using VIBEE's universal transformation pattern

behaviors:
  - name: solve_quadratic
    given: Quadratic equation ax² + bx + c = 0
    when: Solve for x requested
    then: Solutions returned (real or complex)
    test_cases:
      - name: simple_quadratic
        input: {a: 1, b: -5, c: 6}  # x² - 5x + 6 = 0
        expected: {x1: 3.0, x2: 2.0}
      - name: perfect_square
        input: {a: 1, b: -2, c: 1}  # x² - 2x + 1 = 0
        expected: {x1: 1.0, x2: 1.0}
      - name: no_real_solutions
        input: {a: 1, b: 0, c: 1}   # x² + 1 = 0
        expected: {complex: true}

  - name: solve_linear
    given: Linear equation ax + b = 0
    when: Solve for x requested
    then: Solution returned
    test_cases:
      - name: simple_linear
        input: {a: 2, b: -6}  # 2x - 6 = 0
        expected: {x: 3.0}
      - name: negative_solution
        input: {a: 3, b: 9}   # 3x + 9 = 0
        expected: {x: -3.0}

  - name: evaluate_expression
    given: Mathematical expression with variable
    when: Evaluate at specific value
    then: Result returned
    test_cases:
      - name: quadratic_at_2
        input: {expr: "x^2 + 2*x + 1", x: 2}
        expected: {result: 9.0}  # 4 + 4 + 1 = 9

types:
  Equation:
    coefficients: List<Float>
    degree: Int
    
  Solution:
    real: List<Float>
    complex: List<Complex>
    
  Complex:
    real: Float
    imaginary: Float
    
  QuadraticSolution:
    x1: Float
    x2: Float
    discriminant: Float
    has_real_solutions: Bool

functions:
  - name: solve_quadratic
    params: {a: Float, b: Float, c: Float}
    returns: Result<QuadraticSolution, Error>
    
  - name: solve_linear
    params: {a: Float, b: Float}
    returns: Result<Float, Error>
    
  - name: calculate_discriminant
    params: {a: Float, b: Float, c: Float}
    returns: Float
    
  - name: evaluate_polynomial
    params: {coefficients: List<Float>, x: Float}
    returns: Float

math_formulas:
  quadratic_formula:
    # x = (-b ± √(b² - 4ac)) / 2a
    discriminant: "b² - 4ac"
    solution_plus: "(-b + √discriminant) / 2a"
    solution_minus: "(-b - √discriminant) / 2a"
    
  linear_formula:
    # x = -b / a
    solution: "-b / a"

imports:
  - std
  - std.math
