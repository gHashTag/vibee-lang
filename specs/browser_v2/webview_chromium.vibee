# VIBEE Browser WebView Chromium v1.0.0
# Real Chromium WebView with full browsing

name: webview_chromium
version: "1.0.0"
language: zig
module: webview_chromium

description: |
  Real Chromium WebView for web browsing.
  Supports navigation, history, and page lifecycle.

types:
  NavigationEntry:
    fields:
      url: String
      title: String
      timestamp: Timestamp

  PageInfo:
    fields:
      url: String
      title: String
      favicon: Option<String>
      loading: Bool
      progress: Float

  HistoryState:
    fields:
      entries: List<NavigationEntry>
      current_index: Int
      can_go_back: Bool
      can_go_forward: Bool

  LoadEvent:
    fields:
      type: String
      url: String
      timestamp: Timestamp
      duration: Option<Int>

  SecurityInfo:
    fields:
      secure: Bool
      certificate: Option<String>
      protocol: String

behaviors:
  - name: navigate_to_url
    given: "URL string"
    when: "Navigate"
    then: "Load URL in WebView"

  - name: go_back
    given: "History available"
    when: "Back pressed"
    then: "Navigate to previous page"

  - name: go_forward
    given: "Forward history available"
    when: "Forward pressed"
    then: "Navigate to next page"

  - name: reload_page
    given: "Current page"
    when: "Reload pressed"
    then: "Refresh current page"

  - name: stop_loading
    given: "Page loading"
    when: "Stop pressed"
    then: "Cancel page load"

  - name: get_page_info
    given: "Loaded page"
    when: "Query info"
    then: "Return page metadata"

  - name: get_history
    given: "WebView"
    when: "Query history"
    then: "Return navigation history"

  - name: execute_javascript
    given: "JS code"
    when: "Execute"
    then: "Run in page context"

  - name: capture_screenshot
    given: "Viewport"
    when: "Capture"
    then: "Return image data"

test_cases:
  - name: test_navigation
    input: { url: "https://example.com" }
    expected: { loaded: true }

  - name: test_history_back
    input: { history_length: 2 }
    expected: { can_go_back: true }

  - name: test_js_execution
    input: { code: "document.title" }
    expected: { result_type: "string" }
