# VIBEE Browser AI Agent v1.0.0
# Agentic browser automation

name: ai_agent
version: "1.0.0"
language: zig
module: ai_agent

description: |
  AI agent for autonomous browser automation.
  Implements ReAct pattern with tool calling.

types:
  AgentConfig:
    fields:
      model: String
      max_steps: Int
      timeout: Int
      tools: List<String>

  AgentStep:
    fields:
      step_num: Int
      thought: String
      action: String
      action_input: Object
      observation: String

  AgentTool:
    fields:
      name: String
      description: String
      parameters: Object

  AgentTask:
    fields:
      id: String
      goal: String
      steps: List<AgentStep>
      status: String
      result: Option<String>

  BrowserAction:
    fields:
      type: String
      selector: Option<String>
      value: Option<String>
      x: Option<Int>
      y: Option<Int>

behaviors:
  - name: create_agent
    given: "Agent config"
    when: "Initialize"
    then: "Create agent instance"

  - name: run_task
    given: "Goal description"
    when: "Execute"
    then: "Run agent loop until done"

  - name: think
    given: "Current state"
    when: "Reason"
    then: "Generate thought and action"

  - name: execute_action
    given: "Action"
    when: "Execute"
    then: "Perform browser action"

  - name: observe
    given: "Action result"
    when: "Observe"
    then: "Extract observation"

  - name: tool_click
    given: "Selector or coordinates"
    when: "Click"
    then: "Click element"

  - name: tool_type
    given: "Selector and text"
    when: "Type"
    then: "Enter text"

  - name: tool_navigate
    given: "URL"
    when: "Navigate"
    then: "Go to URL"

  - name: tool_scroll
    given: "Direction and amount"
    when: "Scroll"
    then: "Scroll page"

  - name: tool_screenshot
    given: "Options"
    when: "Capture"
    then: "Take screenshot"

  - name: tool_extract
    given: "Selector"
    when: "Extract"
    then: "Get element text"

test_cases:
  - name: test_agent_creation
    input: { model: "gpt-4" }
    expected: { created: true }

  - name: test_simple_task
    input: { goal: "Click the login button" }
    expected: { completed: true }

  - name: test_tool_click
    input: { selector: "#button" }
    expected: { clicked: true }

  - name: test_tool_type
    input: { selector: "#input", text: "hello" }
    expected: { typed: true }
