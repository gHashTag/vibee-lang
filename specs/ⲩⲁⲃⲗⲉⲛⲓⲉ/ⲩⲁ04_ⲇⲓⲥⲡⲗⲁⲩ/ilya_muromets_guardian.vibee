# Илья Муромец - Страж Архитектуры VIBEE
# Защита структуры проекта от нарушений
# Author: Dmitrii Vasilev

name: ilya_muromets_guardian
version: "1.0.0"
language: 999
module: ⲓⲗⲓⲁ_ⲙⲩⲣⲟⲙⲉⲧⲥ

# ═══════════════════════════════════════════════════════════════════════════════
# ИЛЬЯ МУРОМЕЦ - БОГАТЫРЬ-СТРАЖ VIBEE
# ═══════════════════════════════════════════════════════════════════════════════

creation_pattern:
  source: ProjectStructure
  transformer: IlyaMurometsGuardian
  result: ProtectedArchitecture

# ═══════════════════════════════════════════════════════════════════════════════
# СВЯЩЕННЫЕ ЗАКОНЫ СТРУКТУРЫ
# ═══════════════════════════════════════════════════════════════════════════════

sacred_laws:
  law_1_specs_only_vibee:
    description: "В папке specs/ только .vibee файлы"
    pattern: "specs/*.vibee"
    violation: "COMPILATION_ERROR"
    punishment: "Файл удаляется, агент предупреждается"
    
  law_2_output_only_999:
    description: "Весь сгенерированный код только в папке 999/"
    pattern: "999/*.999"
    violation: "COMPILATION_ERROR"
    punishment: "Файл перемещается в 999/"
    
  law_3_no_legacy:
    description: "Запрещены legacy файлы в корне и везде"
    forbidden_extensions: [".html", ".css", ".js", ".ts", ".jsx", ".tsx", ".zig"]
    exception: "runtime/runtime.html"
    violation: "CRITICAL_ERROR"
    punishment: "Файл удаляется немедленно"
    
  law_4_coptic_names:
    description: "Все .999 файлы должны иметь коптские имена"
    alphabet: "ⲁⲃⲅⲇⲉⲍⲏⲑⲓⲕⲗⲙⲛⲝⲟⲡⲣⲥⲧⲩⲫⲭⲯⲱ"
    violation: "WARNING"
    action: "Переименовать в коптский"
    
  law_5_consistent_output:
    description: "Output должен следовать паттерну n × 3^k × π^m"
    pattern: "ternary_pi_pattern"
    violation: "INCONSISTENCY_ERROR"

# ═══════════════════════════════════════════════════════════════════════════════
# СТРУКТУРА ПРОЕКТА (ЗАЩИЩЁННАЯ)
# ═══════════════════════════════════════════════════════════════════════════════

protected_structure:
  root: "/workspaces/vibee-lang"
  
  directories:
    specs:
      path: "specs/"
      allowed: [".vibee"]
      purpose: "Спецификации и инструкции"
      guardian: "Илья Муромец"
      
    output_999:
      path: "999/"
      allowed: [".999"]
      purpose: "Сгенерированный код на языке 999"
      guardian: "Илья Муромец"
      
    runtime:
      path: "runtime/"
      allowed: ["runtime.html"]
      purpose: "Единственный HTML интерпретатор"
      guardian: "Илья Муромец"
      
    src:
      path: "src/vibeec/"
      allowed: [".zig"]
      purpose: "Компилятор VIBEE (исключение для Zig)"
      guardian: "Илья Муромец"
      
    docs:
      path: "docs/"
      allowed: [".md"]
      purpose: "Документация"
      guardian: "Илья Муромец"

# ═══════════════════════════════════════════════════════════════════════════════
# ЗАЩИТНЫЕ МЕХАНИЗМЫ
# ═══════════════════════════════════════════════════════════════════════════════

protection_mechanisms:
  pre_commit_hook:
    description: "Проверка перед коммитом"
    checks:
      - no_legacy_files
      - specs_only_vibee
      - output_only_999
      - coptic_names
      
  file_watcher:
    description: "Мониторинг файловой системы"
    actions:
      - detect_violation
      - alert_developer
      - auto_fix_if_possible
      
  ci_guardian:
    description: "CI/CD проверка"
    fail_on:
      - legacy_files_detected
      - wrong_directory_placement
      - non_coptic_999_names

# ═══════════════════════════════════════════════════════════════════════════════
# ИЛЬЯ МУРОМЕЦ - BEHAVIORS
# ═══════════════════════════════════════════════════════════════════════════════

behaviors:
  - name: guard_specs_directory
    given: Файл создаётся в specs/
    when: Расширение не .vibee
    then: COMPILATION_ERROR, файл отклоняется
    
  - name: guard_999_directory
    given: Файл создаётся в 999/
    when: Расширение не .999
    then: COMPILATION_ERROR, файл отклоняется
    
  - name: guard_root_directory
    given: Файл создаётся в корне
    when: Расширение .zig, .html, .css, .js, .ts
    then: CRITICAL_ERROR, файл удаляется
    
  - name: enforce_coptic_names
    given: .999 файл создаётся
    when: Имя не на коптском
    then: WARNING, предложить переименование
    
  - name: validate_output_pattern
    given: Output генерируется
    when: Не соответствует n × 3^k × π^m
    then: INCONSISTENCY_ERROR, пересчитать

# ═══════════════════════════════════════════════════════════════════════════════
# КОМАНДЫ СТРАЖА
# ═══════════════════════════════════════════════════════════════════════════════

guardian_commands:
  scan:
    description: "Сканировать проект на нарушения"
    command: "ilya scan"
    
  fix:
    description: "Автоматически исправить нарушения"
    command: "ilya fix"
    
  report:
    description: "Отчёт о состоянии защиты"
    command: "ilya report"
    
  enforce:
    description: "Принудительное применение законов"
    command: "ilya enforce"

# ═══════════════════════════════════════════════════════════════════════════════
# КЛЯТВА ИЛЬИ МУРОМЦА
# ═══════════════════════════════════════════════════════════════════════════════

oath:
  text: |
    Я, Илья Муромец, клянусь защищать архитектуру VIBEE:
    - Ни один legacy файл не пройдёт
    - Все спецификации будут в specs/
    - Весь код будет в 999/
    - Коптский алфавит будет соблюдён
    - Паттерн n × 3^k × π^m будет консистентен
    
    Стою на страже. Не пропущу врага.
