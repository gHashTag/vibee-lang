# ═══════════════════════════════════════════════════════════════════════════════
# LITERARY CHAPTER GENERATOR — Генератор Глав Книги 999
# ═══════════════════════════════════════════════════════════════════════════════
#
# Генерирует 999 глав с:
# - Тремя системами восприятия (Интуиция, Анализ, Синтез)
# - Священными Формулами V = n × 3^k × π^m × φ^p
# - 27 PAS паттернами
# - 27 сказочными зачинами
#
# Author: Dmitrii Vasilev <reactnativeinitru@gmail.com>
# ═══════════════════════════════════════════════════════════════════════════════

name: literary_chapter_generator
version: "999.0.0"
language: tridevyatitsa
module: ⲣⲁⲍⲩⲙ.ⲗⲓⲧⲉⲣⲁⲧⲩⲣⲁ.chapter_generator

# ═══════════════════════════════════════════════════════════════════════════════
# CREATION PATTERN
# ═══════════════════════════════════════════════════════════════════════════════

creation_pattern:
  source: ChapterNumber
  transformer: LiteraryChapterGenerator
  result: Chapter999

# ═══════════════════════════════════════════════════════════════════════════════
# СВЯЩЕННЫЕ КОНСТАНТЫ
# ═══════════════════════════════════════════════════════════════════════════════

constants:
  π: 3.14159265358979323846
  φ: 1.61803398874989484820
  e: 2.71828182845904523536
  
  # Структурные
  TOTAL_CHAPTERS: 999
  VOLUMES: 3
  BOOKS_PER_VOLUME: 9
  CHAPTERS_PER_BOOK: 37
  LANGUAGES: 50
  FORMATS: 6

# ═══════════════════════════════════════════════════════════════════════════════
# ТРИ СИСТЕМЫ ВОСПРИЯТИЯ
# ═══════════════════════════════════════════════════════════════════════════════

perception_systems:
  intuition:
    name_ru: "Интуиция"
    name_en: "Intuition"
    system_number: 1
    weight: 0.20
    content_type: "Сказки, метафоры, образы"
    
  analysis:
    name_ru: "Анализ"
    name_en: "Analysis"
    system_number: 2
    weight: 0.60
    content_type: "Формулы, код, доказательства"
    
  synthesis:
    name_ru: "Синтез"
    name_en: "Synthesis"
    system_number: 3
    weight: 0.20
    content_type: "Мудрости, инсайты, Ого!"

# ═══════════════════════════════════════════════════════════════════════════════
# 27 СКАЗОЧНЫХ ЗАЧИНОВ (3³)
# ═══════════════════════════════════════════════════════════════════════════════

fairy_openings:
  # Группа 1: Классические (9)
  - "В тридевятом царстве, в тридесятом государстве жил-был программист..."
  - "Жил-был программист по имени Иван, и было у него три задачи..."
  - "Давным-давно, когда компьютеры ещё говорили на языке единиц и нулей..."
  - "За тридевять земель, за тридевять морей стоял терем алгоритмов..."
  - "В некотором царстве, в некотором государстве правил царь-процессор..."
  - "Было у царя три сына-программиста: старший, средний и младший..."
  - "Жила-была функция рекурсивная, и звали её Фибоначчи..."
  - "Стоял на распутье камень, а на камне написано было три пути..."
  - "Текла река данных через три царства: Медное, Серебряное и Золотое..."
  
  # Группа 2: Квестовые (9)
  - "Отправился Иван-программист в путь-дорогу искать оптимальный алгоритм..."
  - "Пришла к Ивану задача непростая, да делать нечего — надо решать..."
  - "Призвал царь-заказчик Ивана и дал ему задачу невыполнимую..."
  - "Напал на царство Кощей-баг бессмертный, и никто не мог его победить..."
  - "Три дня и три ночи бился Иван с задачей, да всё без толку..."
  - "Нашёл Иван перо Жар-птицы, а на нём код волшебный написан..."
  - "Спустился Иван в подземелье памяти, где хранились данные древние..."
  - "Взлетел Иван на ковре-самолёте async в облака вычислений..."
  - "Достал Иван меч-кладенец оптимизации и пошёл на Змея-Горыныча..."
  
  # Группа 3: Мудрости (9)
  - "Однажды Иван заглянул в код древний и увидел там чудо чудное..."
  - "Открыл Иван книгу мудрости и прочёл там слова заветные..."
  - "Явилась Ивану во сне Василиса Премудрая и молвила..."
  - "Встретил Иван старца-архитектора, и тот поведал ему тайну..."
  - "Росло в саду дерево алгоритмов, и на каждой ветке — решение..."
  - "Собрались три богатыря-алгоритма: QuickSort, MergeSort и TrinitySort..."
  - "Летела Жар-птица над царством кода, роняя перья мудрости..."
  - "Встретил Иван Бабу-Ягу legacy-кода, и та дала ему клубок рефакторинга..."
  - "И понял Иван великую тайну Тройки, что правит всем миром..."

# ═══════════════════════════════════════════════════════════════════════════════
# 9 ШАБЛОНОВ МУДРОСТЕЙ (3²)
# ═══════════════════════════════════════════════════════════════════════════════

wisdom_templates:
  - "И понял Иван-программист {ordinal} истину:\n{wisdom}"
  - "И открылась Ивану тайна:\n{wisdom}"
  - "И молвила Василиса Премудрая:\n{wisdom}"
  - "И записал Иван в книгу мудрости:\n{wisdom}"
  - "И увидел Иван связь между мирами:\n{wisdom}"
  - "И преобразился Иван:\n{wisdom}"
  - "И вернулся Иван с даром:\n{wisdom}"
  - "И научил Иван других:\n{wisdom}"
  - "И стал Иван мастером:\n{wisdom}"

# ═══════════════════════════════════════════════════════════════════════════════
# СТРУКТУРА ГЛАВЫ
# ═══════════════════════════════════════════════════════════════════════════════

chapter_structure:
  introduction:
    weight: 0.20
    components:
      - name: "fairy_opening"
        weight: 0.10
        system: "intuition"
      - name: "surprise"
        weight: 0.05
        system: "synthesis"
      - name: "promise"
        weight: 0.05
        system: "analysis"
        
  body:
    weight: 0.60
    components:
      - name: "level_1_simple"
        weight: 0.20
        system: "intuition"
      - name: "level_2_medium"
        weight: 0.20
        system: "analysis"
      - name: "level_3_deep"
        weight: 0.20
        system: "analysis"
        
  conclusion:
    weight: 0.20
    components:
      - name: "exercises"
        weight: 0.10
        levels: ["simple", "medium", "hard"]
      - name: "wisdom"
        weight: 0.05
        system: "synthesis"
      - name: "bridge"
        weight: 0.05
        system: "intuition"

# ═══════════════════════════════════════════════════════════════════════════════
# BEHAVIORS
# ═══════════════════════════════════════════════════════════════════════════════

behaviors:
  - name: "generate_chapter"
    given: "Номер главы от 1 до 999"
    when: "Вызывается generate(number)"
    then: "Возвращается полная глава Chapter999"
    test_cases:
      - name: "chapter_1"
        input: {number: 1}
        expected: {has_fairy_opening: true, has_wisdom: true}
      - name: "chapter_999"
        input: {number: 999}
        expected: {sacred_value: 999.0}

  - name: "get_fairy_opening"
    given: "Номер главы"
    when: "Выбираем сказочный зачин"
    then: "Возвращается зачин по формуле chapter % 27"
    test_cases:
      - name: "chapter_27"
        input: {number: 27}
        expected: {opening_index: 0}
      - name: "chapter_28"
        input: {number: 28}
        expected: {opening_index: 1}

  - name: "calculate_sacred_value"
    given: "Номер главы"
    when: "Вычисляем священное значение"
    then: "Возвращается V = n × 3^k × π^m × φ^p"
    test_cases:
      - name: "chapter_999"
        input: {number: 999}
        expected: {n: 37, k: 3, m: 0, p: 0, value: 999.0}

  - name: "balance_systems"
    given: "Три системы восприятия"
    when: "Суммируем веса"
    then: "Сумма равна 1.0"
    test_cases:
      - name: "total_weight"
        input: {}
        expected: {sum: 1.0}

# ═══════════════════════════════════════════════════════════════════════════════
# AUTHOR
# ═══════════════════════════════════════════════════════════════════════════════

author:
  name: "Dmitrii Vasilev"
  email: "reactnativeinitru@gmail.com"
  project: "999 OS / VIBEE"
