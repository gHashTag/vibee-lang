name: dna_translation
version: "1.0.0"
language: zig
module: dna_translation
target: dna.zig
description: DNA to protein translation using VIBEE's universal transformation pattern (genetic code)

behaviors:
  - name: translate_codon
    given: DNA codon (3 nucleotides)
    when: Translation to amino acid requested
    then: Amino acid returned
    test_cases:
      - name: atg_to_methionine
        input: {codon: "ATG"}
        expected: {amino_acid: "Met", symbol: "M"}
      - name: taa_to_stop
        input: {codon: "TAA"}
        expected: {amino_acid: "Stop", symbol: "*"}
      - name: ggg_to_glycine
        input: {codon: "GGG"}
        expected: {amino_acid: "Gly", symbol: "G"}

  - name: translate_sequence
    given: DNA sequence
    when: Translation to protein requested
    then: Amino acid sequence returned
    test_cases:
      - name: simple_sequence
        input: {dna: "ATGGGG"}
        expected: {protein: "MG"}  # Met-Gly
      - name: with_stop_codon
        input: {dna: "ATGGGGTAA"}
        expected: {protein: "MG*"}  # Met-Gly-Stop

  - name: transcribe_dna_to_rna
    given: DNA sequence
    when: Transcription requested
    then: RNA sequence returned (T â†’ U)
    test_cases:
      - name: simple_transcription
        input: {dna: "ATGC"}
        expected: {rna: "AUGC"}

types:
  Nucleotide:
    - A  # Adenine
    - T  # Thymine (DNA)
    - G  # Guanine
    - C  # Cytosine
    - U  # Uracil (RNA)
    
  Codon:
    nucleotides: String  # 3 characters
    
  AminoAcid:
    name: String       # Full name
    symbol: String     # Single letter
    codon: String      # DNA codon
    
  Protein:
    sequence: String   # Amino acid symbols
    length: Int
    
  GeneticCode:
    codon_table: Map<String, AminoAcid>

functions:
  - name: translate_codon
    params: {codon: String}
    returns: Result<AminoAcid, Error>
    
  - name: translate_sequence
    params: {dna: String}
    returns: Result<Protein, Error>
    
  - name: transcribe_dna_to_rna
    params: {dna: String}
    returns: Result<String, Error>
    
  - name: reverse_complement
    params: {dna: String}
    returns: Result<String, Error>

genetic_code:
  # Standard genetic code (codon table)
  # Format: DNA_CODON -> Amino_Acid
  
  # Start codon
  ATG: {name: "Methionine", symbol: "M"}
  
  # Stop codons
  TAA: {name: "Stop", symbol: "*"}
  TAG: {name: "Stop", symbol: "*"}
  TGA: {name: "Stop", symbol: "*"}
  
  # Glycine
  GGG: {name: "Glycine", symbol: "G"}
  GGA: {name: "Glycine", symbol: "G"}
  GGT: {name: "Glycine", symbol: "G"}
  GGC: {name: "Glycine", symbol: "G"}
  
  # Alanine
  GCG: {name: "Alanine", symbol: "A"}
  GCA: {name: "Alanine", symbol: "A"}
  GCT: {name: "Alanine", symbol: "A"}
  GCC: {name: "Alanine", symbol: "A"}
  
  # Valine
  GTG: {name: "Valine", symbol: "V"}
  GTA: {name: "Valine", symbol: "V"}
  GTT: {name: "Valine", symbol: "V"}
  GTC: {name: "Valine", symbol: "V"}
  
  # Leucine
  TTG: {name: "Leucine", symbol: "L"}
  TTA: {name: "Leucine", symbol: "L"}
  CTG: {name: "Leucine", symbol: "L"}
  CTA: {name: "Leucine", symbol: "L"}
  CTT: {name: "Leucine", symbol: "L"}
  CTC: {name: "Leucine", symbol: "L"}

imports:
  - std
  - std.mem
  - std.hash_map
