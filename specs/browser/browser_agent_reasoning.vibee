# VIBEE Browser Agent Reasoning v0.0.1
# LLM-based planning and execution

name: browser_agent_reasoning
version: "0.0.1"
language: zig
module: browser_agent_reasoning

description: |
  Agent reasoning engine implementing ReAct, Chain-of-Thought,
  Tree-of-Thought, and Plan-Execute-Reflect patterns.

types:
  AgentType:
    description: "Type of AI agent"
    fields:
      name: String
      capabilities: List<String>
      model: String

  Thought:
    description: "Single reasoning step"
    fields:
      id: Int
      content: String
      confidence: Float
      timestamp: Timestamp

  Action:
    description: "Agent action to execute"
    fields:
      id: Int
      type: String
      target: String
      params: Object
      status: String

  Observation:
    description: "Result of action"
    fields:
      action_id: Int
      success: Bool
      result: String
      error: Option<String>

  ReActStep:
    description: "ReAct pattern step"
    fields:
      thought: Thought
      action: Action
      observation: Observation

  ChainOfThought:
    description: "Chain-of-Thought reasoning"
    fields:
      question: String
      steps: List<Thought>
      conclusion: String

  TreeNode:
    description: "Tree-of-Thought node"
    fields:
      id: Int
      thought: Thought
      children: List<Int>
      score: Float

  TreeOfThought:
    description: "Tree-of-Thought structure"
    fields:
      root: Int
      nodes: List<TreeNode>
      best_path: List<Int>

  Plan:
    description: "Execution plan"
    fields:
      id: String
      goal: String
      steps: List<Action>
      status: String

  Reflection:
    description: "Post-execution reflection"
    fields:
      plan_id: String
      success: Bool
      learnings: List<String>
      improvements: List<String>

  AgentMemory:
    description: "Agent long-term memory"
    fields:
      agent_id: String
      experiences: List<Reflection>
      knowledge: Object

behaviors:
  - name: create_agent
    given: "Agent configuration"
    when: "Initialize agent"
    then: "Return configured agent"

  - name: think
    given: "Current context"
    when: "Generate thought"
    then: "Return reasoning step"

  - name: act
    given: "Thought and context"
    when: "Execute action"
    then: "Return action result"

  - name: observe
    given: "Action result"
    when: "Process observation"
    then: "Return structured observation"

  - name: react_step
    given: "Context and goal"
    when: "Execute ReAct step"
    then: "Return thought-action-observation"

  - name: chain_of_thought
    given: "Complex question"
    when: "Reason step by step"
    then: "Return reasoning chain"

  - name: tree_of_thought
    given: "Problem with multiple paths"
    when: "Explore solution tree"
    then: "Return best path"

  - name: create_plan
    given: "Goal description"
    when: "Generate plan"
    then: "Return action sequence"

  - name: execute_plan
    given: "Plan"
    when: "Run all steps"
    then: "Return execution results"

  - name: reflect
    given: "Execution results"
    when: "Analyze outcome"
    then: "Return learnings"

  - name: update_memory
    given: "Reflection"
    when: "Store experience"
    then: "Update agent memory"

  - name: retrieve_relevant
    given: "Current context"
    when: "Query memory"
    then: "Return relevant experiences"

test_cases:
  - name: test_create_agent
    input: { name: "browser_agent", model: "gpt-4" }
    expected: { created: true }

  - name: test_react_step
    input: { goal: "click button" }
    expected: { has_thought: true, has_action: true }

  - name: test_chain_of_thought
    input: { question: "How to fill form?" }
    expected: { steps_count_gt: 2 }

  - name: test_plan_creation
    input: { goal: "Login to website" }
    expected: { steps_count_gt: 3 }

  - name: test_reflection
    input: { success: true }
    expected: { has_learnings: true }

  - name: test_memory_update
    input: { experience: "login_success" }
    expected: { stored: true }

  - name: test_tree_exploration
    input: { branches: 3, depth: 2 }
    expected: { best_path_found: true }
