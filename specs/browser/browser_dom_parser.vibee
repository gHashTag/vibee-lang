# VIBEE Browser DOM Parser v0.0.1
name: browser_dom_parser
version: "0.0.1"
language: zig
module: browser_dom_parser

types:
  DOMElement:
    fields:
      node_id: Int
      tag_name: String
      attributes: Object
      text_content: Option<String>
      children: List<Int>
      parent: Option<Int>

  Selector:
    fields:
      type: String
      value: String
      
  QueryResult:
    fields:
      selector: String
      elements: List<DOMElement>
      count: Int

  AccessibilityNode:
    fields:
      role: String
      name: String
      description: Option<String>
      focusable: Bool

behaviors:
  - name: query_selector
    given: "CSS selector"
    when: "Query DOM"
    then: "Return first matching element"

  - name: query_selector_all
    given: "CSS selector"
    when: "Query DOM"
    then: "Return all matching elements"

  - name: get_element_by_id
    given: "Element ID"
    when: "Query"
    then: "Return element"

  - name: get_text_content
    given: "Element"
    when: "Extract text"
    then: "Return text content"

  - name: get_attribute
    given: "Element and attribute name"
    when: "Get attribute"
    then: "Return attribute value"

  - name: get_accessibility_tree
    given: "DOM root"
    when: "Build a11y tree"
    then: "Return accessibility nodes"

  - name: find_interactive_elements
    given: "DOM"
    when: "Find clickable"
    then: "Return buttons, links, inputs"

test_cases:
  - name: test_query_selector
    input: { selector: "button" }
    expected: { found: true }
  - name: test_accessibility
    input: {}
    expected: { tree_built: true }
