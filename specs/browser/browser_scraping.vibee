# VIBEE Browser Scraping v0.0.1
name: browser_scraping
version: "0.0.1"
language: zig
module: browser_scraping

types:
  ScrapeConfig:
    fields:
      url: String
      selectors: Object
      pagination: Option<String>
      max_pages: Int

  ScrapedData:
    fields:
      url: String
      data: List<Object>
      timestamp: Timestamp
      pages_scraped: Int

  ExportFormat:
    fields:
      format: String
      options: Object

behaviors:
  - name: scrape_page
    given: "URL and selectors"
    when: "Scrape"
    then: "Return extracted data"

  - name: scrape_with_pagination
    given: "Config with pagination"
    when: "Scrape all pages"
    then: "Return all data"

  - name: extract_table
    given: "Table selector"
    when: "Extract"
    then: "Return table as array"

  - name: extract_links
    given: "Page"
    when: "Extract links"
    then: "Return all URLs"

  - name: export_csv
    given: "Scraped data"
    when: "Export"
    then: "Return CSV string"

  - name: export_json
    given: "Scraped data"
    when: "Export"
    then: "Return JSON string"

test_cases:
  - name: test_scrape
    input: { url: "https://example.com", selectors: { title: "h1" } }
    expected: { data_extracted: true }
  - name: test_export_csv
    input: { data: [{ a: 1 }] }
    expected: { csv_generated: true }
