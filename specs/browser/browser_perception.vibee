# VIBEE Browser Perception v0.0.1
name: browser_perception
version: "0.0.1"
language: zig
module: browser_perception

types:
  PageContext:
    fields:
      url: String
      title: String
      main_topic: String
      keywords: List<String>
      sentiment: String
      language: String

  ContentBlock:
    fields:
      type: String
      content: String
      importance: Float
      position: Int

  PageStructure:
    fields:
      header: Option<String>
      navigation: List<String>
      main_content: List<ContentBlock>
      sidebar: Option<String>
      footer: Option<String>

  Intent:
    fields:
      action: String
      target: String
      confidence: Float

behaviors:
  - name: analyze_page
    given: "Page content"
    when: "Analyze"
    then: "Return page context"

  - name: extract_main_content
    given: "Page HTML"
    when: "Extract"
    then: "Return main content blocks"

  - name: detect_page_type
    given: "Page"
    when: "Classify"
    then: "Return page type (article, product, form, etc)"

  - name: understand_intent
    given: "User query and page"
    when: "Analyze intent"
    then: "Return detected intent"

  - name: summarize_page
    given: "Page content"
    when: "Summarize"
    then: "Return summary"

  - name: extract_entities
    given: "Text"
    when: "NER"
    then: "Return named entities"

test_cases:
  - name: test_page_analysis
    input: { url: "https://example.com" }
    expected: { analyzed: true }
  - name: test_summarization
    input: { content: "long text" }
    expected: { summary_length_lt: 500 }
