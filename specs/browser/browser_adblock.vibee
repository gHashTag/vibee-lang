# VIBEE Browser Ad Blocker v0.0.1
name: browser_adblock
version: "0.0.1"
language: zig
module: browser_adblock

types:
  FilterRule:
    fields:
      id: String
      pattern: String
      type: String
      enabled: Bool

  FilterList:
    fields:
      name: String
      url: String
      rules_count: Int
      last_updated: Timestamp

  BlockedRequest:
    fields:
      url: String
      type: String
      rule_id: String
      timestamp: Timestamp

  AdBlockStats:
    fields:
      blocked_count: Int
      trackers_blocked: Int
      bandwidth_saved: Int

behaviors:
  - name: load_filter_list
    given: "Filter list URL"
    when: "Load"
    then: "Parse and activate rules"

  - name: add_custom_rule
    given: "Rule pattern"
    when: "Add"
    then: "Add to custom rules"

  - name: should_block
    given: "Request URL"
    when: "Check"
    then: "Return block decision"

  - name: block_request
    given: "Request"
    when: "Block"
    then: "Cancel request"

  - name: get_stats
    given: "Time range"
    when: "Get stats"
    then: "Return blocking statistics"

  - name: whitelist_site
    given: "Domain"
    when: "Whitelist"
    then: "Disable blocking for site"

test_cases:
  - name: test_block_ad
    input: { url: "https://ads.example.com/banner.js" }
    expected: { blocked: true }
  - name: test_whitelist
    input: { domain: "example.com" }
    expected: { whitelisted: true }
