# ============================================
# STANDARD - ULTRA-STRICT стандарт 999 OS
# STANDARD - ULTRA-STRICT standard for 999 OS
# ============================================
# .vibee → .999 ЕДИНСТВЕННЫЙ ПУТЬ!
# ============================================

name: standard
version: "1.0.0"
target: 999
module: Ⲙ_standard

# ============================================
# ОБЯЗАТЕЛЬНЫЕ СЕКЦИИ ДЛЯ КАЖДОГО .vibee
# MANDATORY SECTIONS FOR EVERY .vibee
# ============================================

mandatory_sections:
  - name: self_evolution
    required: true
    description_ru: "Механизм самоулучшения"
    description_en: "Self-improvement mechanism"
    
  - name: trinity_metrics
    required: true
    description_ru: "Метрики n × 3^k × π^m"
    description_en: "Metrics n × 3^k × π^m"
    
  - name: creation_pattern
    required: true
    description_ru: "Source → Transformer → Result"
    description_en: "Source → Transformer → Result"

  - name: behaviors
    required: true
    description_ru: "Поведения с test_cases"
    description_en: "Behaviors with test_cases"

# ============================================
# ULTRA-STRICT ПРАВИЛА
# ULTRA-STRICT RULES
# ============================================

ultra_strict_rules:
  # FATAL - блокируют компиляцию
  fatal:
    - rule: SELF_EVOLUTION_REQUIRED
      check: "contains('Self-Evolution') OR contains('SelfEvolution')"
      message_ru: "Self-Evolution ОБЯЗАТЕЛЕН в каждом файле!"
      message_en: "Self-Evolution REQUIRED in every file!"

    - rule: GENERATION_MARKER_REQUIRED
      check: "contains('Сгенерировано из:')"
      message_ru: "Маркер генерации ОБЯЗАТЕЛЕН!"
      message_en: "Generation marker REQUIRED!"

    - rule: NO_MANUAL_CODE
      check: "NOT contains('def ') AND NOT contains('function ')"
      message_ru: "Ручной код ЗАПРЕЩЁН!"
      message_en: "Manual code FORBIDDEN!"

    - rule: FORBIDDEN_EXTENSIONS
      check: "NOT ends_with('.py', '.js', '.go', '.rs')"
      message_ru: "Запрещённые расширения!"
      message_en: "Forbidden extensions!"

  # ERROR - требуют исправления
  error:
    - rule: TRINITY_LOGIC_REQUIRED
      check: "contains('△') OR contains('▽') OR contains('○')"
      message_ru: "Trinity логика ОБЯЗАТЕЛЬНА!"
      message_en: "Trinity logic REQUIRED!"

    - rule: COPTIC_SYNTAX_REQUIRED
      check: "contains('Ⲫ') OR contains('Ⲏ') OR contains('Ⲣ')"
      message_ru: "Коптский синтаксис ОБЯЗАТЕЛЕН!"
      message_en: "Coptic syntax REQUIRED!"

    - rule: IMPROVEMENT_MECHANISM_REQUIRED
      check: "contains('improve') OR contains('evolve')"
      message_ru: "Механизм улучшения ОБЯЗАТЕЛЕН!"
      message_en: "Improvement mechanism REQUIRED!"

  # WARNING - рекомендации
  warning:
    - rule: FITNESS_METRICS_RECOMMENDED
      check: "contains('fitness') OR contains('trinity')"
      message_ru: "Рекомендуется добавить fitness метрики"
      message_en: "Fitness metrics recommended"

    - rule: TESTS_RECOMMENDED
      check: "contains('test_cases')"
      message_ru: "Рекомендуется добавить тесты"
      message_en: "Tests recommended"

# ============================================
# PERFORMANCE ПРАВИЛА
# PERFORMANCE RULES
# ============================================

performance_rules:
  strict:
    - rule: PERF_HSH
      description_ru: "O(1) lookup для всех словарей"
      description_en: "O(1) lookup for all maps"
      
    - rule: PERF_PRE
      description_ru: "Кэширование результатов"
      description_en: "Cache results"
      
    - rule: PERF_D&C
      description_ru: "Параллельная обработка"
      description_en: "Parallel processing"

  ultra_strict:
    - rule: PERF_NO_ALLOC
      description_ru: "Никаких аллокаций в hot path"
      description_en: "No allocations in hot path"
      
    - rule: PERF_INLINE
      description_ru: "Inline все функции < 10 строк"
      description_en: "Inline all functions < 10 lines"
      
    - rule: PERF_PRECOMPUTE
      description_ru: "Предвычисление констант"
      description_en: "Precompute constants"

# ============================================
# ШАБЛОН ОБЯЗАТЕЛЬНОГО ЗАГОЛОВКА
# MANDATORY HEADER TEMPLATE
# ============================================

header_template: |
  # ============================================
  # Сгенерировано из: {name}.vibee
  # Generated from: {name}.vibee
  # ⚠️ ЗАПРЕЩЕНО РЕДАКТИРОВАТЬ ВРУЧНУЮ!
  # ⚠️ DO NOT EDIT MANUALLY!
  # Self-Evolution: ENABLED
  # Trinity: n × 3^k × π^m
  # Generation: {generation}
  # Fitness: {fitness}
  # ============================================

# ============================================
# ШАБЛОН SELF-EVOLUTION СЕКЦИИ
# SELF-EVOLUTION SECTION TEMPLATE
# ============================================

self_evolution_template: |
  Ⲏ SelfEvolution {
      Ⲃ enabled: Ⲃⲟⲟⲗ = △
      Ⲃ generation: Ⲓⲛⲧ = {generation}
      Ⲃ fitness: Ⲫⲗⲟⲁⲧ = {fitness}
      
      Ⲫ evolve(Ⲥ) { Ⲥ.generation += 1; Ⲥ.improve() }
      Ⲫ improve(Ⲥ) → Ⲃⲟⲟⲗ { Ⲥ.fitness += 0.01; Ⲣ △ }
      Ⲫ analyze(Ⲥ) → Ⲙⲁⲡ { Ⲣ {"gen": Ⲥ.generation, "fit": Ⲥ.fitness} }
  }

# ============================================
# ШАБЛОН TRINITY METRICS
# TRINITY METRICS TEMPLATE
# ============================================

trinity_template: |
  Ⲏ TrinityMetrics {
      Ⲃ n: Ⲓⲛⲧ = {functions}
      Ⲃ k: Ⲓⲛⲧ = {types}
      Ⲃ m: Ⲓⲛⲧ = {tests}
      
      Ⲫ score(Ⲥ) → Ⲫⲗⲟⲁⲧ {
          Ⲣ Ⲥ.n * ⲡⲟⲱ(3.0, Ⲥ.k / 10.0) * ⲡⲟⲱ(3.14159, Ⲥ.m / 20.0)
      }
  }
  Ⲕ TRINITY: TrinityMetrics = TrinityMetrics{n: {functions}, k: {types}, m: {tests}}
