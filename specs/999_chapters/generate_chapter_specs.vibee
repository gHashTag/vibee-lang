# ═══════════════════════════════════════════════════════════════════════════════
# CHAPTER SPECS GENERATOR — Генератор Спецификаций Глав
# ═══════════════════════════════════════════════════════════════════════════════
#
# Генерирует 999 .vibee спецификаций для каждой главы
# Затем компилятор создаёт .999 файлы в 999/
#
# Author: Dmitrii Vasilev <reactnativeinitru@gmail.com>
# ═══════════════════════════════════════════════════════════════════════════════

name: generate_chapter_specs
version: "999.0.0"
language: tridevyatitsa
module: ⲣⲁⲍⲩⲙ.ⲅⲉⲛⲉⲣⲁⲧⲟⲣ.chapter_specs

creation_pattern:
  source: ChapterNumber
  transformer: SpecificationGenerator
  result: ChapterVibeeSpec

# ═══════════════════════════════════════════════════════════════════════════════
# КОНСТАНТЫ
# ═══════════════════════════════════════════════════════════════════════════════

constants:
  TOTAL_CHAPTERS: 999
  CHAPTERS_PER_BOOK: 37
  BOOKS_PER_VOLUME: 9
  VOLUMES: 3
  
  π: 3.14159265358979323846
  φ: 1.61803398874989484820

# ═══════════════════════════════════════════════════════════════════════════════
# ШАБЛОН ГЛАВЫ
# ═══════════════════════════════════════════════════════════════════════════════

chapter_template: |
  # Глава {chapter_number}
  # Том {volume}: {volume_name} | Книга {book}: {book_title}
  
  name: chapter_{chapter_number:03d}
  version: "999.0.0"
  language: tridevyatitsa
  module: ⲕⲛⲓⲅⲁ.ⲅⲗⲁⲃⲁ_{chapter_number:03d}
  
  creation_pattern:
    source: ChapterSpecification
    transformer: ChapterRenderer
    result: Chapter999
  
  chapter:
    number: {chapter_number}
    volume: {volume}
    book: {book}
    sacred_value: {sacred_value}
    
  sacred_formula:
    n: {n}
    k: {k}
    m: {m}
    p: {p}
    value: "{sacred_value}"
    
  fairy_opening: "{fairy_opening}"
  
  content:
    intuition: 0.20
    analysis: 0.60
    synthesis: 0.20

# ═══════════════════════════════════════════════════════════════════════════════
# 27 СКАЗОЧНЫХ ЗАЧИНОВ
# ═══════════════════════════════════════════════════════════════════════════════

fairy_openings:
  - "В тридевятом царстве, в тридесятом государстве жил-был программист..."
  - "Жил-был программист по имени Иван, и было у него три задачи..."
  - "Давным-давно, когда компьютеры ещё говорили на языке единиц и нулей..."
  - "За тридевять земель, за тридевять морей стоял терем алгоритмов..."
  - "В некотором царстве, в некотором государстве правил царь-процессор..."
  - "Было у царя три сына-программиста: старший, средний и младший..."
  - "Жила-была функция рекурсивная, и звали её Фибоначчи..."
  - "Стоял на распутье камень, а на камне написано было три пути..."
  - "Текла река данных через три царства: Медное, Серебряное и Золотое..."
  - "Отправился Иван-программист в путь-дорогу искать оптимальный алгоритм..."
  - "Пришла к Ивану задача непростая, да делать нечего — надо решать..."
  - "Призвал царь-заказчик Ивана и дал ему задачу невыполнимую..."
  - "Напал на царство Кощей-баг бессмертный, и никто не мог его победить..."
  - "Три дня и три ночи бился Иван с задачей, да всё без толку..."
  - "Нашёл Иван перо Жар-птицы, а на нём код волшебный написан..."
  - "Спустился Иван в подземелье памяти, где хранились данные древние..."
  - "Взлетел Иван на ковре-самолёте async в облака вычислений..."
  - "Достал Иван меч-кладенец оптимизации и пошёл на Змея-Горыныча..."
  - "Однажды Иван заглянул в код древний и увидел там чудо чудное..."
  - "Открыл Иван книгу мудрости и прочёл там слова заветные..."
  - "Явилась Ивану во сне Василиса Премудрая и молвила..."
  - "Встретил Иван старца-архитектора, и тот поведал ему тайну..."
  - "Росло в саду дерево алгоритмов, и на каждой ветке — решение..."
  - "Собрались три богатыря-алгоритма: QuickSort, MergeSort и TrinitySort..."
  - "Летела Жар-птица над царством кода, роняя перья мудрости..."
  - "Встретил Иван Бабу-Ягу legacy-кода, и та дала ему клубок рефакторинга..."
  - "И понял Иван великую тайну Тройки, что правит всем миром..."

# ═══════════════════════════════════════════════════════════════════════════════
# BEHAVIORS
# ═══════════════════════════════════════════════════════════════════════════════

behaviors:
  - name: "generate_all_specs"
    given: "Шаблон главы и 999 номеров"
    when: "Генерируем спецификации"
    then: "Создаётся 999 файлов .vibee в specs/999_chapters/"
    test_cases:
      - name: "total_specs"
        input: {}
        expected: {count: 999}

  - name: "calculate_sacred_value"
    given: "Номер главы"
    when: "Вычисляем V = n × 3^k"
    then: "Возвращается священное значение"
    test_cases:
      - name: "chapter_999"
        input: {chapter: 999}
        expected: {n: 37, k: 3, value: 999}

author:
  name: "Dmitrii Vasilev"
  email: "reactnativeinitru@gmail.com"
