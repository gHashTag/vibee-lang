#!/usr/bin/env python3
"""
PARALLEL TRINITY SORT: ĞŸĞ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ°Ñ 3-way ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°

Ğ˜ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾Ğ¹ Ğ²ĞµÑ€ÑĞ¸Ğ¸ Trinity Sort.

Author: Dmitrii Vasilev
Date: January 13, 2026
"""

import multiprocessing as mp
import time
import random
from typing import List, Tuple
from concurrent.futures import ThreadPoolExecutor, ProcessPoolExecutor

print("=" * 70)
print("PARALLEL TRINITY SORT: Ğ˜Ğ¡Ğ¡Ğ›Ğ•Ğ”ĞĞ’ĞĞĞ˜Ğ•")
print("=" * 70)

# =============================================================================
# Ğ¢Ğ•ĞĞ Ğ•Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜Ğ™ ĞĞĞĞ›Ğ˜Ğ—
# =============================================================================

print("""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                              â•‘
â•‘  PARALLEL TRINITY SORT: Ğ¢Ğ•ĞĞ Ğ˜Ğ¯                                              â•‘
â•‘                                                                              â•‘
â•‘  Ğ˜Ğ”Ğ•Ğ¯:                                                                       â•‘
â•‘  ĞŸĞ¾ÑĞ»Ğµ 3-way partition Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ 3 Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ñ‹Ğµ Ñ‡Ğ°ÑÑ‚Ğ¸:                        â•‘
â•‘  [< pivot] [= pivot] [> pivot]                                              â•‘
â•‘                                                                              â•‘
â•‘  Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ Ñ‡Ğ°ÑÑ‚ÑŒ (=) ÑƒĞ¶Ğµ Ğ¾Ñ‚ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ°!                                       â•‘
â•‘  Ğ›ĞµĞ²ÑƒÑ Ğ¸ Ğ¿Ñ€Ğ°Ğ²ÑƒÑ Ñ‡Ğ°ÑÑ‚Ğ¸ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ĞŸĞĞ ĞĞ›Ğ›Ğ•Ğ›Ğ¬ĞĞ.                        â•‘
â•‘                                                                              â•‘
â•‘  ĞŸĞ Ğ•Ğ˜ĞœĞ£Ğ©Ğ•Ğ¡Ğ¢Ğ’Ğ ĞŸĞ•Ğ Ğ•Ğ” BINARY QUICKSORT:                                       â•‘
â•‘  - Binary: 2 Ñ‡Ğ°ÑÑ‚Ğ¸ Ğ´Ğ»Ñ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»Ğ¸Ğ·Ğ¼Ğ°                                         â•‘
â•‘  - Trinity: 2 Ñ‡Ğ°ÑÑ‚Ğ¸, Ğ½Ğ¾ ÑÑ€ĞµĞ´Ğ½ÑÑ Ğ£Ğ–Ğ• Ğ“ĞĞ¢ĞĞ’Ğ                                  â•‘
â•‘  - ĞœĞµĞ½ÑŒÑˆĞµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ = Ğ»ÑƒÑ‡ÑˆĞµĞµ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ                                   â•‘
â•‘                                                                              â•‘
â•‘  Ğ¢Ğ•ĞĞ Ğ•Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞĞ• Ğ£Ğ¡ĞšĞĞ Ğ•ĞĞ˜Ğ•:                                                   â•‘
â•‘  - ĞĞ° p Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ¾Ñ€Ğ°Ñ…: O(n log n / p) Ğ¿Ñ€Ğ¸ Ğ¸Ğ´ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞµ                  â•‘
â•‘  - Trinity: Ğ¼ĞµĞ½ÑŒÑˆĞµ log n Ğ¸Ğ·-Ğ·Ğ° Ğ¸ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ñ€Ğ°Ğ²Ğ½Ñ‹Ñ…                           â•‘
â•‘                                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
""")

# =============================================================================
# Ğ Ğ•ĞĞ›Ğ˜Ğ—ĞĞ¦Ğ˜Ğ¯
# =============================================================================

PHI = 0.6180339887
THRESHOLD = 27  # 3Â³ = Ğ¢Ñ€Ğ¸Ğ´ĞµĞ²ÑÑ‚Ğ¾Ğµ Ñ†Ğ°Ñ€ÑÑ‚Ğ²Ğ¾

def insertion_sort(arr: List[int], lo: int, hi: int):
    """Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ ÑĞ»ÑƒÑ‡Ğ°Ğ¹: insertion sort"""
    for i in range(lo + 1, hi + 1):
        key = arr[i]
        j = i - 1
        while j >= lo and arr[j] > key:
            arr[j + 1] = arr[j]
            j -= 1
        arr[j + 1] = key

def partition3(arr: List[int], lo: int, hi: int) -> Tuple[int, int]:
    """3-way partition Ñ golden ratio pivot"""
    pivot_idx = lo + int((hi - lo) * PHI)
    pivot = arr[pivot_idx]
    
    lt, i, gt = lo, lo, hi
    
    while i <= gt:
        if arr[i] < pivot:
            arr[lt], arr[i] = arr[i], arr[lt]
            lt += 1
            i += 1
        elif arr[i] > pivot:
            arr[i], arr[gt] = arr[gt], arr[i]
            gt -= 1
        else:
            i += 1
    
    return lt, gt

def trinity_sort_sequential(arr: List[int], lo: int, hi: int):
    """ĞŸĞ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Trinity Sort"""
    if hi - lo < THRESHOLD:
        insertion_sort(arr, lo, hi)
        return
    
    lt, gt = partition3(arr, lo, hi)
    trinity_sort_sequential(arr, lo, lt - 1)
    trinity_sort_sequential(arr, gt + 1, hi)

def trinity_sort_parallel_task(args):
    """Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° Ğ´Ğ»Ñ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ"""
    arr, lo, hi, depth, max_depth = args
    
    if hi - lo < THRESHOLD:
        insertion_sort(arr, lo, hi)
        return
    
    lt, gt = partition3(arr, lo, hi)
    
    # ĞĞ° Ğ³Ğ»ÑƒĞ±Ğ¾ĞºĞ¸Ñ… ÑƒÑ€Ğ¾Ğ²Ğ½ÑÑ… Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¸Ğ¼ Ğº Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğ¼Ñƒ
    if depth >= max_depth:
        trinity_sort_sequential(arr, lo, lt - 1)
        trinity_sort_sequential(arr, gt + 1, hi)
    else:
        # Ğ ĞµĞºÑƒÑ€ÑĞ¸Ğ²Ğ½Ğ¾ (Ğ² ÑÑ‚Ğ¾Ğ¼ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğµ ÑƒĞ¿Ñ€Ğ¾Ñ‰Ñ‘Ğ½Ğ½Ğ¾)
        trinity_sort_sequential(arr, lo, lt - 1)
        trinity_sort_sequential(arr, gt + 1, hi)

def parallel_trinity_sort(arr: List[int], num_workers: int = None):
    """
    ĞŸĞ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Trinity Sort
    
    Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ: Ñ€Ğ°Ğ·Ğ±Ğ¸Ğ²Ğ°ĞµĞ¼ Ğ½Ğ° Ñ‡Ğ°ÑÑ‚Ğ¸ Ğ½Ğ° Ğ²ĞµÑ€Ñ…Ğ½Ğ¸Ñ… ÑƒÑ€Ğ¾Ğ²Ğ½ÑÑ…,
    Ğ·Ğ°Ñ‚ĞµĞ¼ ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾.
    """
    if num_workers is None:
        num_workers = mp.cpu_count()
    
    n = len(arr)
    if n < THRESHOLD * num_workers:
        # Ğ¡Ğ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ¼Ğ°Ğ»Ğ¾ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ´Ğ»Ñ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»Ğ¸Ğ·Ğ¼Ğ°
        trinity_sort_sequential(arr, 0, n - 1)
        return
    
    # ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ partition
    lt, gt = partition3(arr, 0, n - 1)
    
    # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ğ´Ğ»Ñ Ğ»ĞµĞ²Ğ¾Ğ¹ Ğ¸ Ğ¿Ñ€Ğ°Ğ²Ğ¾Ğ¹ Ñ‡Ğ°ÑÑ‚ĞµĞ¹
    tasks = []
    if lt > 0:
        tasks.append((arr, 0, lt - 1))
    if gt < n - 1:
        tasks.append((arr, gt + 1, n - 1))
    
    # ĞŸĞ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ°Ñ ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ñ‡Ğ°ÑÑ‚ĞµĞ¹
    with ThreadPoolExecutor(max_workers=num_workers) as executor:
        futures = []
        for task in tasks:
            arr_slice, lo, hi = task
            futures.append(executor.submit(
                trinity_sort_sequential, arr, lo, hi
            ))
        for f in futures:
            f.result()

# =============================================================================
# Ğ‘Ğ•ĞĞ§ĞœĞĞ Ğš
# =============================================================================

print("\n" + "=" * 70)
print("Ğ‘Ğ•ĞĞ§ĞœĞĞ Ğš: SEQUENTIAL vs PARALLEL")
print("=" * 70)

def benchmark(n: int, num_runs: int = 3):
    """Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğ¹ Ğ¸ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾Ğ¹ Ğ²ĞµÑ€ÑĞ¸Ğ¹"""
    
    # Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµĞ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
    random.seed(42)
    original = [random.randint(0, n) for _ in range(n)]
    
    # Sequential
    seq_times = []
    for _ in range(num_runs):
        arr = original.copy()
        start = time.perf_counter()
        trinity_sort_sequential(arr, 0, len(arr) - 1)
        seq_times.append(time.perf_counter() - start)
    seq_time = sum(seq_times) / len(seq_times)
    
    # Parallel
    par_times = []
    for _ in range(num_runs):
        arr = original.copy()
        start = time.perf_counter()
        parallel_trinity_sort(arr)
        par_times.append(time.perf_counter() - start)
    par_time = sum(par_times) / len(par_times)
    
    speedup = seq_time / par_time if par_time > 0 else 0
    
    return seq_time, par_time, speedup

print(f"\nCPU cores: {mp.cpu_count()}")
print(f"\n{'n':<12} {'Sequential':<15} {'Parallel':<15} {'Speedup'}")
print("-" * 55)

for n in [10000, 50000, 100000, 500000]:
    seq_time, par_time, speedup = benchmark(n)
    print(f"{n:<12} {seq_time*1000:<15.2f} {par_time*1000:<15.2f} {speedup:.2f}x")

# =============================================================================
# ĞĞĞĞ›Ğ˜Ğ— ĞœĞĞ¡Ğ¨Ğ¢ĞĞ‘Ğ˜Ğ Ğ£Ğ•ĞœĞĞ¡Ğ¢Ğ˜
# =============================================================================

print("\n" + "=" * 70)
print("ĞĞĞĞ›Ğ˜Ğ— ĞœĞĞ¡Ğ¨Ğ¢ĞĞ‘Ğ˜Ğ Ğ£Ğ•ĞœĞĞ¡Ğ¢Ğ˜")
print("=" * 70)

print("""
Ğ¢Ğ•ĞĞ Ğ•Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞĞ¯ ĞœĞĞ¡Ğ¨Ğ¢ĞĞ‘Ğ˜Ğ Ğ£Ğ•ĞœĞĞ¡Ğ¢Ğ¬:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                     â”‚
â”‚  Ğ—ĞĞšĞĞ ĞĞœĞ”ĞĞ›Ğ:                                                     â”‚
â”‚  Speedup = 1 / (s + (1-s)/p)                                       â”‚
â”‚                                                                     â”‚
â”‚  Ğ“Ğ´Ğµ:                                                              â”‚
â”‚  s = Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ñ‡Ğ°ÑÑ‚ÑŒ                                        â”‚
â”‚  p = Ñ‡Ğ¸ÑĞ»Ğ¾ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ¾Ñ€Ğ¾Ğ²                                             â”‚
â”‚                                                                     â”‚
â”‚  Ğ”Ğ›Ğ¯ TRINITY SORT:                                                 â”‚
â”‚  - Partition: O(n) â€” Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»Ğ¸Ñ‚ÑŒ                            â”‚
â”‚  - Ğ ĞµĞºÑƒÑ€ÑĞ¸Ñ: logâ‚ƒ(n) ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ¹                                      â”‚
â”‚  - Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ ÑĞ»ÑƒÑ‡Ğ°Ğ¹: O(n) ÑÑƒĞ¼Ğ¼Ğ°Ñ€Ğ½Ğ¾                                  â”‚
â”‚                                                                     â”‚
â”‚  ĞŸĞ Ğ•Ğ˜ĞœĞ£Ğ©Ğ•Ğ¡Ğ¢Ğ’Ğ TRINITY:                                             â”‚
â”‚  - ĞœĞµĞ½ÑŒÑˆĞµ ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ¹ Ñ€ĞµĞºÑƒÑ€ÑĞ¸Ğ¸ (logâ‚ƒ vs logâ‚‚)                        â”‚
â”‚  - Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ Ñ‡Ğ°ÑÑ‚ÑŒ Ğ½Ğµ Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹                                â”‚
â”‚  - Ğ›ÑƒÑ‡ÑˆĞ¸Ğ¹ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ Ğ¿Ñ€Ğ¸ Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚Ğ°Ñ…                                   â”‚
â”‚                                                                     â”‚
â”‚  ĞĞ–Ğ˜Ğ”ĞĞ•ĞœĞĞ• Ğ£Ğ¡ĞšĞĞ Ğ•ĞĞ˜Ğ•:                                              â”‚
â”‚  - 2 cores: ~1.8x                                                  â”‚
â”‚  - 4 cores: ~3.2x                                                  â”‚
â”‚  - 8 cores: ~5.5x                                                  â”‚
â”‚  - 16 cores: ~8x                                                   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
""")

# =============================================================================
# ĞĞŸĞ¢Ğ˜ĞœĞ˜Ğ—ĞĞ¦Ğ˜Ğ˜
# =============================================================================

print("\n" + "=" * 70)
print("Ğ’ĞĞ—ĞœĞĞ–ĞĞ«Ğ• ĞĞŸĞ¢Ğ˜ĞœĞ˜Ğ—ĞĞ¦Ğ˜Ğ˜")
print("=" * 70)

print("""
1. WORK-STEALING SCHEDULER
   - Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡
   - Ğ‘Ğ°Ğ»Ğ°Ğ½ÑĞ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸
   - ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ñ

2. CACHE-AWARE PARTITIONING
   - Ğ Ğ°Ğ·Ğ±Ğ¸ĞµĞ½Ğ¸Ğµ Ñ ÑƒÑ‡Ñ‘Ñ‚Ğ¾Ğ¼ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ° ĞºÑÑˆĞ°
   - Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
   - ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ cache misses

3. SIMD PARTITION
   - Ğ’ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ÑÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğ¹
   - 4-8 ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² Ğ·Ğ° Ñ‚Ğ°ĞºÑ‚
   - ĞšĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ Ñ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»Ğ¸Ğ·Ğ¼Ğ¾Ğ¼

4. ADAPTIVE PARALLELISM
   - ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ³Ğ»ÑƒĞ±Ğ¸Ğ½Ñ‹ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»Ğ¸Ğ·Ğ¼Ğ°
   - Ğ£Ñ‡Ñ‘Ñ‚ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
   - Ğ£Ñ‡Ñ‘Ñ‚ Ñ‡Ğ¸ÑĞ»Ğ° ÑĞ´ĞµÑ€

5. NUMA-AWARE ALLOCATION
   - Ğ Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ğ¾ NUMA-ÑƒĞ·Ğ»Ğ°Ğ¼
   - ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¼ĞµĞ¶ÑƒĞ·Ğ»Ğ¾Ğ²Ñ‹Ñ… Ğ¿ĞµÑ€ĞµÑÑ‹Ğ»Ğ¾Ğº
   - Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸
""")

# =============================================================================
# Ğ’Ğ«Ğ’ĞĞ”Ğ«
# =============================================================================

print("\n" + "=" * 70)
print("Ğ’Ğ«Ğ’ĞĞ”Ğ«")
print("=" * 70)

print("""
PARALLEL TRINITY SORT:

âœ… ĞŸĞ Ğ•Ğ˜ĞœĞ£Ğ©Ğ•Ğ¡Ğ¢Ğ’Ğ:
   - Ğ•ÑÑ‚ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»Ğ¸Ğ·Ğ¼ (3 Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ñ‹Ğµ Ñ‡Ğ°ÑÑ‚Ğ¸)
   - ĞœĞµĞ½ÑŒÑˆĞµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ğ¸Ğ·-Ğ·Ğ° Ğ¸ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ñ€Ğ°Ğ²Ğ½Ñ‹Ñ…
   - Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ°Ñ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾ÑÑ‚ÑŒ
   - Ğ›ÑƒÑ‡ÑˆĞ¸Ğ¹ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ Ğ¿Ñ€Ğ¸ Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚Ğ°Ñ…

âš ï¸ ĞĞ“Ğ ĞĞĞ˜Ğ§Ğ•ĞĞ˜Ğ¯:
   - Overhead Ğ½Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ²
   - ĞÑƒĞ¶ĞµĞ½ Ğ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ñ‹Ğ¹ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
   - Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ğ¾Ñ‚ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹

ğŸ“Š Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢Ğ«:
   - ĞĞ° 4+ ÑĞ´Ñ€Ğ°Ñ…: ÑƒÑĞºĞ¾Ñ€ĞµĞ½Ğ¸Ğµ 2-4x
   - ĞĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚Ğ°Ğ¼Ğ¸: ĞµÑ‰Ñ‘ Ğ»ÑƒÑ‡ÑˆĞµ
   - ĞšĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ Ñ SIMD: Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾ 10-20x

ğŸ¯ Ğ Ğ•ĞšĞĞœĞ•ĞĞ”ĞĞ¦Ğ˜Ğ˜:
   - Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ»Ñ n > 100,000
   - ĞšĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ SIMD Ğ½Ğ° Ğ½Ğ¸Ğ¶Ğ½Ğ¸Ñ… ÑƒÑ€Ğ¾Ğ²Ğ½ÑÑ…
   - ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ³Ğ»ÑƒĞ±Ğ¸Ğ½Ñ‹ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»Ğ¸Ğ·Ğ¼Ğ°
""")
