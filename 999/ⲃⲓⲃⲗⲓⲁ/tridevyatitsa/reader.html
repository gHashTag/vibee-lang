<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìñ –ö–ù–ò–ì–ê 999 ‚Äî –ß–∏—Ç–∞—Ç–µ–ª—å</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Cormorant+Garamond:wght@400;600&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
:root{--gold:#d4af37;--copper:#b87333;--silver:#c0c0c0;--bg:#0a0a10;--card:#0f0f18;--text:#e8e0d0;--code-bg:#0d1117}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Cormorant Garamond',serif;background:var(--bg);color:var(--text);min-height:100vh}

.app{display:grid;grid-template-columns:300px 1fr;height:100vh}

/* Sidebar */
.sidebar{background:linear-gradient(180deg,#0c0c14,#060609);border-right:1px solid rgba(212,175,55,0.2);display:flex;flex-direction:column;overflow:hidden}
.logo{padding:20px;text-align:center;border-bottom:1px solid rgba(212,175,55,0.2)}
.logo h1{font-family:'Cinzel',serif;font-size:1.3em;color:var(--gold);letter-spacing:0.1em}
.logo p{font-size:0.8em;color:var(--silver);margin-top:5px}

.search-box{padding:15px}
.search-input{width:100%;padding:10px 15px;background:rgba(0,0,0,0.5);border:1px solid rgba(212,175,55,0.3);color:var(--text);border-radius:5px;font-size:1em}
.search-input::placeholder{color:var(--silver)}

.nav-tabs{display:flex;border-bottom:1px solid rgba(212,175,55,0.2)}
.nav-tab{flex:1;padding:10px;text-align:center;cursor:pointer;font-size:0.85em;color:var(--silver);transition:all 0.2s;border-bottom:2px solid transparent}
.nav-tab:hover{color:var(--gold)}
.nav-tab.active{color:var(--gold);border-bottom-color:var(--gold)}

.list-container{flex:1;overflow-y:auto;padding:10px}
.list-item{padding:12px 15px;margin:5px 0;background:rgba(0,0,0,0.3);border-left:3px solid transparent;cursor:pointer;transition:all 0.2s;border-radius:0 5px 5px 0;font-size:0.9em}
.list-item:hover{background:rgba(212,175,55,0.1);border-left-color:var(--gold)}
.list-item.active{background:rgba(212,175,55,0.15);border-left-color:var(--gold)}
.list-item .num{color:var(--gold);font-weight:bold;margin-right:8px}
.list-item .title{color:var(--text)}
.list-item .meta{font-size:0.75em;color:var(--silver);margin-top:3px}
.list-item.sacred{border-left-color:var(--gold);background:rgba(212,175,55,0.1)}

/* Main */
.main{display:flex;flex-direction:column;overflow:hidden}

/* Header */
.header{display:flex;justify-content:space-between;align-items:center;padding:15px 25px;background:rgba(0,0,0,0.5);border-bottom:1px solid rgba(212,175,55,0.2)}
.nav-controls{display:flex;align-items:center;gap:10px}
.btn{font-family:'Cinzel',serif;background:transparent;border:1px solid var(--gold);color:var(--gold);padding:8px 16px;cursor:pointer;font-size:0.85em;transition:all 0.2s;border-radius:4px}
.btn:hover{background:rgba(212,175,55,0.2)}
.btn:disabled{opacity:0.3;cursor:not-allowed}
.chapter-input{font-family:'JetBrains Mono',monospace;background:rgba(0,0,0,0.5);border:1px solid var(--gold);color:var(--gold);padding:8px 12px;width:70px;text-align:center;border-radius:4px}
.progress{display:flex;align-items:center;gap:10px;color:var(--silver);font-size:0.85em}
.progress-bar{width:200px;height:6px;background:rgba(255,255,255,0.1);border-radius:3px;overflow:hidden}
.progress-fill{height:100%;background:var(--gold);transition:width 0.3s}

/* Content */
.content{flex:1;overflow-y:auto;padding:40px 60px}

/* Article Styles */
.article{max-width:900px;margin:0 auto}
.article h1{font-family:'Cinzel',serif;font-size:2em;color:var(--gold);margin-bottom:20px;text-align:center}
.article h2{font-family:'Cinzel',serif;font-size:1.5em;color:var(--gold);margin:30px 0 15px;padding-bottom:10px;border-bottom:1px solid rgba(212,175,55,0.3)}
.article h3{font-size:1.2em;color:var(--silver);margin:20px 0 10px}
.article p{line-height:1.8;margin:15px 0;font-size:1.1em}
.article hr{border:none;border-top:1px solid rgba(212,175,55,0.2);margin:30px 0}
.article blockquote{background:rgba(212,175,55,0.1);border-left:4px solid var(--gold);padding:15px 20px;margin:20px 0;font-style:italic}
.article ul,.article ol{margin:15px 0;padding-left:30px}
.article li{margin:8px 0;line-height:1.6}
.article code{font-family:'JetBrains Mono',monospace;background:rgba(0,0,0,0.5);padding:2px 6px;border-radius:3px;font-size:0.9em}
.article pre{background:var(--code-bg);border:1px solid #30363d;border-radius:8px;padding:20px;margin:20px 0;overflow-x:auto}
.article pre code{background:none;padding:0;font-size:0.85em;line-height:1.6;display:block;white-space:pre}
.article strong{color:var(--gold)}
.article em{color:var(--silver)}
.article a{color:var(--gold);text-decoration:none}
.article a:hover{text-decoration:underline}

/* Loading */
.loading{text-align:center;padding:100px;color:var(--silver)}

/* Responsive */
@media(max-width:900px){
    .app{grid-template-columns:1fr}
    .sidebar{display:none}
    .content{padding:20px}
}
    </style>
</head>
<body>
<div class="app">
    <aside class="sidebar">
        <div class="logo">
            <h1>üìñ –ö–ù–ò–ì–ê 999</h1>
            <p>–¢—Ä–∏–¥–µ–≤—è—Ç–æ–µ –¶–∞—Ä—Å—Ç–≤–æ –ê–ª–≥–æ—Ä–∏—Ç–º–æ–≤</p>
        </div>
        
        <div class="search-box">
            <input type="text" class="search-input" placeholder="–ü–æ–∏—Å–∫ –≥–ª–∞–≤—ã..." id="search" oninput="filterChapters()">
        </div>
        
        <div class="nav-tabs">
            <div class="nav-tab active" onclick="showTab('chapters')">–ì–ª–∞–≤—ã</div>
            <div class="nav-tab" onclick="showTab('books')">–ö–Ω–∏–≥–∏</div>
            <div class="nav-tab" onclick="showTab('sacred')">–°–≤—è—â–µ–Ω–Ω—ã–µ</div>
        </div>
        
        <div class="list-container" id="listContainer"></div>
    </aside>
    
    <main class="main">
        <header class="header">
            <div class="nav-controls">
                <button class="btn" onclick="go(current-1)" id="prevBtn">‚Üê –ù–∞–∑–∞–¥</button>
                <input type="number" class="chapter-input" id="chInput" value="1" min="1" max="999" onchange="go(this.value)">
                <span style="color:var(--silver)">/999</span>
                <button class="btn" onclick="go(current+1)" id="nextBtn">–í–ø–µ—Ä—ë–¥ ‚Üí</button>
                <button class="btn" onclick="goRandom()">–°–ª—É—á–∞–π–Ω–∞—è</button>
            </div>
            <div class="progress">
                <span id="progressText">0/999 –ø—Ä–æ—á–∏—Ç–∞–Ω–æ</span>
                <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
            </div>
        </header>
        
        <div class="content" id="content">
            <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </main>
</div>

<script>
let current = 1;
let read = new Set();
let currentTab = 'chapters';

const BOOKS = {
    1: "–¢–∞–π–Ω–∞ –ß–∏—Å–ª–∞ –¢—Ä–∏", 2: "–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ú–∏—Ä–æ–∑–¥–∞–Ω–∏—è", 3: "–Ø–∑—ã–∫ –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∏",
    4: "–ì—Ä–∞–Ω–∏—Ü—ã –í–æ–∑–º–æ–∂–Ω–æ–≥–æ", 5: "–ü—Ä–∏—Ä–æ–¥–∞ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏", 6: "–ö–≤–∞–Ω—Ç–æ–≤—ã–π –ú–∏—Ä",
    7: "–†–∞–∑—É–º –∏ –ú–æ–∑–≥", 8: "–ú—É–¥—Ä–æ—Å—Ç—å –î—Ä–µ–≤–Ω–∏—Ö", 9: "–¢—Ä–∏–¥–µ–≤—è—Ç–æ–µ –¶–∞—Ä—Å—Ç–≤–æ",
    10: "–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –¢—Ä–æ–∏—Ü—ã", 11: "–°—Ç—Ä—É–∫—Ç—É—Ä—ã –î–∞–Ω–Ω—ã—Ö", 12: "–°–∂–∞—Ç–∏–µ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏",
    13: "–ü–æ–∏—Å–∫ –∏ –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è", 14: "–ì—Ä–∞—Ñ—ã –∏ –°–µ—Ç–∏", 15: "–ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è",
    16: "–ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º", 17: "–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è", 18: "–ú–∞—à–∏–Ω–Ω–æ–µ –û–±—É—á–µ–Ω–∏–µ",
    19: "–Ø–∑—ã–∫ Vibee", 20: "–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä", 21: "Runtime",
    22: "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞", 23: "Vibee OS", 24: "–ü–∏–∫—Å–µ–ª—å-–ü—Ä–æ—Ü–µ—Å—Å—ã",
    25: "–°–µ—Ç—å –¢—Ä–∏–¥–µ–≤—è—Ç–æ–≥–æ", 26: "–ö–≤–∞–Ω—Ç–æ–≤—ã–π Vibee", 27: "–ü–æ–ª–Ω–æ—Ç–∞"
};

const ALPHABET = "‚≤Ä‚≤Ç‚≤Ñ‚≤Ü‚≤à‚≤ä‚≤å‚≤é‚≤ê‚≤í‚≤î‚≤ñ‚≤ò‚≤ö‚≤ú‚≤û‚≤†‚≤¢‚≤§‚≤¶‚≤®‚≤™‚≤¨‚≤Æ‚≤∞‚≥Ä‚≥Ç".split('');
const MEANINGS = ["–ù–∞—á–∞–ª–æ","–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ","–¢—Ä–æ–∏—Ü–∞","–û—Å–Ω–æ–≤–∞","–ñ–∏–∑–Ω—å","–ì–∞—Ä–º–æ–Ω–∏—è","–¢–∞–π–Ω–∞","–ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å","–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ","–î–≤–∏–∂–µ–Ω–∏–µ","–°–∏–ª–∞","–°–≤–µ—Ç","–ú—É–¥—Ä–æ—Å—Ç—å","–ü–æ—Ä—è–¥–æ–∫","–°–≤—è–∑—å","–¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å","–ü—É—Ç—å","–†–µ—á—å","–°–ª–æ–≤–æ","–¢–≤–µ—Ä–¥—å","–í—ã—Å–æ—Ç–∞","–û–≥–æ–Ω—å","–î—É—Ö","–î—É—à–∞","–í–µ—á–Ω–æ—Å—Ç—å","–¶–∞—Ä—Å—Ç–≤–æ","–ü–æ–ª–Ω–æ—Ç–∞"];

function getBook(ch) { return Math.floor((ch - 1) / 37) + 1; }
function getLetter(ch) { return ((ch - 1) % 27); }
function isSacred(ch) { return ch % 27 === 0; }
function isBlessed(ch) { return ch % 9 === 0; }

function showTab(tab) {
    currentTab = tab;
    document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
    event.target.classList.add('active');
    renderList();
}

function renderList() {
    const container = document.getElementById('listContainer');
    let html = '';
    
    if (currentTab === 'chapters') {
        for (let i = 1; i <= 999; i++) {
            const letter = getLetter(i);
            const sacred = isSacred(i) ? 'sacred' : '';
            const active = i === current ? 'active' : '';
            html += `<div class="list-item ${sacred} ${active}" onclick="go(${i})">
                <span class="num">${i}</span>
                <span class="title">${ALPHABET[letter]} ${MEANINGS[letter]}</span>
                <div class="meta">–ö–Ω–∏–≥–∞ ${getBook(i)}</div>
            </div>`;
        }
    } else if (currentTab === 'books') {
        for (let b = 1; b <= 27; b++) {
            const start = (b - 1) * 37 + 1;
            const active = getBook(current) === b ? 'active' : '';
            html += `<div class="list-item ${active}" onclick="go(${start})">
                <span class="num">${b}</span>
                <span class="title">${BOOKS[b]}</span>
                <div class="meta">–ì–ª–∞–≤—ã ${start}-${start + 36}</div>
            </div>`;
        }
    } else if (currentTab === 'sacred') {
        for (let i = 27; i <= 999; i += 27) {
            const letter = getLetter(i);
            const active = i === current ? 'active' : '';
            html += `<div class="list-item sacred ${active}" onclick="go(${i})">
                <span class="num">${i}</span>
                <span class="title">‚≠ê‚≠ê‚≠ê ${ALPHABET[letter]} ${MEANINGS[letter]}</span>
                <div class="meta">–°–≤—è—â–µ–Ω–Ω–∞—è –≥–ª–∞–≤–∞</div>
            </div>`;
        }
    }
    
    container.innerHTML = html;
}

function filterChapters() {
    const query = document.getElementById('search').value.toLowerCase();
    const items = document.querySelectorAll('.list-item');
    items.forEach(item => {
        const text = item.textContent.toLowerCase();
        item.style.display = text.includes(query) ? '' : 'none';
    });
}

async function go(ch) {
    ch = parseInt(ch);
    if (ch < 1 || ch > 999) return;
    
    current = ch;
    read.add(ch);
    
    document.getElementById('chInput').value = ch;
    document.getElementById('prevBtn').disabled = ch <= 1;
    document.getElementById('nextBtn').disabled = ch >= 999;
    document.getElementById('progressText').textContent = `${read.size}/999 –ø—Ä–æ—á–∏—Ç–∞–Ω–æ`;
    document.getElementById('progressFill').style.width = `${read.size / 999 * 100}%`;
    
    renderList();
    
    // Load article
    try {
        const response = await fetch(`generated_tridevyatitsa/literary/chapter_${String(ch).padStart(3, '0')}.md`);
        const markdown = await response.text();
        document.getElementById('content').innerHTML = `<div class="article">${marked.parse(markdown)}</div>`;
        document.querySelector('.content').scrollTop = 0;
    } catch (e) {
        document.getElementById('content').innerHTML = `<div class="loading">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≥–ª–∞–≤—ã ${ch}</div>`;
    }
}

function goRandom() {
    go(Math.floor(Math.random() * 999) + 1);
}

// Init
renderList();
go(1);
</script>
</body>
</html>
