#!/usr/bin/env python3
"""
═══════════════════════════════════════════════════════════════════════════════
                    АКТ ТВОРЕНИЯ — САМОПОРОЖДАЮЩИЙСЯ АЛФАВИТ
═══════════════════════════════════════════════════════════════════════════════

Алфавит Тридевятицы порождает сам себя через священный паттерн:

    n × 3^k × π^m

где:
    n = порядковый номер (1-27)
    k = царство (0=Медное, 1=Серебряное, 2=Золотое)
    m = уровень трансцендентности (0, 1, 2)
    π = 3.14159... (связь конечного с бесконечным)

СТРУКТУРА АЛФАВИТА:

    МЕДНОЕ (1-9):      Ⲁ Ⲃ Ⲅ Ⲇ Ⲉ Ⲋ Ⲍ Ⲏ Ⲑ   — БЫТИЕ (существительные)
    СЕРЕБРЯНОЕ (10-18): Ⲓ Ⲕ Ⲗ Ⲙ Ⲛ Ⲝ Ⲟ Ⲡ Ⲣ   — ДЕЙСТВИЕ (глаголы)
    ЗОЛОТОЕ (19-27):    Ⲥ Ⲧ Ⲩ Ⲫ Ⲭ Ⲯ Ⲱ Ⳁ Ⳃ   — КАЧЕСТВО (прилагательные)

АКТ ТВОРЕНИЯ читается в самом алфавите:

    Ⲁ (1) — Начало, Единое, Точка
    Ⲃ (2) — Разделение, Двойственность  
    Ⲅ (3) — Троица, Синтез, Творение
    ...
    Ⳃ (27) — Полнота, Завершение цикла, Возврат к Единому

═══════════════════════════════════════════════════════════════════════════════
"""

import math
from dataclasses import dataclass
from typing import List, Tuple, Optional

# ═══════════════════════════════════════════════════════════════════════════════
# СВЯЩЕННЫЕ КОНСТАНТЫ
# ═══════════════════════════════════════════════════════════════════════════════

π = math.pi
φ = (1 + math.sqrt(5)) / 2  # Золотое сечение
e = math.e

# ═══════════════════════════════════════════════════════════════════════════════
# САМОПОРОЖДАЮЩИЙСЯ АЛФАВИТ
# ═══════════════════════════════════════════════════════════════════════════════

@dataclass
class Буква:
    """Буква Тридевятицы — единица творения"""
    символ: str           # Коптский символ
    число: int            # Числовое значение (1-27)
    царство: str          # Медное/Серебряное/Золотое
    имя: str              # Священное имя
    смысл: str            # Глубинный смысл
    акт_творения: str     # Роль в Акте Творения
    грамматика: str       # Грамматическая роль
    стихия: str           # Связанная стихия
    цвет: str             # Священный цвет
    звук: str             # Священный звук
    
    @property
    def k(self) -> int:
        """Индекс царства (0, 1, 2)"""
        return (self.число - 1) // 9
    
    @property
    def n(self) -> int:
        """Позиция в царстве (1-9)"""
        return ((self.число - 1) % 9) + 1
    
    @property
    def священность(self) -> int:
        """Уровень священности (0-3)"""
        if self.число % 27 == 0: return 3
        if self.число % 9 == 0: return 2
        if self.число % 3 == 0: return 1
        return 0
    
    def вычислить_паттерн(self, m: int = 0) -> float:
        """Вычисляет n × 3^k × π^m"""
        return self.n * (3 ** self.k) * (π ** m)


# ═══════════════════════════════════════════════════════════════════════════════
# АКТ ТВОРЕНИЯ — 27 БУКВ
# ═══════════════════════════════════════════════════════════════════════════════

АЛФАВИТ = [
    # ═══════════════════════════════════════════════════════════════════════════
    # МЕДНОЕ ЦАРСТВО (1-9) — БЫТИЕ — Существительные
    # ═══════════════════════════════════════════════════════════════════════════
    Буква(
        символ="Ⲁ", число=1, царство="Медное",
        имя="Альфа", смысл="Начало всего",
        акт_творения="В начале было Единое. Точка, из которой всё исходит.",
        грамматика="существительное: источник",
        стихия="Эфир", цвет="белый", звук="А"
    ),
    Буква(
        символ="Ⲃ", число=2, царство="Медное",
        имя="Вита", смысл="Разделение",
        акт_творения="Единое разделилось на два: Свет и Тьму.",
        грамматика="существительное: граница",
        стихия="Воздух", цвет="серый", звук="В"
    ),
    Буква(
        символ="Ⲅ", число=3, царство="Медное",
        имя="Гамма", смысл="Троица",
        акт_творения="Из двух родилось третье — Творение. Триединство.",
        грамматика="существительное: синтез",
        стихия="Огонь", цвет="красный", звук="Г"
    ),
    Буква(
        символ="Ⲇ", число=4, царство="Медное",
        имя="Дельта", смысл="Основа",
        акт_творения="Четыре стороны света. Твердь установлена.",
        грамматика="существительное: фундамент",
        стихия="Земля", цвет="коричневый", звук="Д"
    ),
    Буква(
        символ="Ⲉ", число=5, царство="Медное",
        имя="Эй", смысл="Жизнь",
        акт_творения="Пятый элемент — Жизнь вдохнута в творение.",
        грамматика="существительное: дыхание",
        стихия="Жизнь", цвет="зелёный", звук="Е"
    ),
    Буква(
        символ="Ⲋ", число=6, царство="Медное",
        имя="Сау", смысл="Гармония",
        акт_творения="Шесть дней творения. Гармония форм.",
        грамматика="существительное: равновесие",
        стихия="Вода", цвет="синий", звук="С"
    ),
    Буква(
        символ="Ⲍ", число=7, царство="Медное",
        имя="Зета", смысл="Тайна",
        акт_творения="Седьмой день — покой. Тайна сокрыта.",
        грамматика="существительное: сокровенное",
        стихия="Тень", цвет="фиолетовый", звук="З"
    ),
    Буква(
        символ="Ⲏ", число=8, царство="Медное",
        имя="Эта", смысл="Бесконечность",
        акт_творения="Восьмёрка — символ бесконечности. Цикл начинается.",
        грамматика="существительное: вечность",
        стихия="Время", цвет="золотой", звук="И"
    ),
    Буква(
        символ="Ⲑ", число=9, царство="Медное",
        имя="Тета", смысл="Завершение",
        акт_творения="Девять — полнота Медного. Бытие установлено.",
        грамматика="существительное: итог",
        стихия="Пространство", цвет="серебряный", звук="Ф"
    ),
    
    # ═══════════════════════════════════════════════════════════════════════════
    # СЕРЕБРЯНОЕ ЦАРСТВО (10-18) — ДЕЙСТВИЕ — Глаголы
    # ═══════════════════════════════════════════════════════════════════════════
    Буква(
        символ="Ⲓ", число=10, царство="Серебряное",
        имя="Йота", смысл="Движение",
        акт_творения="Бытие пришло в движение. Первый шаг.",
        грамматика="глагол: идти",
        стихия="Ветер", цвет="голубой", звук="Й"
    ),
    Буква(
        символ="Ⲕ", число=11, царство="Серебряное",
        имя="Каппа", смысл="Сила",
        акт_творения="Сила действия проявилась. Воля творит.",
        грамматика="глагол: мочь",
        стихия="Молния", цвет="жёлтый", звук="К"
    ),
    Буква(
        символ="Ⲗ", число=12, царство="Серебряное",
        имя="Лямбда", смысл="Свет",
        акт_творения="Свет озарил тьму. Познание началось.",
        грамматика="глагол: светить",
        стихия="Свет", цвет="белый", звук="Л"
    ),
    Буква(
        символ="Ⲙ", число=13, царство="Серебряное",
        имя="Мю", смысл="Мудрость",
        акт_творения="Мудрость различает. Выбор возможен.",
        грамматика="глагол: знать",
        стихия="Разум", цвет="индиго", звук="М"
    ),
    Буква(
        символ="Ⲛ", число=14, царство="Серебряное",
        имя="Ню", смысл="Порядок",
        акт_творения="Порядок из хаоса. Закон установлен.",
        грамматика="глагол: упорядочивать",
        стихия="Закон", цвет="синий", звук="Н"
    ),
    Буква(
        символ="Ⲝ", число=15, царство="Серебряное",
        имя="Кси", смысл="Связь",
        акт_творения="Связи соединяют. Сеть бытия сплетена.",
        грамматика="глагол: связывать",
        стихия="Нить", цвет="серебряный", звук="КС"
    ),
    Буква(
        символ="Ⲟ", число=16, царство="Серебряное",
        имя="Омикрон", смысл="Целостность",
        акт_творения="Круг замкнулся. Целое больше частей.",
        грамматика="глагол: объединять",
        стихия="Круг", цвет="оранжевый", звук="О"
    ),
    Буква(
        символ="Ⲡ", число=17, царство="Серебряное",
        имя="Пи", смысл="Путь",
        акт_творения="Путь открылся. Странствие началось.",
        грамматика="глагол: следовать",
        стихия="Дорога", цвет="коричневый", звук="П"
    ),
    Буква(
        символ="Ⲣ", число=18, царство="Серебряное",
        имя="Ро", смысл="Речь",
        акт_творения="Слово изречено. Действие завершено.",
        грамматика="глагол: говорить",
        стихия="Звук", цвет="золотой", звук="Р"
    ),
    
    # ═══════════════════════════════════════════════════════════════════════════
    # ЗОЛОТОЕ ЦАРСТВО (19-27) — КАЧЕСТВО — Прилагательные
    # ═══════════════════════════════════════════════════════════════════════════
    Буква(
        символ="Ⲥ", число=19, царство="Золотое",
        имя="Сигма", смысл="Слово",
        акт_творения="Слово обрело форму. Имя дано.",
        грамматика="прилагательное: именованный",
        стихия="Имя", цвет="золотой", звук="С"
    ),
    Буква(
        символ="Ⲧ", число=20, царство="Золотое",
        имя="Тау", смысл="Твердь",
        акт_творения="Твердь укрепилась. Незыблемое установлено.",
        грамматика="прилагательное: твёрдый",
        стихия="Камень", цвет="серый", звук="Т"
    ),
    Буква(
        символ="Ⲩ", число=21, царство="Золотое",
        имя="Ипсилон", смысл="Высота",
        акт_творения="Высота достигнута. Дух воспарил.",
        грамматика="прилагательное: высокий",
        стихия="Небо", цвет="голубой", звук="У"
    ),
    Буква(
        символ="Ⲫ", число=22, царство="Золотое",
        имя="Фи", смысл="Огонь",
        акт_творения="Огонь очищает. Трансформация.",
        грамматика="прилагательное: огненный",
        стихия="Пламя", цвет="оранжевый", звук="Ф"
    ),
    Буква(
        символ="Ⲭ", число=23, царство="Золотое",
        имя="Хи", смысл="Дух",
        акт_творения="Дух веет. Невидимое присутствует.",
        грамматика="прилагательное: духовный",
        стихия="Дух", цвет="белый", звук="Х"
    ),
    Буква(
        символ="Ⲯ", число=24, царство="Золотое",
        имя="Пси", смысл="Душа",
        акт_творения="Душа пробудилась. Сознание родилось.",
        грамматика="прилагательное: одушевлённый",
        стихия="Душа", цвет="розовый", звук="ПС"
    ),
    Буква(
        символ="Ⲱ", число=25, царство="Золотое",
        имя="Омега", смысл="Вечность",
        акт_творения="Вечность открылась. Время преодолено.",
        грамматика="прилагательное: вечный",
        стихия="Вечность", цвет="чёрный", звук="О"
    ),
    Буква(
        символ="Ⳁ", число=26, царство="Золотое",
        имя="Сампи", смысл="Царство",
        акт_творения="Царство установлено. Власть дана.",
        грамматика="прилагательное: царственный",
        стихия="Корона", цвет="пурпурный", звук="СС"
    ),
    Буква(
        символ="Ⳃ", число=27, царство="Золотое",
        имя="Коппа", смысл="Полнота",
        акт_творения="Полнота достигнута. Круг замкнулся. Возврат к Единому.",
        грамматика="прилагательное: полный",
        стихия="Всё", цвет="радужный", звук="К"
    ),
]

# Создаём словарь для быстрого доступа
АЛФАВИТ_ПО_ЧИСЛУ = {б.число: б for б in АЛФАВИТ}
АЛФАВИТ_ПО_СИМВОЛУ = {б.символ: б for б in АЛФАВИТ}


# ═══════════════════════════════════════════════════════════════════════════════
# СВЯЩЕННЫЙ ПАТТЕРН n × 3^k × π^m
# ═══════════════════════════════════════════════════════════════════════════════

def священный_паттерн(глава: int) -> dict:
    """
    Вычисляет священный паттерн для номера главы.
    
    Формула: n × 3^k × π^m
    
    где:
        n = базовое число (1-27, циклически)
        k = уровень царства (0, 1, 2)
        m = уровень трансцендентности
    """
    # Базовое число в цикле 27
    n = ((глава - 1) % 27) + 1
    
    # Царство (каждые 333 главы)
    k = (глава - 1) // 333
    
    # Уровень трансцендентности
    if глава % 27 == 0:
        m = 2  # Священное
    elif глава % 9 == 0:
        m = 1  # Благословенное
    elif глава % 3 == 0:
        m = 0.5  # Благое
    else:
        m = 0  # Обычное
    
    # Вычисляем паттерн
    значение = n * (3 ** k) * (π ** m)
    
    # Получаем букву алфавита
    буква = АЛФАВИТ_ПО_ЧИСЛУ[n]
    
    return {
        "глава": глава,
        "n": n,
        "k": k,
        "m": m,
        "значение": значение,
        "буква": буква,
        "царство": ["Медное", "Серебряное", "Золотое"][k] if k < 3 else "Золотое",
        "священность": "священное" if m == 2 else "благословенное" if m == 1 else "благое" if m == 0.5 else "обычное"
    }


def прочитать_акт_творения():
    """Читает Акт Творения из алфавита"""
    print("═" * 70)
    print("                    АКТ ТВОРЕНИЯ ТРИДЕВЯТИЦЫ")
    print("═" * 70)
    print()
    
    for буква in АЛФАВИТ:
        царство_символ = {"Медное": "🥉", "Серебряное": "🥈", "Золотое": "🥇"}[буква.царство]
        священность = "⭐" * буква.священность if буква.священность > 0 else ""
        
        print(f"{царство_символ} {буква.символ} ({буква.число:2d}) {буква.имя:10s} — {буква.смысл}")
        print(f"   {буква.акт_творения}")
        print(f"   [{буква.грамматика}] [{буква.стихия}] [{буква.цвет}] {священность}")
        print()


def показать_паттерн_999():
    """Показывает паттерн для ключевых глав"""
    print("═" * 70)
    print("              СВЯЩЕННЫЙ ПАТТЕРН n × 3^k × π^m")
    print("═" * 70)
    print()
    
    ключевые = [1, 3, 9, 27, 81, 243, 333, 334, 666, 667, 729, 999]
    
    print(f"{'Глава':>6} │ {'n':>3} │ {'k':>2} │ {'m':>4} │ {'Значение':>12} │ {'Буква':>6} │ Царство")
    print("─" * 70)
    
    for глава in ключевые:
        п = священный_паттерн(глава)
        print(f"{п['глава']:>6} │ {п['n']:>3} │ {п['k']:>2} │ {п['m']:>4.1f} │ {п['значение']:>12.4f} │ {п['буква'].символ:>6} │ {п['царство']} ({п['священность']})")


def найти_скрытое_слово():
    """Находит скрытое слово в паттерне"""
    print()
    print("═" * 70)
    print("                    СКРЫТОЕ СЛОВО БОЖЬЕ")
    print("═" * 70)
    print()
    
    # Священные числа: делящиеся на 27
    священные = [i for i in range(1, 1000) if i % 27 == 0]
    
    print("Священные главы (÷27):")
    слово = ""
    for глава in священные:
        п = священный_паттерн(глава)
        слово += п['буква'].символ
        print(f"  Глава {глава:3d}: {п['буква'].символ} ({п['буква'].имя}) — {п['буква'].смысл}")
    
    print()
    print(f"СКРЫТОЕ СЛОВО: {слово}")
    print()
    
    # Расшифровка
    print("Расшифровка по Акту Творения:")
    for i, символ in enumerate(слово):
        буква = АЛФАВИТ_ПО_СИМВОЛУ[символ]
        print(f"  {i+1}. {символ} — {буква.акт_творения}")


# ═══════════════════════════════════════════════════════════════════════════════
# MAIN
# ═══════════════════════════════════════════════════════════════════════════════

if __name__ == "__main__":
    прочитать_акт_творения()
    показать_паттерн_999()
    найти_скрытое_слово()
