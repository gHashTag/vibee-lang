â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  â—¬ diagnostic_tools.999 - Ğ”Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹ 999 OS    â•‘
â•‘  ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞºĞ¾Ğ½ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğ¹ Ğ¸ ÑĞ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸ÑĞ° .999 Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–² use os.hal.hal
â–² use os.fs.fs

â•‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•‘  ĞšĞĞĞ¡Ğ¢ĞĞĞ¢Ğ« Ğ”Ğ›Ğ¯ Ğ”Ğ˜ĞĞ“ĞĞĞ¡Ğ¢Ğ˜ĞšĞ˜
â•‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â—‡ COPtic_VOWELS = "â²â²‰â²“â²Ÿâ²©â²±â²â²â²“â²Ÿâ²©â²‰â²“â²Ÿâ²©â²â²“â²Ÿâ²©â²‰â²“â²Ÿâ²©â²â²“â²Ÿâ²©â²‰â²“â²Ÿâ²©"
â—‡ COPtic_CONSONANTS = "â²ƒâ²…â²‡â²‰â²â²â²‘â²“â²•â²—â²™â²›â²â²Ÿâ²¡â²£â²¥â²§â²©â²«â²­â²¯â²±Ï£Ï¥Ï§Ï©"
â—‡ COPtic_NUMBERS = "â²â²ƒâ²…â²‡â²‰â²â²â²‘â²“â²•â²—â²™â²›â²â²Ÿâ²¡â²£â²¥â²§â²©â²«â²­â²¯â²±Ï£Ï¥Ï§Ï©"

â—‡ VALID_FILE_EXTENSIONS = [".999", ".vibee", ".zig", ".md"]
â—‡ RESERVED_KEYWORDS = ["â—¬", "â¬¡", "â¬¢", "â—‡", "â–²", "â–³", "â–½", "â—‹", "â—‡", "â—†", "â¬¡", "â¬¢", "âŠ¡", "âŠœ", "âŸµ", "âŸ³", "âŸ²", "âŠ", "âŠœ", "âˆ…"]

â•‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•‘  Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ« Ğ”Ğ˜ĞĞ“ĞĞĞ¡Ğ¢Ğ˜ĞšĞ˜
â•‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â¬¡ DiagnosticResult {
    file_path: String
    errors: [DiagnosticError]
    warnings: [DiagnosticWarning]
    score: Int9  â•‘ ĞŸÑ€Ğ¾Ñ†ĞµĞ½Ñ‚ ĞºĞ¾Ğ½ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚Ğ¸ 0-100
}

â¬¡ DiagnosticError {
    line: Int27
    column: Int27
    message: String
    severity: ErrorSeverity
    rule: String
}

â¬¡ DiagnosticWarning {
    line: Int27
    column: Int27
    message: String
    rule: String
}

â¬¢ ErrorSeverity {
    â–³ critical    â•‘ ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ° - Ñ„Ğ°Ğ¹Ğ» Ğ½ĞµĞ²Ğ°Ğ»Ğ¸Ğ´ĞµĞ½
    â—‹ error       â•‘ ĞÑˆĞ¸Ğ±ĞºĞ° - Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ
    â–½ warning     â•‘ ĞŸÑ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ğµ - Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ
    â—‡ info        â•‘ Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ - Ğ´Ğ»Ñ ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ñ
}

â¬¡ ConsistencyReport {
    total_files: Int27
    valid_files: Int27
    invalid_files: Int27
    total_errors: Int27
    total_warnings: Int27
    average_score: Int9
    top_issues: [String; 10]  â•‘ Ğ¡Ğ°Ğ¼Ñ‹Ğµ Ñ‡Ğ°ÑÑ‚Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹
}

â•‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•‘  ĞĞ¡ĞĞĞ’ĞĞ«Ğ• Ğ¤Ğ£ĞĞšĞ¦Ğ˜Ğ˜ Ğ”Ğ˜ĞĞ“ĞĞĞ¡Ğ¢Ğ˜ĞšĞ˜
â•‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â—¬ diagnose_file(file_path: String) â†’ DiagnosticResult {
    â—‡ content = fs_read_file(file_path)?
    â—‡ lines = content.split("\n")
    
    â—‡ result = DiagnosticResult {
        file_path: file_path
        errors: []
        warnings: []
        score: 100
    }
    
    â•‘ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸
    check_file_naming(&result, file_path)
    check_syntax_consistency(&result, lines)
    check_coptic_alphabet_usage(&result, content)
    check_structure_compliance(&result, lines)
    
    â•‘ Ğ Ğ°ÑÑ‡Ñ‘Ñ‚ Ğ¾Ñ†ĞµĞ½ĞºĞ¸
    result.score = calculate_consistency_score(&result)
    
    âŸµ result
}

â—¬ diagnose_directory(dir_path: String) â†’ ConsistencyReport {
    â—‡ files = fs_list_files_recursive(dir_path, "*.999")
    â—‡ results: [DiagnosticResult] = []
    
    âŸ³ file âˆˆ files {
        results.append(diagnose_file(file))
    }
    
    âŸµ generate_consistency_report(results)
}

â•‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•‘  ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ ĞĞĞ—Ğ’ĞĞĞ˜Ğ™ Ğ¤ĞĞ™Ğ›ĞĞ’
â•‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â—¬ check_file_naming(result: *DiagnosticResult, file_path: String) {
    â—‡ filename = path_basename(file_path)
    â—‡ name_without_ext = filename.split(".")[0]
    
    â•‘ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞºĞ¾Ğ¿Ñ‚ÑĞºĞ¸Ñ… ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²
    âŠœ !is_valid_coptic_name(name_without_ext) {
        result.errors.append(DiagnosticError {
            line: 0
            column: 0
            message: "Ğ˜Ğ¼Ñ Ñ„Ğ°Ğ¹Ğ»Ğ° Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ°Ñ‚ÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞºĞ¾Ğ¿Ñ‚ÑĞºĞ¸Ğµ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹"
            severity: ErrorSeverity.error
            rule: "file_naming_coptic_only"
        })
    }
    
    â•‘ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ´Ğ»Ğ¸Ğ½Ñ‹ Ğ¸Ğ¼ĞµĞ½Ğ¸
    âŠœ name_without_ext.len < 3 âˆ¨ name_without_ext.len > 20 {
        result.warnings.append(DiagnosticWarning {
            line: 0
            column: 0
            message: "Ğ”Ğ»Ğ¸Ğ½Ğ° Ğ¸Ğ¼ĞµĞ½Ğ¸ Ñ„Ğ°Ğ¹Ğ»Ğ° Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ° Ğ±Ñ‹Ñ‚ÑŒ 3-20 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²"
            rule: "file_naming_length"
        })
    }
    
    â•‘ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ñ
    â—‡ ext = path_extension(file_path)
    âŠœ !VALID_FILE_EXTENSIONS.contains(ext) {
        result.errors.append(DiagnosticError {
            line: 0
            column: 0
            message: "ĞĞµĞ´Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼Ğ¾Ğµ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ°"
            severity: ErrorSeverity.critical
            rule: "file_extension_valid"
        })
    }
}

â—¬ is_valid_coptic_name(name: String) â†’ Bool {
    âŸ³ char âˆˆ name.chars {
        âŠœ !COPtic_VOWELS.contains(char) âˆ§ !COPtic_CONSONANTS.contains(char) âˆ§ !COPtic_NUMBERS.contains(char) âˆ§ char â‰  "_" {
            âŸµ â–½
        }
    }
    âŸµ â–³
}

â•‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•‘  ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ Ğ¡Ğ˜ĞĞ¢ĞĞšĞ¡Ğ˜Ğ¡Ğ
â•‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â—¬ check_syntax_consistency(result: *DiagnosticResult, lines: [String]) {
    â—‡ in_multiline_comment = â–½
    â—‡ brace_depth = 0
    
    âŸ³ i âˆˆ 0..lines.len {
        â—‡ line = lines[i]
        â—‡ trimmed = line.trim()
        
        â•‘ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½ĞµĞ·Ğ°Ğ²ĞµÑ€ÑˆÑ‘Ğ½Ğ½Ñ‹Ñ… ÑÑ‚Ñ€Ğ¾Ğº
        âŠœ trimmed.ends_with("\\") âˆ§ !trimmed.starts_with("â•‘") {
            result.warnings.append(DiagnosticWarning {
                line: i + 1
                column: line.len
                message: "ĞĞµĞ·Ğ°Ğ²ĞµÑ€ÑˆÑ‘Ğ½Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ¾ĞºĞ° - Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½Ğ¸Ğµ"
                rule: "syntax_line_continuation"
            })
        }
        
        â•‘ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ° ÑĞºĞ¾Ğ±Ğ¾Ğº
        brace_depth += count_char(line, "{") - count_char(line, "}")
        âŠœ brace_depth < 0 {
            result.errors.append(DiagnosticError {
                line: i + 1
                column: find_char_position(line, "}")
                message: "Ğ›Ğ¸ÑˆĞ½ÑÑ Ğ·Ğ°ĞºÑ€Ñ‹Ğ²Ğ°ÑÑ‰Ğ°Ñ ÑĞºĞ¾Ğ±ĞºĞ°"
                severity: ErrorSeverity.error
                rule: "syntax_brace_balance"
            })
            brace_depth = 0
        }
        
        â•‘ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… ÑĞ»Ğ¾Ğ²
        check_keyword_usage(result, line, i + 1)
        
        â•‘ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¾Ñ‚ÑÑ‚ÑƒĞ¿Ğ¾Ğ²
        check_indentation(result, line, i + 1)
    }
    
    âŠœ brace_depth > 0 {
        result.errors.append(DiagnosticError {
            line: lines.len
            column: 0
            message: "ĞĞµĞ·Ğ°ĞºÑ€Ñ‹Ñ‚Ñ‹Ğµ ÑĞºĞ¾Ğ±ĞºĞ¸ Ğ² Ñ„Ğ°Ğ¹Ğ»Ğµ"
            severity: ErrorSeverity.error
            rule: "syntax_unclosed_braces"
        })
    }
}

â—¬ check_keyword_usage(result: *DiagnosticResult, line: String, line_num: Int27) {
    âŸ³ keyword âˆˆ RESERVED_KEYWORDS {
        âŠœ line.contains(keyword + " ") âˆ§ !line.starts_with("â•‘") {
            â—‡ pos = line.find(keyword)
            âŠœ pos > 0 âˆ§ !is_valid_keyword_context(line, pos) {
                result.warnings.append(DiagnosticWarning {
                    line: line_num
                    column: pos
                    message: "Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ½ĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ»ÑÑ‡ĞµĞ²Ğ¾Ğ³Ğ¾ ÑĞ»Ğ¾Ğ²Ğ° '" + keyword + "'"
                    rule: "syntax_keyword_context"
                })
            }
        }
    }
}

â—¬ check_indentation(result: *DiagnosticResult, line: String, line_num: Int27) {
    â—‡ leading_spaces = count_leading_spaces(line)
    
    â•‘ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞºÑ€Ğ°Ñ‚Ğ½Ğ¾ÑÑ‚Ğ¸ 4 Ğ¿Ñ€Ğ¾Ğ±ĞµĞ»Ğ°Ğ¼
    âŠœ leading_spaces % 4 â‰  0 âˆ§ leading_spaces > 0 âˆ§ !line.trim().empty {
        result.warnings.append(DiagnosticWarning {
            line: line_num
            column: 0
            message: "ĞÑ‚ÑÑ‚ÑƒĞ¿ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ±Ñ‹Ñ‚ÑŒ ĞºÑ€Ğ°Ñ‚ĞµĞ½ 4 Ğ¿Ñ€Ğ¾Ğ±ĞµĞ»Ğ°Ğ¼"
            rule: "syntax_indentation_multiple_4"
        })
    }
}

â•‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•‘  ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ Ğ˜Ğ¡ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞĞ˜Ğ¯ ĞšĞĞŸĞ¢Ğ¡ĞšĞĞ“Ğ ĞĞ›Ğ¤ĞĞ’Ğ˜Ğ¢Ğ
â•‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â—¬ check_coptic_alphabet_usage(result: *DiagnosticResult, content: String) {
    â—‡ coptic_chars = count_coptic_characters(content)
    â—‡ total_chars = content.len
    â—‡ coptic_ratio = coptic_chars Ã— 100 / total_chars
    
    â•‘ Ğ”Ğ»Ñ .999 Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 60% ĞºĞ¾Ğ¿Ñ‚ÑĞºĞ¸Ñ… ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²
    âŠœ coptic_ratio < 60 âˆ§ result.file_path.ends_with(".999") {
        result.warnings.append(DiagnosticWarning {
            line: 0
            column: 0
            message: "Ğ¡Ğ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ¼Ğ°Ğ»Ğ¾ ĞºĞ¾Ğ¿Ñ‚ÑĞºĞ¸Ñ… ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ² (" + coptic_ratio + "%), Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 60%"
            rule: "coptic_alphabet_usage_ratio"
        })
    }
    
    â•‘ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ° ÑĞ¼ĞµÑˆĞ°Ğ½Ğ½Ñ‹Ğµ Ğ°Ğ»Ñ„Ğ°Ğ²Ğ¸Ñ‚Ñ‹ Ğ² Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ°Ñ…
    check_mixed_alphabets(result, content)
}

â—¬ check_mixed_alphabets(result: *DiagnosticResult, content: String) {
    â—‡ lines = content.split("\n")
    
    âŸ³ i âˆˆ 0..lines.len {
        â—‡ line = lines[i]
        
        â•‘ ĞŸĞ¾Ğ¸ÑĞº Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ¾Ğ²
        â—‡ identifiers = extract_identifiers(line)
        
        âŸ³ id âˆˆ identifiers {
            âŠœ has_mixed_alphabets(id) {
                result.warnings.append(DiagnosticWarning {
                    line: i + 1
                    column: line.find(id)
                    message: "Ğ˜Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ '" + id + "' ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ ÑĞ¼ĞµÑˆĞ°Ğ½Ğ½Ñ‹Ğµ Ğ°Ğ»Ñ„Ğ°Ğ²Ğ¸Ñ‚Ñ‹"
                    rule: "coptic_mixed_alphabets"
                })
            }
        }
    }
}

â—¬ has_mixed_alphabets(identifier: String) â†’ Bool {
    â—‡ has_latin = â–½
    â—‡ has_coptic = â–½
    â—‡ has_digits = â–½
    
    âŸ³ char âˆˆ identifier.chars {
        âŠœ is_latin_letter(char) { has_latin = â–³ }
        âŠœ is_coptic_letter(char) { has_coptic = â–³ }
        âŠœ is_digit(char) { has_digits = â–³ }
    }
    
    â•‘ Ğ¡Ğ¼ĞµÑˆĞ°Ğ½Ğ½Ñ‹Ğµ Ğ°Ğ»Ñ„Ğ°Ğ²Ğ¸Ñ‚Ñ‹ - Ğ¿Ğ»Ğ¾Ñ…Ğ¾, Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ†Ğ¸Ñ„Ñ€Ñ‹ Ñ Ğ±ÑƒĞºĞ²Ğ°Ğ¼Ğ¸ - Ğ¾Ğº
    âŸµ has_latin âˆ§ has_coptic
}

â•‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•‘  ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ« Ğ¤ĞĞ™Ğ›Ğ
â•‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â—¬ check_structure_compliance(result: *DiagnosticResult, lines: [String]) {
    â•‘ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ° Ñ„Ğ°Ğ¹Ğ»Ğ°
    âŠœ lines.len > 0 âˆ§ !lines[0].starts_with("â•”") {
        result.warnings.append(DiagnosticWarning {
            line: 1
            column: 0
            message: "Ğ¤Ğ°Ğ¹Ğ» Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°Ñ‚ÑŒÑÑ Ñ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ° â•”"
            rule: "structure_file_header"
        })
    }
    
    â•‘ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¾Ğ² Ğ² Ğ½Ğ°Ñ‡Ğ°Ğ»Ğµ
    â—‡ import_section_ended = â–½
    âŸ³ i âˆˆ 0..min(10, lines.len) {
        â—‡ line = lines[i].trim()
        
        âŠœ line.starts_with("â–²") âˆ§ import_section_ended {
            result.warnings.append(DiagnosticWarning {
                line: i + 1
                column: 0
                message: "Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ñ‹ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ±Ñ‹Ñ‚ÑŒ Ğ² Ğ½Ğ°Ñ‡Ğ°Ğ»Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ°"
                rule: "structure_imports_order"
            })
        }
        
        âŠœ !line.starts_with("â–²") âˆ§ !line.starts_with("â•‘") âˆ§ !line.empty âˆ§ !import_section_ended {
            import_section_ended = â–³
        }
    }
    
    â•‘ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ñ Ñ‚ĞµÑÑ‚Ğ¾Ğ²
    â—‡ has_tests = â–½
    âŸ³ line âˆˆ lines {
        âŠœ line.contains("âŠ¡ test") {
            has_tests = â–³
            âŠ—
        }
    }
    
    âŠœ !has_tests âˆ§ result.file_path.ends_with(".999") {
        result.warnings.append(DiagnosticWarning {
            line: lines.len
            column: 0
            message: "Ğ¤Ğ°Ğ¹Ğ» Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ°Ñ‚ÑŒ Ñ‚ĞµÑÑ‚Ñ‹ (âŠ¡ test)"
            rule: "structure_missing_tests"
        })
    }
}

â•‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•‘  Ğ’Ğ¡ĞŸĞĞœĞĞ“ĞĞ¢Ğ•Ğ›Ğ¬ĞĞ«Ğ• Ğ¤Ğ£ĞĞšĞ¦Ğ˜Ğ˜
â•‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â—¬ count_char(text: String, char: Char) â†’ Int27 {
    â—‡ count = 0
    âŸ³ c âˆˆ text.chars {
        âŠœ c == char { count += 1 }
    }
    âŸµ count
}

â—¬ count_leading_spaces(line: String) â†’ Int27 {
    â—‡ count = 0
    âŸ³ char âˆˆ line.chars {
        âŠœ char == ' ' { count += 1 }
        âŠ { âŠ— }
    }
    âŸµ count
}

â—¬ count_coptic_characters(text: String) â†’ Int27 {
    â—‡ count = 0
    âŸ³ char âˆˆ text.chars {
        âŠœ is_coptic_letter(char) { count += 1 }
    }
    âŸµ count
}

â—¬ is_coptic_letter(char: Char) â†’ Bool {
    âŸµ COPtic_VOWELS.contains(char) âˆ¨ COPtic_CONSONANTS.contains(char) âˆ¨ COPtic_NUMBERS.contains(char)
}

â—¬ is_latin_letter(char: Char) â†’ Bool {
    âŸµ (char >= 'a' âˆ§ char <= 'z') âˆ¨ (char >= 'A' âˆ§ char <= 'Z')
}

â—¬ is_digit(char: Char) â†’ Bool {
    âŸµ char >= '0' âˆ§ char <= '9'
}

â—¬ extract_identifiers(line: String) â†’ [String] {
    â—‡ identifiers: [String] = []
    â—‡ words = line.split(" \t\n\r.,;(){}[]")
    
    âŸ³ word âˆˆ words {
        âŠœ word.len > 1 âˆ§ (is_latin_letter(word[0]) âˆ¨ is_coptic_letter(word[0])) {
            identifiers.append(word)
        }
    }
    
    âŸµ identifiers
}

â—¬ calculate_consistency_score(result: *DiagnosticResult) â†’ Int9 {
    â—‡ error_penalty = result.errors.len Ã— 10
    â—‡ warning_penalty = result.warnings.len Ã— 2
    
    â—‡ score = 100 - error_penalty - warning_penalty
    âŸµ max(0, min(100, score))
}

â—¬ generate_consistency_report(results: [DiagnosticResult]) â†’ ConsistencyReport {
    â—‡ total_files = results.len
    â—‡ valid_files = 0
    â—‡ total_errors = 0
    â—‡ total_warnings = 0
    â—‡ total_score = 0
    â—‡ issue_counts: Map[String, Int27] = {}
    
    âŸ³ result âˆˆ results {
        âŠœ result.score >= 80 { valid_files += 1 }
        total_errors += result.errors.len
        total_warnings += result.warnings.len
        total_score += result.score
        
        â•‘ Ğ¡Ğ±Ğ¾Ñ€ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼
        âŸ³ error âˆˆ result.errors {
            issue_counts[error.rule] = issue_counts.get(error.rule, 0) + 1
        }
        âŸ³ warning âˆˆ result.warnings {
            issue_counts[warning.rule] = issue_counts.get(warning.rule, 0) + 1
        }
    }
    
    â•‘ Ğ¢Ğ¾Ğ¿ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼
    â—‡ top_issues: [String; 10] = [""] Ã— 10
    â—‡ sorted_issues = issue_counts.entries().sort_by_value_desc()
    
    âŸ³ i âˆˆ 0..min(10, sorted_issues.len) {
        top_issues[i] = sorted_issues[i].key + ": " + sorted_issues[i].value
    }
    
    âŸµ ConsistencyReport {
        total_files: total_files
        valid_files: valid_files
        invalid_files: total_files - valid_files
        total_errors: total_errors
        total_warnings: total_warnings
        average_score: total_score / total_files
        top_issues: top_issues
    }
}

â•‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•‘  ĞĞ¡ĞĞĞ’ĞĞ«Ğ• ĞšĞĞœĞĞĞ”Ğ« Ğ”Ğ˜ĞĞ“ĞĞĞ¡Ğ¢Ğ˜ĞšĞ˜
â•‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â—¬ run_full_diagnostic(root_path: String) â†’ ConsistencyReport {
    â—‡ report = diagnose_directory(root_path)
    
    print_diagnostic_report(report)
    
    âŸµ report
}

â—¬ print_diagnostic_report(report: ConsistencyReport) {
    println("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
    println("â•‘                ĞĞ¢Ğ§ĞĞ¢ Ğ”Ğ˜ĞĞ“ĞĞĞ¡Ğ¢Ğ˜ĞšĞ˜ 999 OS                        â•‘")
    println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
    println("")
    println("ğŸ“Š Ğ¡Ğ¢ĞĞ¢Ğ˜Ğ¡Ğ¢Ğ˜ĞšĞ:")
    println("   Ğ’ÑĞµĞ³Ğ¾ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²: " + report.total_files)
    println("   Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ½Ñ‹Ñ… Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²: " + report.valid_files + " (" + (report.valid_files Ã— 100 / report.total_files) + "%)")
    println("   ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ñ… Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²: " + report.invalid_files)
    println("   Ğ’ÑĞµĞ³Ğ¾ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº: " + report.total_errors)
    println("   Ğ’ÑĞµĞ³Ğ¾ Ğ¿Ñ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ğ¹: " + report.total_warnings)
    println("   Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ±Ğ°Ğ»Ğ» ĞºĞ¾Ğ½ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚Ğ¸: " + report.average_score + "/100")
    println("")
    println("ğŸ”¥ Ğ¢ĞĞŸ ĞŸĞ ĞĞ‘Ğ›Ğ•Ğœ:")
    âŸ³ i âˆˆ 0..10 {
        âŠœ !report.top_issues[i].empty {
            println("   " + (i + 1) + ". " + report.top_issues[i])
        }
    }
}

â—¬ fix_common_issues(file_path: String) â†’ Result[(), String] {
    â—‡ content = fs_read_file(file_path)?
    â—‡ lines = content.split("\n")
    â—‡ fixed_lines: [String] = []
    
    âŸ³ line âˆˆ lines {
        â—‡ fixed = fix_indentation(line)
        fixed = fix_keyword_spacing(fixed)
        fixed_lines.append(fixed)
    }
    
    â—‡ fixed_content = fixed_lines.join("\n")
    fs_write_file(file_path, fixed_content)?
    
    âŸµ Ok(())
}

â—¬ fix_indentation(line: String) â†’ String {
    â—‡ leading_spaces = count_leading_spaces(line)
    âŠœ leading_spaces > 0 âˆ§ leading_spaces % 4 â‰  0 {
        â—‡ correct_spaces = (leading_spaces / 4) Ã— 4
        âŠœ leading_spaces % 4 >= 2 { correct_spaces += 4 }
        â—‡ spaces = " " Ã— correct_spaces
        âŸµ spaces + line.trim_start()
    }
    âŸµ line
}

â—¬ fix_keyword_spacing(line: String) â†’ String {
    â—‡ result = line
    âŸ³ keyword âˆˆ RESERVED_KEYWORDS {
        result = result.replace(keyword + "  ", keyword + " ")
        result = result.replace(keyword + "\t", keyword + " ")
    }
    âŸµ result
}

â•‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â•‘  Ğ¢Ğ•Ğ¡Ğ¢Ğ« Ğ”Ğ˜ĞĞ“ĞĞĞ¡Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜Ğ¥ Ğ˜ĞĞ¡Ğ¢Ğ Ğ£ĞœĞ•ĞĞ¢ĞĞ’
â•‘ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âŠ¡ test "Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğ¹ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²" {
    âŠœ! is_valid_coptic_name("â²¥â²ƒâ²±") == â–³
    âŠœ! is_valid_coptic_name("test_file") == â–½
    âŠœ! is_valid_coptic_name("â²§â²‰â²¥â²§_123") == â–³
}

âŠ¡ test "Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑĞ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸ÑĞ°" {
    â—‡ result = DiagnosticResult { file_path: "test.999", errors: [], warnings: [], score: 100 }
    
    check_syntax_consistency(&result, ["â—¬ test() {", "    âŸµ â–³", "}"])
    âŠœ! result.errors.len == 0
    
    check_syntax_consistency(&result, ["â—¬ test() {", "    âŸµ â–³"])
    âŠœ! result.errors.len > 0  â•‘ ĞĞµĞ·Ğ°ĞºÑ€Ñ‹Ñ‚Ğ°Ñ ÑĞºĞ¾Ğ±ĞºĞ°
}

âŠ¡ test "Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞºĞ¾Ğ¿Ñ‚ÑĞºĞ¾Ğ³Ğ¾ Ğ°Ğ»Ñ„Ğ°Ğ²Ğ¸Ñ‚Ğ°" {
    âŠœ! count_coptic_characters("â²â²ƒâ²… â²‡â²‰â²") == 6
    âŠœ! count_coptic_characters("test file") == 0
    âŠœ! has_mixed_alphabets("testâ²") == â–³
    âŠœ! has_mixed_alphabets("test123") == â–½
}

âŠ¡ test "Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ" {
    âŠœ! fix_indentation("  â—¬ test()") == "    â—¬ test()"
    âŠœ! fix_indentation("     â—¬ test()") == "    â—¬ test()"
    âŠœ! fix_keyword_spacing("â—¬  test()") == "â—¬ test()"
}