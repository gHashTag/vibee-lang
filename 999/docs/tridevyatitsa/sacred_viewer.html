<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö –°–≤—è—â–µ–Ω–Ω–∞—è –ö–Ω–∏–≥–∞ 999</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #0a0a1a 0%, #1a1a3e 100%);
            min-height: 100vh;
            color: #e8d5b7;
        }
        .container { max-width: 900px; margin: 0 auto; padding: 20px; }
        header {
            text-align: center;
            padding: 30px;
            background: rgba(0,0,0,0.4);
            border-radius: 20px;
            margin-bottom: 20px;
        }
        h1 { font-size: 2.5em; color: #ffd700; text-shadow: 0 0 20px rgba(255,215,0,0.5); }
        .nav {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .btn {
            background: rgba(255,215,0,0.2);
            border: 2px solid #ffd700;
            color: #ffd700;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
        }
        .btn:hover { background: rgba(255,215,0,0.4); }
        input[type="number"] {
            background: rgba(0,0,0,0.5);
            border: 2px solid #ffd700;
            color: #ffd700;
            padding: 10px;
            border-radius: 10px;
            width: 80px;
            text-align: center;
        }
        .chapter {
            background: rgba(0,0,0,0.5);
            border-radius: 20px;
            padding: 30px;
        }
        .chapter h2 { color: #ffd700; font-size: 1.8em; margin-bottom: 15px; }
        .kingdom {
            text-align: center;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .copper { background: rgba(205,127,50,0.3); color: #cd7f32; }
        .silver { background: rgba(192,192,192,0.3); color: #c0c0c0; }
        .gold { background: rgba(255,215,0,0.3); color: #ffd700; }
        .section { margin: 20px 0; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 10px; }
        .section h3 { color: #c0c0c0; margin-bottom: 10px; }
        .wisdom {
            background: rgba(255,215,0,0.1);
            border-left: 4px solid #ffd700;
            padding: 15px;
            font-style: italic;
        }
        pre {
            background: #0d1117;
            padding: 15px;
            border-radius: 10px;
            overflow-x: auto;
            font-family: monospace;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìö –°–í–Ø–©–ï–ù–ù–ê–Ø –ö–ù–ò–ì–ê 999</h1>
            <p>–ü–∞—Ç—Ç–µ—Ä–Ω: n √ó 3^k √ó œÄ^m</p>
        </header>
        
        <div class="nav">
            <button class="btn" onclick="go(currentChapter-1)">‚Üê –ù–∞–∑–∞–¥</button>
            <input type="number" id="num" value="1" min="1" max="999" onchange="go(this.value)">
            <span>/ 999</span>
            <button class="btn" onclick="go(currentChapter+1)">–í–ø–µ—Ä—ë–¥ ‚Üí</button>
            <button class="btn" onclick="go(Math.floor(Math.random()*999)+1)">üé≤</button>
        </div>
        
        <div class="chapter" id="content"></div>
    </div>
    
    <script>
        let currentChapter = 1;
        let bookData = null;
        
        async function loadBook() {
            try {
                const resp = await fetch('generated_tridevyatitsa/sacred/book_999.json');
                bookData = await resp.json();
                render(1);
            } catch(e) {
                document.getElementById('content').innerHTML = '<p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö... –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.</p>';
            }
        }
        
        function go(n) {
            n = parseInt(n);
            if (n >= 1 && n <= 999) {
                currentChapter = n;
                document.getElementById('num').value = n;
                render(n);
            }
        }
        
        function render(n) {
            if (!bookData) return;
            const ch = bookData[n-1];
            const kc = ch.—Ü–∞—Ä—Å—Ç–≤–æ === '–ú–µ–¥–Ω–æ–µ' ? 'copper' : ch.—Ü–∞—Ä—Å—Ç–≤–æ === '–°–µ—Ä–µ–±—Ä—è–Ω–æ–µ' ? 'silver' : 'gold';
            const ki = ch.—Ü–∞—Ä—Å—Ç–≤–æ === '–ú–µ–¥–Ω–æ–µ' ? 'ü•â' : ch.—Ü–∞—Ä—Å—Ç–≤–æ === '–°–µ—Ä–µ–±—Ä—è–Ω–æ–µ' ? 'ü•à' : 'ü•á';
            const stars = ch.—Å–≤—è—â–µ–Ω–Ω–æ—Å—Ç—å === '—Å–≤—è—â–µ–Ω–Ω–æ–µ' ? '‚≠ê‚≠ê‚≠ê' : ch.—Å–≤—è—â–µ–Ω–Ω–æ—Å—Ç—å === '–±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–Ω–æ–µ' ? '‚≠ê‚≠ê' : ch.—Å–≤—è—â–µ–Ω–Ω–æ—Å—Ç—å === '–±–ª–∞–≥–æ–µ' ? '‚≠ê' : '';
            
            document.getElementById('content').innerHTML = `
                <h2>–ì–ª–∞–≤–∞ ${ch.–Ω–æ–º–µ—Ä}: ${ch.—Å–º—ã—Å–ª_–±—É–∫–≤—ã}</h2>
                <div class="kingdom ${kc}">${ki} ${ch.—Ü–∞—Ä—Å—Ç–≤–æ} —Ü–∞—Ä—Å—Ç–≤–æ ${stars}</div>
                
                <div class="section">
                    <h3>üìú –ë—É–∫–≤–∞: ${ch.–±—É–∫–≤–∞} (${ch.–∏–º—è_–±—É–∫–≤—ã}) = ${ch.n}</h3>
                    <p><strong>–ü–∞—Ç—Ç–µ—Ä–Ω:</strong> ${ch.n} √ó 3^${ch.k} √ó œÄ^${ch.m.toFixed(1)} = ${ch.–∑–Ω–∞—á–µ–Ω–∏–µ.toFixed(4)}</p>
                </div>
                
                <div class="section">
                    <h3>üåü –ê–∫—Ç –¢–≤–æ—Ä–µ–Ω–∏—è</h3>
                    <p><em>${ch.–∞–∫—Ç_—Ç–≤–æ—Ä–µ–Ω–∏—è}</em></p>
                </div>
                
                <div class="section">
                    <h3>üé≠ –ê—Ä—Ö–µ—Ç–∏–ø: ${ch.–∞—Ä—Ö–µ—Ç–∏–ø}</h3>
                    <p><strong>–û–±—Ä–∞–∑:</strong> ${ch.–æ–±—Ä–∞–∑}</p>
                    <p><strong>–£—Ä–æ–∫:</strong> ${ch.—É—Ä–æ–∫}</p>
                </div>
                
                <div class="section">
                    <h3>üë§ –ì–µ—Ä–æ–π: ${ch.–≥–µ—Ä–æ–π.–∏–º—è}</h3>
                    <p>–†–æ–ª—å: ${ch.–≥–µ—Ä–æ–π.—Ä–æ–ª—å} | –î–∞—Ä: ${ch.–≥–µ—Ä–æ–π.–¥–∞—Ä}</p>
                </div>
                
                <div class="section">
                    <h3>üè∞ ${ch.–º–µ—Å—Ç–æ.–∏–º—è}</h3>
                    <p><em>${ch.–º–µ—Å—Ç–æ.—Å—É—Ç—å}</em></p>
                </div>
                
                <div class="section">
                    <h3>‚öîÔ∏è ${ch.–∞—Ä—Ç–µ—Ñ–∞–∫—Ç.–∏–º—è}</h3>
                    <p>–°–∏–ª–∞: ${ch.–∞—Ä—Ç–µ—Ñ–∞–∫—Ç.—Å–∏–ª–∞}</p>
                </div>
                
                <div class="section">
                    <h3>üìñ –ü—Ä–∏—Ç—á–∞</h3>
                    <p>${ch.–ø—Ä–∏—Ç—á–∞}</p>
                </div>
                
                <div class="section">
                    <h3>üíª –ö–æ–¥</h3>
                    <pre>${ch.–∫–æ–¥}</pre>
                </div>
                
                <div class="wisdom">
                    <h3>üåü –ú—É–¥—Ä–æ—Å—Ç—å</h3>
                    <p>${ch.—É—Ä–æ–∫}</p>
                </div>
            `;
        }
        
        loadBook();
    </script>
</body>
</html>
