name: goldbach_conjecture
version: "1.0.0"
language: zig
module: goldbach
description: |
  Creation Pattern Test: Goldbach Conjecture
  Source: Two prime numbers p and q
  Transformer: Addition p + q
  Result: Even number n (every even n > 2 can be created this way)

behaviors:
  - name: is_prime_check
    given: A positive integer n
    when: is_prime is called with n
    then: Returns true if n is prime, false otherwise
    test_cases:
      - name: prime_2
        input: {n: 2}
        expected: {result: true}
      - name: prime_17
        input: {n: 17}
        expected: {result: true}
      - name: not_prime_4
        input: {n: 4}
        expected: {result: false}
      - name: not_prime_15
        input: {n: 15}
        expected: {result: false}
      - name: prime_97
        input: {n: 97}
        expected: {result: true}

  - name: goldbach_decomposition
    given: An even integer n greater than 2
    when: find_goldbach_pair is called with n
    then: Returns two primes p and q where p + q = n
    test_cases:
      - name: decompose_4
        input: {n: 4}
        expected: {p: 2, q: 2, valid: true}
      - name: decompose_10
        input: {n: 10}
        expected: {p: 3, q: 7, valid: true}
      - name: decompose_20
        input: {n: 20}
        expected: {p: 3, q: 17, valid: true}
      - name: decompose_100
        input: {n: 100}
        expected: {p: 3, q: 97, valid: true}
      - name: decompose_1000
        input: {n: 1000}
        expected: {p: 3, q: 997, valid: true}

  - name: goldbach_pair_count
    given: An even integer n greater than 2
    when: count_goldbach_pairs is called with n
    then: Returns the number of distinct prime pairs summing to n
    test_cases:
      - name: pairs_10
        input: {n: 10}
        expected: {count: 2}
      - name: pairs_20
        input: {n: 20}
        expected: {count: 2}
      - name: pairs_100
        input: {n: 100}
        expected: {count: 6}

  - name: creation_pattern_goldbach
    given: Source primes and Transformer addition
    when: CREATE is applied to find if even n can be created
    then: Returns valid prime pair creation
    test_cases:
      - name: create_even_12
        input: {target: 12}
        expected: {source_p: 5, source_q: 7, transformer: "addition", result: 12, created: true}
      - name: create_even_28
        input: {target: 28}
        expected: {source_p: 5, source_q: 23, transformer: "addition", result: 28, created: true}

  - name: verify_goldbach_range
    given: A range of even numbers from start to end
    when: verify_goldbach_range is called
    then: Returns true if all even numbers in range satisfy Goldbach
    test_cases:
      - name: range_4_to_100
        input: {start: 4, end: 100}
        expected: {all_valid: true, tested: 49}
      - name: range_4_to_1000
        input: {start: 4, end: 1000}
        expected: {all_valid: true, tested: 499}

types:
  GoldbachPair:
    p: int
    q: int
    valid: bool

  CreationGoldbach:
    source_p: int
    source_q: int
    transformer: str
    result: int
    created: bool

  RangeResult:
    all_valid: bool
    tested: int
    first_failure: int?

functions:
  - name: is_prime
    params: {n: int}
    returns: bool

  - name: find_goldbach_pair
    params: {n: int}
    returns: GoldbachPair

  - name: count_goldbach_pairs
    params: {n: int}
    returns: int

  - name: verify_goldbach_range
    params: {start: int, end: int}
    returns: RangeResult

  - name: create_goldbach
    params: {target: int}
    returns: CreationGoldbach
