#!/usr/bin/env python3
"""
╔══════════════════════════════════════════════════════════════════════════════╗
║                    ИССЛЕДОВАНИЕ МАСС КВАРКОВ                                 ║
║                                                                              ║
║  6 кварков: u, d, s, c, b, t                                                ║
║                                                                              ║
║  Vibee Research, January 2026                                                ║
╚══════════════════════════════════════════════════════════════════════════════╝
"""

import math

PI = math.pi
PHI = (1 + math.sqrt(5)) / 2
E = math.e

# Массы кварков (МэВ/c², PDG 2022)
# Лёгкие кварки (MS-bar при 2 ГэВ)
M_U = 2.16  # up
M_D = 4.67  # down
M_S = 93.4  # strange

# Тяжёлые кварки (MS-bar при собственной массе)
M_C = 1270   # charm
M_B = 4180   # bottom
M_T = 172760 # top (полюсная масса)

# Масса электрона для нормировки
M_E_MEV = 0.511

print("=" * 78)
print("ИССЛЕДОВАНИЕ МАСС КВАРКОВ")
print("=" * 78)

print(f"""
МАССЫ КВАРКОВ (МэВ/c², PDG 2022):

  Лёгкие кварки:
    u (up):      {M_U} МэВ
    d (down):    {M_D} МэВ
    s (strange): {M_S} МэВ

  Тяжёлые кварки:
    c (charm):   {M_C} МэВ
    b (bottom):  {M_B} МэВ
    t (top):     {M_T} МэВ

  Для сравнения:
    электрон:    {M_E_MEV} МэВ
""")

# ═══════════════════════════════════════════════════════════════════════════════
# ЧАСТЬ 1: ОТНОШЕНИЯ МАСС КВАРКОВ
# ═══════════════════════════════════════════════════════════════════════════════

print("\n" + "=" * 78)
print("ЧАСТЬ 1: ОТНОШЕНИЯ МАСС КВАРКОВ")
print("=" * 78)

# Отношения внутри поколений
print("\nОтношения внутри поколений:")
print(f"  d/u = {M_D/M_U:.4f}")
print(f"  s/u = {M_S/M_U:.4f}")
print(f"  c/u = {M_C/M_U:.4f}")
print(f"  b/u = {M_B/M_U:.4f}")
print(f"  t/u = {M_T/M_U:.4f}")

print("\nОтношения между поколениями:")
print(f"  s/d = {M_S/M_D:.4f}")
print(f"  c/s = {M_C/M_S:.4f}")
print(f"  b/c = {M_B/M_C:.4f}")
print(f"  t/b = {M_T/M_B:.4f}")

# ═══════════════════════════════════════════════════════════════════════════════
# ЧАСТЬ 2: ПОИСК ПАТТЕРНОВ
# ═══════════════════════════════════════════════════════════════════════════════

print("\n" + "=" * 78)
print("ЧАСТЬ 2: ПОИСК ПАТТЕРНОВ С π, φ, 3")
print("=" * 78)

quarks = [
    ("u", M_U),
    ("d", M_D),
    ("s", M_S),
    ("c", M_C),
    ("b", M_B),
    ("t", M_T),
]

print("\nОтношения к массе электрона (m_q/m_e):")
print("-" * 60)

for name, mass in quarks:
    ratio = mass / M_E_MEV
    print(f"  {name}: {ratio:.2f}")
    
    # Поиск формулы
    best_error = float('inf')
    best_formula = ""
    
    for n in range(1, 50):
        for d in range(1, 10):
            for k in range(-2, 4):
                for m in range(-2, 6):
                    value = (n/d) * (3**k) * (PI**m)
                    error = abs(value - ratio) / ratio * 100
                    if error < best_error:
                        best_error = error
                        frac = f"{n}/{d}" if d > 1 else str(n)
                        best_formula = f"{frac} × 3^{k} × π^{m} = {value:.2f}"
    
    if best_error < 10:
        print(f"      Формула: {best_formula}, ошибка: {best_error:.2f}%")

# ═══════════════════════════════════════════════════════════════════════════════
# ЧАСТЬ 3: ИЕРАРХИЯ МАСС
# ═══════════════════════════════════════════════════════════════════════════════

print("\n" + "=" * 78)
print("ЧАСТЬ 3: ИЕРАРХИЯ МАСС КВАРКОВ")
print("=" * 78)

print("""
Массы кварков охватывают 5 порядков величины:
  u: ~2 МэВ
  t: ~173000 МэВ
  
Отношение t/u ≈ 80000

Это огромная иерархия! Ищем закономерность...
""")

# Логарифмическая шкала
print("Логарифмы масс (ln(m/МэВ)):")
for name, mass in quarks:
    print(f"  {name}: ln({mass}) = {math.log(mass):.4f}")

# Проверка геометрической прогрессии
print("\nОтношения последовательных масс:")
masses = [M_U, M_D, M_S, M_C, M_B, M_T]
names = ["u", "d", "s", "c", "b", "t"]

for i in range(1, len(masses)):
    ratio = masses[i] / masses[i-1]
    print(f"  {names[i]}/{names[i-1]} = {ratio:.2f}")

# ═══════════════════════════════════════════════════════════════════════════════
# ЧАСТЬ 4: СВЯЗЬ С ЧИСЛОМ 3
# ═══════════════════════════════════════════════════════════════════════════════

print("\n" + "=" * 78)
print("ЧАСТЬ 4: СВЯЗЬ С ЧИСЛОМ 3")
print("=" * 78)

print("""
В кварковой физике число 3 фундаментально:
  • 3 цвета (r, g, b)
  • 3 кварка в барионе
  • 3 поколения кварков
  • SU(3) — группа симметрии

Проверим связь масс с 3:
""")

# Проверка: m_q ∝ 3^n
print("Проверка m_q/m_e = a × 3^n:")
for name, mass in quarks:
    ratio = mass / M_E_MEV
    # Найти ближайшую степень 3
    if ratio > 0:
        n = math.log(ratio) / math.log(3)
        n_int = round(n)
        predicted = 3**n_int
        error = abs(predicted - ratio) / ratio * 100
        print(f"  {name}: {ratio:.2f} ≈ 3^{n:.2f} ≈ 3^{n_int} = {predicted:.2f} (ошибка {error:.1f}%)")

# ═══════════════════════════════════════════════════════════════════════════════
# ЧАСТЬ 5: ФОРМУЛА КОИДЕ ДЛЯ КВАРКОВ
# ═══════════════════════════════════════════════════════════════════════════════

print("\n" + "=" * 78)
print("ЧАСТЬ 5: ФОРМУЛА КОИДЕ ДЛЯ КВАРКОВ")
print("=" * 78)

print("""
Формула Коиде для лептонов:
  (m_e + m_μ + m_τ) / (√m_e + √m_μ + √m_τ)² = 2/3

Проверим для кварков:
""")

# Для лёгких кварков (u, d, s)
sum_light = M_U + M_D + M_S
sqrt_sum_light = (math.sqrt(M_U) + math.sqrt(M_D) + math.sqrt(M_S))**2
koide_light = sum_light / sqrt_sum_light

print(f"Лёгкие кварки (u, d, s):")
print(f"  (m_u + m_d + m_s) / (√m_u + √m_d + √m_s)² = {koide_light:.6f}")
print(f"  Сравнение с 2/3 = {2/3:.6f}")
print(f"  Ошибка: {abs(koide_light - 2/3) / (2/3) * 100:.2f}%")

# Для тяжёлых кварков (c, b, t)
sum_heavy = M_C + M_B + M_T
sqrt_sum_heavy = (math.sqrt(M_C) + math.sqrt(M_B) + math.sqrt(M_T))**2
koide_heavy = sum_heavy / sqrt_sum_heavy

print(f"\nТяжёлые кварки (c, b, t):")
print(f"  (m_c + m_b + m_t) / (√m_c + √m_b + √m_t)² = {koide_heavy:.6f}")
print(f"  Сравнение с 2/3 = {2/3:.6f}")
print(f"  Ошибка: {abs(koide_heavy - 2/3) / (2/3) * 100:.2f}%")

# ═══════════════════════════════════════════════════════════════════════════════
# ЧАСТЬ 6: ИТОГИ
# ═══════════════════════════════════════════════════════════════════════════════

print("\n" + "=" * 78)
print("ИТОГИ")
print("=" * 78)

print("""
╔══════════════════════════════════════════════════════════════════════════════╗
║                    РЕЗУЛЬТАТЫ АНАЛИЗА МАСС КВАРКОВ                           ║
╠══════════════════════════════════════════════════════════════════════════════╣
║                                                                              ║
║  1. Массы кварков охватывают 5 порядков величины (2 МэВ — 173 ГэВ)          ║
║                                                                              ║
║  2. Простых формул типа n×3^k×π^m НЕ НАЙДЕНО с хорошей точностью           ║
║                                                                              ║
║  3. Формула Коиде для кварков:                                              ║
║     • Лёгкие (u,d,s): отклонение от 2/3 значительное                        ║
║     • Тяжёлые (c,b,t): отклонение от 2/3 значительное                       ║
║                                                                              ║
║  4. Иерархия масс кварков остаётся НЕРЕШЁННОЙ ПРОБЛЕМОЙ                     ║
║                                                                              ║
║  ВЫВОД:                                                                      ║
║  Массы кварков, в отличие от лептонов, не следуют простым формулам.         ║
║  Это может быть связано с:                                                  ║
║  • Сильным взаимодействием (КХД)                                            ║
║  • Конфайнментом                                                            ║
║  • Неопределённостью в определении масс лёгких кварков                      ║
║                                                                              ║
╚══════════════════════════════════════════════════════════════════════════════╝
""")
