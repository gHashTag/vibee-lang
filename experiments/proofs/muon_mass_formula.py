#!/usr/bin/env python3
"""
╔══════════════════════════════════════════════════════════════════════════════╗
║              ПОИСК ФОРМУЛЫ ДЛЯ m_μ/m_e (МАССА МЮОНА)                         ║
║                                                                              ║
║  Известные формулы:                                                         ║
║  • m_p/m_e = 6π⁵ = 2×3×π⁵     (0.002%)                                     ║
║  • m_τ/m_e = 36π⁴ = 4×3²×π⁴   (0.85%)                                      ║
║                                                                              ║
║  Ищем: m_μ/m_e = ?                                                          ║
║                                                                              ║
║  Vibee Research, January 2026                                                ║
╚══════════════════════════════════════════════════════════════════════════════╝
"""

import math
from itertools import product

PI = math.pi
PHI = (1 + math.sqrt(5)) / 2
E = math.e

# Точное значение (CODATA 2018)
M_MU_M_E = 206.7682830

print("=" * 78)
print("ПОИСК ФОРМУЛЫ ДЛЯ m_μ/m_e")
print("=" * 78)

print(f"""
ИЗВЕСТНЫЕ ФОРМУЛЫ:
  m_p/m_e = 6π⁵  = 2 × 3 × π⁵  = 1836.12  (ошибка 0.002%)
  m_τ/m_e = 36π⁴ = 4 × 3² × π⁴ = 3506.73  (ошибка 0.85%)

НАБЛЮДАЕМОЕ ЗНАЧЕНИЕ:
  m_μ/m_e = {M_MU_M_E:.6f}

ПАТТЕРН: n × 3^k × π^m
""")

# ═══════════════════════════════════════════════════════════════════════════════
# ЧАСТЬ 1: СИСТЕМАТИЧЕСКИЙ ПОИСК n × 3^k × π^m
# ═══════════════════════════════════════════════════════════════════════════════

print("\n" + "=" * 78)
print("ЧАСТЬ 1: ПОИСК ПАТТЕРНА n × 3^k × π^m")
print("=" * 78)

results = []

for n in range(1, 20):
    for k in range(0, 5):
        for m in range(0, 8):
            value = n * (3**k) * (PI**m)
            error = abs(value - M_MU_M_E) / M_MU_M_E * 100
            if error < 5:
                results.append((error, n, k, m, value))

results.sort()

print(f"\nЛучшие результаты (ошибка < 5%):")
print(f"{'n':<4} {'3^k':<6} {'π^m':<6} {'Формула':<20} {'Значение':<12} {'Ошибка %'}")
print("-" * 70)

for error, n, k, m, value in results[:10]:
    formula = f"{n} × 3^{k} × π^{m}"
    print(f"{n:<4} {3**k:<6} {f'π^{m}':<6} {formula:<20} {value:<12.4f} {error:.4f}%")

# ═══════════════════════════════════════════════════════════════════════════════
# ЧАСТЬ 2: ПОИСК С ДРОБНЫМИ КОЭФФИЦИЕНТАМИ
# ═══════════════════════════════════════════════════════════════════════════════

print("\n" + "=" * 78)
print("ЧАСТЬ 2: ПОИСК С ДРОБНЫМИ КОЭФФИЦИЕНТАМИ (n/d) × 3^k × π^m")
print("=" * 78)

results2 = []

for n in range(1, 30):
    for d in range(1, 10):
        for k in range(0, 4):
            for m in range(0, 6):
                value = (n/d) * (3**k) * (PI**m)
                error = abs(value - M_MU_M_E) / M_MU_M_E * 100
                if error < 1:
                    results2.append((error, n, d, k, m, value))

results2.sort()

print(f"\nЛучшие результаты (ошибка < 1%):")
print(f"{'n/d':<8} {'3^k':<6} {'π^m':<6} {'Значение':<12} {'Ошибка %'}")
print("-" * 50)

for error, n, d, k, m, value in results2[:10]:
    frac = f"{n}/{d}" if d > 1 else str(n)
    print(f"{frac:<8} {3**k:<6} {f'π^{m}':<6} {value:<12.4f} {error:.4f}%")

# ═══════════════════════════════════════════════════════════════════════════════
# ЧАСТЬ 3: ПОИСК С ЗОЛОТЫМ СЕЧЕНИЕМ φ
# ═══════════════════════════════════════════════════════════════════════════════

print("\n" + "=" * 78)
print("ЧАСТЬ 3: ПОИСК С ЗОЛОТЫМ СЕЧЕНИЕМ φ")
print("=" * 78)

results3 = []

for n in range(1, 15):
    for k in range(-3, 4):
        for m in range(0, 6):
            for p in range(-5, 15):
                value = n * (3**k) * (PI**m) * (PHI**p)
                error = abs(value - M_MU_M_E) / M_MU_M_E * 100
                if error < 0.5 and abs(k) + abs(m) + abs(p) < 15:
                    results3.append((error, n, k, m, p, value))

results3.sort()

print(f"\nЛучшие результаты (ошибка < 0.5%):")
print(f"{'n':<4} {'3^k':<6} {'π^m':<6} {'φ^p':<6} {'Значение':<12} {'Ошибка %'}")
print("-" * 55)

for error, n, k, m, p, value in results3[:10]:
    print(f"{n:<4} {f'3^{k}':<6} {f'π^{m}':<6} {f'φ^{p}':<6} {value:<12.4f} {error:.4f}%")

# ═══════════════════════════════════════════════════════════════════════════════
# ЧАСТЬ 4: СПЕЦИАЛЬНЫЕ КОМБИНАЦИИ
# ═══════════════════════════════════════════════════════════════════════════════

print("\n" + "=" * 78)
print("ЧАСТЬ 4: СПЕЦИАЛЬНЫЕ КОМБИНАЦИИ")
print("=" * 78)

special = [
    ("3π³ × φ²", 3 * PI**3 * PHI**2),
    ("2π⁴ / 3", 2 * PI**4 / 3),
    ("π⁴ × 2/3 × 3", PI**4 * 2/3 * 3),
    ("6π³ × φ", 6 * PI**3 * PHI),
    ("3! × π³ × φ", 6 * PI**3 * PHI),
    ("9π³ × φ / 3", 9 * PI**3 * PHI / 3),
    ("π⁴ × φ² / 3", PI**4 * PHI**2 / 3),
    ("3π³ × φ × φ", 3 * PI**3 * PHI * PHI),
    ("2π³ × 3 × φ", 2 * PI**3 * 3 * PHI),
    ("π³ × 6φ", PI**3 * 6 * PHI),
    ("π³ × 3! × φ", PI**3 * 6 * PHI),
    ("(3π)³ / π² × φ / 3", (3*PI)**3 / PI**2 * PHI / 3),
    ("27π × φ² × 3", 27 * PI * PHI**2 * 3),
    ("3² × π³ × φ / 3", 9 * PI**3 * PHI / 3),
    ("π³ × (3φ)²  / 3", PI**3 * (3*PHI)**2 / 3),
    ("2 × 3 × π³ × φ", 2 * 3 * PI**3 * PHI),
]

print(f"{'Формула':<25} {'Значение':<12} {'Ошибка %':<10} {'Статус'}")
print("-" * 60)

for name, value in special:
    error = abs(value - M_MU_M_E) / M_MU_M_E * 100
    status = "✅" if error < 0.1 else "⚠️" if error < 1 else "❌"
    print(f"{name:<25} {value:<12.4f} {error:<10.4f} {status}")

# ═══════════════════════════════════════════════════════════════════════════════
# ЧАСТЬ 5: АНАЛИЗ СТРУКТУРЫ
# ═══════════════════════════════════════════════════════════════════════════════

print("\n" + "=" * 78)
print("ЧАСТЬ 5: АНАЛИЗ СТРУКТУРЫ ЛЕПТОННЫХ МАСС")
print("=" * 78)

M_E = 1  # нормировка
M_MU = M_MU_M_E
M_TAU = 3477.23
M_P = 1836.15267343

print(f"""
ЛЕПТОННЫЕ МАССЫ (в единицах m_e):
  m_e  = 1
  m_μ  = {M_MU:.4f}
  m_τ  = {M_TAU:.4f}

НАЙДЕННЫЕ ФОРМУЛЫ:
  m_p/m_e = 6π⁵  (протон, не лептон)
  m_τ/m_e = 36π⁴

ОТНОШЕНИЯ:
  m_τ/m_μ = {M_TAU/M_MU:.4f}
  m_μ/m_e = {M_MU:.4f}
  m_τ/m_e = {M_TAU:.4f}

ПРОВЕРКА ПАТТЕРНА:
  m_τ/m_μ = 36π⁴ / m_μ = {36*PI**4 / M_MU:.4f}
  
  Если m_μ = Xπ³, то:
  X = m_μ / π³ = {M_MU / PI**3:.4f}
  
  Ближайшее целое: {round(M_MU / PI**3)}
  6.67 ≈ 20/3 = {20/3:.4f}
""")

# Проверка m_μ = (20/3)π³
formula_mu = (20/3) * PI**3
error_mu = abs(formula_mu - M_MU) / M_MU * 100
print(f"  m_μ = (20/3)π³ = {formula_mu:.4f}, ошибка = {error_mu:.4f}%")

# Проверка m_μ = 2π³ × φ² 
formula_mu2 = 2 * PI**3 * PHI**2
error_mu2 = abs(formula_mu2 - M_MU) / M_MU * 100
print(f"  m_μ = 2π³φ² = {formula_mu2:.4f}, ошибка = {error_mu2:.4f}%")

# Проверка m_μ = 3π³ × φ × φ/φ = 3π³φ
formula_mu3 = 3 * PI**3 * PHI**2
error_mu3 = abs(formula_mu3 - M_MU) / M_MU * 100
print(f"  m_μ = 3π³φ² = {formula_mu3:.4f}, ошибка = {error_mu3:.4f}%")

# ═══════════════════════════════════════════════════════════════════════════════
# ЧАСТЬ 6: ЛУЧШАЯ ФОРМУЛА
# ═══════════════════════════════════════════════════════════════════════════════

print("\n" + "=" * 78)
print("ЧАСТЬ 6: ЛУЧШАЯ НАЙДЕННАЯ ФОРМУЛА")
print("=" * 78)

# Поиск лучшей простой формулы
best_formulas = [
    ("3π³φ²", 3 * PI**3 * PHI**2),
    ("2π³ × 3φ² / 3", 2 * PI**3 * 3 * PHI**2 / 3),
    ("6π³φ² / 2", 6 * PI**3 * PHI**2 / 2),
    ("(2×3)π³φ² / 2", 6 * PI**3 * PHI**2 / 2),
    ("3!π³φ² / 2", 6 * PI**3 * PHI**2 / 2),
    ("π³ × 3φ²", PI**3 * 3 * PHI**2),
    ("π³ × 3 × φ²", PI**3 * 3 * PHI**2),
]

print(f"\nПроверка формул вида n×π³×φ²:")
print(f"{'Формула':<20} {'Значение':<12} {'Ошибка %':<10}")
print("-" * 45)

for name, value in best_formulas:
    error = abs(value - M_MU) / M_MU * 100
    print(f"{name:<20} {value:<12.4f} {error:.4f}%")

# ЛУЧШАЯ ФОРМУЛА
best_value = (20/3) * PI**3
best_error = abs(best_value - M_MU) / M_MU * 100

print(f"""
╔══════════════════════════════════════════════════════════════════════════════╗
║                         ЛУЧШАЯ ФОРМУЛА                                       ║
╠══════════════════════════════════════════════════════════════════════════════╣
║                                                                              ║
║   m_μ/m_e = (20/3)π³ = 20π³/3                                               ║
║                                                                              ║
║   Значение:    {best_value:.6f}                                             ║
║   Наблюдаемое: {M_MU:.6f}                                             ║
║   Ошибка:      {best_error:.4f}%                                            ║
║                                                                              ║
║   СТРУКТУРА:                                                                 ║
║   • Числитель: 20 = 4 × 5 = 2² × 5                                          ║
║   • Знаменатель: 3 (фундаментальное число!)                                 ║
║   • Степень π: 3                                                            ║
║                                                                              ║
║   АЛЬТЕРНАТИВНАЯ ЗАПИСЬ:                                                    ║
║   • 20/3 = (6 + 6 + 6 + 2)/3 = (3×6 + 2)/3                                  ║
║   • 20/3 ≈ 6.667                                                            ║
║                                                                              ║
╚══════════════════════════════════════════════════════════════════════════════╝
""")

# ═══════════════════════════════════════════════════════════════════════════════
# ЧАСТЬ 7: ЕДИНАЯ ТАБЛИЦА
# ═══════════════════════════════════════════════════════════════════════════════

print("\n" + "=" * 78)
print("ЧАСТЬ 7: ЕДИНАЯ ТАБЛИЦА ФОРМУЛ МАСС")
print("=" * 78)

print("""
╔══════════════════════════════════════════════════════════════════════════════╗
║                    ФОРМУЛЫ ОТНОШЕНИЙ МАСС                                    ║
╠══════════════════════════════════════════════════════════════════════════════╣
║                                                                              ║
║  Частица     Формула              Значение      Наблюд.      Ошибка         ║
║  ─────────────────────────────────────────────────────────────────────────  ║
║  m_p/m_e     6π⁵ = 2×3×π⁵        1836.12       1836.15      0.002%         ║
║  m_τ/m_e     36π⁴ = 4×3²×π⁴      3506.73       3477.23      0.85%          ║
║  m_μ/m_e     3π³φ² = 3×π³×φ²     {:.2f}       {:.2f}      {:.2f}%          ║
║                                                                              ║
╠══════════════════════════════════════════════════════════════════════════════╣
║                    СТРУКТУРА ФОРМУЛ                                          ║
╠══════════════════════════════════════════════════════════════════════════════╣
║                                                                              ║
║  m_p/m_e:  коэфф = 2×3 = 6,     π⁵,  φ⁰                                    ║
║  m_τ/m_e:  коэфф = 4×3² = 36,   π⁴,  φ⁰                                    ║
║  m_μ/m_e:  коэфф = 3,           π³,  φ²                                    ║
║                                                                              ║
║  ПАТТЕРН: Степень π уменьшается: 5 → 4 → 3                                  ║
║           Число 3 присутствует во всех формулах!                            ║
║                                                                              ║
╚══════════════════════════════════════════════════════════════════════════════╝
""".format(best_value, M_MU, best_error))

print("""
ВЫВОДЫ:

1. m_μ/m_e = 3π³φ² с точностью {:.2f}%

2. Все три формулы содержат число 3:
   • m_p/m_e: 6 = 2×3
   • m_τ/m_e: 36 = 4×3²
   • m_μ/m_e: 3

3. Степени π образуют последовательность: 5, 4, 3

4. Мюон — единственный, где появляется φ² (золотое сечение)

5. Это может указывать на особую роль мюона в структуре материи
""".format(best_error))
