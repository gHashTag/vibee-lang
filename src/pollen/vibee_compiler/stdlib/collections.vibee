name: vibee_stdlib_collections
version: "1.0.0"
language: zig
module: collections
description: VIBEE Standard Library - Collections (Vec, HashMap, HashSet)

behaviors:
  - name: vec_push_item
    given: Empty Vec
    when: push() called with item
    then: Item added to Vec
    test_cases:
      - name: push_increases_length
        input: {items: [1, 2, 3]}
        expected: {length: 3}

  - name: vec_pop_item
    given: Vec with items
    when: pop() called
    then: Last item removed and returned
    test_cases:
      - name: pop_returns_last_item
        input: {items: [1, 2, 3]}
        expected: {popped: 3, length: 2}

  - name: vec_get_item
    given: Vec with items
    when: get(index) called
    then: Item at index returned
    test_cases:
      - name: get_returns_item
        input: {items: [10, 20, 30], index: 1}
        expected: {value: 20}

  - name: vec_dynamic_growth
    given: Vec at capacity
    when: push() called
    then: Vec grows automatically
    test_cases:
      - name: vec_grows_on_push
        input: {initial_capacity: 8, items: 9}
        expected: {capacity: 16}

  - name: hashmap_put_get
    given: Empty HashMap
    when: put(key, value) then get(key)
    then: Value retrieved by key
    test_cases:
      - name: put_and_get_value
        input: {key: "name", value: "Alice"}
        expected: {retrieved: "Alice"}

  - name: hashmap_remove
    given: HashMap with entries
    when: remove(key) called
    then: Entry removed
    test_cases:
      - name: remove_decreases_count
        input: {entries: 3, remove_key: "key2"}
        expected: {count: 2, contains: false}

  - name: hashset_insert
    given: Empty HashSet
    when: insert(value) called
    then: Value added to set
    test_cases:
      - name: insert_unique_value
        input: {value: 42}
        expected: {inserted: true, count: 1}
      - name: insert_duplicate_value
        input: {value: 42, existing: 42}
        expected: {inserted: false, count: 1}

  - name: hashset_contains
    given: HashSet with values
    when: contains(value) called
    then: Returns true if value exists
    test_cases:
      - name: contains_existing_value
        input: {values: [1, 2, 3], check: 2}
        expected: {contains: true}
      - name: contains_missing_value
        input: {values: [1, 2, 3], check: 4}
        expected: {contains: false}

types:
  Vec:
    T: generic
    fields:
      items: slice_of_T
      capacity: usize
      len: usize
      allocator: Allocator

  HashMap:
    K: generic
    V: generic
    fields:
      map: AutoHashMap

  HashSet:
    T: generic
    fields:
      map: AutoHashMap

functions:
  - name: Vec.init
    params: {allocator: Allocator}
    returns: Vec
    
  - name: Vec.deinit
    params: {self: Vec}
    returns: void
    
  - name: Vec.push
    params: {self: Vec, item: T}
    returns: void
    
  - name: Vec.pop
    params: {self: Vec}
    returns: Option_T
    
  - name: Vec.get
    params: {self: Vec, index: usize}
    returns: Option_T
    
  - name: Vec.set
    params: {self: Vec, index: usize, value: T}
    returns: bool
    
  - name: Vec.length
    params: {self: Vec}
    returns: usize
    
  - name: Vec.isEmpty
    params: {self: Vec}
    returns: bool
    
  - name: Vec.clear
    params: {self: Vec}
    returns: void
    
  - name: HashMap.init
    params: {allocator: Allocator}
    returns: HashMap
    
  - name: HashMap.deinit
    params: {self: HashMap}
    returns: void
    
  - name: HashMap.put
    params: {self: HashMap, key: K, value: V}
    returns: void
    
  - name: HashMap.get
    params: {self: HashMap, key: K}
    returns: Option_V
    
  - name: HashMap.remove
    params: {self: HashMap, key: K}
    returns: bool
    
  - name: HashMap.contains
    params: {self: HashMap, key: K}
    returns: bool
    
  - name: HashMap.count
    params: {self: HashMap}
    returns: usize
    
  - name: HashMap.clear
    params: {self: HashMap}
    returns: void
    
  - name: HashSet.init
    params: {allocator: Allocator}
    returns: HashSet
    
  - name: HashSet.deinit
    params: {self: HashSet}
    returns: void
    
  - name: HashSet.insert
    params: {self: HashSet, value: T}
    returns: bool
    
  - name: HashSet.remove
    params: {self: HashSet, value: T}
    returns: bool
    
  - name: HashSet.contains
    params: {self: HashSet, value: T}
    returns: bool
    
  - name: HashSet.count
    params: {self: HashSet}
    returns: usize
    
  - name: HashSet.clear
    params: {self: HashSet}
    returns: void

imports:
  - std
  - core
