name: pixel_actor
# spec.yml for pixel_actor
# Pixel Actor - Легковесный BEAM процесс для пикселя

plugin:
  name: pixel_actor
  version: 1.0.0
  category: ui
  description: Легковесный BEAM процесс для управления отдельным пикселем

behaviors:
  - name: start_pixel_actor
    description: Запуск Pixel Actor
    given: PixelAtom configuration
    when: start() function called
    then: Pixel actor started and ready
    examples:
      - input: {id: "pixel_1", x: 100.0, y: 100.0, width: 10.0, height: 10.0}
        output: {status: "running", state: "Idle"}
  
  - name: update_pixel_color
    description: Обновление цвета пикселя
    given: Pixel actor running
    when: UpdateColor message sent
    then: Color changed
    examples:
      - input: {r: 255, g: 0, b: 0, a: 255}
        output: {color_updated: true}
  
  - name: update_pixel_state
    description: Изменение состояния пикселя
    given: Pixel in Idle state
    when: UpdateState message sent
    then: State changed with visual effects
    examples:
      - input: {current_state: "Idle", new_state: "Hovered"}
        output: {state_updated: true, color_brightened: true}
  
  - name: render_pixel
    description: Рендеринг пикселя в DrawCommand
    given: Pixel with state
    when: Render message sent
    then: DrawCommand generated
    examples:
      - input: {state: "Idle", x: 100.0, y: 100.0}
        output: {command: "DrawRect"}
  
  - name: check_point_contains
    description: Проверка попадания точки
    given: Pixel at position with size
    when: Point coordinates checked
    then: Returns true if point inside
    examples:
      - input: {pixel_x: 100.0, pixel_y: 100.0, point_x: 125.0, point_y: 125.0}
        output: {contains: true}

functions:
  - name: start
    signature: "start(atom: PixelAtom) -> Subject(PixelMessage)"
    description: Создает и запускает Pixel Actor
    params:
      - name: atom
        type: PixelAtom
  
  - name: handle_message
    signature: "handle_message(msg: PixelMessage, atom: PixelAtom) -> actor.Next(PixelAtom)"
    description: Обрабатывает сообщения для пикселя
    params:
      - name: msg
        type: PixelMessage
      - name: atom
        type: PixelAtom
  
  - name: render_atom
    signature: "render_atom(atom: PixelAtom) -> DrawCommand"
    description: Конвертирует атом в команду рисования
    params:
      - name: atom
        type: PixelAtom
  
  - name: contains_point
    signature: "contains_point(atom: PixelAtom, x: Float, y: Float) -> Bool"
    description: Проверяет, находится ли точка внутри атома
    params:
      - name: atom
        type: PixelAtom
      - name: x
        type: Float
      - name: y
        type: Float
