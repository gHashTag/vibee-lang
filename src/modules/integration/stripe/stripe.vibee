/// Stripe configuration
type StripeConfig = {
  secret_key: String,
  publishable_key: String,
  webhook_secret: String,
  api_version: String
}

/// Stripe customer
type StripeCustomer = {
  id: String,
  email: String,
  name: String,
  metadata: Map<String, String>
}

/// Stripe payment intent
type StripePaymentIntent = {
  id: String,
  amount: Int,
  currency: String,
  status: String,
  client_secret: String,
  customer_id: String
}

/// Stripe subscription
type StripeSubscription = {
  id: String,
  customer_id: String,
  status: String,
  current_period_start: Int,
  current_period_end: Int,
  items: List<Value>
}

/// Stripe product
type StripeProduct = {
  id: String,
  name: String,
  description: String,
  active: Bool,
  metadata: Map<String, String>
}

/// Create Stripe client
/// @param config - Stripe configuration
fn create_client(config: StripeConfig) -> Result<String, String>

/// Create customer
/// @param email - Customer email
/// @param name - Customer name
fn create_customer(email: String, name: String) -> Result<StripeCustomer, String>

/// Get customer
/// @param customer_id - Customer ID
fn get_customer(customer_id: String) -> Result<StripeCustomer, String>

/// Create payment intent
/// @param amount - Amount in cents
/// @param currency - Currency code
/// @param customer_id - Customer ID (optional)
fn create_payment_intent(amount: Int, currency: String, customer_id: String) -> Result<StripePaymentIntent, String>

/// Confirm payment
/// @param payment_intent_id - Payment intent ID
fn confirm_payment(payment_intent_id: String) -> Result<StripePaymentIntent, String>

/// Create subscription
/// @param customer_id - Customer ID
/// @param price_id - Price ID
fn create_subscription(customer_id: String, price_id: String) -> Result<StripeSubscription, String>

/// Cancel subscription
/// @param subscription_id - Subscription ID
fn cancel_subscription(subscription_id: String) -> Result<Nil, String>

/// Create product
/// @param name - Product name
/// @param description - Product description
fn create_product(name: String, description: String) -> Result<StripeProduct, String>

event stripe.payment(StripePaymentIntent)
event stripe.subscription(StripeSubscription)
event stripe.error(String)
