/// Email configuration
type EmailConfig = {
  smtp_host: String,
  smtp_port: Int,
  username: String,
  password: String,
  from_address: String,
  from_name: String,
  use_tls: Bool
}

/// Email message
type EmailMessage = {
  to: List<String>,
  cc: List<String>,
  bcc: List<String>,
  subject: String,
  html_body: String,
  text_body: String,
  attachments: List<EmailAttachment>,
  headers: Map<String, String>
}

/// Email attachment
type EmailAttachment = {
  filename: String,
  content_type: String,
  content: String,
  disposition: String
}

/// Email provider
type EmailProvider = | SMTP | SendGrid | Mailgun | SES | Postmark

/// Create email client
/// @param config - Email configuration
fn create_client(config: EmailConfig) -> Result<String, String>

/// Send email
/// @param message - Email message
fn send(message: EmailMessage) -> Result<Nil, String>

/// Send template email
/// @param template_id - Template ID
/// @param to - Recipient
/// @param variables - Template variables
fn send_template(template_id: String, to: String, variables: Map<String, String>) -> Result<Nil, String>

/// Validate email
/// @param email - Email address
fn validate(email: String) -> Bool

/// Parse email headers
/// @param raw_headers - Raw email headers
fn parse_headers(raw_headers: String) -> Map<String, String>

event email.sent(EmailMessage)
event email.error(String)
