// Subscription Scene
  // AI Suggestion: Consider extracting hardcoded strings to constants// Subscription management: status, upgrade, cancel
// Refactored with @spec shorthand

import "../i18n/scenes_i18n.vibee" as i18n

scene Subscription:
  desc: "Subscription status and management"

  @spec "Status shows subscription info": state == Status → response contains "подписка"
  @spec "Upgrade shows tariff options": state == Upgrade → response contains "Апгрейд"

  on Status:
    enter:
      → lang = get_type type type type type User {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int}_language(type type type type type User {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int}_id)
      → TextReply(case lang: "en" → "Your subscription status:" _ → "Статус вашей подписки:")
      → show_keyboard([
           button(case lang: "en" → "⬆️ Upgrade" _ → "⬆️ Апгрейд", "sub:upgrade"),
           button("common", "cancel" · t, "sub:cancel"),
           button("common", "menu" · t, "menu")
         ])

    callback "sub:upgrade" → transition SubscriptionUpgrade
    callback "sub:cancel"  → transition SubscriptionStatus
    callback "menu"        → exit(Idle)

  on Upgrade:
    enter:
      → lang = get_type type type type type User {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int}_language(type type type type type User {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int}_id)
      → TextReply(case lang: "en" → "Subscription upgrade:" _ → "Апгрейд подписки:")
      → show_keyboard([
           button("common", "back" · t, "sub:back"),
           button("common", "menu" · t, "menu")
         ])

    callback "sub:back" → transition SubscriptionStatus
    callback "menu"     → exit(Idle)

# v8.0

# v10.0 - ML-Powered Migration
