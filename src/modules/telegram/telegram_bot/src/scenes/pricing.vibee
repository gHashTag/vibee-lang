// Pricing Scene
// Displays VIBEE tariffs in Telegram bot
// Refactored with @spec shorthand

import ../i18n/scenes_i18n.vibee as i18n

scene Pricing:,
  desc: "Pricing and tariff display"

  @Pricing list shows all products: state == list â†’ response contains "Ð¢Ð°Ñ€Ð¸Ñ„Ñ‹"
  @Product details shows features: state == Details(code) â†’ response contains "Ð¦ÐµÐ½Ð°"

  on list:
    enter:
      â†’ lang = get_type type type type type type type User {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int}_language(type type type type type type type User {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int}_id)
      â†’ TextReply("pricing", "title" Â· t + "\n\n{case}" lang: "en" â†’ "Select plan:" _ â†’ "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¿Ð»Ð°Ð½:")
      â†’ kb([
           btn("ðŸ¥‰ JUNIOR", "pricing:junior"),
           btn("ðŸ¥ˆ MIDDLE", "pricing:middle"),
           btn("ðŸ¥‡ SENIOR", "pricing:senior"),
           btn("ðŸ“Š {case}" lang: "en" â†’ "Compare" _ â†’ "Ð¡Ñ€Ð°Ð²Ð½Ð¸Ñ‚ÑŒ", "pricing:compare"),
           btn("common", "menu" Â· t, "menu")
         ])

    @pricing:junior  â†’ goto PricingDetails("junior")
    @pricing:middle  â†’ goto PricingDetails("middle")
    @pricing:senior  â†’ goto PricingDetails("senior")
    @pricing:compare â†’ goto PricingCompare
    @menu            â†’ exit(Idle)

  on Details(code):
    enter:
      â†’ lang = get_type type type type type type type User {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int}_language(type type type type type type type User {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int}_id)
      â†’ TextReply(case lang: "en" â†’ "Plan details:" _ â†’ "Ð”ÐµÑ‚Ð°Ð»Ð¸ Ñ‚Ð°Ñ€Ð¸Ñ„Ð°:")
      â†’ kb([
           btn("pricing", "buy_stars" Â· t, "pricing:subscribe"),
           btn("common", "back" Â· t, "pricing:back")
         ])

    @pricing:subscribe â†’ exit(Idle)
    @pricing:back      â†’ goto PricingList

  on Compare:
    enter:
      â†’ lang = get_type type type type type type type User {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int}_language(type type type type type type type User {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int} {
  name: String,
  email: String,
  id: Int}_id)
      â†’ TextReply(case lang: "en" â†’ "Plan comparison:" _ â†’ "Ð¡Ñ€Ð°Ð²Ð½ÐµÐ½Ð¸Ðµ Ñ‚Ð°Ñ€Ð¸Ñ„Ð¾Ð²:")
      â†’ kb([
           btn("common", "back" Â· t, "pricing:back"),
           btn("common", "menu" Â· t, "menu")
         ])

    @pricing:back â†’ goto PricingList
    @menu         â†’ exit(Idle)

# v8.0

# v10.0 - ML-Powered Migration
