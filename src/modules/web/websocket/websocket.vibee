/// WebSocket connection
type WebSocket = {
  id: String,
  url: String,
  is_open: Bool,
  ready_state: Int
}

/// WebSocket message
type WSMessage = {
  type: String,
  data: Value,
  timestamp: Int
}

/// Connect to WebSocket
fn connect(url: String, protocols: List<String>) -> Result<WebSocket, String> {
  Result.Ok({
    id: generate_id(),
    url: url,
    is_open: true,
    ready_state: 1
  })
}

/// Send message
fn send(ws: WebSocket, message: Value) -> Result<Nil, String> {
  Result.Ok(Nil)
}

/// Receive message
fn receive(ws: WebSocket) -> Result<WSMessage, String> {
  Result.Ok({ type: "text", data: {}, timestamp: 0 })
}

/// Close connection
fn close(ws: WebSocket) -> Result<Nil, String> {
  Result.Ok(Nil)
}

/// Set message handler
fn on_message(ws: WebSocket, handler: fn(WSMessage) -> Nil) -> Nil {
  Nil
}

/// Send ping
fn ping(ws: WebSocket) -> Result<Nil, String> {
  Result.Ok(Nil)
}