{
  "name": "websocket",
  "version": "1.0.0",
  "description": "WebSocket client and server (real-time bidirectional communication)",
  "category": "web",
  "dependencies": ["http"],
  "exports": [
    "connect(url: String, protocols: List<String>) -> Result<WebSocket, String>",
    "send(ws: WebSocket, message: Value) -> Result<Nil, String>",
    "receive(ws: WebSocket) -> Result<WSMessage, String>",
    "close(ws: WebSocket) -> Result<Nil, String>",
    "on_message(ws: WebSocket, callback: fn(WSMessage) -> Nil) -> Nil",
    "on_close(ws: WebSocket, callback: fn() -> Nil) -> Nil"
  ],
  "commands": [
    {"name": "ws.connect", "params": ["url: String", "protocols: List<String>"]},
    {"name": "ws.send", "params": ["ws: WebSocket", "message: Value"]},
    {"name": "ws.receive", "params": ["ws: WebSocket"]},
    {"name": "ws.close", "params": ["ws: WebSocket"]}
  ],
  "events": {
    "emits": ["ws:connected", "ws:message", "ws:closed", "ws:error"],
    "listens": ["http:upgrade"]
  }
}
