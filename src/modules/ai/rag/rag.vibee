/// RAG configuration
type RAGConfig = {
  vector_db: String,     // "pinecone", "weaviate", "chroma"
  collection: String,
  embedding_model: String,
  similarity_threshold: Float,
  max_results: Int
}

/// Document for indexing
type Document = {
  id: String,
  content: String,
  metadata: Map<String, Value>,
  embeddings: List<Float>
}

/// Search result
type SearchResult = {
  document: Document,
  score: Float,
  highlights: List<String>
}

/// Index a document
/// @param config - RAG configuration
/// @param document - Document to index
fn index_document(config: RAGConfig, document: Document) -> Result<Nil, String>

/// Search for relevant documents
/// @param config - RAG configuration
/// @param query - Search query
/// @returns List of search results
fn search(config: RAGConfig, query: String) -> Result<List<SearchResult>, String>

/// Search with similarity scores
/// @param config - RAG configuration
/// @param query - Search query
/// @param min_score - Minimum similarity score
/// @returns Filtered search results
fn search_with_score(config: RAGConfig, query: String, min_score: Float) -> Result<List<SearchResult>, String>

/// Delete document from index
/// @param config - RAG configuration
/// @param doc_id - Document ID to delete
fn delete_index(config: RAGConfig, doc_id: String) -> Result<Nil, String>

/// Get relevant documents for query
/// @param config - RAG configuration
/// @param query - Query text
/// @returns Relevant documents
fn get_relevant_docs(config: RAGConfig, query: String) -> Result<List<Document>, String>

event rag.indexed(Document)
event rag.searched(List<SearchResult>)