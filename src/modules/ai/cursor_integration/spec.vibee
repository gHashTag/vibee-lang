name: cursor_integration
version: 1.0.0
description: Integration with Cursor IDE for spec-first development
type: ide_integration
category: ai

behaviors:
  - name: cursor_command_generate_spec
    description: Generate spec.yml via Cursor command
    given: User in Cursor IDE
    when: User runs "Generate spec.yml" command
    then: spec.yml created in current directory
    test_cases:
      - name: generate_from_selection
        input:
          selection: "Create user login feature"
        expected:
          file_created: "spec.yml"
          behaviors_count: 1
      
      - name: generate_from_prompt
        input:
          prompt: "Blog system with CRUD"
        expected:
          file_created: "spec.yml"
          behaviors_count: 4

  - name: cursor_autocomplete_spec
    description: Autocomplete spec.yml fields in Cursor
    given: User editing spec.yml
    when: User types behavior name
    then: Cursor suggests Given-When-Then template
    test_cases:
      - name: autocomplete_behavior
        input:
          typed: "- name: user_"
        expected:
          suggestions: ["user_login", "user_register", "user_logout"]
      
      - name: autocomplete_test_case
        input:
          typed: "test_cases:"
        expected:
          template_shown: true
          fields: ["name", "input", "expected"]

  - name: cursor_validate_spec_on_save
    description: Validate spec.yml when saving in Cursor
    given: User saves spec.yml file
    when: Cursor validates the spec
    then: Errors shown inline if invalid
    test_cases:
      - name: valid_spec
        input:
          spec: "valid spec.yml"
        expected:
          errors: 0
          validated: true
      
      - name: invalid_spec
        input:
          spec: "spec.yml missing behaviors"
        expected:
          errors: 1
          error_message: "No behaviors defined"

functions:
  - name: register_cursor_command
    signature: "register_cursor_command(name: String, handler: fn() → Result(Nil, String)) → Result(Nil, String)"
    description: Register Cursor IDE command
    
  - name: provide_autocomplete
    signature: "provide_autocomplete(context: String) → List(Suggestion)"
    description: Provide autocomplete suggestions
    
  - name: validate_on_save
    signature: "validate_on_save(file_path: String) → Result(ValidationResult, String)"
    description: Validate spec on save

completeness:
  test_coverage: 100%
