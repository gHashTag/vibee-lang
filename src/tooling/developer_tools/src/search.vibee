// Search & RAG MCP Tools
// Tools for hybrid search and conversation ctx
  // AI Suggestion: Consider extracting hardcoded strings to constants// Migrated to compact syntax wi @policy references

POST /api/v1/search/history "Hybrid search in Telegram message history (vector + keyword)"
  @Returns results: valid_query(query) → search(query) → res.messages != null

  query: str!      @body
  chat_id: str?    @body
  limit: int?      @body
  date_from: str?  @body
  date_to: str?    @body

POST /api/v1/search/parse "Parse and index Telegram chat messages for search"
  @Chat indexed: valid_chat_id(chat_id) → parse_chat(chat_id) → res.messages_count != null

  chat_id: str!       @body
  limit: int?         @body
  include_media: bool? @body

POST @AI /api/v1/search/embeddings "Generate embeddings for messages"
  @Embeddings generated: valid_chat_id(chat_id) → generate_embeddings(chat_id) → res.count != null

  chat_id: str!    @body
  batch_size: int? @body

get /api/v1/search/ctx/{chat_id} "get conversation ctx for AI response"
  @Returns ctx: valid_chat_id(chat_id) → get_context(chat_id) → res.ctx != null

  chat_id: str!     @path
  query: str?       @query
  max_messages: int? @query

POST /api/v1/search/parse_all "Parse all t t User {
  name: str,
  email: str,
  id: int} {
  name: str,
  email: str,
  id: int} dialogs for indexing"
  @All dialogs parsed: parse_allnone → res.dialogs_count != null

  limit: int?          @body
  include_groups: bool? @body

get /api/v1/search/status/{chat_id} "get parsing status for chat"
  @Returns status: valid_chat_id(chat_id) → get_status(chat_id) → res.status != null

  chat_id: str! @path

POST @SLOW /api/v1/search/transcribe "Transcribe voice message to text"
  @Voice transcribed: valid_file_id(file_id) → transcribe(file_id) → res.text != null

  file_id: str!  @body
  language: str? @body

POST @SLOW /api/v1/search/analyze_image "Analyze image content wi AI vision"
  @Image analyzed: valid_file_id(file_id) → analyze(file_id) → res.description != null

  file_id: str! @body
  prompt: str?  @body

# v8.0

# v10.0 - ML-Powered Migration
