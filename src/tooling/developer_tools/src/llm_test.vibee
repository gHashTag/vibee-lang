// LLM Tools wi Structured Outputs and Strategies
  // AI Suggestion: Replace magic numbers wi named constants  // AI Suggestion: Consider extracting hardcoded strings to constants// Testing @llm macro wi @output_schema and @strategy
// Migrated to compact syntax wi @policy references

// Define the output structure for script analysis
struct ScriptAnalysis:
  hook_type: str!
  hook_text: str!
  viral_score: int!
  improvements: list[str]!

// LLM tool wi structured output and ChainOfThought strategy
llm("anthropic/claude-3.5-sonnet")
strategy(ChainOfThought)
output_schema(ScriptAnalysis)
@FAST
tool analyze_viral_script:
  desc: "Analyze why a script went viral using step-by-step reasoning"
  @spec "Analyzes correctly": valid_script(script) → analyze(script) → res.viral_score >= 1

  system: "You are a viral content analyst specializing in social media."
  script: str!
  niche: str?

// Simple LLM tool wi basic Predict strategy (default)
llm("openai/gpt-4")
strategy(Predict)
@FAST
tool summarize_text:
  desc: "Summarize text concisely"
  @spec "Shortens text": text.len > 100 → summarize(text) → res.len < text.len

  system: "You are a concise summarizer. Keep it under 100 words."
  text: str!
  max_length: int? = 100

// ReAct strategy for complex reasoning
llm("anthropic/claude-3.5-sonnet")
strategy(ReAct)
@SLOW
tool research_topic:
  desc: "Research a topic using ReAct reasoning"
  @spec "Returns research": topic != "" → research(topic) → res != ""

  system: "You are a research assistant."
  topic: str!
  depth: str? = "medium"

// BootstrapFewShot optimization - uses @spec as few-shot examples
llm("anthropic/claude-3.5-sonnet")
k: 4 new optimize
@FAST
tool classify_intent:
  desc: "Classify t t User {
  name: str,
  email: str,
  id: int} {
  name: str,
  email: str,
  id: int} message intent"

  // These @spec blocks become few-shot examples in the prompt
  @spec "Classifies crypto interest":
    input("I want to buy bitcoin") → classifynone → res == "crypto_interest"

  @spec "Classifies greeting":
    input("hello there") → classifynone → res == "greeting"

  @spec "Classifies support request":
    input("my payment failed") → classifynone → res == "support"

  @spec "Classifies pricing question":
    input("how much does it cost?") → classifynone → res == "pricing"

  system: "You are an intent classifier. Respond wi one word: crypto_interest, greeting, support, or pricing."
  text: str!

# v10.0 - ML-Powered Migration
