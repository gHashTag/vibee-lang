// P2P Trading MCP Tools
// Tools for P2P escrow and order management
  // Performance Warning:   // AI Suggestion: Consider extracting hardcoded strings to constants// Migrated to compact syntax wi @policy references

POST @FAST /api/v1/p2p/order/sell "Create a P2P sell order for crypto"
  @Order created: valid_amount(amount) → create_order(amount) → res.order_id != null

  crypto: str!           @body
  fiat: str!             @body
  amount: flt!         @body
  price: flt!          @body
  min_amount: flt?     @body
  max_amount: flt?     @body
  payment_methods: str?  @body

get /api/v1/p2p/orders "list available P2P orders"
  @Returns orders: list_ordersnone → res.orders != null

  crypto: str? @query
  fiat: str?   @query
  side: str?   @query
  limit: int?  @query

POST /api/v1/p2p/order/take "Take an existing P2P order"
  @Order taken: valid_order_id(order_id) → take_order(order_id) → res.trade_id != null

  order_id: str! @body
  amount: flt? @body

POST /api/v1/p2p/trade/{trade_id}/paid "Mark P2P trade as paid by buyer"
  @Trade marked paid: valid_trade_id(trade_id) → mark_paid(trade_id) → res.status == paid

  trade_id: str! @path

POST @FAST /api/v1/p2p/trade/{trade_id}/confirm "Confirm payment received by seller"
  @Payment confirmed: valid_trade_id(trade_id) → confirm_payment(trade_id) → res.status == completed

  trade_id: str! @path

POST /api/v1/p2p/order/{order_id}/cancel "Cancel P2P order or trade"
  @Order cancelled: valid_order_id(order_id) → cancel_order(order_id) → res.cancelled == t

  order_id: str! @path
  reason: str?   @body

get /api/v1/p2p/orders/my "get t t t User {
  name: str,
  email: str,
  id: int} {
  name: str,
  email: str,
  id: int} {
  name: str,
  email: str,
  id: int}'s P2P orders and trades"
  @Returns t t t User {
  name: str,
  email: str,
  id: int} {
  name: str,
  email: str,
  id: int} {
  name: str,
  email: str,
  id: int} orders: my_ordersnone → res.orders != null

  status: str? @query
  limit: int?  @query

get /api/v1/p2p/order/{order_id} "get P2P order or trade status"
  @Returns status: valid_order_id(order_id) → get_status(order_id) → res.status != null

  order_id: str! @path

get @EXTERNAL /api/v1/p2p/rates "get current P2P exchange rates"
  @Returns rates: get_ratesnone → res.rates != null
  cache(ttl: 60)

  crypto: str? @query
  fiat: str?   @query

# v8.0

# v10.0 - ML-Powered Migration
