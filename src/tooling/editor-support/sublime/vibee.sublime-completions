{
  "scope": "source.vibee",
  "completions": [
    {
      "trigger": "tool",
      "contents": "tool ${1:name}:\n  @desc \"${2:Description}\"\n  @spec \"${3:Spec}\": ${4:condition} -> ${5:assertion}\n\n  ${6:param}: ${7:str}!\n\n  -> {\n    $0\n  }",
      "kind": ["keyword", "k", "Keyword"]
    },
    {
      "trigger": "scene",
      "contents": "scene ${1:Name}:\n  @desc \"${2:Description}\"\n\n  on ${3:Start}:\n    enter:\n      -> reply(\"${4:Welcome}\")\n\n    callback \"${5:next}\" -> transition ${6:Next}\n\n  on ${6:Next}:\n    $0",
      "kind": ["keyword", "k", "Keyword"]
    },
    {
      "trigger": "fn",
      "contents": "fn ${1:name}(${2:param}: ${3:str}) -> ${4:str}:\n  $0",
      "kind": ["keyword", "k", "Keyword"]
    },
    {
      "trigger": "@llm",
      "contents": "@llm(\"${1:ollama/llama3.1:8b}\")",
      "kind": ["snippet", "s", "Snippet"]
    },
    {
      "trigger": "@spec",
      "contents": "@spec \"${1:Description}\": ${2:condition} -> ${3:assertion}",
      "kind": ["snippet", "s", "Snippet"]
    },
    {
      "trigger": "@desc",
      "contents": "@desc \"${1:Description}\"",
      "kind": ["snippet", "s", "Snippet"]
    },
    {
      "trigger": "@const",
      "contents": "@const ${1:NAME} = {\n  \"${2:key}\": ${3:value}\n}",
      "kind": ["snippet", "s", "Snippet"]
    },
    {
      "trigger": "@import",
      "contents": "@import \"${1:./module.vibee}\" as ${2:module}",
      "kind": ["snippet", "s", "Snippet"]
    },
    {
      "trigger": "case",
      "contents": "case ${1:value}:\n  ${2:pattern} -> ${3:result}\n  _ -> ${0:default}",
      "kind": ["keyword", "k", "Keyword"]
    },
    {
      "trigger": "on",
      "contents": "on ${1:StateName}:\n  enter:\n    -> ${2:action}\n\n  $0",
      "kind": ["keyword", "k", "Keyword"]
    },
    {
      "trigger": "callback",
      "contents": "callback \"${1:action}\" -> ${2:transition ${3:NextState}}",
      "kind": ["keyword", "k", "Keyword"]
    },
    {
      "trigger": "message",
      "contents": "message ${1:TextMessage}(${2:text}):\n  -> $0",
      "kind": ["keyword", "k", "Keyword"]
    },
    {
      "trigger": "spinner",
      "contents": "spinner_id = spinner.spinner_start(\"${1:Loading...}\", style: \"${2:dots}\").id\n\n${0:// Do work}\n\nspinner.spinner_success(spinner_id, message: \"${3:Done}\")",
      "kind": ["snippet", "s", "Snippet"]
    },
    {
      "trigger": "llm-fallback",
      "contents": "@llm(\"${1:ollama/llama3.1:8b}\")\n@fallback_models([\n  \"openrouter/meta-llama/llama-3.1-8b-instruct:free\",\n  \"openrouter/openai/gpt-4o-mini\"\n])\n@retry(max_attempts: 3)\n@timeout(ms: 30000)\ntool ${2:name}:\n  @desc \"${3:Description}\"\n\n  system: \"${4:System prompt}\"\n  ${5:input}: str!\n\n  -> $0",
      "kind": ["snippet", "s", "Snippet"]
    }
  ]
}
