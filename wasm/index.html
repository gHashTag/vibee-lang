<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>999 OS - Ternary Logic Playground</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 {
            text-align: center;
            font-size: 3em;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #00d4ff, #7b2cbf);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .subtitle { text-align: center; color: #888; margin-bottom: 30px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; }
        .card {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .card h2 {
            color: #00d4ff;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        .trit-btn {
            font-size: 2em;
            padding: 15px 25px;
            margin: 5px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .trit-btn:hover { transform: scale(1.1); }
        .trit-p { background: #4ade80; color: #000; }
        .trit-z { background: #fbbf24; color: #000; }
        .trit-n { background: #f87171; color: #000; }
        .result {
            font-size: 3em;
            text-align: center;
            padding: 20px;
            margin: 15px 0;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
        }
        .truth-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        .truth-table th, .truth-table td {
            padding: 10px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .truth-table th { background: rgba(0,212,255,0.2); }
        input[type="number"] {
            width: 80px;
            padding: 10px;
            font-size: 1.2em;
            border: none;
            border-radius: 5px;
            background: rgba(255,255,255,0.1);
            color: #fff;
            margin: 5px;
        }
        .btn {
            padding: 10px 20px;
            font-size: 1em;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            background: #7b2cbf;
            color: #fff;
            margin: 5px;
        }
        .btn:hover { background: #9333ea; }
        .score { font-size: 2em; color: #4ade80; text-align: center; margin: 15px 0; }
        #console {
            background: #000;
            color: #0f0;
            font-family: monospace;
            padding: 15px;
            border-radius: 10px;
            height: 200px;
            overflow-y: auto;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>999 OS</h1>
        <p class="subtitle">Ternary Logic Playground ‚Ä¢ WebAssembly Powered</p>
        
        <div class="grid">
            <!-- Ternary Calculator -->
            <div class="card">
                <h2>‚ñ≥ Ternary Calculator</h2>
                <p>Select two values and operation:</p>
                <div style="margin: 15px 0;">
                    <strong>A:</strong>
                    <button class="trit-btn trit-p" onclick="setA(1)">‚ñ≥</button>
                    <button class="trit-btn trit-z" onclick="setA(0)">‚óã</button>
                    <button class="trit-btn trit-n" onclick="setA(-1)">‚ñΩ</button>
                </div>
                <div style="margin: 15px 0;">
                    <strong>B:</strong>
                    <button class="trit-btn trit-p" onclick="setB(1)">‚ñ≥</button>
                    <button class="trit-btn trit-z" onclick="setB(0)">‚óã</button>
                    <button class="trit-btn trit-n" onclick="setB(-1)">‚ñΩ</button>
                </div>
                <div style="margin: 15px 0;">
                    <button class="btn" onclick="calcAnd()">AND</button>
                    <button class="btn" onclick="calcOr()">OR</button>
                    <button class="btn" onclick="calcNot()">NOT A</button>
                    <button class="btn" onclick="calcConsensus()">CONSENSUS</button>
                </div>
                <div class="result" id="trit-result">‚óã</div>
            </div>

            <!-- Truth Tables -->
            <div class="card">
                <h2>üìä Truth Tables (Kleene Strong)</h2>
                <table class="truth-table">
                    <tr><th>AND</th><th>‚ñ≥</th><th>‚óã</th><th>‚ñΩ</th></tr>
                    <tr><th>‚ñ≥</th><td>‚ñ≥</td><td>‚óã</td><td>‚ñΩ</td></tr>
                    <tr><th>‚óã</th><td>‚óã</td><td>‚óã</td><td>‚ñΩ</td></tr>
                    <tr><th>‚ñΩ</th><td>‚ñΩ</td><td>‚ñΩ</td><td>‚ñΩ</td></tr>
                </table>
                <table class="truth-table" style="margin-top: 15px;">
                    <tr><th>OR</th><th>‚ñ≥</th><th>‚óã</th><th>‚ñΩ</th></tr>
                    <tr><th>‚ñ≥</th><td>‚ñ≥</td><td>‚ñ≥</td><td>‚ñ≥</td></tr>
                    <tr><th>‚óã</th><td>‚ñ≥</td><td>‚óã</td><td>‚óã</td></tr>
                    <tr><th>‚ñΩ</th><td>‚ñ≥</td><td>‚óã</td><td>‚ñΩ</td></tr>
                </table>
            </div>

            <!-- Trinity Score -->
            <div class="card">
                <h2>üî∫ Trinity Score Calculator</h2>
                <p>Formula: n √ó 3^(k/10) √ó œÄ^(m/20)</p>
                <div style="margin: 15px 0;">
                    <label>n (functions):</label>
                    <input type="number" id="trinity-n" value="100">
                    <label>k (types):</label>
                    <input type="number" id="trinity-k" value="20">
                    <label>m (tests):</label>
                    <input type="number" id="trinity-m" value="50">
                </div>
                <button class="btn" onclick="calcTrinity()">Calculate</button>
                <div class="score" id="trinity-score">0</div>
            </div>

            <!-- Majority Voting -->
            <div class="card">
                <h2>üó≥Ô∏è Majority Voting</h2>
                <p>Fault-tolerant consensus with 3 inputs:</p>
                <div style="margin: 15px 0;">
                    <strong>Vote 1:</strong>
                    <button class="trit-btn trit-p" onclick="setV1(1)">‚ñ≥</button>
                    <button class="trit-btn trit-z" onclick="setV1(0)">‚óã</button>
                    <button class="trit-btn trit-n" onclick="setV1(-1)">‚ñΩ</button>
                </div>
                <div style="margin: 15px 0;">
                    <strong>Vote 2:</strong>
                    <button class="trit-btn trit-p" onclick="setV2(1)">‚ñ≥</button>
                    <button class="trit-btn trit-z" onclick="setV2(0)">‚óã</button>
                    <button class="trit-btn trit-n" onclick="setV2(-1)">‚ñΩ</button>
                </div>
                <div style="margin: 15px 0;">
                    <strong>Vote 3:</strong>
                    <button class="trit-btn trit-p" onclick="setV3(1)">‚ñ≥</button>
                    <button class="trit-btn trit-z" onclick="setV3(0)">‚óã</button>
                    <button class="trit-btn trit-n" onclick="setV3(-1)">‚ñΩ</button>
                </div>
                <button class="btn" onclick="calcMajority()">Calculate Majority</button>
                <div class="result" id="majority-result">‚óã</div>
            </div>

            <!-- Console -->
            <div class="card" style="grid-column: 1 / -1;">
                <h2>üíª Console</h2>
                <div id="console"></div>
            </div>
        </div>
    </div>

    <script>
        let wasm;
        let a = 0, b = 0;
        let v1 = 0, v2 = 0, v3 = 0;

        const tritSymbol = (t) => t === 1 ? '‚ñ≥' : t === 0 ? '‚óã' : '‚ñΩ';
        const log = (msg) => {
            const c = document.getElementById('console');
            c.innerHTML += msg + '<br>';
            c.scrollTop = c.scrollHeight;
        };

        // Load WASM
        async function loadWasm() {
            try {
                const response = await fetch('999.wasm');
                const bytes = await response.arrayBuffer();
                const { instance } = await WebAssembly.instantiate(bytes);
                wasm = instance.exports;
                log('‚úÖ 999 WASM loaded successfully');
                log('üì¶ Exports: trit_and, trit_or, trit_not, trit_consensus, trit_majority, trinity_score');
            } catch (e) {
                log('‚ö†Ô∏è WASM not loaded, using JS fallback');
                // JS fallback
                wasm = {
                    trit_and: (a, b) => Math.min(a, b),
                    trit_or: (a, b) => Math.max(a, b),
                    trit_not: (a) => -a,
                    trit_consensus: (a, b) => a === b ? a : 0,
                    trit_majority: (a, b, c) => {
                        const ab = Math.min(a, b);
                        const bc = Math.min(b, c);
                        const ac = Math.min(a, c);
                        return Math.max(ab, Math.max(bc, ac));
                    },
                    trinity_score: (n, k, m) => n * Math.pow(3, k/10) * Math.pow(Math.PI, m/20)
                };
            }
        }

        function setA(val) { a = val; log(`A = ${tritSymbol(val)}`); }
        function setB(val) { b = val; log(`B = ${tritSymbol(val)}`); }
        function setV1(val) { v1 = val; log(`Vote1 = ${tritSymbol(val)}`); }
        function setV2(val) { v2 = val; log(`Vote2 = ${tritSymbol(val)}`); }
        function setV3(val) { v3 = val; log(`Vote3 = ${tritSymbol(val)}`); }

        function showResult(id, val) {
            document.getElementById(id).textContent = tritSymbol(val);
        }

        function calcAnd() {
            const r = wasm.trit_and(a, b);
            showResult('trit-result', r);
            log(`${tritSymbol(a)} AND ${tritSymbol(b)} = ${tritSymbol(r)}`);
        }

        function calcOr() {
            const r = wasm.trit_or(a, b);
            showResult('trit-result', r);
            log(`${tritSymbol(a)} OR ${tritSymbol(b)} = ${tritSymbol(r)}`);
        }

        function calcNot() {
            const r = wasm.trit_not(a);
            showResult('trit-result', r);
            log(`NOT ${tritSymbol(a)} = ${tritSymbol(r)}`);
        }

        function calcConsensus() {
            const r = wasm.trit_consensus(a, b);
            showResult('trit-result', r);
            log(`CONSENSUS(${tritSymbol(a)}, ${tritSymbol(b)}) = ${tritSymbol(r)}`);
        }

        function calcMajority() {
            const r = wasm.trit_majority(v1, v2, v3);
            showResult('majority-result', r);
            log(`MAJORITY(${tritSymbol(v1)}, ${tritSymbol(v2)}, ${tritSymbol(v3)}) = ${tritSymbol(r)}`);
        }

        function calcTrinity() {
            const n = parseInt(document.getElementById('trinity-n').value);
            const k = parseInt(document.getElementById('trinity-k').value);
            const m = parseInt(document.getElementById('trinity-m').value);
            const score = wasm.trinity_score(n, k, m);
            document.getElementById('trinity-score').textContent = score.toFixed(2);
            log(`Trinity Score(n=${n}, k=${k}, m=${m}) = ${score.toFixed(2)}`);
        }

        loadWasm();
    </script>
</body>
</html>
