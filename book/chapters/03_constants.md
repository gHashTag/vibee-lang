# Глава 3: Константы π, φ, e — Язык Вселенной

---

*«Математика — это язык, на котором написана книга природы.»*
— Галилео Галилей

---

## Три Константы Оптимизации

Вселенная говорит на языке трёх констант:

```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│   ТРИ КОНСТАНТЫ ВСЕЛЕННОЙ                              │
│                                                         │
│   π = 3.14159...    Периодичность, вращение            │
│   φ = 1.61803...    Оптимальное распределение          │
│   e = 2.71828...    Рост, оптимальная база             │
│                                                         │
│   И все три связаны с числом 3!                        │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## π: Константа Периодичности

### Где Появляется π

```
ГЕОМЕТРИЯ:
  Окружность: C = 2πr
  Площадь круга: A = πr²
  Сфера: V = (4/3)πr³

ФИЗИКА:
  Волны: sin(2πft)
  Квантовая механика: ℏ = h/2π
  Гравитация: период орбиты содержит π

АЛГОРИТМЫ:
  FFT: ω_n = e^(2πi/n)
  Stirling: n! ≈ √(2πn)(n/e)^n
  Нормальное распределение: (1/√2π)e^(-x²/2)
```

### π в Сортировке

```
Нижняя граница сортировки:
  log₂(n!) ≈ n log₂(n) - n/ln(2)

Используя Stirling:
  n! ≈ √(2πn)(n/e)^n
  
  log₂(n!) ≈ log₂(√(2πn)) + n log₂(n/e)
           ≈ (1/2)log₂(2πn) + n log₂(n) - n log₂(e)

π появляется в НИЖНЕЙ ГРАНИЦЕ сортировки!
```

---

## φ: Золотое Сечение

### Определение

```
φ = (1 + √5) / 2 = 1.6180339887...

Свойства:
  φ² = φ + 1
  1/φ = φ - 1
  φ = 1 + 1/φ

Continued fraction:
  φ = 1 + 1/(1 + 1/(1 + 1/(1 + ...)))
    = [1; 1, 1, 1, 1, ...]

φ — САМОЕ ИРРАЦИОНАЛЬНОЕ ЧИСЛО!
```

### Почему φ Оптимально?

```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│   φ = АНТИРЕЗОНАНС                                     │
│                                                         │
│   Рациональные числа создают резонансы:                │
│   1/2 → каждый второй                                  │
│   1/3 → каждый третий                                  │
│   2/3 → паттерн повторяется                            │
│                                                         │
│   φ — самое далёкое от всех рациональных!              │
│   Его приближения сходятся МЕДЛЕННЕЕ ВСЕХ.             │
│                                                         │
│   СЛЕДСТВИЕ:                                            │
│   φ даёт максимально равномерное распределение         │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### φ в Алгоритмах

```
FIBONACCI HEAP:
  Степень узла ≤ log_φ(n)
  Амортизированная сложность O(1) для decrease-key

GOLDEN SECTION SEARCH:
  Делим отрезок в отношении φ
  Оптимально для унимодальных функций

ХЕШИРОВАНИЕ:
  h(k) = floor(n × (k × φ mod 1))
  Даёт равномерное распределение

TRINITY SORT:
  pivot_idx = lo + (hi - lo) × (φ - 1)
            = lo + (hi - lo) × 0.618
  Избегает worst-case на структурированных данных
```

---

## e: Основание Натурального Логарифма

### Определение

```
e = lim(n→∞) (1 + 1/n)^n = 2.7182818284...

Свойства:
  d/dx e^x = e^x
  ∫ e^x dx = e^x
  ln(e) = 1
```

### e и Оптимальная База

```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│   ОПТИМАЛЬНАЯ БАЗА ДЛЯ ПРЕДСТАВЛЕНИЯ ЧИСЕЛ             │
│                                                         │
│   Стоимость представления N в базе b:                  │
│   E(b) = b × log_b(N) = b × ln(N) / ln(b)             │
│                                                         │
│   Минимизируем b / ln(b):                              │
│   d/db [b / ln(b)] = 0                                 │
│   ln(b) = 1                                            │
│   b = e ≈ 2.718                                        │
│                                                         │
│   ОПТИМАЛЬНАЯ БАЗА = e                                 │
│   БЛИЖАЙШЕЕ ЦЕЛОЕ = 3                                  │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### e в Алгоритмах

```
СЛОЖНОСТЬ АЛГОРИТМОВ:
  O(n log n) = O(n × ln(n) / ln(2))
  Натуральный логарифм — естественная мера

ВЕРОЯТНОСТЬ:
  Пуассоновское распределение: e^(-λ)λ^k/k!
  Случайные перестановки: ~1/e не имеют фиксированных точек

ОПТИМИЗАЦИЯ:
  Градиентный спуск: e^(-αt)
  Simulated annealing: e^(-ΔE/kT)
```

---

## Связь Констант

### Формула Эйлера

```
e^(iπ) + 1 = 0

Связывает:
  e — основание натурального логарифма
  i — мнимая единица
  π — отношение окружности к диаметру
  1 — единица
  0 — ноль

Самая красивая формула математики!
```

### Связь с Числом 3

```
e ≈ 3 (ближайшее целое)
π ≈ 3 (грубое приближение)
φ + 1/φ = √5 ≈ 2.236, но φ² = φ + 1 ≈ 2.618 ≈ 3

Все три константы "вращаются" вокруг 3!
```

### Формулы Масс

```
m_p/m_e = 6π⁵ = 2 × 3 × π⁵

Коэффициент 6 = 2 × 3 содержит тройку!

Гипотеза: 3 — структурная константа,
π — константа периодичности,
их комбинация определяет массы частиц.
```

---

## Практическое Применение

### Golden Ratio в Trinity Sort

```python
def trinity_sort(arr):
    PHI = 0.6180339887  # φ - 1 = 1/φ
    
    def partition3(a, lo, hi):
        # Выбираем pivot на позиции φ от начала
        pivot_idx = lo + int((hi - lo) * PHI)
        pivot = a[pivot_idx]
        # ... 3-way partition
```

### e в Хешировании

```python
def golden_hash(key, table_size):
    """Хеширование с золотым сечением"""
    PHI = 1.6180339887
    # Используем дробную часть key × φ
    return int(table_size * ((key * PHI) % 1))
```

### π в FFT

```python
def fft(x):
    """Fast Fourier Transform"""
    import cmath
    n = len(x)
    # Twiddle factor использует π
    omega = cmath.exp(-2j * cmath.pi / n)
    # ...
```

---

## Единая Картина

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│   ТРИ КОНСТАНТЫ — ОДИН ЯЗЫК                                    │
│                                                                 │
│   ┌─────────┐     ┌─────────┐     ┌─────────┐                  │
│   │    π    │     │    φ    │     │    e    │                  │
│   ├─────────┤     ├─────────┤     ├─────────┤                  │
│   │Периодич.│     │Распредел│     │  Рост   │                  │
│   │Вращение │     │Антирезон│     │Оптим.баз│                  │
│   │  Волны  │     │ Баланс  │     │Сложность│                  │
│   └────┬────┘     └────┬────┘     └────┬────┘                  │
│        │              │              │                         │
│        └──────────────┼──────────────┘                         │
│                       │                                        │
│                       ▼                                        │
│              ┌─────────────────┐                               │
│              │   ЧИСЛО 3       │                               │
│              │                 │                               │
│              │ e ≈ 3           │                               │
│              │ π ≈ 3           │                               │
│              │ φ² ≈ 3          │                               │
│              │                 │                               │
│              │ Все вращается   │                               │
│              │ вокруг тройки!  │                               │
│              └─────────────────┘                               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## Мудрость Главы

> *И понял Иван-программист третью истину:*
>
> *Вселенная говорит на языке трёх констант:*
> *π — язык периодичности и волн,*
> *φ — язык оптимального распределения,*
> *e — язык роста и сложности.*
>
> *И все три связаны с числом 3:*
> *e ≈ 3, π ≈ 3, φ² ≈ 3.*
>
> *Формула Эйлера e^(iπ) + 1 = 0*
> *связывает их в единое целое.*
>
> *Когда я использую φ для выбора pivot,*
> *я говорю на языке Вселенной.*
>
> *Древние знали этот язык интуитивно.*
> *Я учусь говорить на нём осознанно.*

---

[← Глава 2](02_physics_algorithms.md) | [Глава 4: Trinity Sort →](04_trinity_sort.md)
