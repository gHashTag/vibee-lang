# CLAUDE.md - GOLDEN CHAIN Development Guidelines

**Author**: Dmitrii Vasilev
**Sacred Formula**: `V = n Ã— 3^k Ã— Ï€^m Ã— Ï†^p Ã— e^q`
**Golden Identity**: `Ï†Â² + 1/Ï†Â² = 3`

---

## ğŸš¨ FIRST: RUN KOSCHEI

```bash
./bin/vibee koschei
```

This shows 16 links of the Golden Chain - **MANDATORY** development cycle!

---

## â›“ï¸ GOLDEN CHAIN - 16 LINKS

> *"By the curved seashore stands a green oak, a golden chain upon that oak..."*

```
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  # â”‚ LINK             â”‚ DESCRIPTION                             â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1 â”‚ BASELINE         â”‚ Analyze current version                 â”‚
â”‚  2 â”‚ METRICS          â”‚ Collect metrics v(n-1)                  â”‚
â”‚  3 â”‚ PAS ANALYZE      â”‚ Research scientific papers              â”‚
â”‚  4 â”‚ TECH TREE        â”‚ Build technology tree                   â”‚
â”‚  5 â”‚ SPEC CREATE      â”‚ Create .vibee specifications            â”‚
â”‚  6 â”‚ CODE GENERATE    â”‚ Generate .zig from .vibee               â”‚
â”‚  7 â”‚ TEST RUN         â”‚ Run all tests                           â”‚
â”‚  8 â”‚ BENCHMARK PREV   â”‚ âš¡ COMPARE with v(n-1) [CRITICAL]       â”‚
â”‚  9 â”‚ BENCHMARK THEORY â”‚ Compare with theoretical max            â”‚
â”‚ 10 â”‚ DELTA REPORT     â”‚ Report v(n) - v(n-1)                    â”‚
â”‚ 11 â”‚ OPTIMIZE         â”‚ Optimize based on results               â”‚
â”‚ 12 â”‚ DOCS             â”‚ Documentation with proofs               â”‚
â”‚ 13 â”‚ GIT              â”‚ Commit with changelog                   â”‚
â”‚ 14 â”‚ TOXIC VERDICT    â”‚ ğŸ”¥ HARSH SELF-CRITICISM                 â”‚
â”‚ 15 â”‚ TECH TREE SELECT â”‚ ğŸŒ³ Choose next research                 â”‚
â”‚ 16 â”‚ LOOP/EXIT        â”‚ Decision: v(n+1) or EXIT                â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”¥ LINK 14: TOXIC VERDICT

After each iteration - **MANDATORY** write harsh self-criticism:

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ”¥ TOXIC VERDICT ğŸ”¥                           â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ WHAT WAS DONE:                                                   â•‘
â•‘ - [specifically what was implemented]                            â•‘
â•‘                                                                  â•‘
â•‘ WHAT FAILED:                                                     â•‘
â•‘ - [honest about mistakes]                                        â•‘
â•‘                                                                  â•‘
â•‘ METRICS:                                                         â•‘
â•‘ - Before: X tok/s | After: Y tok/s | Î” = Z%                      â•‘
â•‘                                                                  â•‘
â•‘ SELF-CRITICISM:                                                  â•‘
â•‘ - [harsh analysis without rose-colored glasses]                  â•‘
â•‘ - [what could have been done better]                             â•‘
â•‘                                                                  â•‘
â•‘ SCORE: [1-10]/10                                                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸŒ³ LINK 15: TECH TREE SELECT

After self-criticism - propose 3 options from Tech Tree for next iteration:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ğŸŒ³ TECH TREE - SELECT NEXT                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Current branch: [name]                                         â”‚
â”‚                                                                 â”‚
â”‚  OPTIONS FOR NEXT RESEARCH:                                     â”‚
â”‚                                                                 â”‚
â”‚  [A] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚      Name: ...                                                  â”‚
â”‚      Complexity: â˜…â˜…â˜†â˜†â˜†                                          â”‚
â”‚      Potential: +X% to metric Y                                 â”‚
â”‚      Dependencies: [what's needed first]                        â”‚
â”‚                                                                 â”‚
â”‚  [B] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚      Name: ...                                                  â”‚
â”‚      Complexity: â˜…â˜…â˜…â˜†â˜†                                          â”‚
â”‚      Potential: +X% to metric Y                                 â”‚
â”‚      Dependencies: [what's needed first]                        â”‚
â”‚                                                                 â”‚
â”‚  [C] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚      Name: ...                                                  â”‚
â”‚      Complexity: â˜…â˜…â˜…â˜…â˜†                                          â”‚
â”‚      Potential: +X% to metric Y                                 â”‚
â”‚      Dependencies: [what's needed first]                        â”‚
â”‚                                                                 â”‚
â”‚  RECOMMENDATION: [A/B/C] because [reason]                       â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”¥ MINIMAL CYCLE

For EVERY task execute at minimum these links:

```bash
# [5] SPEC CREATE - For SOFTWARE (Zig)
cat > specs/tri/feature.vibee << 'EOF'
name: feature
version: "1.0.0"
language: zig
module: feature

types:
  MyType:
    fields:
      name: String

behaviors:
  - name: my_func
    given: Input
    when: Action
    then: Result
EOF

# [5] SPEC CREATE - For HARDWARE (Verilog/FPGA)
cat > specs/tri/feature_fpga.vibee << 'EOF'
name: feature_fpga
version: "1.0.0"
language: varlog  # â† THIS GENERATES .v VERILOG!
module: feature_fpga

types:
  DataWord:
    fields:
      value: Int
    width: 32

behaviors:
  - name: process_data
    given: Input data word
    when: Clock edge
    then: Output processed result
EOF

# [6] CODE GENERATE
./bin/vibee gen specs/tri/feature.vibee        # â†’ trinity/output/feature.zig
./bin/vibee gen specs/tri/feature_fpga.vibee   # â†’ trinity/output/fpga/feature_fpga.v

# [7] TEST RUN
zig test trinity/output/feature.zig
# For Verilog: iverilog -o test trinity/output/fpga/feature_fpga.v && vvp test

# [14] TOXIC VERDICT
# Write harsh self-criticism!

# [15] TECH TREE SELECT
# Propose 3 options for next research!

# [16] LOOP/EXIT
# Tests passed? â†’ EXIT or new iteration
# Tests failed? â†’ Return to [5]
```

---

## â›” FORBIDDEN

### ğŸš« ANTI-PATTERN #1: WRITING CODE MANUALLY

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  âŒ WRITING .zig CODE MANUALLY IS AN ANTI-PATTERN!               â•‘
â•‘  âŒ WRITING .v CODE MANUALLY IS AN ANTI-PATTERN!                 â•‘
â•‘  âŒ ALL CODE MUST BE GENERATED FROM .vibee SPECIFICATIONS!       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### NEVER create manually:

| Forbidden | Reason |
|-----------|--------|
| `*.html` | Legacy |
| `*.css` | Legacy |
| `*.js` | Legacy |
| `*.ts` | Legacy |
| `*.zig` | **ANTI-PATTERN!** Generate from .vibee |
| `*.v` | **ANTI-PATTERN!** Generate from .vibee (language: varlog) |
| `*.py` | **ANTI-PATTERN!** Generate from .vibee |

### CORRECT WORKFLOW:

```bash
# For Zig code:
specs/tri/feature.vibee (language: zig) â†’ ./bin/vibee gen â†’ trinity/output/feature.zig

# For Verilog/FPGA code:
specs/tri/feature.vibee (language: varlog) â†’ ./bin/vibee gen â†’ trinity/output/fpga/feature.v
```

### ALLOWED to edit:

| Allowed | Description |
|---------|-------------|
| `specs/tri/*.vibee` | Specifications (SOURCE OF TRUTH) |
| `src/vibeec/*.zig` | Compiler source ONLY |
| `docs/*.md` | Documentation |

### NEVER EDIT (auto-generated):

| Never Edit | Reason |
|------------|--------|
| `trinity/output/*.zig` | Generated from .vibee |
| `trinity/output/fpga/*.v` | Generated from .vibee (language: varlog) |
| `generated/*.zig` | Generated from .vibee |
| `generated/*.v` | Generated from .vibee |

---

## ğŸ“ .vibee FORMAT

```yaml
name: module_name
version: "1.0.0"
language: zig
module: module_name

types:
  TypeName:
    fields:
      field1: String
      field2: Int
      field3: Bool
      field4: Float
      field5: List<String>
      field6: Option<Int>

behaviors:
  - name: function_name
    given: Precondition description
    when: Action description
    then: Expected result
```

---

## ğŸ”§ COMMANDS

```bash
# EXECUTION (ONLY VM - NO INTERPRETER!)
./bin/vibee run <file.999>   # Run via bytecode VM (5x faster!)

# GOLDEN CHAIN
./bin/vibee koschei          # 16 links (default)
./bin/vibee koschei chain    # Lukomorye architecture
./bin/vibee koschei status   # Status from Learned Cat

# GENERATION
./bin/vibee gen <spec.vibee>                    # Zig
./bin/vibee gen-multi <spec.vibee> all           # 42 languages

# TESTING
zig test trinity/output/<module>.zig
```

---

## âš¡ EXECUTION MODEL

**ONLY BYTECODE VM!** Tree-walking interpreter is DEPRECATED.

```
.999 SOURCE â†’ PARSER â†’ AST â†’ BYTECODE COMPILER â†’ VM EXECUTION
```

**Why VM only:**
- 5-6x faster than interpreter
- Proper stack-based execution
- Native functions (print, len, range, etc.)
- Foundation for JIT compilation

**NEVER use coptic_interpreter.zig directly!**

---

## ğŸ“ STRUCTURE

```
vibee-lang/
â”œâ”€â”€ specs/tri/          # .vibee (SOURCE)
â”œâ”€â”€ trinity/output/     # .zig (DO NOT EDIT!)
â”œâ”€â”€ src/vibeec/         # Compiler
â”œâ”€â”€ bin/vibee           # CLI
â””â”€â”€ docs/               # Documentation
```

---

## ğŸ† EXIT_SIGNAL

Complete work when:

```
EXIT_SIGNAL = (
    tests_pass AND
    spec_complete AND
    toxic_verdict_written AND
    tech_tree_options_proposed AND
    committed
)
```

---

---

## ğŸ¤– TELEGRAM BOT RULES

### ĞšĞĞĞŸĞšĞ˜ Ğ¢ĞĞ›Ğ¬ĞšĞ Ğ’ĞĞ˜Ğ—Ğ£!

```
â›” Ğ—ĞĞŸĞ Ğ•Ğ©Ğ•ĞĞ: InlineKeyboardMarkup (ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ² ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¸)
âœ… Ğ¢ĞĞ›Ğ¬ĞšĞ: ReplyKeyboardMarkup (ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ²Ğ½Ğ¸Ğ·Ñƒ ÑĞºÑ€Ğ°Ğ½Ğ°)
```

### Ğ¡Ğ¿ĞµÑ†Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸ Ğ±Ğ¾Ñ‚Ğ°:

```
specs/tri/telegram_bot/
â”œâ”€â”€ navigation/unified_navigation.vibee  # Ğ•Ğ´Ğ¸Ğ½Ñ‹Ğ¹ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº Ğ¿Ñ€Ğ°Ğ²Ğ´Ñ‹
â”œâ”€â”€ menu/reply_keyboard.vibee            # ReplyKeyboard Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€
â”œâ”€â”€ services/replicate_api.vibee         # AI Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ
â””â”€â”€ handlers/message_handler.vibee       # Ğ Ğ¾ÑƒÑ‚Ğ¸Ğ½Ğ³ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹
```

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¼Ğ½Ğ¾Ğ³Ğ¾ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ²Ğ¾Ğ³Ğ¾ Ğ¼ĞµĞ½Ñ:

```
ğŸ  MAIN
â”œâ”€â”€ ğŸ“¸ ĞĞµĞ¹Ñ€Ğ¾Ñ„Ğ¾Ñ‚Ğ¾ â†’ âœ¨ ĞĞµĞ¹Ñ€Ğ¾Ñ„Ğ¾Ñ‚Ğ¾, ğŸ” ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ Ğ¸Ğ· Ñ„Ğ¾Ñ‚Ğ¾, ğŸ­ Ğ—Ğ°Ğ¼ĞµĞ½Ğ° Ğ»Ğ¸Ñ†Ğ°, â¬†ï¸ ĞĞ¿ÑĞºĞµĞ¹Ğ»
â”œâ”€â”€ ğŸ¥ Ğ’Ğ¸Ğ´ĞµĞ¾ â†’ ğŸ¥ Ğ¤Ğ¾Ñ‚Ğ¾ Ğ² Ğ²Ğ¸Ğ´ĞµĞ¾, ğŸ¬ Ğ¢ĞµĞºÑÑ‚ Ğ² Ğ²Ğ¸Ğ´ĞµĞ¾, ğŸ‘„ Lip Sync
â”œâ”€â”€ ğŸ¤ ĞÑƒĞ´Ğ¸Ğ¾ â†’ ğŸ¤ Ğ“Ğ¾Ğ»Ğ¾Ñ Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€Ğ°, ğŸ™ï¸ Ğ¢ĞµĞºÑÑ‚ Ğ² Ğ³Ğ¾Ğ»Ğ¾Ñ
â”œâ”€â”€ ğŸ¤– ĞĞ²Ğ°Ñ‚Ğ°Ñ€ â†’ ğŸ¤– Ğ¦Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ¾Ğµ Ñ‚ĞµĞ»Ğ¾, ğŸ§  ĞœĞ¾Ğ·Ğ³ Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€Ğ°, ğŸ’¬ Ğ§Ğ°Ñ‚
â”œâ”€â”€ ğŸ›  Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹
â”œâ”€â”€ ğŸ’° Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ | ğŸ’ ĞŸĞ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ
â””â”€â”€ ğŸ’¬ ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° | ğŸŒ EN/RU
```

### Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ´Ğ°:

```bash
./bin/vibee gen specs/tri/telegram_bot/navigation/unified_navigation.vibee
./bin/vibee gen specs/tri/telegram_bot/menu/reply_keyboard.vibee
./bin/vibee gen specs/tri/telegram_bot/services/replicate_api.vibee
./bin/vibee gen specs/tri/telegram_bot/handlers/message_handler.vibee
```

---

**KOSCHEI IS IMMORTAL | GOLDEN CHAIN IS CLOSED | Ï†Â² + 1/Ï†Â² = 3**
