#!/usr/bin/env python3
"""
VIBEE Training CLI
==================

Quick training setup with best practices.

Usage:
    vibee-train --model llama-7b --data ./data --output ./output
    vibee-train --config config.yaml
"""

import argparse
import sys

def main():
    parser = argparse.ArgumentParser(description="VIBEE Training CLI")
    parser.add_argument("--model", type=str, help="Model name or path")
    parser.add_argument("--data", type=str, help="Training data path")
    parser.add_argument("--output", type=str, default="./output", help="Output directory")
    parser.add_argument("--config", type=str, help="Config file path")
    parser.add_argument("--bf16", action="store_true", default=True, help="Use BF16")
    parser.add_argument("--flash-attention", action="store_true", default=True, help="Use Flash Attention")
    parser.add_argument("--gradient-checkpointing", action="store_true", default=True, help="Use gradient checkpointing")
    parser.add_argument("--zero-stage", type=int, default=3, help="ZeRO stage (0-3)")
    parser.add_argument("--batch-size", type=int, default=4, help="Batch size per GPU")
    parser.add_argument("--lr", type=float, default=1e-4, help="Learning rate")
    parser.add_argument("--epochs", type=int, default=3, help="Number of epochs")
    
    args = parser.parse_args()
    
    print("VIBEE Training CLI v2.6.0")
    print("=" * 40)
    print(f"Model: {args.model}")
    print(f"Data: {args.data}")
    print(f"Output: {args.output}")
    print(f"BF16: {args.bf16}")
    print(f"Flash Attention: {args.flash_attention}")
    print(f"Gradient Checkpointing: {args.gradient_checkpointing}")
    print(f"ZeRO Stage: {args.zero_stage}")
    print(f"Batch Size: {args.batch_size}")
    print(f"Learning Rate: {args.lr}")
    print(f"Epochs: {args.epochs}")
    print("=" * 40)
    
    # Generate training command
    cmd = f"""
# Generated training command:
accelerate launch --config_file accelerate_config.yaml train.py \\
    --model_name_or_path {args.model or 'meta-llama/Llama-2-7b-hf'} \\
    --data_path {args.data or './data'} \\
    --output_dir {args.output} \\
    --bf16 {args.bf16} \\
    --gradient_checkpointing {args.gradient_checkpointing} \\
    --per_device_train_batch_size {args.batch_size} \\
    --learning_rate {args.lr} \\
    --num_train_epochs {args.epochs}
"""
    print(cmd)
    
    return 0

if __name__ == "__main__":
    sys.exit(main())
