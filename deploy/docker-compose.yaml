# IGLA Production Docker Compose
# ⲤⲀⲔⲢⲀ ⲪⲞⲢⲘⲨⲖⲀ: V = n × 3^k × π^m × φ^p × e^q
# PHOENIX = 999 = 3³ × 37

version: '3.8'

services:
  igla:
    build:
      context: ..
      dockerfile: deploy/Dockerfile
    image: igla:3.0.0
    container_name: igla-runtime
    volumes:
      - ../specs:/igla/specs:ro
      - igla-output:/igla/output
    environment:
      - IGLA_VERSION=3.0.0
      - IGLA_PHOENIX=999
    restart: unless-stopped
    
  igla-benchmark:
    build:
      context: ..
      dockerfile: deploy/Dockerfile
    image: igla:3.0.0
    container_name: igla-benchmark
    command: ["python3", "/igla/python/igla.py"]
    volumes:
      - ../benchmarks:/igla/benchmarks:ro
    profiles:
      - benchmark

volumes:
  igla-output:
